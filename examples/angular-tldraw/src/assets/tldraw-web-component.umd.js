(function(ll,ka){typeof exports=="object"&&typeof module<"u"?ka(exports):typeof define=="function"&&define.amd?define(["exports"],ka):(ll=typeof globalThis<"u"?globalThis:ll||self,ka(ll.TldrawWebComponent={}))})(this,function(ll){"use strict";var ZCe=Object.defineProperty;var QCe=(ll,ka,$i)=>ka in ll?ZCe(ll,ka,{enumerable:!0,configurable:!0,writable:!0,value:$i}):ll[ka]=$i;var U=(ll,ka,$i)=>QCe(ll,typeof ka!="symbol"?ka+"":ka,$i);var UA,$A,BA,HA,VA,KA,WA,GA,qA,YA,XA,ZA,QA,JA,eD,tD,nD,rD,iD,oD;function ka(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var $i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ef(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zw={exports:{}},_n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EL;function SY(){if(EL)return _n;EL=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(te){return te===null||typeof te!="object"?null:(te=y&&te[y]||te["@@iterator"],typeof te=="function"?te:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,E={};function P(te,me,Oe){this.props=te,this.context=me,this.refs=E,this.updater=Oe||w}P.prototype.isReactComponent={},P.prototype.setState=function(te,me){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,me,"setState")},P.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function I(){}I.prototype=P.prototype;function k(te,me,Oe){this.props=te,this.context=me,this.refs=E,this.updater=Oe||w}var L=k.prototype=new I;L.constructor=k,C(L,P.prototype),L.isPureReactComponent=!0;var O=Array.isArray,z=Object.prototype.hasOwnProperty,F={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function V(te,me,Oe){var Ze,De={},yt=null,ot=null;if(me!=null)for(Ze in me.ref!==void 0&&(ot=me.ref),me.key!==void 0&&(yt=""+me.key),me)z.call(me,Ze)&&!H.hasOwnProperty(Ze)&&(De[Ze]=me[Ze]);var We=arguments.length-2;if(We===1)De.children=Oe;else if(1<We){for(var Qe=Array(We),gt=0;gt<We;gt++)Qe[gt]=arguments[gt+2];De.children=Qe}if(te&&te.defaultProps)for(Ze in We=te.defaultProps,We)De[Ze]===void 0&&(De[Ze]=We[Ze]);return{$$typeof:n,type:te,key:yt,ref:ot,props:De,_owner:F.current}}function re(te,me){return{$$typeof:n,type:te.type,key:me,ref:te.ref,props:te.props,_owner:te._owner}}function q(te){return typeof te=="object"&&te!==null&&te.$$typeof===n}function J(te){var me={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(Oe){return me[Oe]})}var ie=/\/+/g;function W(te,me){return typeof te=="object"&&te!==null&&te.key!=null?J(""+te.key):me.toString(36)}function Y(te,me,Oe,Ze,De){var yt=typeof te;(yt==="undefined"||yt==="boolean")&&(te=null);var ot=!1;if(te===null)ot=!0;else switch(yt){case"string":case"number":ot=!0;break;case"object":switch(te.$$typeof){case n:case e:ot=!0}}if(ot)return ot=te,De=De(ot),te=Ze===""?"."+W(ot,0):Ze,O(De)?(Oe="",te!=null&&(Oe=te.replace(ie,"$&/")+"/"),Y(De,me,Oe,"",function(gt){return gt})):De!=null&&(q(De)&&(De=re(De,Oe+(!De.key||ot&&ot.key===De.key?"":(""+De.key).replace(ie,"$&/")+"/")+te)),me.push(De)),1;if(ot=0,Ze=Ze===""?".":Ze+":",O(te))for(var We=0;We<te.length;We++){yt=te[We];var Qe=Ze+W(yt,We);ot+=Y(yt,me,Oe,Qe,De)}else if(Qe=v(te),typeof Qe=="function")for(te=Qe.call(te),We=0;!(yt=te.next()).done;)yt=yt.value,Qe=Ze+W(yt,We++),ot+=Y(yt,me,Oe,Qe,De);else if(yt==="object")throw me=String(te),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.");return ot}function oe(te,me,Oe){if(te==null)return te;var Ze=[],De=0;return Y(te,Ze,"","",function(yt){return me.call(Oe,yt,De++)}),Ze}function le(te){if(te._status===-1){var me=te._result;me=me(),me.then(function(Oe){(te._status===0||te._status===-1)&&(te._status=1,te._result=Oe)},function(Oe){(te._status===0||te._status===-1)&&(te._status=2,te._result=Oe)}),te._status===-1&&(te._status=0,te._result=me)}if(te._status===1)return te._result.default;throw te._result}var ce={current:null},Q={transition:null},he={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:Q,ReactCurrentOwner:F};function ke(){throw Error("act(...) is not supported in production builds of React.")}return _n.Children={map:oe,forEach:function(te,me,Oe){oe(te,function(){me.apply(this,arguments)},Oe)},count:function(te){var me=0;return oe(te,function(){me++}),me},toArray:function(te){return oe(te,function(me){return me})||[]},only:function(te){if(!q(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},_n.Component=P,_n.Fragment=t,_n.Profiler=i,_n.PureComponent=k,_n.StrictMode=r,_n.Suspense=d,_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,_n.act=ke,_n.cloneElement=function(te,me,Oe){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var Ze=C({},te.props),De=te.key,yt=te.ref,ot=te._owner;if(me!=null){if(me.ref!==void 0&&(yt=me.ref,ot=F.current),me.key!==void 0&&(De=""+me.key),te.type&&te.type.defaultProps)var We=te.type.defaultProps;for(Qe in me)z.call(me,Qe)&&!H.hasOwnProperty(Qe)&&(Ze[Qe]=me[Qe]===void 0&&We!==void 0?We[Qe]:me[Qe])}var Qe=arguments.length-2;if(Qe===1)Ze.children=Oe;else if(1<Qe){We=Array(Qe);for(var gt=0;gt<Qe;gt++)We[gt]=arguments[gt+2];Ze.children=We}return{$$typeof:n,type:te.type,key:De,ref:yt,props:Ze,_owner:ot}},_n.createContext=function(te){return te={$$typeof:l,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:s,_context:te},te.Consumer=te},_n.createElement=V,_n.createFactory=function(te){var me=V.bind(null,te);return me.type=te,me},_n.createRef=function(){return{current:null}},_n.forwardRef=function(te){return{$$typeof:c,render:te}},_n.isValidElement=q,_n.lazy=function(te){return{$$typeof:g,_payload:{_status:-1,_result:te},_init:le}},_n.memo=function(te,me){return{$$typeof:h,type:te,compare:me===void 0?null:me}},_n.startTransition=function(te){var me=Q.transition;Q.transition={};try{te()}finally{Q.transition=me}},_n.unstable_act=ke,_n.useCallback=function(te,me){return ce.current.useCallback(te,me)},_n.useContext=function(te){return ce.current.useContext(te)},_n.useDebugValue=function(){},_n.useDeferredValue=function(te){return ce.current.useDeferredValue(te)},_n.useEffect=function(te,me){return ce.current.useEffect(te,me)},_n.useId=function(){return ce.current.useId()},_n.useImperativeHandle=function(te,me,Oe){return ce.current.useImperativeHandle(te,me,Oe)},_n.useInsertionEffect=function(te,me){return ce.current.useInsertionEffect(te,me)},_n.useLayoutEffect=function(te,me){return ce.current.useLayoutEffect(te,me)},_n.useMemo=function(te,me){return ce.current.useMemo(te,me)},_n.useReducer=function(te,me,Oe){return ce.current.useReducer(te,me,Oe)},_n.useRef=function(te){return ce.current.useRef(te)},_n.useState=function(te){return ce.current.useState(te)},_n.useSyncExternalStore=function(te,me,Oe){return ce.current.useSyncExternalStore(te,me,Oe)},_n.useTransition=function(){return ce.current.useTransition()},_n.version="18.3.1",_n}var nv={exports:{}};nv.exports;var _L;function xY(){return _L||(_L=1,function(n,e){var t={};/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */t.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var r="18.3.1",i=Symbol.for("react.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),I=Symbol.iterator,k="@@iterator";function L(B){if(B===null||typeof B!="object")return null;var ne=I&&B[I]||B[k];return typeof ne=="function"?ne:null}var O={current:null},z={transition:null},F={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},H={current:null},V={},re=null;function q(B){re=B}V.setExtraStackFrame=function(B){re=B},V.getCurrentStack=null,V.getStackAddendum=function(){var B="";re&&(B+=re);var ne=V.getCurrentStack;return ne&&(B+=ne()||""),B};var J=!1,ie=!1,W=!1,Y=!1,oe=!1,le={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:z,ReactCurrentOwner:H};le.ReactDebugCurrentFrame=V,le.ReactCurrentActQueue=F;function ce(B){{for(var ne=arguments.length,ge=new Array(ne>1?ne-1:0),Re=1;Re<ne;Re++)ge[Re-1]=arguments[Re];he("warn",B,ge)}}function Q(B){{for(var ne=arguments.length,ge=new Array(ne>1?ne-1:0),Re=1;Re<ne;Re++)ge[Re-1]=arguments[Re];he("error",B,ge)}}function he(B,ne,ge){{var Re=le.ReactDebugCurrentFrame,Ve=Re.getStackAddendum();Ve!==""&&(ne+="%s",ge=ge.concat([Ve]));var st=ge.map(function(Je){return String(Je)});st.unshift("Warning: "+ne),Function.prototype.apply.call(console[B],console,st)}}var ke={};function te(B,ne){{var ge=B.constructor,Re=ge&&(ge.displayName||ge.name)||"ReactClass",Ve=Re+"."+ne;if(ke[Ve])return;Q("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",ne,Re),ke[Ve]=!0}}var me={isMounted:function(B){return!1},enqueueForceUpdate:function(B,ne,ge){te(B,"forceUpdate")},enqueueReplaceState:function(B,ne,ge,Re){te(B,"replaceState")},enqueueSetState:function(B,ne,ge,Re){te(B,"setState")}},Oe=Object.assign,Ze={};Object.freeze(Ze);function De(B,ne,ge){this.props=B,this.context=ne,this.refs=Ze,this.updater=ge||me}De.prototype.isReactComponent={},De.prototype.setState=function(B,ne){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ne,"setState")},De.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};{var yt={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},ot=function(B,ne){Object.defineProperty(De.prototype,B,{get:function(){ce("%s(...) is deprecated in plain JavaScript React classes. %s",ne[0],ne[1])}})};for(var We in yt)yt.hasOwnProperty(We)&&ot(We,yt[We])}function Qe(){}Qe.prototype=De.prototype;function gt(B,ne,ge){this.props=B,this.context=ne,this.refs=Ze,this.updater=ge||me}var Pt=gt.prototype=new Qe;Pt.constructor=gt,Oe(Pt,De.prototype),Pt.isPureReactComponent=!0;function yn(){var B={current:null};return Object.seal(B),B}var Zt=Array.isArray;function an(B){return Zt(B)}function ln(B){{var ne=typeof Symbol=="function"&&Symbol.toStringTag,ge=ne&&B[Symbol.toStringTag]||B.constructor.name||"Object";return ge}}function Yt(B){try{return Yn(B),!1}catch{return!0}}function Yn(B){return""+B}function br(B){if(Yt(B))return Q("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ln(B)),Yn(B)}function Wr(B,ne,ge){var Re=B.displayName;if(Re)return Re;var Ve=ne.displayName||ne.name||"";return Ve!==""?ge+"("+Ve+")":ge}function kr(B){return B.displayName||"Context"}function Cr(B){if(B==null)return null;if(typeof B.tag=="number"&&Q("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof B=="function")return B.displayName||B.name||null;if(typeof B=="string")return B;switch(B){case l:return"Fragment";case s:return"Portal";case d:return"Profiler";case c:return"StrictMode";case v:return"Suspense";case w:return"SuspenseList"}if(typeof B=="object")switch(B.$$typeof){case g:var ne=B;return kr(ne)+".Consumer";case h:var ge=B;return kr(ge._context)+".Provider";case y:return Wr(B,B.render,"ForwardRef");case C:var Re=B.displayName||null;return Re!==null?Re:Cr(B.type)||"Memo";case E:{var Ve=B,st=Ve._payload,Je=Ve._init;try{return Cr(Je(st))}catch{return null}}}return null}var Gr=Object.prototype.hasOwnProperty,qr={key:!0,ref:!0,__self:!0,__source:!0},li,ko,Rr;Rr={};function Mr(B){if(Gr.call(B,"ref")){var ne=Object.getOwnPropertyDescriptor(B,"ref").get;if(ne&&ne.isReactWarning)return!1}return B.ref!==void 0}function Jr(B){if(Gr.call(B,"key")){var ne=Object.getOwnPropertyDescriptor(B,"key").get;if(ne&&ne.isReactWarning)return!1}return B.key!==void 0}function ss(B,ne){var ge=function(){li||(li=!0,Q("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ne))};ge.isReactWarning=!0,Object.defineProperty(B,"key",{get:ge,configurable:!0})}function Ee(B,ne){var ge=function(){ko||(ko=!0,Q("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ne))};ge.isReactWarning=!0,Object.defineProperty(B,"ref",{get:ge,configurable:!0})}function ve(B){if(typeof B.ref=="string"&&H.current&&B.__self&&H.current.stateNode!==B.__self){var ne=Cr(H.current.type);Rr[ne]||(Q('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ne,B.ref),Rr[ne]=!0)}}var $e=function(B,ne,ge,Re,Ve,st,Je){var kt={$$typeof:i,type:B,key:ne,ref:ge,props:Je,_owner:st};return kt._store={},Object.defineProperty(kt._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(kt,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Re}),Object.defineProperty(kt,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Ve}),Object.freeze&&(Object.freeze(kt.props),Object.freeze(kt)),kt};function mt(B,ne,ge){var Re,Ve={},st=null,Je=null,kt=null,Qt=null;if(ne!=null){Mr(ne)&&(Je=ne.ref,ve(ne)),Jr(ne)&&(br(ne.key),st=""+ne.key),kt=ne.__self===void 0?null:ne.__self,Qt=ne.__source===void 0?null:ne.__source;for(Re in ne)Gr.call(ne,Re)&&!qr.hasOwnProperty(Re)&&(Ve[Re]=ne[Re])}var On=arguments.length-2;if(On===1)Ve.children=ge;else if(On>1){for(var Bn=Array(On),cr=0;cr<On;cr++)Bn[cr]=arguments[cr+2];Object.freeze&&Object.freeze(Bn),Ve.children=Bn}if(B&&B.defaultProps){var tn=B.defaultProps;for(Re in tn)Ve[Re]===void 0&&(Ve[Re]=tn[Re])}if(st||Je){var pr=typeof B=="function"?B.displayName||B.name||"Unknown":B;st&&ss(Ve,pr),Je&&Ee(Ve,pr)}return $e(B,st,Je,kt,Qt,H.current,Ve)}function cn(B,ne){var ge=$e(B.type,ne,B.ref,B._self,B._source,B._owner,B.props);return ge}function vn(B,ne,ge){if(B==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Re,Ve=Oe({},B.props),st=B.key,Je=B.ref,kt=B._self,Qt=B._source,On=B._owner;if(ne!=null){Mr(ne)&&(Je=ne.ref,On=H.current),Jr(ne)&&(br(ne.key),st=""+ne.key);var Bn;B.type&&B.type.defaultProps&&(Bn=B.type.defaultProps);for(Re in ne)Gr.call(ne,Re)&&!qr.hasOwnProperty(Re)&&(ne[Re]===void 0&&Bn!==void 0?Ve[Re]=Bn[Re]:Ve[Re]=ne[Re])}var cr=arguments.length-2;if(cr===1)Ve.children=ge;else if(cr>1){for(var tn=Array(cr),pr=0;pr<cr;pr++)tn[pr]=arguments[pr+2];Ve.children=tn}return $e(B.type,st,Je,kt,Qt,On,Ve)}function Xn(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}var Dn=".",ar=":";function bn(B){var ne=/[=:]/g,ge={"=":"=0",":":"=2"},Re=B.replace(ne,function(Ve){return ge[Ve]});return"$"+Re}var Sn=!1,hn=/\/+/g;function Ii(B){return B.replace(hn,"$&/")}function lo(B,ne){return typeof B=="object"&&B!==null&&B.key!=null?(br(B.key),bn(""+B.key)):ne.toString(36)}function ki(B,ne,ge,Re,Ve){var st=typeof B;(st==="undefined"||st==="boolean")&&(B=null);var Je=!1;if(B===null)Je=!0;else switch(st){case"string":case"number":Je=!0;break;case"object":switch(B.$$typeof){case i:case s:Je=!0}}if(Je){var kt=B,Qt=Ve(kt),On=Re===""?Dn+lo(kt,0):Re;if(an(Qt)){var Bn="";On!=null&&(Bn=Ii(On)+"/"),ki(Qt,ne,Bn,"",function(US){return US})}else Qt!=null&&(Xn(Qt)&&(Qt.key&&(!kt||kt.key!==Qt.key)&&br(Qt.key),Qt=cn(Qt,ge+(Qt.key&&(!kt||kt.key!==Qt.key)?Ii(""+Qt.key)+"/":"")+On)),ne.push(Qt));return 1}var cr,tn,pr=0,ei=Re===""?Dn:Re+ar;if(an(B))for(var gd=0;gd<B.length;gd++)cr=B[gd],tn=ei+lo(cr,gd),pr+=ki(cr,ne,ge,tn,Ve);else{var cp=L(B);if(typeof cp=="function"){var hc=B;cp===hc.entries&&(Sn||ce("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Sn=!0);for(var md=cp.call(hc),up,zS=0;!(up=md.next()).done;)cr=up.value,tn=ei+lo(cr,zS++),pr+=ki(cr,ne,ge,tn,Ve)}else if(st==="object"){var mm=String(B);throw new Error("Objects are not valid as a React child (found: "+(mm==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":mm)+"). If you meant to render a collection of children, use an array instead.")}}return pr}function As(B,ne,ge){if(B==null)return B;var Re=[],Ve=0;return ki(B,Re,"","",function(st){return ne.call(ge,st,Ve++)}),Re}function Ka(B){var ne=0;return As(B,function(){ne++}),ne}function Wa(B,ne,ge){As(B,function(){ne.apply(this,arguments)},ge)}function Ro(B){return As(B,function(ne){return ne})||[]}function sc(B){if(!Xn(B))throw new Error("React.Children.only expected to receive a single React element child.");return B}function ha(B){var ne={$$typeof:g,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};ne.Provider={$$typeof:h,_context:ne};var ge=!1,Re=!1,Ve=!1;{var st={$$typeof:g,_context:ne};Object.defineProperties(st,{Provider:{get:function(){return Re||(Re=!0,Q("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),ne.Provider},set:function(Je){ne.Provider=Je}},_currentValue:{get:function(){return ne._currentValue},set:function(Je){ne._currentValue=Je}},_currentValue2:{get:function(){return ne._currentValue2},set:function(Je){ne._currentValue2=Je}},_threadCount:{get:function(){return ne._threadCount},set:function(Je){ne._threadCount=Je}},Consumer:{get:function(){return ge||(ge=!0,Q("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),ne.Consumer}},displayName:{get:function(){return ne.displayName},set:function(Je){Ve||(ce("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",Je),Ve=!0)}}}),ne.Consumer=st}return ne._currentRenderer=null,ne._currentRenderer2=null,ne}var Mo=-1,Ci=0,Ao=1,Vi=2;function as(B){if(B._status===Mo){var ne=B._result,ge=ne();if(ge.then(function(st){if(B._status===Ci||B._status===Mo){var Je=B;Je._status=Ao,Je._result=st}},function(st){if(B._status===Ci||B._status===Mo){var Je=B;Je._status=Vi,Je._result=st}}),B._status===Mo){var Re=B;Re._status=Ci,Re._result=ge}}if(B._status===Ao){var Ve=B._result;return Ve===void 0&&Q(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,Ve),"default"in Ve||Q(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,Ve),Ve.default}else throw B._result}function Ri(B){var ne={_status:Mo,_result:B},ge={$$typeof:E,_payload:ne,_init:as};{var Re,Ve;Object.defineProperties(ge,{defaultProps:{configurable:!0,get:function(){return Re},set:function(st){Q("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Re=st,Object.defineProperty(ge,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return Ve},set:function(st){Q("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Ve=st,Object.defineProperty(ge,"propTypes",{enumerable:!0})}}})}return ge}function Ga(B){B!=null&&B.$$typeof===C?Q("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof B!="function"?Q("forwardRef requires a render function but was given %s.",B===null?"null":typeof B):B.length!==0&&B.length!==2&&Q("forwardRef render functions accept exactly two parameters: props and ref. %s",B.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),B!=null&&(B.defaultProps!=null||B.propTypes!=null)&&Q("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var ne={$$typeof:y,render:B};{var ge;Object.defineProperty(ne,"displayName",{enumerable:!1,configurable:!0,get:function(){return ge},set:function(Re){ge=Re,!B.name&&!B.displayName&&(B.displayName=Re)}})}return ne}var se;se=Symbol.for("react.module.reference");function Ue(B){return!!(typeof B=="string"||typeof B=="function"||B===l||B===d||oe||B===c||B===v||B===w||Y||B===P||J||ie||W||typeof B=="object"&&B!==null&&(B.$$typeof===E||B.$$typeof===C||B.$$typeof===h||B.$$typeof===g||B.$$typeof===y||B.$$typeof===se||B.getModuleId!==void 0))}function tt(B,ne){Ue(B)||Q("memo: The first argument must be a component. Instead received: %s",B===null?"null":typeof B);var ge={$$typeof:C,type:B,compare:ne===void 0?null:ne};{var Re;Object.defineProperty(ge,"displayName",{enumerable:!1,configurable:!0,get:function(){return Re},set:function(Ve){Re=Ve,!B.name&&!B.displayName&&(B.displayName=Ve)}})}return ge}function rt(){var B=O.current;return B===null&&Q(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),B}function $t(B){var ne=rt();if(B._context!==void 0){var ge=B._context;ge.Consumer===B?Q("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):ge.Provider===B&&Q("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return ne.useContext(B)}function Vt(B){var ne=rt();return ne.useState(B)}function un(B,ne,ge){var Re=rt();return Re.useReducer(B,ne,ge)}function en(B){var ne=rt();return ne.useRef(B)}function Ur(B,ne){var ge=rt();return ge.useEffect(B,ne)}function lr(B,ne){var ge=rt();return ge.useInsertionEffect(B,ne)}function zn(B,ne){var ge=rt();return ge.useLayoutEffect(B,ne)}function Mi(B,ne){var ge=rt();return ge.useCallback(B,ne)}function Ds(B,ne){var ge=rt();return ge.useMemo(B,ne)}function Un(B,ne,ge){var Re=rt();return Re.useImperativeHandle(B,ne,ge)}function Sr(B,ne){{var ge=rt();return ge.useDebugValue(B,ne)}}function Gt(){var B=rt();return B.useTransition()}function Do(B){var ne=rt();return ne.useDeferredValue(B)}function qa(){var B=rt();return B.useId()}function jf(B,ne,ge){var Re=rt();return Re.useSyncExternalStore(B,ne,ge)}var Ai=0,Cl,co,fd,Ki,hd,Lf,ac;function Ya(){}Ya.__reactDisabledLog=!0;function ls(){{if(Ai===0){Cl=console.log,co=console.info,fd=console.warn,Ki=console.error,hd=console.group,Lf=console.groupCollapsed,ac=console.groupEnd;var B={configurable:!0,enumerable:!0,value:Ya,writable:!0};Object.defineProperties(console,{info:B,log:B,warn:B,error:B,group:B,groupCollapsed:B,groupEnd:B})}Ai++}}function Wi(){{if(Ai--,Ai===0){var B={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Oe({},B,{value:Cl}),info:Oe({},B,{value:co}),warn:Oe({},B,{value:fd}),error:Oe({},B,{value:Ki}),group:Oe({},B,{value:hd}),groupCollapsed:Oe({},B,{value:Lf}),groupEnd:Oe({},B,{value:ac})})}Ai<0&&Q("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Os=le.ReactCurrentDispatcher,El;function ou(B,ne,ge){{if(El===void 0)try{throw Error()}catch(Ve){var Re=Ve.stack.trim().match(/\n( *(at )?)/);El=Re&&Re[1]||""}return`
`+El+B}}var Xa=!1,lc;{var _l=typeof WeakMap=="function"?WeakMap:Map;lc=new _l}function Pl(B,ne){if(!B||Xa)return"";{var ge=lc.get(B);if(ge!==void 0)return ge}var Re;Xa=!0;var Ve=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var st;st=Os.current,Os.current=null,ls();try{if(ne){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(ei){Re=ei}Reflect.construct(B,[],Je)}else{try{Je.call()}catch(ei){Re=ei}B.call(Je.prototype)}}else{try{throw Error()}catch(ei){Re=ei}B()}}catch(ei){if(ei&&Re&&typeof ei.stack=="string"){for(var kt=ei.stack.split(`
`),Qt=Re.stack.split(`
`),On=kt.length-1,Bn=Qt.length-1;On>=1&&Bn>=0&&kt[On]!==Qt[Bn];)Bn--;for(;On>=1&&Bn>=0;On--,Bn--)if(kt[On]!==Qt[Bn]){if(On!==1||Bn!==1)do if(On--,Bn--,Bn<0||kt[On]!==Qt[Bn]){var cr=`
`+kt[On].replace(" at new "," at ");return B.displayName&&cr.includes("<anonymous>")&&(cr=cr.replace("<anonymous>",B.displayName)),typeof B=="function"&&lc.set(B,cr),cr}while(On>=1&&Bn>=0);break}}}finally{Xa=!1,Os.current=st,Wi(),Error.prepareStackTrace=Ve}var tn=B?B.displayName||B.name:"",pr=tn?ou(tn):"";return typeof B=="function"&&lc.set(B,pr),pr}function pd(B,ne,ge){return Pl(B,!1)}function su(B){var ne=B.prototype;return!!(ne&&ne.isReactComponent)}function dn(B,ne,ge){if(B==null)return"";if(typeof B=="function")return Pl(B,su(B));if(typeof B=="string")return ou(B);switch(B){case v:return ou("Suspense");case w:return ou("SuspenseList")}if(typeof B=="object")switch(B.$$typeof){case y:return pd(B.render);case C:return dn(B.type,ne,ge);case E:{var Re=B,Ve=Re._payload,st=Re._init;try{return dn(st(Ve),ne,ge)}catch{}}}return""}var pa={},au=le.ReactDebugCurrentFrame;function Cn(B){if(B){var ne=B._owner,ge=dn(B.type,B._source,ne?ne.type:null);au.setExtraStackFrame(ge)}else au.setExtraStackFrame(null)}function js(B,ne,ge,Re,Ve){{var st=Function.call.bind(Gr);for(var Je in B)if(st(B,Je)){var kt=void 0;try{if(typeof B[Je]!="function"){var Qt=Error((Re||"React class")+": "+ge+" type `"+Je+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof B[Je]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Qt.name="Invariant Violation",Qt}kt=B[Je](ne,Je,Re,ge,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(On){kt=On}kt&&!(kt instanceof Error)&&(Cn(Ve),Q("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Re||"React class",ge,Je,typeof kt),Cn(null)),kt instanceof Error&&!(kt.message in pa)&&(pa[kt.message]=!0,Cn(Ve),Q("Failed %s type: %s",ge,kt.message),Cn(null))}}}function ga(B){if(B){var ne=B._owner,ge=dn(B.type,B._source,ne?ne.type:null);q(ge)}else q(null)}var Bt;Bt=!1;function cc(){if(H.current){var B=Cr(H.current.type);if(B)return`

Check the render method of \``+B+"`."}return""}function ci(B){if(B!==void 0){var ne=B.fileName.replace(/^.*[\\\/]/,""),ge=B.lineNumber;return`

Check your code at `+ne+":"+ge+"."}return""}function uo(B){return B!=null?ci(B.__source):""}var $r={};function Ls(B){var ne=cc();if(!ne){var ge=typeof B=="string"?B:B.displayName||B.name;ge&&(ne=`

Check the top-level render call using <`+ge+">.")}return ne}function Ar(B,ne){if(!(!B._store||B._store.validated||B.key!=null)){B._store.validated=!0;var ge=Ls(ne);if(!$r[ge]){$r[ge]=!0;var Re="";B&&B._owner&&B._owner!==H.current&&(Re=" It was passed a child from "+Cr(B._owner.type)+"."),ga(B),Q('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',ge,Re),ga(null)}}}function $n(B,ne){if(typeof B=="object"){if(an(B))for(var ge=0;ge<B.length;ge++){var Re=B[ge];Xn(Re)&&Ar(Re,ne)}else if(Xn(B))B._store&&(B._store.validated=!0);else if(B){var Ve=L(B);if(typeof Ve=="function"&&Ve!==B.entries)for(var st=Ve.call(B),Je;!(Je=st.next()).done;)Xn(Je.value)&&Ar(Je.value,ne)}}}function Ns(B){{var ne=B.type;if(ne==null||typeof ne=="string")return;var ge;if(typeof ne=="function")ge=ne.propTypes;else if(typeof ne=="object"&&(ne.$$typeof===y||ne.$$typeof===C))ge=ne.propTypes;else return;if(ge){var Re=Cr(ne);js(ge,B.props,"prop",Re,B)}else if(ne.PropTypes!==void 0&&!Bt){Bt=!0;var Ve=Cr(ne);Q("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Ve||"Unknown")}typeof ne.getDefaultProps=="function"&&!ne.getDefaultProps.isReactClassApproved&&Q("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function fo(B){{for(var ne=Object.keys(B.props),ge=0;ge<ne.length;ge++){var Re=ne[ge];if(Re!=="children"&&Re!=="key"){ga(B),Q("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Re),ga(null);break}}B.ref!==null&&(ga(B),Q("Invalid attribute `ref` supplied to `React.Fragment`."),ga(null))}}function Di(B,ne,ge){var Re=Ue(B);if(!Re){var Ve="";(B===void 0||typeof B=="object"&&B!==null&&Object.keys(B).length===0)&&(Ve+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var st=uo(ne);st?Ve+=st:Ve+=cc();var Je;B===null?Je="null":an(B)?Je="array":B!==void 0&&B.$$typeof===i?(Je="<"+(Cr(B.type)||"Unknown")+" />",Ve=" Did you accidentally export a JSX literal instead of a component?"):Je=typeof B,Q("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Je,Ve)}var kt=mt.apply(this,arguments);if(kt==null)return kt;if(Re)for(var Qt=2;Qt<arguments.length;Qt++)$n(arguments[Qt],B);return B===l?fo(kt):Ns(kt),kt}var Oi=!1;function Nf(B){var ne=Di.bind(null,B);return ne.type=B,Oi||(Oi=!0,ce("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(ne,"type",{enumerable:!1,get:function(){return ce("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:B}),B}}),ne}function uc(B,ne,ge){for(var Re=vn.apply(this,arguments),Ve=2;Ve<arguments.length;Ve++)$n(arguments[Ve],Re.type);return Ns(Re),Re}function Fs(B,ne){var ge=z.transition;z.transition={};var Re=z.transition;z.transition._updatedFibers=new Set;try{B()}finally{if(z.transition=ge,ge===null&&Re._updatedFibers){var Ve=Re._updatedFibers.size;Ve>10&&ce("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),Re._updatedFibers.clear()}}}var dc=!1,lu=null;function fc(B){if(lu===null)try{var ne=("require"+Math.random()).slice(0,7),ge=n&&n[ne];lu=ge.call(n,"timers").setImmediate}catch{lu=function(Ve){dc===!1&&(dc=!0,typeof MessageChannel>"u"&&Q("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var st=new MessageChannel;st.port1.onmessage=Ve,st.port2.postMessage(void 0)}}return lu(B)}var cs=0,Z=!1;function pe(B){{var ne=cs;cs++,F.current===null&&(F.current=[]);var ge=F.isBatchingLegacy,Re;try{if(F.isBatchingLegacy=!0,Re=B(),!ge&&F.didScheduleLegacyUpdate){var Ve=F.current;Ve!==null&&(F.didScheduleLegacyUpdate=!1,Lt(Ve))}}catch(tn){throw ze(ne),tn}finally{F.isBatchingLegacy=ge}if(Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var st=Re,Je=!1,kt={then:function(tn,pr){Je=!0,st.then(function(ei){ze(ne),cs===0?ct(ei,tn,pr):tn(ei)},function(ei){ze(ne),pr(ei)})}};return!Z&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){Je||(Z=!0,Q("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),kt}else{var Qt=Re;if(ze(ne),cs===0){var On=F.current;On!==null&&(Lt(On),F.current=null);var Bn={then:function(tn,pr){F.current===null?(F.current=[],ct(Qt,tn,pr)):tn(Qt)}};return Bn}else{var cr={then:function(tn,pr){tn(Qt)}};return cr}}}}function ze(B){B!==cs-1&&Q("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),cs=B}function ct(B,ne,ge){{var Re=F.current;if(Re!==null)try{Lt(Re),fc(function(){Re.length===0?(F.current=null,ne(B)):ct(B,ne,ge)})}catch(Ve){ge(Ve)}else ne(B)}}var Fn=!1;function Lt(B){if(!Fn){Fn=!0;var ne=0;try{for(;ne<B.length;ne++){var ge=B[ne];do ge=ge(!0);while(ge!==null)}B.length=0}catch(Re){throw B=B.slice(ne+1),Re}finally{Fn=!1}}}var rr=Di,Dr=uc,Qn=Nf,Jn={map:As,forEach:Wa,count:Ka,toArray:Ro,only:sc};e.Children=Jn,e.Component=De,e.Fragment=l,e.Profiler=d,e.PureComponent=gt,e.StrictMode=c,e.Suspense=v,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,e.act=pe,e.cloneElement=Dr,e.createContext=ha,e.createElement=rr,e.createFactory=Qn,e.createRef=yn,e.forwardRef=Ga,e.isValidElement=Xn,e.lazy=Ri,e.memo=tt,e.startTransition=Fs,e.unstable_act=pe,e.useCallback=Mi,e.useContext=$t,e.useDebugValue=Sr,e.useDeferredValue=Do,e.useEffect=Ur,e.useId=qa,e.useImperativeHandle=Un,e.useInsertionEffect=lr,e.useLayoutEffect=zn,e.useMemo=Ds,e.useReducer=un,e.useRef=en,e.useState=Vt,e.useSyncExternalStore=jf,e.useTransition=Gt,e.version=r,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()}(nv,nv.exports)),nv.exports}var PL;function rv(){if(PL)return zw.exports;PL=1;var n={};return n.NODE_ENV==="production"?zw.exports=SY():zw.exports=xY(),zw.exports}var M=rv();const zt=ef(M),wY=ka({__proto__:null,default:zt},[M]);var vg={},Uw={exports:{}},Zs={},$w={exports:{}},Y_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TL;function bY(){return TL||(TL=1,function(n){function e(Q,he){var ke=Q.length;Q.push(he);e:for(;0<ke;){var te=ke-1>>>1,me=Q[te];if(0<i(me,he))Q[te]=he,Q[ke]=me,ke=te;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var he=Q[0],ke=Q.pop();if(ke!==he){Q[0]=ke;e:for(var te=0,me=Q.length,Oe=me>>>1;te<Oe;){var Ze=2*(te+1)-1,De=Q[Ze],yt=Ze+1,ot=Q[yt];if(0>i(De,ke))yt<me&&0>i(ot,De)?(Q[te]=ot,Q[yt]=ke,te=yt):(Q[te]=De,Q[Ze]=ke,te=Ze);else if(yt<me&&0>i(ot,ke))Q[te]=ot,Q[yt]=ke,te=yt;else break e}}return he}function i(Q,he){var ke=Q.sortIndex-he.sortIndex;return ke!==0?ke:Q.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],h=[],g=1,y=null,v=3,w=!1,C=!1,E=!1,P=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Q){for(var he=t(h);he!==null;){if(he.callback===null)r(h);else if(he.startTime<=Q)r(h),he.sortIndex=he.expirationTime,e(d,he);else break;he=t(h)}}function O(Q){if(E=!1,L(Q),!C)if(t(d)!==null)C=!0,le(z);else{var he=t(h);he!==null&&ce(O,he.startTime-Q)}}function z(Q,he){C=!1,E&&(E=!1,I(V),V=-1),w=!0;var ke=v;try{for(L(he),y=t(d);y!==null&&(!(y.expirationTime>he)||Q&&!J());){var te=y.callback;if(typeof te=="function"){y.callback=null,v=y.priorityLevel;var me=te(y.expirationTime<=he);he=n.unstable_now(),typeof me=="function"?y.callback=me:y===t(d)&&r(d),L(he)}else r(d);y=t(d)}if(y!==null)var Oe=!0;else{var Ze=t(h);Ze!==null&&ce(O,Ze.startTime-he),Oe=!1}return Oe}finally{y=null,v=ke,w=!1}}var F=!1,H=null,V=-1,re=5,q=-1;function J(){return!(n.unstable_now()-q<re)}function ie(){if(H!==null){var Q=n.unstable_now();q=Q;var he=!0;try{he=H(!0,Q)}finally{he?W():(F=!1,H=null)}}else F=!1}var W;if(typeof k=="function")W=function(){k(ie)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,oe=Y.port2;Y.port1.onmessage=ie,W=function(){oe.postMessage(null)}}else W=function(){P(ie,0)};function le(Q){H=Q,F||(F=!0,W())}function ce(Q,he){V=P(function(){Q(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){C||w||(C=!0,le(z))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var he=3;break;default:he=v}var ke=v;v=he;try{return Q()}finally{v=ke}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,he){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ke=v;v=Q;try{return he()}finally{v=ke}},n.unstable_scheduleCallback=function(Q,he,ke){var te=n.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?te+ke:te):ke=te,Q){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ke+me,Q={id:g++,callback:he,priorityLevel:Q,startTime:ke,expirationTime:me,sortIndex:-1},ke>te?(Q.sortIndex=ke,e(h,Q),t(d)===null&&Q===t(h)&&(E?(I(V),V=-1):E=!0,ce(O,ke-te))):(Q.sortIndex=me,e(d,Q),C||w||(C=!0,le(z))),Q},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(Q){var he=v;return function(){var ke=v;v=he;try{return Q.apply(this,arguments)}finally{v=ke}}}}(Y_)),Y_}var X_={},IL;function CY(){return IL||(IL=1,function(n){var e={};/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */e.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=!1,r=5;function i(ve,$e){var mt=ve.length;ve.push($e),c(ve,$e,mt)}function s(ve){return ve.length===0?null:ve[0]}function l(ve){if(ve.length===0)return null;var $e=ve[0],mt=ve.pop();return mt!==$e&&(ve[0]=mt,d(ve,mt,0)),$e}function c(ve,$e,mt){for(var cn=mt;cn>0;){var vn=cn-1>>>1,Xn=ve[vn];if(h(Xn,$e)>0)ve[vn]=$e,ve[cn]=Xn,cn=vn;else return}}function d(ve,$e,mt){for(var cn=mt,vn=ve.length,Xn=vn>>>1;cn<Xn;){var Dn=(cn+1)*2-1,ar=ve[Dn],bn=Dn+1,Sn=ve[bn];if(h(ar,$e)<0)bn<vn&&h(Sn,ar)<0?(ve[cn]=Sn,ve[bn]=$e,cn=bn):(ve[cn]=ar,ve[Dn]=$e,cn=Dn);else if(bn<vn&&h(Sn,$e)<0)ve[cn]=Sn,ve[bn]=$e,cn=bn;else return}}function h(ve,$e){var mt=ve.sortIndex-$e.sortIndex;return mt!==0?mt:ve.id-$e.id}var g=1,y=2,v=3,w=4,C=5;function E(ve,$e){}var P=typeof performance=="object"&&typeof performance.now=="function";if(P){var I=performance;n.unstable_now=function(){return I.now()}}else{var k=Date,L=k.now();n.unstable_now=function(){return k.now()-L}}var O=1073741823,z=-1,F=250,H=5e3,V=1e4,re=O,q=[],J=[],ie=1,W=null,Y=v,oe=!1,le=!1,ce=!1,Q=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,ke=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(ve){for(var $e=s(J);$e!==null;){if($e.callback===null)l(J);else if($e.startTime<=ve)l(J),$e.sortIndex=$e.expirationTime,i(q,$e);else return;$e=s(J)}}function me(ve){if(ce=!1,te(ve),!le)if(s(q)!==null)le=!0,Rr(Oe);else{var $e=s(J);$e!==null&&Mr(me,$e.startTime-ve)}}function Oe(ve,$e){le=!1,ce&&(ce=!1,Jr()),oe=!0;var mt=Y;try{var cn;if(!t)return Ze(ve,$e)}finally{W=null,Y=mt,oe=!1}}function Ze(ve,$e){var mt=$e;for(te(mt),W=s(q);W!==null&&!(W.expirationTime>mt&&(!ve||Wr()));){var cn=W.callback;if(typeof cn=="function"){W.callback=null,Y=W.priorityLevel;var vn=W.expirationTime<=mt,Xn=cn(vn);mt=n.unstable_now(),typeof Xn=="function"?W.callback=Xn:W===s(q)&&l(q),te(mt)}else l(q);W=s(q)}if(W!==null)return!0;var Dn=s(J);return Dn!==null&&Mr(me,Dn.startTime-mt),!1}function De(ve,$e){switch(ve){case g:case y:case v:case w:case C:break;default:ve=v}var mt=Y;Y=ve;try{return $e()}finally{Y=mt}}function yt(ve){var $e;switch(Y){case g:case y:case v:$e=v;break;default:$e=Y;break}var mt=Y;Y=$e;try{return ve()}finally{Y=mt}}function ot(ve){var $e=Y;return function(){var mt=Y;Y=$e;try{return ve.apply(this,arguments)}finally{Y=mt}}}function We(ve,$e,mt){var cn=n.unstable_now(),vn;if(typeof mt=="object"&&mt!==null){var Xn=mt.delay;typeof Xn=="number"&&Xn>0?vn=cn+Xn:vn=cn}else vn=cn;var Dn;switch(ve){case g:Dn=z;break;case y:Dn=F;break;case C:Dn=re;break;case w:Dn=V;break;case v:default:Dn=H;break}var ar=vn+Dn,bn={id:ie++,callback:$e,priorityLevel:ve,startTime:vn,expirationTime:ar,sortIndex:-1};return vn>cn?(bn.sortIndex=vn,i(J,bn),s(q)===null&&bn===s(J)&&(ce?Jr():ce=!0,Mr(me,vn-cn))):(bn.sortIndex=ar,i(q,bn),!le&&!oe&&(le=!0,Rr(Oe))),bn}function Qe(){}function gt(){!le&&!oe&&(le=!0,Rr(Oe))}function Pt(){return s(q)}function yn(ve){ve.callback=null}function Zt(){return Y}var an=!1,ln=null,Yt=-1,Yn=r,br=-1;function Wr(){var ve=n.unstable_now()-br;return!(ve<Yn)}function kr(){}function Cr(ve){if(ve<0||ve>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}ve>0?Yn=Math.floor(1e3/ve):Yn=r}var Gr=function(){if(ln!==null){var ve=n.unstable_now();br=ve;var $e=!0,mt=!0;try{mt=ln($e,ve)}finally{mt?qr():(an=!1,ln=null)}}else an=!1},qr;if(typeof ke=="function")qr=function(){ke(Gr)};else if(typeof MessageChannel<"u"){var li=new MessageChannel,ko=li.port2;li.port1.onmessage=Gr,qr=function(){ko.postMessage(null)}}else qr=function(){Q(Gr,0)};function Rr(ve){ln=ve,an||(an=!0,qr())}function Mr(ve,$e){Yt=Q(function(){ve(n.unstable_now())},$e)}function Jr(){he(Yt),Yt=-1}var ss=kr,Ee=null;n.unstable_IdlePriority=C,n.unstable_ImmediatePriority=g,n.unstable_LowPriority=w,n.unstable_NormalPriority=v,n.unstable_Profiling=Ee,n.unstable_UserBlockingPriority=y,n.unstable_cancelCallback=yn,n.unstable_continueExecution=gt,n.unstable_forceFrameRate=Cr,n.unstable_getCurrentPriorityLevel=Zt,n.unstable_getFirstCallbackNode=Pt,n.unstable_next=yt,n.unstable_pauseExecution=Qe,n.unstable_requestPaint=ss,n.unstable_runWithPriority=De,n.unstable_scheduleCallback=We,n.unstable_shouldYield=Wr,n.unstable_wrapCallback=ot,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()}(X_)),X_}var kL;function RL(){if(kL)return $w.exports;kL=1;var n={};return n.NODE_ENV==="production"?$w.exports=bY():$w.exports=CY(),$w.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ML;function EY(){if(ML)return Zs;ML=1;var n=rv(),e=RL();function t(u){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+u,x=1;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(u,f){l(u,f),l(u+"Capture",f)}function l(u,f){for(i[u]=f,u=0;u<f.length;u++)r.add(f[u])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(u){return d.call(y,u)?!0:d.call(g,u)?!1:h.test(u)?y[u]=!0:(g[u]=!0,!1)}function w(u,f,x,_){if(x!==null&&x.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return _?!1:x!==null?!x.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function C(u,f,x,_){if(f===null||typeof f>"u"||w(u,f,x,_))return!0;if(_)return!1;if(x!==null)switch(x.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function E(u,f,x,_,A,j,K){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=_,this.attributeNamespace=A,this.mustUseProperty=x,this.propertyName=u,this.type=f,this.sanitizeURL=j,this.removeEmptyString=K}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){P[u]=new E(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var f=u[0];P[f]=new E(f,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){P[u]=new E(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){P[u]=new E(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){P[u]=new E(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){P[u]=new E(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){P[u]=new E(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){P[u]=new E(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){P[u]=new E(u,5,!1,u.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function k(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var f=u.replace(I,k);P[f]=new E(f,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var f=u.replace(I,k);P[f]=new E(f,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var f=u.replace(I,k);P[f]=new E(f,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){P[u]=new E(u,1,!1,u.toLowerCase(),null,!1,!1)}),P.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){P[u]=new E(u,1,!1,u.toLowerCase(),null,!0,!0)});function L(u,f,x,_){var A=P.hasOwnProperty(f)?P[f]:null;(A!==null?A.type!==0:_||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(C(f,x,A,_)&&(x=null),_||A===null?v(f)&&(x===null?u.removeAttribute(f):u.setAttribute(f,""+x)):A.mustUseProperty?u[A.propertyName]=x===null?A.type===3?!1:"":x:(f=A.attributeName,_=A.attributeNamespace,x===null?u.removeAttribute(f):(A=A.type,x=A===3||A===4&&x===!0?"":""+x,_?u.setAttributeNS(_,f,x):u.setAttribute(f,x))))}var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),F=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),J=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),Q=Symbol.iterator;function he(u){return u===null||typeof u!="object"?null:(u=Q&&u[Q]||u["@@iterator"],typeof u=="function"?u:null)}var ke=Object.assign,te;function me(u){if(te===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);te=f&&f[1]||""}return`
`+te+u}var Oe=!1;function Ze(u,f){if(!u||Oe)return"";Oe=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Te){var _=Te}Reflect.construct(u,[],f)}else{try{f.call()}catch(Te){_=Te}u.call(f.prototype)}else{try{throw Error()}catch(Te){_=Te}u()}}catch(Te){if(Te&&_&&typeof Te.stack=="string"){for(var A=Te.stack.split(`
`),j=_.stack.split(`
`),K=A.length-1,ee=j.length-1;1<=K&&0<=ee&&A[K]!==j[ee];)ee--;for(;1<=K&&0<=ee;K--,ee--)if(A[K]!==j[ee]){if(K!==1||ee!==1)do if(K--,ee--,0>ee||A[K]!==j[ee]){var ae=`
`+A[K].replace(" at new "," at ");return u.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",u.displayName)),ae}while(1<=K&&0<=ee);break}}}finally{Oe=!1,Error.prepareStackTrace=x}return(u=u?u.displayName||u.name:"")?me(u):""}function De(u){switch(u.tag){case 5:return me(u.type);case 16:return me("Lazy");case 13:return me("Suspense");case 19:return me("SuspenseList");case 0:case 2:case 15:return u=Ze(u.type,!1),u;case 11:return u=Ze(u.type.render,!1),u;case 1:return u=Ze(u.type,!0),u;default:return""}}function yt(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case H:return"Fragment";case F:return"Portal";case re:return"Profiler";case V:return"StrictMode";case W:return"Suspense";case Y:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case J:return(u.displayName||"Context")+".Consumer";case q:return(u._context.displayName||"Context")+".Provider";case ie:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case oe:return f=u.displayName||null,f!==null?f:yt(u.type)||"Memo";case le:f=u._payload,u=u._init;try{return yt(u(f))}catch{}}return null}function ot(u){var f=u.type;switch(u.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=f.render,u=u.displayName||u.name||"",f.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yt(f);case 8:return f===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function We(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Qe(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function gt(u){var f=Qe(u)?"checked":"value",x=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),_=""+u[f];if(!u.hasOwnProperty(f)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var A=x.get,j=x.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return A.call(this)},set:function(K){_=""+K,j.call(this,K)}}),Object.defineProperty(u,f,{enumerable:x.enumerable}),{getValue:function(){return _},setValue:function(K){_=""+K},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Pt(u){u._valueTracker||(u._valueTracker=gt(u))}function yn(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var x=f.getValue(),_="";return u&&(_=Qe(u)?u.checked?"true":"false":u.value),u=_,u!==x?(f.setValue(u),!0):!1}function Zt(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function an(u,f){var x=f.checked;return ke({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??u._wrapperState.initialChecked})}function ln(u,f){var x=f.defaultValue==null?"":f.defaultValue,_=f.checked!=null?f.checked:f.defaultChecked;x=We(f.value!=null?f.value:x),u._wrapperState={initialChecked:_,initialValue:x,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Yt(u,f){f=f.checked,f!=null&&L(u,"checked",f,!1)}function Yn(u,f){Yt(u,f);var x=We(f.value),_=f.type;if(x!=null)_==="number"?(x===0&&u.value===""||u.value!=x)&&(u.value=""+x):u.value!==""+x&&(u.value=""+x);else if(_==="submit"||_==="reset"){u.removeAttribute("value");return}f.hasOwnProperty("value")?Wr(u,f.type,x):f.hasOwnProperty("defaultValue")&&Wr(u,f.type,We(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(u.defaultChecked=!!f.defaultChecked)}function br(u,f,x){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var _=f.type;if(!(_!=="submit"&&_!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+u._wrapperState.initialValue,x||f===u.value||(u.value=f),u.defaultValue=f}x=u.name,x!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,x!==""&&(u.name=x)}function Wr(u,f,x){(f!=="number"||Zt(u.ownerDocument)!==u)&&(x==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+x&&(u.defaultValue=""+x))}var kr=Array.isArray;function Cr(u,f,x,_){if(u=u.options,f){f={};for(var A=0;A<x.length;A++)f["$"+x[A]]=!0;for(x=0;x<u.length;x++)A=f.hasOwnProperty("$"+u[x].value),u[x].selected!==A&&(u[x].selected=A),A&&_&&(u[x].defaultSelected=!0)}else{for(x=""+We(x),f=null,A=0;A<u.length;A++){if(u[A].value===x){u[A].selected=!0,_&&(u[A].defaultSelected=!0);return}f!==null||u[A].disabled||(f=u[A])}f!==null&&(f.selected=!0)}}function Gr(u,f){if(f.dangerouslySetInnerHTML!=null)throw Error(t(91));return ke({},f,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function qr(u,f){var x=f.value;if(x==null){if(x=f.children,f=f.defaultValue,x!=null){if(f!=null)throw Error(t(92));if(kr(x)){if(1<x.length)throw Error(t(93));x=x[0]}f=x}f==null&&(f=""),x=f}u._wrapperState={initialValue:We(x)}}function li(u,f){var x=We(f.value),_=We(f.defaultValue);x!=null&&(x=""+x,x!==u.value&&(u.value=x),f.defaultValue==null&&u.defaultValue!==x&&(u.defaultValue=x)),_!=null&&(u.defaultValue=""+_)}function ko(u){var f=u.textContent;f===u._wrapperState.initialValue&&f!==""&&f!==null&&(u.value=f)}function Rr(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mr(u,f){return u==null||u==="http://www.w3.org/1999/xhtml"?Rr(f):u==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var Jr,ss=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,x,_,A){MSApp.execUnsafeLocalFunction(function(){return u(f,x,_,A)})}:u}(function(u,f){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=f;else{for(Jr=Jr||document.createElement("div"),Jr.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Jr.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;f.firstChild;)u.appendChild(f.firstChild)}});function Ee(u,f){if(f){var x=u.firstChild;if(x&&x===u.lastChild&&x.nodeType===3){x.nodeValue=f;return}}u.textContent=f}var ve={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$e=["Webkit","ms","Moz","O"];Object.keys(ve).forEach(function(u){$e.forEach(function(f){f=f+u.charAt(0).toUpperCase()+u.substring(1),ve[f]=ve[u]})});function mt(u,f,x){return f==null||typeof f=="boolean"||f===""?"":x||typeof f!="number"||f===0||ve.hasOwnProperty(u)&&ve[u]?(""+f).trim():f+"px"}function cn(u,f){u=u.style;for(var x in f)if(f.hasOwnProperty(x)){var _=x.indexOf("--")===0,A=mt(x,f[x],_);x==="float"&&(x="cssFloat"),_?u.setProperty(x,A):u[x]=A}}var vn=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xn(u,f){if(f){if(vn[u]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(t(137,u));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(t(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(t(61))}if(f.style!=null&&typeof f.style!="object")throw Error(t(62))}}function Dn(u,f){if(u.indexOf("-")===-1)return typeof f.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function bn(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Sn=null,hn=null,Ii=null;function lo(u){if(u=Ep(u)){if(typeof Sn!="function")throw Error(t(280));var f=u.stateNode;f&&(f=yc(f),Sn(u.stateNode,u.type,f))}}function ki(u){hn?Ii?Ii.push(u):Ii=[u]:hn=u}function As(){if(hn){var u=hn,f=Ii;if(Ii=hn=null,lo(u),f)for(u=0;u<f.length;u++)lo(f[u])}}function Ka(u,f){return u(f)}function Wa(){}var Ro=!1;function sc(u,f,x){if(Ro)return u(f,x);Ro=!0;try{return Ka(u,f,x)}finally{Ro=!1,(hn!==null||Ii!==null)&&(Wa(),As())}}function ha(u,f){var x=u.stateNode;if(x===null)return null;var _=yc(x);if(_===null)return null;x=_[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(u=u.type,_=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!_;break e;default:u=!1}if(u)return null;if(x&&typeof x!="function")throw Error(t(231,f,typeof x));return x}var Mo=!1;if(c)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){Mo=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{Mo=!1}function Ao(u,f,x,_,A,j,K,ee,ae){var Te=Array.prototype.slice.call(arguments,3);try{f.apply(x,Te)}catch(He){this.onError(He)}}var Vi=!1,as=null,Ri=!1,Ga=null,se={onError:function(u){Vi=!0,as=u}};function Ue(u,f,x,_,A,j,K,ee,ae){Vi=!1,as=null,Ao.apply(se,arguments)}function tt(u,f,x,_,A,j,K,ee,ae){if(Ue.apply(this,arguments),Vi){if(Vi){var Te=as;Vi=!1,as=null}else throw Error(t(198));Ri||(Ri=!0,Ga=Te)}}function rt(u){var f=u,x=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,f.flags&4098&&(x=f.return),u=f.return;while(u)}return f.tag===3?x:null}function $t(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function Vt(u){if(rt(u)!==u)throw Error(t(188))}function un(u){var f=u.alternate;if(!f){if(f=rt(u),f===null)throw Error(t(188));return f!==u?null:u}for(var x=u,_=f;;){var A=x.return;if(A===null)break;var j=A.alternate;if(j===null){if(_=A.return,_!==null){x=_;continue}break}if(A.child===j.child){for(j=A.child;j;){if(j===x)return Vt(A),u;if(j===_)return Vt(A),f;j=j.sibling}throw Error(t(188))}if(x.return!==_.return)x=A,_=j;else{for(var K=!1,ee=A.child;ee;){if(ee===x){K=!0,x=A,_=j;break}if(ee===_){K=!0,_=A,x=j;break}ee=ee.sibling}if(!K){for(ee=j.child;ee;){if(ee===x){K=!0,x=j,_=A;break}if(ee===_){K=!0,_=j,x=A;break}ee=ee.sibling}if(!K)throw Error(t(189))}}if(x.alternate!==_)throw Error(t(190))}if(x.tag!==3)throw Error(t(188));return x.stateNode.current===x?u:f}function en(u){return u=un(u),u!==null?Ur(u):null}function Ur(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var f=Ur(u);if(f!==null)return f;u=u.sibling}return null}var lr=e.unstable_scheduleCallback,zn=e.unstable_cancelCallback,Mi=e.unstable_shouldYield,Ds=e.unstable_requestPaint,Un=e.unstable_now,Sr=e.unstable_getCurrentPriorityLevel,Gt=e.unstable_ImmediatePriority,Do=e.unstable_UserBlockingPriority,qa=e.unstable_NormalPriority,jf=e.unstable_LowPriority,Ai=e.unstable_IdlePriority,Cl=null,co=null;function fd(u){if(co&&typeof co.onCommitFiberRoot=="function")try{co.onCommitFiberRoot(Cl,u,void 0,(u.current.flags&128)===128)}catch{}}var Ki=Math.clz32?Math.clz32:ac,hd=Math.log,Lf=Math.LN2;function ac(u){return u>>>=0,u===0?32:31-(hd(u)/Lf|0)|0}var Ya=64,ls=4194304;function Wi(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Os(u,f){var x=u.pendingLanes;if(x===0)return 0;var _=0,A=u.suspendedLanes,j=u.pingedLanes,K=x&268435455;if(K!==0){var ee=K&~A;ee!==0?_=Wi(ee):(j&=K,j!==0&&(_=Wi(j)))}else K=x&~A,K!==0?_=Wi(K):j!==0&&(_=Wi(j));if(_===0)return 0;if(f!==0&&f!==_&&!(f&A)&&(A=_&-_,j=f&-f,A>=j||A===16&&(j&4194240)!==0))return f;if(_&4&&(_|=x&16),f=u.entangledLanes,f!==0)for(u=u.entanglements,f&=_;0<f;)x=31-Ki(f),A=1<<x,_|=u[x],f&=~A;return _}function El(u,f){switch(u){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ou(u,f){for(var x=u.suspendedLanes,_=u.pingedLanes,A=u.expirationTimes,j=u.pendingLanes;0<j;){var K=31-Ki(j),ee=1<<K,ae=A[K];ae===-1?(!(ee&x)||ee&_)&&(A[K]=El(ee,f)):ae<=f&&(u.expiredLanes|=ee),j&=~ee}}function Xa(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function lc(){var u=Ya;return Ya<<=1,!(Ya&4194240)&&(Ya=64),u}function _l(u){for(var f=[],x=0;31>x;x++)f.push(u);return f}function Pl(u,f,x){u.pendingLanes|=f,f!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,f=31-Ki(f),u[f]=x}function pd(u,f){var x=u.pendingLanes&~f;u.pendingLanes=f,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=f,u.mutableReadLanes&=f,u.entangledLanes&=f,f=u.entanglements;var _=u.eventTimes;for(u=u.expirationTimes;0<x;){var A=31-Ki(x),j=1<<A;f[A]=0,_[A]=-1,u[A]=-1,x&=~j}}function su(u,f){var x=u.entangledLanes|=f;for(u=u.entanglements;x;){var _=31-Ki(x),A=1<<_;A&f|u[_]&f&&(u[_]|=f),x&=~A}}var dn=0;function pa(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var au,Cn,js,ga,Bt,cc=!1,ci=[],uo=null,$r=null,Ls=null,Ar=new Map,$n=new Map,Ns=[],fo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Di(u,f){switch(u){case"focusin":case"focusout":uo=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Ar.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(f.pointerId)}}function Oi(u,f,x,_,A,j){return u===null||u.nativeEvent!==j?(u={blockedOn:f,domEventName:x,eventSystemFlags:_,nativeEvent:j,targetContainers:[A]},f!==null&&(f=Ep(f),f!==null&&Cn(f)),u):(u.eventSystemFlags|=_,f=u.targetContainers,A!==null&&f.indexOf(A)===-1&&f.push(A),u)}function Nf(u,f,x,_,A){switch(f){case"focusin":return uo=Oi(uo,u,f,x,_,A),!0;case"dragenter":return $r=Oi($r,u,f,x,_,A),!0;case"mouseover":return Ls=Oi(Ls,u,f,x,_,A),!0;case"pointerover":var j=A.pointerId;return Ar.set(j,Oi(Ar.get(j)||null,u,f,x,_,A)),!0;case"gotpointercapture":return j=A.pointerId,$n.set(j,Oi($n.get(j)||null,u,f,x,_,A)),!0}return!1}function uc(u){var f=wd(u.target);if(f!==null){var x=rt(f);if(x!==null){if(f=x.tag,f===13){if(f=$t(x),f!==null){u.blockedOn=f,Bt(u.priority,function(){js(x)});return}}else if(f===3&&x.stateNode.current.memoizedState.isDehydrated){u.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Fs(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var x=rr(u.domEventName,u.eventSystemFlags,f[0],u.nativeEvent);if(x===null){x=u.nativeEvent;var _=new x.constructor(x.type,x);ar=_,x.target.dispatchEvent(_),ar=null}else return f=Ep(x),f!==null&&Cn(f),u.blockedOn=x,!1;f.shift()}return!0}function dc(u,f,x){Fs(u)&&x.delete(f)}function lu(){cc=!1,uo!==null&&Fs(uo)&&(uo=null),$r!==null&&Fs($r)&&($r=null),Ls!==null&&Fs(Ls)&&(Ls=null),Ar.forEach(dc),$n.forEach(dc)}function fc(u,f){u.blockedOn===f&&(u.blockedOn=null,cc||(cc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lu)))}function cs(u){function f(A){return fc(A,u)}if(0<ci.length){fc(ci[0],u);for(var x=1;x<ci.length;x++){var _=ci[x];_.blockedOn===u&&(_.blockedOn=null)}}for(uo!==null&&fc(uo,u),$r!==null&&fc($r,u),Ls!==null&&fc(Ls,u),Ar.forEach(f),$n.forEach(f),x=0;x<Ns.length;x++)_=Ns[x],_.blockedOn===u&&(_.blockedOn=null);for(;0<Ns.length&&(x=Ns[0],x.blockedOn===null);)uc(x),x.blockedOn===null&&Ns.shift()}var Z=O.ReactCurrentBatchConfig,pe=!0;function ze(u,f,x,_){var A=dn,j=Z.transition;Z.transition=null;try{dn=1,Fn(u,f,x,_)}finally{dn=A,Z.transition=j}}function ct(u,f,x,_){var A=dn,j=Z.transition;Z.transition=null;try{dn=4,Fn(u,f,x,_)}finally{dn=A,Z.transition=j}}function Fn(u,f,x,_){if(pe){var A=rr(u,f,x,_);if(A===null)ZS(u,f,_,Lt,x),Di(u,_);else if(Nf(A,u,f,x,_))_.stopPropagation();else if(Di(u,_),f&4&&-1<fo.indexOf(u)){for(;A!==null;){var j=Ep(A);if(j!==null&&au(j),j=rr(u,f,x,_),j===null&&ZS(u,f,_,Lt,x),j===A)break;A=j}A!==null&&_.stopPropagation()}else ZS(u,f,_,null,x)}}var Lt=null;function rr(u,f,x,_){if(Lt=null,u=bn(_),u=wd(u),u!==null)if(f=rt(u),f===null)u=null;else if(x=f.tag,x===13){if(u=$t(f),u!==null)return u;u=null}else if(x===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null);return Lt=u,null}function Dr(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sr()){case Gt:return 1;case Do:return 4;case qa:case jf:return 16;case Ai:return 536870912;default:return 16}default:return 16}}var Qn=null,Jn=null,B=null;function ne(){if(B)return B;var u,f=Jn,x=f.length,_,A="value"in Qn?Qn.value:Qn.textContent,j=A.length;for(u=0;u<x&&f[u]===A[u];u++);var K=x-u;for(_=1;_<=K&&f[x-_]===A[j-_];_++);return B=A.slice(u,1<_?1-_:void 0)}function ge(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function Re(){return!0}function Ve(){return!1}function st(u){function f(x,_,A,j,K){this._reactName=x,this._targetInst=A,this.type=_,this.nativeEvent=j,this.target=K,this.currentTarget=null;for(var ee in u)u.hasOwnProperty(ee)&&(x=u[ee],this[ee]=x?x(j):j[ee]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Re:Ve,this.isPropagationStopped=Ve,this}return ke(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Re)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Re)},persist:function(){},isPersistent:Re}),f}var Je={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kt=st(Je),Qt=ke({},Je,{view:0,detail:0}),On=st(Qt),Bn,cr,tn,pr=ke({},Qt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Za,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==tn&&(tn&&u.type==="mousemove"?(Bn=u.screenX-tn.screenX,cr=u.screenY-tn.screenY):cr=Bn=0,tn=u),Bn)},movementY:function(u){return"movementY"in u?u.movementY:cr}}),ei=st(pr),gd=ke({},pr,{dataTransfer:0}),cp=st(gd),hc=ke({},Qt,{relatedTarget:0}),md=st(hc),up=ke({},Je,{animationName:0,elapsedTime:0,pseudoElement:0}),zS=st(up),mm=ke({},Je,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),US=st(mm),sC=ke({},Je,{data:0}),ym=st(sC),aC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sD(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=cC[u])?!!f[u]:!1}function Za(){return sD}var aD=ke({},Qt,{key:function(u){if(u.key){var f=aC[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=ge(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?lC[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Za,charCode:function(u){return u.type==="keypress"?ge(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?ge(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),$S=st(aD),BS=ke({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vm=st(BS),lD=ke({},Qt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Za}),Sm=st(lD),uC=ke({},Je,{propertyName:0,elapsedTime:0,pseudoElement:0}),us=st(uC),pc=ke({},pr,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),ui=st(pc),gc=[9,13,27,32],dp=c&&"CompositionEvent"in window,cu=null;c&&"documentMode"in document&&(cu=document.documentMode);var cD=c&&"TextEvent"in window&&!cu,Ff=c&&(!dp||cu&&8<cu&&11>=cu),dC=" ",fC=!1;function xm(u,f){switch(u){case"keyup":return gc.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hC(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var zf=!1;function uD(u,f){switch(u){case"compositionend":return hC(f);case"keypress":return f.which!==32?null:(fC=!0,dC);case"textInput":return u=f.data,u===dC&&fC?null:u;default:return null}}function pC(u,f){if(zf)return u==="compositionend"||!dp&&xm(u,f)?(u=ne(),B=Jn=Qn=null,zf=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Ff&&f.locale!=="ko"?null:f.data;default:return null}}var dD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gC(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!dD[u.type]:f==="textarea"}function mC(u,f,x,_){ki(_),f=wp(f,"onChange"),0<f.length&&(x=new kt("onChange","change",null,x,_),u.push({event:x,listeners:f}))}var Uf=null,Tl=null;function HS(u){Em(u,0)}function fp(u){var f=Rt(u);if(yn(f))return u}function yC(u,f){if(u==="change")return f}var vC=!1;if(c){var VS;if(c){var KS="oninput"in document;if(!KS){var SC=document.createElement("div");SC.setAttribute("oninput","return;"),KS=typeof SC.oninput=="function"}VS=KS}else VS=!1;vC=VS&&(!document.documentMode||9<document.documentMode)}function xC(){Uf&&(Uf.detachEvent("onpropertychange",wC),Tl=Uf=null)}function wC(u){if(u.propertyName==="value"&&fp(Tl)){var f=[];mC(f,Tl,u,bn(u)),sc(HS,f)}}function fD(u,f,x){u==="focusin"?(xC(),Uf=f,Tl=x,Uf.attachEvent("onpropertychange",wC)):u==="focusout"&&xC()}function hD(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return fp(Tl)}function bC(u,f){if(u==="click")return fp(f)}function pD(u,f){if(u==="input"||u==="change")return fp(f)}function CC(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Qa=typeof Object.is=="function"?Object.is:CC;function hp(u,f){if(Qa(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var x=Object.keys(u),_=Object.keys(f);if(x.length!==_.length)return!1;for(_=0;_<x.length;_++){var A=x[_];if(!d.call(f,A)||!Qa(u[A],f[A]))return!1}return!0}function EC(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function _C(u,f){var x=EC(u);u=0;for(var _;x;){if(x.nodeType===3){if(_=u+x.textContent.length,u<=f&&_>=f)return{node:x,offset:f-u};u=_}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=EC(x)}}function wm(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?wm(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function uu(){for(var u=window,f=Zt();f instanceof u.HTMLIFrameElement;){try{var x=typeof f.contentWindow.location.href=="string"}catch{x=!1}if(x)u=f.contentWindow;else break;f=Zt(u.document)}return f}function $f(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}function PC(u){var f=uu(),x=u.focusedElem,_=u.selectionRange;if(f!==x&&x&&x.ownerDocument&&wm(x.ownerDocument.documentElement,x)){if(_!==null&&$f(x)){if(f=_.start,u=_.end,u===void 0&&(u=f),"selectionStart"in x)x.selectionStart=f,x.selectionEnd=Math.min(u,x.value.length);else if(u=(f=x.ownerDocument||document)&&f.defaultView||window,u.getSelection){u=u.getSelection();var A=x.textContent.length,j=Math.min(_.start,A);_=_.end===void 0?j:Math.min(_.end,A),!u.extend&&j>_&&(A=_,_=j,j=A),A=_C(x,j);var K=_C(x,_);A&&K&&(u.rangeCount!==1||u.anchorNode!==A.node||u.anchorOffset!==A.offset||u.focusNode!==K.node||u.focusOffset!==K.offset)&&(f=f.createRange(),f.setStart(A.node,A.offset),u.removeAllRanges(),j>_?(u.addRange(f),u.extend(K.node,K.offset)):(f.setEnd(K.node,K.offset),u.addRange(f)))}}for(f=[],u=x;u=u.parentNode;)u.nodeType===1&&f.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<f.length;x++)u=f[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var Bf=c&&"documentMode"in document&&11>=document.documentMode,Hf=null,WS=null,pp=null,GS=!1;function TC(u,f,x){var _=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;GS||Hf==null||Hf!==Zt(_)||(_=Hf,"selectionStart"in _&&$f(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),pp&&hp(pp,_)||(pp=_,_=wp(WS,"onSelect"),0<_.length&&(f=new kt("onSelect","select",null,f,x),u.push({event:f,listeners:_}),f.target=Hf)))}function gp(u,f){var x={};return x[u.toLowerCase()]=f.toLowerCase(),x["Webkit"+u]="webkit"+f,x["Moz"+u]="moz"+f,x}var Vf={animationend:gp("Animation","AnimationEnd"),animationiteration:gp("Animation","AnimationIteration"),animationstart:gp("Animation","AnimationStart"),transitionend:gp("Transition","TransitionEnd")},bm={},ho={};c&&(ho=document.createElement("div").style,"AnimationEvent"in window||(delete Vf.animationend.animation,delete Vf.animationiteration.animation,delete Vf.animationstart.animation),"TransitionEvent"in window||delete Vf.transitionend.transition);function mp(u){if(bm[u])return bm[u];if(!Vf[u])return u;var f=Vf[u],x;for(x in f)if(f.hasOwnProperty(x)&&x in ho)return bm[u]=f[x];return u}var IC=mp("animationend"),kC=mp("animationiteration"),RC=mp("animationstart"),MC=mp("transitionend"),AC=new Map,qS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Il(u,f){AC.set(u,f),s(f,[u])}for(var yd=0;yd<qS.length;yd++){var YS=qS[yd],yp=YS.toLowerCase(),gD=YS[0].toUpperCase()+YS.slice(1);Il(yp,"on"+gD)}Il(IC,"onAnimationEnd"),Il(kC,"onAnimationIteration"),Il(RC,"onAnimationStart"),Il("dblclick","onDoubleClick"),Il("focusin","onFocus"),Il("focusout","onBlur"),Il(MC,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mD=new Set("cancel close invalid load scroll toggle".split(" ").concat(vp));function Cm(u,f,x){var _=u.type||"unknown-event";u.currentTarget=x,tt(_,f,void 0,u),u.currentTarget=null}function Em(u,f){f=(f&4)!==0;for(var x=0;x<u.length;x++){var _=u[x],A=_.event;_=_.listeners;e:{var j=void 0;if(f)for(var K=_.length-1;0<=K;K--){var ee=_[K],ae=ee.instance,Te=ee.currentTarget;if(ee=ee.listener,ae!==j&&A.isPropagationStopped())break e;Cm(A,ee,Te),j=ae}else for(K=0;K<_.length;K++){if(ee=_[K],ae=ee.instance,Te=ee.currentTarget,ee=ee.listener,ae!==j&&A.isPropagationStopped())break e;Cm(A,ee,Te),j=ae}}}if(Ri)throw u=Ga,Ri=!1,Ga=null,u}function er(u,f){var x=f[QS];x===void 0&&(x=f[QS]=new Set);var _=u+"__bubble";x.has(_)||(XS(f,u,2,!1),x.add(_))}function du(u,f,x){var _=0;f&&(_|=4),XS(x,u,_,f)}var Sp="_reactListening"+Math.random().toString(36).slice(2);function xp(u){if(!u[Sp]){u[Sp]=!0,r.forEach(function(x){x!=="selectionchange"&&(mD.has(x)||du(x,!1,u),du(x,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[Sp]||(f[Sp]=!0,du("selectionchange",!1,f))}}function XS(u,f,x,_){switch(Dr(f)){case 1:var A=ze;break;case 4:A=ct;break;default:A=Fn}x=A.bind(null,f,x,u),A=void 0,!Mo||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(A=!0),_?A!==void 0?u.addEventListener(f,x,{capture:!0,passive:A}):u.addEventListener(f,x,!0):A!==void 0?u.addEventListener(f,x,{passive:A}):u.addEventListener(f,x,!1)}function ZS(u,f,x,_,A){var j=_;if(!(f&1)&&!(f&2)&&_!==null)e:for(;;){if(_===null)return;var K=_.tag;if(K===3||K===4){var ee=_.stateNode.containerInfo;if(ee===A||ee.nodeType===8&&ee.parentNode===A)break;if(K===4)for(K=_.return;K!==null;){var ae=K.tag;if((ae===3||ae===4)&&(ae=K.stateNode.containerInfo,ae===A||ae.nodeType===8&&ae.parentNode===A))return;K=K.return}for(;ee!==null;){if(K=wd(ee),K===null)return;if(ae=K.tag,ae===5||ae===6){_=j=K;continue e}ee=ee.parentNode}}_=_.return}sc(function(){var Te=j,He=bn(x),Ke=[];e:{var Be=AC.get(u);if(Be!==void 0){var ft=kt,St=u;switch(u){case"keypress":if(ge(x)===0)break e;case"keydown":case"keyup":ft=$S;break;case"focusin":St="focus",ft=md;break;case"focusout":St="blur",ft=md;break;case"beforeblur":case"afterblur":ft=md;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=cp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Sm;break;case IC:case kC:case RC:ft=zS;break;case MC:ft=us;break;case"scroll":ft=On;break;case"wheel":ft=ui;break;case"copy":case"cut":case"paste":ft=US;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=vm}var Et=(f&4)!==0,ii=!Et&&u==="scroll",ye=Et?Be!==null?Be+"Capture":null:Be;Et=[];for(var de=Te,Ce;de!==null;){Ce=de;var Ye=Ce.stateNode;if(Ce.tag===5&&Ye!==null&&(Ce=Ye,ye!==null&&(Ye=ha(de,ye),Ye!=null&&Et.push(Kf(de,Ye,Ce)))),ii)break;de=de.return}0<Et.length&&(Be=new ft(Be,St,null,x,He),Ke.push({event:Be,listeners:Et}))}}if(!(f&7)){e:{if(Be=u==="mouseover"||u==="pointerover",ft=u==="mouseout"||u==="pointerout",Be&&x!==ar&&(St=x.relatedTarget||x.fromElement)&&(wd(St)||St[mc]))break e;if((ft||Be)&&(Be=He.window===He?He:(Be=He.ownerDocument)?Be.defaultView||Be.parentWindow:window,ft?(St=x.relatedTarget||x.toElement,ft=Te,St=St?wd(St):null,St!==null&&(ii=rt(St),St!==ii||St.tag!==5&&St.tag!==6)&&(St=null)):(ft=null,St=Te),ft!==St)){if(Et=ei,Ye="onMouseLeave",ye="onMouseEnter",de="mouse",(u==="pointerout"||u==="pointerover")&&(Et=vm,Ye="onPointerLeave",ye="onPointerEnter",de="pointer"),ii=ft==null?Be:Rt(ft),Ce=St==null?Be:Rt(St),Be=new Et(Ye,de+"leave",ft,x,He),Be.target=ii,Be.relatedTarget=Ce,Ye=null,wd(He)===Te&&(Et=new Et(ye,de+"enter",St,x,He),Et.target=Ce,Et.relatedTarget=ii,Ye=Et),ii=Ye,ft&&St)t:{for(Et=ft,ye=St,de=0,Ce=Et;Ce;Ce=vd(Ce))de++;for(Ce=0,Ye=ye;Ye;Ye=vd(Ye))Ce++;for(;0<de-Ce;)Et=vd(Et),de--;for(;0<Ce-de;)ye=vd(ye),Ce--;for(;de--;){if(Et===ye||ye!==null&&Et===ye.alternate)break t;Et=vd(Et),ye=vd(ye)}Et=null}else Et=null;ft!==null&&_m(Ke,Be,ft,Et,!1),St!==null&&ii!==null&&_m(Ke,ii,St,Et,!0)}}e:{if(Be=Te?Rt(Te):window,ft=Be.nodeName&&Be.nodeName.toLowerCase(),ft==="select"||ft==="input"&&Be.type==="file")var _t=yC;else if(gC(Be))if(vC)_t=pD;else{_t=hD;var xt=fD}else(ft=Be.nodeName)&&ft.toLowerCase()==="input"&&(Be.type==="checkbox"||Be.type==="radio")&&(_t=bC);if(_t&&(_t=_t(u,Te))){mC(Ke,_t,x,He);break e}xt&&xt(u,Be,Te),u==="focusout"&&(xt=Be._wrapperState)&&xt.controlled&&Be.type==="number"&&Wr(Be,"number",Be.value)}switch(xt=Te?Rt(Te):window,u){case"focusin":(gC(xt)||xt.contentEditable==="true")&&(Hf=xt,WS=Te,pp=null);break;case"focusout":pp=WS=Hf=null;break;case"mousedown":GS=!0;break;case"contextmenu":case"mouseup":case"dragend":GS=!1,TC(Ke,x,He);break;case"selectionchange":if(Bf)break;case"keydown":case"keyup":TC(Ke,x,He)}var At;if(dp)e:{switch(u){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else zf?xm(u,x)&&(Kt="onCompositionEnd"):u==="keydown"&&x.keyCode===229&&(Kt="onCompositionStart");Kt&&(Ff&&x.locale!=="ko"&&(zf||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&zf&&(At=ne()):(Qn=He,Jn="value"in Qn?Qn.value:Qn.textContent,zf=!0)),xt=wp(Te,Kt),0<xt.length&&(Kt=new ym(Kt,u,null,x,He),Ke.push({event:Kt,listeners:xt}),At?Kt.data=At:(At=hC(x),At!==null&&(Kt.data=At)))),(At=cD?uD(u,x):pC(u,x))&&(Te=wp(Te,"onBeforeInput"),0<Te.length&&(He=new ym("onBeforeInput","beforeinput",null,x,He),Ke.push({event:He,listeners:Te}),He.data=At))}Em(Ke,f)})}function Kf(u,f,x){return{instance:u,listener:f,currentTarget:x}}function wp(u,f){for(var x=f+"Capture",_=[];u!==null;){var A=u,j=A.stateNode;A.tag===5&&j!==null&&(A=j,j=ha(u,x),j!=null&&_.unshift(Kf(u,j,A)),j=ha(u,f),j!=null&&_.push(Kf(u,j,A))),u=u.return}return _}function vd(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function _m(u,f,x,_,A){for(var j=f._reactName,K=[];x!==null&&x!==_;){var ee=x,ae=ee.alternate,Te=ee.stateNode;if(ae!==null&&ae===_)break;ee.tag===5&&Te!==null&&(ee=Te,A?(ae=ha(x,j),ae!=null&&K.unshift(Kf(x,ae,ee))):A||(ae=ha(x,j),ae!=null&&K.push(Kf(x,ae,ee)))),x=x.return}K.length!==0&&u.push({event:f,listeners:K})}var yD=/\r\n?/g,DC=/\u0000|\uFFFD/g;function OC(u){return(typeof u=="string"?u:""+u).replace(yD,`
`).replace(DC,"")}function Pm(u,f,x){if(f=OC(f),OC(u)!==f&&x)throw Error(t(425))}function Tm(){}var Sd=null,bp=null;function xd(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Im=typeof setTimeout=="function"?setTimeout:void 0,jC=typeof clearTimeout=="function"?clearTimeout:void 0,km=typeof Promise=="function"?Promise:void 0,vD=typeof queueMicrotask=="function"?queueMicrotask:typeof km<"u"?function(u){return km.resolve(null).then(u).catch(Wf)}:Im;function Wf(u){setTimeout(function(){throw u})}function Gf(u,f){var x=f,_=0;do{var A=x.nextSibling;if(u.removeChild(x),A&&A.nodeType===8)if(x=A.data,x==="/$"){if(_===0){u.removeChild(A),cs(f);return}_--}else x!=="$"&&x!=="$?"&&x!=="$!"||_++;x=A}while(x);cs(f)}function Ja(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return u}function Rm(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var x=u.data;if(x==="$"||x==="$!"||x==="$?"){if(f===0)return u;f--}else x==="/$"&&f++}u=u.previousSibling}return null}var qf=Math.random().toString(36).slice(2),ma="__reactFiber$"+qf,Cp="__reactProps$"+qf,mc="__reactContainer$"+qf,QS="__reactEvents$"+qf,JS="__reactListeners$"+qf,Yf="__reactHandles$"+qf;function wd(u){var f=u[ma];if(f)return f;for(var x=u.parentNode;x;){if(f=x[mc]||x[ma]){if(x=f.alternate,f.child!==null||x!==null&&x.child!==null)for(u=Rm(u);u!==null;){if(x=u[ma])return x;u=Rm(u)}return f}u=x,x=u.parentNode}return null}function Ep(u){return u=u[ma]||u[mc],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Rt(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(t(33))}function yc(u){return u[Cp]||null}var di=[],xn=-1;function ds(u){return{current:u}}function ur(u){0>xn||(u.current=di[xn],di[xn]=null,xn--)}function gr(u,f){xn++,di[xn]=u.current,u.current=f}var pn={},Yr=ds(pn),fi=ds(!1),ya=pn;function zs(u,f){var x=u.type.contextTypes;if(!x)return pn;var _=u.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===f)return _.__reactInternalMemoizedMaskedChildContext;var A={},j;for(j in x)A[j]=f[j];return _&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=f,u.__reactInternalMemoizedMaskedChildContext=A),A}function hi(u){return u=u.childContextTypes,u!=null}function kl(){ur(fi),ur(Yr)}function Mm(u,f,x){if(Yr.current!==pn)throw Error(t(168));gr(Yr,f),gr(fi,x)}function LC(u,f,x){var _=u.stateNode;if(f=f.childContextTypes,typeof _.getChildContext!="function")return x;_=_.getChildContext();for(var A in _)if(!(A in f))throw Error(t(108,ot(u)||"Unknown",A));return ke({},x,_)}function bd(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||pn,ya=Yr.current,gr(Yr,u),gr(fi,fi.current),!0}function va(u,f,x){var _=u.stateNode;if(!_)throw Error(t(169));x?(u=LC(u,f,ya),_.__reactInternalMemoizedMergedChildContext=u,ur(fi),ur(Yr),gr(Yr,u)):ur(fi),gr(fi,x)}var el=null,_p=!1,Pp=!1;function fu(u){el===null?el=[u]:el.push(u)}function ex(u){_p=!0,fu(u)}function Oo(){if(!Pp&&el!==null){Pp=!0;var u=0,f=dn;try{var x=el;for(dn=1;u<x.length;u++){var _=x[u];do _=_(!0);while(_!==null)}el=null,_p=!1}catch(A){throw el!==null&&(el=el.slice(u+1)),lr(Gt,Oo),A}finally{dn=f,Pp=!1}}return null}var hu=[],pu=0,Xf=null,gu=0,Gi=[],pi=0,Cd=null,jo=1,Rl="";function mu(u,f){hu[pu++]=gu,hu[pu++]=Xf,Xf=u,gu=f}function NC(u,f,x){Gi[pi++]=jo,Gi[pi++]=Rl,Gi[pi++]=Cd,Cd=u;var _=jo;u=Rl;var A=32-Ki(_)-1;_&=~(1<<A),x+=1;var j=32-Ki(f)+A;if(30<j){var K=A-A%5;j=(_&(1<<K)-1).toString(32),_>>=K,A-=K,jo=1<<32-Ki(f)+A|x<<A|_,Rl=j+u}else jo=1<<j|x<<A|_,Rl=u}function tx(u){u.return!==null&&(mu(u,1),NC(u,1,0))}function Am(u){for(;u===Xf;)Xf=hu[--pu],hu[pu]=null,gu=hu[--pu],hu[pu]=null;for(;u===Cd;)Cd=Gi[--pi],Gi[pi]=null,Rl=Gi[--pi],Gi[pi]=null,jo=Gi[--pi],Gi[pi]=null}var fs=null,hs=null,Er=!1,tl=null;function nx(u,f){var x=Ca(5,null,null,0);x.elementType="DELETED",x.stateNode=f,x.return=u,f=u.deletions,f===null?(u.deletions=[x],u.flags|=16):f.push(x)}function rx(u,f){switch(u.tag){case 5:var x=u.type;return f=f.nodeType!==1||x.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(u.stateNode=f,fs=u,hs=Ja(f.firstChild),!0):!1;case 6:return f=u.pendingProps===""||f.nodeType!==3?null:f,f!==null?(u.stateNode=f,fs=u,hs=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(x=Cd!==null?{id:jo,overflow:Rl}:null,u.memoizedState={dehydrated:f,treeContext:x,retryLane:1073741824},x=Ca(18,null,null,0),x.stateNode=f,x.return=u,u.child=x,fs=u,hs=null,!0):!1;default:return!1}}function ix(u){return(u.mode&1)!==0&&(u.flags&128)===0}function ox(u){if(Er){var f=hs;if(f){var x=f;if(!rx(u,f)){if(ix(u))throw Error(t(418));f=Ja(x.nextSibling);var _=fs;f&&rx(u,f)?nx(_,x):(u.flags=u.flags&-4097|2,Er=!1,fs=u)}}else{if(ix(u))throw Error(t(418));u.flags=u.flags&-4097|2,Er=!1,fs=u}}}function FC(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;fs=u}function ti(u){if(u!==fs)return!1;if(!Er)return FC(u),Er=!0,!1;var f;if((f=u.tag!==3)&&!(f=u.tag!==5)&&(f=u.type,f=f!=="head"&&f!=="body"&&!xd(u.type,u.memoizedProps)),f&&(f=hs)){if(ix(u))throw zC(),Error(t(418));for(;f;)nx(u,f),f=Ja(f.nextSibling)}if(FC(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(t(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8){var x=u.data;if(x==="/$"){if(f===0){hs=Ja(u.nextSibling);break e}f--}else x!=="$"&&x!=="$!"&&x!=="$?"||f++}u=u.nextSibling}hs=null}}else hs=fs?Ja(u.stateNode.nextSibling):null;return!0}function zC(){for(var u=hs;u;)u=Ja(u.nextSibling)}function vc(){hs=fs=null,Er=!1}function Tp(u){tl===null?tl=[u]:tl.push(u)}var Ed=O.ReactCurrentBatchConfig;function Ip(u,f,x){if(u=x.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(t(309));var _=x.stateNode}if(!_)throw Error(t(147,u));var A=_,j=""+u;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===j?f.ref:(f=function(K){var ee=A.refs;K===null?delete ee[j]:ee[j]=K},f._stringRef=j,f)}if(typeof u!="string")throw Error(t(284));if(!x._owner)throw Error(t(290,u))}return u}function Zf(u,f){throw u=Object.prototype.toString.call(f),Error(t(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u))}function UC(u){var f=u._init;return f(u._payload)}function $C(u){function f(ye,de){if(u){var Ce=ye.deletions;Ce===null?(ye.deletions=[de],ye.flags|=16):Ce.push(de)}}function x(ye,de){if(!u)return null;for(;de!==null;)f(ye,de),de=de.sibling;return null}function _(ye,de){for(ye=new Map;de!==null;)de.key!==null?ye.set(de.key,de):ye.set(de.index,de),de=de.sibling;return ye}function A(ye,de){return ye=Tu(ye,de),ye.index=0,ye.sibling=null,ye}function j(ye,de,Ce){return ye.index=Ce,u?(Ce=ye.alternate,Ce!==null?(Ce=Ce.index,Ce<de?(ye.flags|=2,de):Ce):(ye.flags|=2,de)):(ye.flags|=1048576,de)}function K(ye){return u&&ye.alternate===null&&(ye.flags|=2),ye}function ee(ye,de,Ce,Ye){return de===null||de.tag!==6?(de=$d(Ce,ye.mode,Ye),de.return=ye,de):(de=A(de,Ce),de.return=ye,de)}function ae(ye,de,Ce,Ye){var _t=Ce.type;return _t===H?He(ye,de,Ce.props.children,Ye,Ce.key):de!==null&&(de.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===le&&UC(_t)===de.type)?(Ye=A(de,Ce.props),Ye.ref=Ip(ye,de,Ce),Ye.return=ye,Ye):(Ye=yy(Ce.type,Ce.key,Ce.props,null,ye.mode,Ye),Ye.ref=Ip(ye,de,Ce),Ye.return=ye,Ye)}function Te(ye,de,Ce,Ye){return de===null||de.tag!==4||de.stateNode.containerInfo!==Ce.containerInfo||de.stateNode.implementation!==Ce.implementation?(de=Lx(Ce,ye.mode,Ye),de.return=ye,de):(de=A(de,Ce.children||[]),de.return=ye,de)}function He(ye,de,Ce,Ye,_t){return de===null||de.tag!==7?(de=Iu(Ce,ye.mode,Ye,_t),de.return=ye,de):(de=A(de,Ce),de.return=ye,de)}function Ke(ye,de,Ce){if(typeof de=="string"&&de!==""||typeof de=="number")return de=$d(""+de,ye.mode,Ce),de.return=ye,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case z:return Ce=yy(de.type,de.key,de.props,null,ye.mode,Ce),Ce.ref=Ip(ye,null,de),Ce.return=ye,Ce;case F:return de=Lx(de,ye.mode,Ce),de.return=ye,de;case le:var Ye=de._init;return Ke(ye,Ye(de._payload),Ce)}if(kr(de)||he(de))return de=Iu(de,ye.mode,Ce,null),de.return=ye,de;Zf(ye,de)}return null}function Be(ye,de,Ce,Ye){var _t=de!==null?de.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return _t!==null?null:ee(ye,de,""+Ce,Ye);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case z:return Ce.key===_t?ae(ye,de,Ce,Ye):null;case F:return Ce.key===_t?Te(ye,de,Ce,Ye):null;case le:return _t=Ce._init,Be(ye,de,_t(Ce._payload),Ye)}if(kr(Ce)||he(Ce))return _t!==null?null:He(ye,de,Ce,Ye,null);Zf(ye,Ce)}return null}function ft(ye,de,Ce,Ye,_t){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return ye=ye.get(Ce)||null,ee(de,ye,""+Ye,_t);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case z:return ye=ye.get(Ye.key===null?Ce:Ye.key)||null,ae(de,ye,Ye,_t);case F:return ye=ye.get(Ye.key===null?Ce:Ye.key)||null,Te(de,ye,Ye,_t);case le:var xt=Ye._init;return ft(ye,de,Ce,xt(Ye._payload),_t)}if(kr(Ye)||he(Ye))return ye=ye.get(Ce)||null,He(de,ye,Ye,_t,null);Zf(de,Ye)}return null}function St(ye,de,Ce,Ye){for(var _t=null,xt=null,At=de,Kt=de=0,zi=null;At!==null&&Kt<Ce.length;Kt++){At.index>Kt?(zi=At,At=null):zi=At.sibling;var Hn=Be(ye,At,Ce[Kt],Ye);if(Hn===null){At===null&&(At=zi);break}u&&At&&Hn.alternate===null&&f(ye,At),de=j(Hn,de,Kt),xt===null?_t=Hn:xt.sibling=Hn,xt=Hn,At=zi}if(Kt===Ce.length)return x(ye,At),Er&&mu(ye,Kt),_t;if(At===null){for(;Kt<Ce.length;Kt++)At=Ke(ye,Ce[Kt],Ye),At!==null&&(de=j(At,de,Kt),xt===null?_t=At:xt.sibling=At,xt=At);return Er&&mu(ye,Kt),_t}for(At=_(ye,At);Kt<Ce.length;Kt++)zi=ft(At,ye,Kt,Ce[Kt],Ye),zi!==null&&(u&&zi.alternate!==null&&At.delete(zi.key===null?Kt:zi.key),de=j(zi,de,Kt),xt===null?_t=zi:xt.sibling=zi,xt=zi);return u&&At.forEach(function(ku){return f(ye,ku)}),Er&&mu(ye,Kt),_t}function Et(ye,de,Ce,Ye){var _t=he(Ce);if(typeof _t!="function")throw Error(t(150));if(Ce=_t.call(Ce),Ce==null)throw Error(t(151));for(var xt=_t=null,At=de,Kt=de=0,zi=null,Hn=Ce.next();At!==null&&!Hn.done;Kt++,Hn=Ce.next()){At.index>Kt?(zi=At,At=null):zi=At.sibling;var ku=Be(ye,At,Hn.value,Ye);if(ku===null){At===null&&(At=zi);break}u&&At&&ku.alternate===null&&f(ye,At),de=j(ku,de,Kt),xt===null?_t=ku:xt.sibling=ku,xt=ku,At=zi}if(Hn.done)return x(ye,At),Er&&mu(ye,Kt),_t;if(At===null){for(;!Hn.done;Kt++,Hn=Ce.next())Hn=Ke(ye,Hn.value,Ye),Hn!==null&&(de=j(Hn,de,Kt),xt===null?_t=Hn:xt.sibling=Hn,xt=Hn);return Er&&mu(ye,Kt),_t}for(At=_(ye,At);!Hn.done;Kt++,Hn=Ce.next())Hn=ft(At,ye,Kt,Hn.value,Ye),Hn!==null&&(u&&Hn.alternate!==null&&At.delete(Hn.key===null?Kt:Hn.key),de=j(Hn,de,Kt),xt===null?_t=Hn:xt.sibling=Hn,xt=Hn);return u&&At.forEach(function(DD){return f(ye,DD)}),Er&&mu(ye,Kt),_t}function ii(ye,de,Ce,Ye){if(typeof Ce=="object"&&Ce!==null&&Ce.type===H&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case z:e:{for(var _t=Ce.key,xt=de;xt!==null;){if(xt.key===_t){if(_t=Ce.type,_t===H){if(xt.tag===7){x(ye,xt.sibling),de=A(xt,Ce.props.children),de.return=ye,ye=de;break e}}else if(xt.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===le&&UC(_t)===xt.type){x(ye,xt.sibling),de=A(xt,Ce.props),de.ref=Ip(ye,xt,Ce),de.return=ye,ye=de;break e}x(ye,xt);break}else f(ye,xt);xt=xt.sibling}Ce.type===H?(de=Iu(Ce.props.children,ye.mode,Ye,Ce.key),de.return=ye,ye=de):(Ye=yy(Ce.type,Ce.key,Ce.props,null,ye.mode,Ye),Ye.ref=Ip(ye,de,Ce),Ye.return=ye,ye=Ye)}return K(ye);case F:e:{for(xt=Ce.key;de!==null;){if(de.key===xt)if(de.tag===4&&de.stateNode.containerInfo===Ce.containerInfo&&de.stateNode.implementation===Ce.implementation){x(ye,de.sibling),de=A(de,Ce.children||[]),de.return=ye,ye=de;break e}else{x(ye,de);break}else f(ye,de);de=de.sibling}de=Lx(Ce,ye.mode,Ye),de.return=ye,ye=de}return K(ye);case le:return xt=Ce._init,ii(ye,de,xt(Ce._payload),Ye)}if(kr(Ce))return St(ye,de,Ce,Ye);if(he(Ce))return Et(ye,de,Ce,Ye);Zf(ye,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"?(Ce=""+Ce,de!==null&&de.tag===6?(x(ye,de.sibling),de=A(de,Ce),de.return=ye,ye=de):(x(ye,de),de=$d(Ce,ye.mode,Ye),de.return=ye,ye=de),K(ye)):x(ye,de)}return ii}var nl=$C(!0),qi=$C(!1),nt=ds(null),Us=null,po=null,sx=null;function ax(){sx=po=Us=null}function lx(u){var f=nt.current;ur(nt),u._currentValue=f}function cx(u,f,x){for(;u!==null;){var _=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),u===x)break;u=u.return}}function Qf(u,f){Us=u,sx=po=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&f&&(Ni=!0),u.firstContext=null)}function ir(u){var f=u._currentValue;if(sx!==u)if(u={context:u,memoizedValue:f,next:null},po===null){if(Us===null)throw Error(t(308));po=u,Us.dependencies={lanes:0,firstContext:u}}else po=po.next=u;return f}var _d=null;function ux(u){_d===null?_d=[u]:_d.push(u)}function BC(u,f,x,_){var A=f.interleaved;return A===null?(x.next=x,ux(f)):(x.next=A.next,A.next=x),f.interleaved=x,Ml(u,_)}function Ml(u,f){u.lanes|=f;var x=u.alternate;for(x!==null&&(x.lanes|=f),x=u,u=u.return;u!==null;)u.childLanes|=f,x=u.alternate,x!==null&&(x.childLanes|=f),x=u,u=u.return;return x.tag===3?x.stateNode:null}var Sa=!1;function yu(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HC(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Sc(u,f){return{eventTime:u,lane:f,tag:0,payload:null,callback:null,next:null}}function vu(u,f,x){var _=u.updateQueue;if(_===null)return null;if(_=_.shared,wn&2){var A=_.pending;return A===null?f.next=f:(f.next=A.next,A.next=f),_.pending=f,Ml(u,x)}return A=_.interleaved,A===null?(f.next=f,ux(_)):(f.next=A.next,A.next=f),_.interleaved=f,Ml(u,x)}function Dm(u,f,x){if(f=f.updateQueue,f!==null&&(f=f.shared,(x&4194240)!==0)){var _=f.lanes;_&=u.pendingLanes,x|=_,f.lanes=x,su(u,x)}}function VC(u,f){var x=u.updateQueue,_=u.alternate;if(_!==null&&(_=_.updateQueue,x===_)){var A=null,j=null;if(x=x.firstBaseUpdate,x!==null){do{var K={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};j===null?A=j=K:j=j.next=K,x=x.next}while(x!==null);j===null?A=j=f:j=j.next=f}else A=j=f;x={baseState:_.baseState,firstBaseUpdate:A,lastBaseUpdate:j,shared:_.shared,effects:_.effects},u.updateQueue=x;return}u=x.lastBaseUpdate,u===null?x.firstBaseUpdate=f:u.next=f,x.lastBaseUpdate=f}function Om(u,f,x,_){var A=u.updateQueue;Sa=!1;var j=A.firstBaseUpdate,K=A.lastBaseUpdate,ee=A.shared.pending;if(ee!==null){A.shared.pending=null;var ae=ee,Te=ae.next;ae.next=null,K===null?j=Te:K.next=Te,K=ae;var He=u.alternate;He!==null&&(He=He.updateQueue,ee=He.lastBaseUpdate,ee!==K&&(ee===null?He.firstBaseUpdate=Te:ee.next=Te,He.lastBaseUpdate=ae))}if(j!==null){var Ke=A.baseState;K=0,He=Te=ae=null,ee=j;do{var Be=ee.lane,ft=ee.eventTime;if((_&Be)===Be){He!==null&&(He=He.next={eventTime:ft,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var St=u,Et=ee;switch(Be=f,ft=x,Et.tag){case 1:if(St=Et.payload,typeof St=="function"){Ke=St.call(ft,Ke,Be);break e}Ke=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Et.payload,Be=typeof St=="function"?St.call(ft,Ke,Be):St,Be==null)break e;Ke=ke({},Ke,Be);break e;case 2:Sa=!0}}ee.callback!==null&&ee.lane!==0&&(u.flags|=64,Be=A.effects,Be===null?A.effects=[ee]:Be.push(ee))}else ft={eventTime:ft,lane:Be,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},He===null?(Te=He=ft,ae=Ke):He=He.next=ft,K|=Be;if(ee=ee.next,ee===null){if(ee=A.shared.pending,ee===null)break;Be=ee,ee=Be.next,Be.next=null,A.lastBaseUpdate=Be,A.shared.pending=null}}while(!0);if(He===null&&(ae=Ke),A.baseState=ae,A.firstBaseUpdate=Te,A.lastBaseUpdate=He,f=A.shared.interleaved,f!==null){A=f;do K|=A.lane,A=A.next;while(A!==f)}else j===null&&(A.shared.lanes=0);jd|=K,u.lanes=K,u.memoizedState=Ke}}function dx(u,f,x){if(u=f.effects,f.effects=null,u!==null)for(f=0;f<u.length;f++){var _=u[f],A=_.callback;if(A!==null){if(_.callback=null,_=x,typeof A!="function")throw Error(t(191,A));A.call(_)}}}var Jf={},Al=ds(Jf),kp=ds(Jf),Rp=ds(Jf);function Pd(u){if(u===Jf)throw Error(t(174));return u}function fx(u,f){switch(gr(Rp,f),gr(kp,u),gr(Al,Jf),u=f.nodeType,u){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:Mr(null,"");break;default:u=u===8?f.parentNode:f,f=u.namespaceURI||null,u=u.tagName,f=Mr(f,u)}ur(Al),gr(Al,f)}function eh(){ur(Al),ur(kp),ur(Rp)}function hx(u){Pd(Rp.current);var f=Pd(Al.current),x=Mr(f,u.type);f!==x&&(gr(kp,u),gr(Al,x))}function px(u){kp.current===u&&(ur(Al),ur(kp))}var Or=ds(0);function jm(u){for(var f=u;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var gx=[];function Mp(){for(var u=0;u<gx.length;u++)gx[u]._workInProgressVersionPrimary=null;gx.length=0}var Mt=O.ReactCurrentDispatcher,gn=O.ReactCurrentBatchConfig,kn=0,Jt=null,dr=null,Ei=null,Lm=!1,Ap=!1,Dp=0,mx=0;function je(){throw Error(t(321))}function gi(u,f){if(f===null)return!1;for(var x=0;x<f.length&&x<u.length;x++)if(!Qa(u[x],f[x]))return!1;return!0}function Ft(u,f,x,_,A,j){if(kn=j,Jt=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Mt.current=u===null||u.memoizedState===null?Zm:Qm,u=x(_,A),Ap){j=0;do{if(Ap=!1,Dp=0,25<=j)throw Error(t(301));j+=1,Ei=dr=null,f.updateQueue=null,Mt.current=Fp,u=x(_,A)}while(Ap)}if(Mt.current=or,f=dr!==null&&dr.next!==null,kn=0,Ei=dr=Jt=null,Lm=!1,f)throw Error(t(300));return u}function Su(){var u=Dp!==0;return Dp=0,u}function ji(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ei===null?Jt.memoizedState=Ei=u:Ei=Ei.next=u,Ei}function Li(){if(dr===null){var u=Jt.alternate;u=u!==null?u.memoizedState:null}else u=dr.next;var f=Ei===null?Jt.memoizedState:Ei.next;if(f!==null)Ei=f,dr=u;else{if(u===null)throw Error(t(310));dr=u,u={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},Ei===null?Jt.memoizedState=Ei=u:Ei=Ei.next=u}return Ei}function ps(u,f){return typeof f=="function"?f(u):f}function Td(u){var f=Li(),x=f.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=u;var _=dr,A=_.baseQueue,j=x.pending;if(j!==null){if(A!==null){var K=A.next;A.next=j.next,j.next=K}_.baseQueue=A=j,x.pending=null}if(A!==null){j=A.next,_=_.baseState;var ee=K=null,ae=null,Te=j;do{var He=Te.lane;if((kn&He)===He)ae!==null&&(ae=ae.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),_=Te.hasEagerState?Te.eagerState:u(_,Te.action);else{var Ke={lane:He,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};ae===null?(ee=ae=Ke,K=_):ae=ae.next=Ke,Jt.lanes|=He,jd|=He}Te=Te.next}while(Te!==null&&Te!==j);ae===null?K=_:ae.next=ee,Qa(_,f.memoizedState)||(Ni=!0),f.memoizedState=_,f.baseState=K,f.baseQueue=ae,x.lastRenderedState=_}if(u=x.interleaved,u!==null){A=u;do j=A.lane,Jt.lanes|=j,jd|=j,A=A.next;while(A!==u)}else A===null&&(x.lanes=0);return[f.memoizedState,x.dispatch]}function xu(u){var f=Li(),x=f.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=u;var _=x.dispatch,A=x.pending,j=f.memoizedState;if(A!==null){x.pending=null;var K=A=A.next;do j=u(j,K.action),K=K.next;while(K!==A);Qa(j,f.memoizedState)||(Ni=!0),f.memoizedState=j,f.baseQueue===null&&(f.baseState=j),x.lastRenderedState=j}return[j,_]}function th(){}function Nm(u,f){var x=Jt,_=Li(),A=f(),j=!Qa(_.memoizedState,A);if(j&&(_.memoizedState=A,Ni=!0),_=_.queue,Op(Um.bind(null,x,_,u),[u]),_.getSnapshot!==f||j||Ei!==null&&Ei.memoizedState.tag&1){if(x.flags|=2048,Id(9,zm.bind(null,x,_,A,f),void 0,null),mi===null)throw Error(t(349));kn&30||Fm(x,f,A)}return A}function Fm(u,f,x){u.flags|=16384,u={getSnapshot:f,value:x},f=Jt.updateQueue,f===null?(f={lastEffect:null,stores:null},Jt.updateQueue=f,f.stores=[u]):(x=f.stores,x===null?f.stores=[u]:x.push(u))}function zm(u,f,x,_){f.value=x,f.getSnapshot=_,$m(f)&&Bm(u)}function Um(u,f,x){return x(function(){$m(f)&&Bm(u)})}function $m(u){var f=u.getSnapshot;u=u.value;try{var x=f();return!Qa(u,x)}catch{return!0}}function Bm(u){var f=Ml(u,1);f!==null&&Ks(f,u,1,-1)}function Hm(u){var f=ji();return typeof u=="function"&&(u=u()),f.memoizedState=f.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:u},f.queue=u,u=u.dispatch=Np.bind(null,Jt,u),[f.memoizedState,u]}function Id(u,f,x,_){return u={tag:u,create:f,destroy:x,deps:_,next:null},f=Jt.updateQueue,f===null?(f={lastEffect:null,stores:null},Jt.updateQueue=f,f.lastEffect=u.next=u):(x=f.lastEffect,x===null?f.lastEffect=u.next=u:(_=x.next,x.next=u,u.next=_,f.lastEffect=u)),u}function Vm(){return Li().memoizedState}function nh(u,f,x,_){var A=ji();Jt.flags|=u,A.memoizedState=Id(1|f,x,void 0,_===void 0?null:_)}function rh(u,f,x,_){var A=Li();_=_===void 0?null:_;var j=void 0;if(dr!==null){var K=dr.memoizedState;if(j=K.destroy,_!==null&&gi(_,K.deps)){A.memoizedState=Id(f,x,j,_);return}}Jt.flags|=u,A.memoizedState=Id(1|f,x,j,_)}function Km(u,f){return nh(8390656,8,u,f)}function Op(u,f){return rh(2048,8,u,f)}function Wm(u,f){return rh(4,2,u,f)}function Gm(u,f){return rh(4,4,u,f)}function jp(u,f){if(typeof f=="function")return u=u(),f(u),function(){f(null)};if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function kd(u,f,x){return x=x!=null?x.concat([u]):null,rh(4,4,jp.bind(null,f,u),x)}function Lp(){}function qm(u,f){var x=Li();f=f===void 0?null:f;var _=x.memoizedState;return _!==null&&f!==null&&gi(f,_[1])?_[0]:(x.memoizedState=[u,f],u)}function Ym(u,f){var x=Li();f=f===void 0?null:f;var _=x.memoizedState;return _!==null&&f!==null&&gi(f,_[1])?_[0]:(u=u(),x.memoizedState=[u,f],u)}function Xm(u,f,x){return kn&21?(Qa(x,f)||(x=lc(),Jt.lanes|=x,jd|=x,u.baseState=!0),f):(u.baseState&&(u.baseState=!1,Ni=!0),u.memoizedState=x)}function KC(u,f){var x=dn;dn=x!==0&&4>x?x:4,u(!0);var _=gn.transition;gn.transition={};try{u(!1),f()}finally{dn=x,gn.transition=_}}function ih(){return Li().memoizedState}function WC(u,f,x){var _=Vs(u);if(x={lane:_,action:x,hasEagerState:!1,eagerState:null,next:null},wu(u))$s(f,x);else if(x=BC(u,f,x,_),x!==null){var A=mr();Ks(x,u,_,A),GC(x,f,_)}}function Np(u,f,x){var _=Vs(u),A={lane:_,action:x,hasEagerState:!1,eagerState:null,next:null};if(wu(u))$s(f,A);else{var j=u.alternate;if(u.lanes===0&&(j===null||j.lanes===0)&&(j=f.lastRenderedReducer,j!==null))try{var K=f.lastRenderedState,ee=j(K,x);if(A.hasEagerState=!0,A.eagerState=ee,Qa(ee,K)){var ae=f.interleaved;ae===null?(A.next=A,ux(f)):(A.next=ae.next,ae.next=A),f.interleaved=A;return}}catch{}finally{}x=BC(u,f,A,_),x!==null&&(A=mr(),Ks(x,u,_,A),GC(x,f,_))}}function wu(u){var f=u.alternate;return u===Jt||f!==null&&f===Jt}function $s(u,f){Ap=Lm=!0;var x=u.pending;x===null?f.next=f:(f.next=x.next,x.next=f),u.pending=f}function GC(u,f,x){if(x&4194240){var _=f.lanes;_&=u.pendingLanes,x|=_,f.lanes=x,su(u,x)}}var or={readContext:ir,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},Zm={readContext:ir,useCallback:function(u,f){return ji().memoizedState=[u,f===void 0?null:f],u},useContext:ir,useEffect:Km,useImperativeHandle:function(u,f,x){return x=x!=null?x.concat([u]):null,nh(4194308,4,jp.bind(null,f,u),x)},useLayoutEffect:function(u,f){return nh(4194308,4,u,f)},useInsertionEffect:function(u,f){return nh(4,2,u,f)},useMemo:function(u,f){var x=ji();return f=f===void 0?null:f,u=u(),x.memoizedState=[u,f],u},useReducer:function(u,f,x){var _=ji();return f=x!==void 0?x(f):f,_.memoizedState=_.baseState=f,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:f},_.queue=u,u=u.dispatch=WC.bind(null,Jt,u),[_.memoizedState,u]},useRef:function(u){var f=ji();return u={current:u},f.memoizedState=u},useState:Hm,useDebugValue:Lp,useDeferredValue:function(u){return ji().memoizedState=u},useTransition:function(){var u=Hm(!1),f=u[0];return u=KC.bind(null,u[1]),ji().memoizedState=u,[f,u]},useMutableSource:function(){},useSyncExternalStore:function(u,f,x){var _=Jt,A=ji();if(Er){if(x===void 0)throw Error(t(407));x=x()}else{if(x=f(),mi===null)throw Error(t(349));kn&30||Fm(_,f,x)}A.memoizedState=x;var j={value:x,getSnapshot:f};return A.queue=j,Km(Um.bind(null,_,j,u),[u]),_.flags|=2048,Id(9,zm.bind(null,_,j,x,f),void 0,null),x},useId:function(){var u=ji(),f=mi.identifierPrefix;if(Er){var x=Rl,_=jo;x=(_&~(1<<32-Ki(_)-1)).toString(32)+x,f=":"+f+"R"+x,x=Dp++,0<x&&(f+="H"+x.toString(32)),f+=":"}else x=mx++,f=":"+f+"r"+x.toString(32)+":";return u.memoizedState=f},unstable_isNewReconciler:!1},Qm={readContext:ir,useCallback:qm,useContext:ir,useEffect:Op,useImperativeHandle:kd,useInsertionEffect:Wm,useLayoutEffect:Gm,useMemo:Ym,useReducer:Td,useRef:Vm,useState:function(){return Td(ps)},useDebugValue:Lp,useDeferredValue:function(u){var f=Li();return Xm(f,dr.memoizedState,u)},useTransition:function(){var u=Td(ps)[0],f=Li().memoizedState;return[u,f]},useMutableSource:th,useSyncExternalStore:Nm,useId:ih,unstable_isNewReconciler:!1},Fp={readContext:ir,useCallback:qm,useContext:ir,useEffect:Op,useImperativeHandle:kd,useInsertionEffect:Wm,useLayoutEffect:Gm,useMemo:Ym,useReducer:xu,useRef:Vm,useState:function(){return xu(ps)},useDebugValue:Lp,useDeferredValue:function(u){var f=Li();return dr===null?f.memoizedState=u:Xm(f,dr.memoizedState,u)},useTransition:function(){var u=xu(ps)[0],f=Li().memoizedState;return[u,f]},useMutableSource:th,useSyncExternalStore:Nm,useId:ih,unstable_isNewReconciler:!1};function gs(u,f){if(u&&u.defaultProps){f=ke({},f),u=u.defaultProps;for(var x in u)f[x]===void 0&&(f[x]=u[x]);return f}return f}function yx(u,f,x,_){f=u.memoizedState,x=x(_,f),x=x==null?f:ke({},f,x),u.memoizedState=x,u.lanes===0&&(u.updateQueue.baseState=x)}var Jm={isMounted:function(u){return(u=u._reactInternals)?rt(u)===u:!1},enqueueSetState:function(u,f,x){u=u._reactInternals;var _=mr(),A=Vs(u),j=Sc(_,A);j.payload=f,x!=null&&(j.callback=x),f=vu(u,j,A),f!==null&&(Ks(f,u,A,_),Dm(f,u,A))},enqueueReplaceState:function(u,f,x){u=u._reactInternals;var _=mr(),A=Vs(u),j=Sc(_,A);j.tag=1,j.payload=f,x!=null&&(j.callback=x),f=vu(u,j,A),f!==null&&(Ks(f,u,A,_),Dm(f,u,A))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var x=mr(),_=Vs(u),A=Sc(x,_);A.tag=2,f!=null&&(A.callback=f),f=vu(u,A,_),f!==null&&(Ks(f,u,_,x),Dm(f,u,_))}};function qC(u,f,x,_,A,j,K){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(_,j,K):f.prototype&&f.prototype.isPureReactComponent?!hp(x,_)||!hp(A,j):!0}function YC(u,f,x){var _=!1,A=pn,j=f.contextType;return typeof j=="object"&&j!==null?j=ir(j):(A=hi(f)?ya:Yr.current,_=f.contextTypes,j=(_=_!=null)?zs(u,A):pn),f=new f(x,j),u.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Jm,u.stateNode=f,f._reactInternals=u,_&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=A,u.__reactInternalMemoizedMaskedChildContext=j),f}function ey(u,f,x,_){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,_),f.state!==u&&Jm.enqueueReplaceState(f,f.state,null)}function vx(u,f,x,_){var A=u.stateNode;A.props=x,A.state=u.memoizedState,A.refs={},yu(u);var j=f.contextType;typeof j=="object"&&j!==null?A.context=ir(j):(j=hi(f)?ya:Yr.current,A.context=zs(u,j)),A.state=u.memoizedState,j=f.getDerivedStateFromProps,typeof j=="function"&&(yx(u,f,j,x),A.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(f=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),f!==A.state&&Jm.enqueueReplaceState(A,A.state,null),Om(u,x,A,_),A.state=u.memoizedState),typeof A.componentDidMount=="function"&&(u.flags|=4194308)}function bu(u,f){try{var x="",_=f;do x+=De(_),_=_.return;while(_);var A=x}catch(j){A=`
Error generating stack: `+j.message+`
`+j.stack}return{value:u,source:f,stack:A,digest:null}}function ty(u,f,x){return{value:u,source:null,stack:x??null,digest:f??null}}function Sx(u,f){try{console.error(f.value)}catch(x){setTimeout(function(){throw x})}}var SD=typeof WeakMap=="function"?WeakMap:Map;function zp(u,f,x){x=Sc(-1,x),x.tag=3,x.payload={element:null};var _=f.value;return x.callback=function(){Eu||(Eu=!0,Gp=_),Sx(u,f)},x}function XC(u,f,x){x=Sc(-1,x),x.tag=3;var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var A=f.value;x.payload=function(){return _(A)},x.callback=function(){Sx(u,f)}}var j=u.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(x.callback=function(){Sx(u,f),typeof _!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var K=f.stack;this.componentDidCatch(f.value,{componentStack:K!==null?K:""})}),x}function xx(u,f,x){var _=u.pingCache;if(_===null){_=u.pingCache=new SD;var A=new Set;_.set(f,A)}else A=_.get(f),A===void 0&&(A=new Set,_.set(f,A));A.has(x)||(A.add(x),u=Dx.bind(null,u,f,x),f.then(u,u))}function wx(u){do{var f;if((f=u.tag===13)&&(f=u.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return u;u=u.return}while(u!==null);return null}function ZC(u,f,x,_,A){return u.mode&1?(u.flags|=65536,u.lanes=A,u):(u===f?u.flags|=65536:(u.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(f=Sc(-1,1),f.tag=2,vu(x,f,1))),x.lanes|=1),u)}var Rd=O.ReactCurrentOwner,Ni=!1;function ni(u,f,x,_){f.child=u===null?qi(f,null,x,_):nl(f,u.child,x,_)}function ny(u,f,x,_,A){x=x.render;var j=f.ref;return Qf(f,A),_=Ft(u,f,x,_,j,A),x=Su(),u!==null&&!Ni?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~A,Yi(u,f,A)):(Er&&x&&tx(f),f.flags|=1,ni(u,f,_,A),f.child)}function ms(u,f,x,_,A){if(u===null){var j=x.type;return typeof j=="function"&&!jx(j)&&j.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(f.tag=15,f.type=j,Md(u,f,j,_,A)):(u=yy(x.type,null,_,f,f.mode,A),u.ref=f.ref,u.return=f,f.child=u)}if(j=u.child,!(u.lanes&A)){var K=j.memoizedProps;if(x=x.compare,x=x!==null?x:hp,x(K,_)&&u.ref===f.ref)return Yi(u,f,A)}return f.flags|=1,u=Tu(j,_),u.ref=f.ref,u.return=f,f.child=u}function Md(u,f,x,_,A){if(u!==null){var j=u.memoizedProps;if(hp(j,_)&&u.ref===f.ref)if(Ni=!1,f.pendingProps=_=j,(u.lanes&A)!==0)u.flags&131072&&(Ni=!0);else return f.lanes=u.lanes,Yi(u,f,A)}return ry(u,f,x,_,A)}function nn(u,f,x){var _=f.pendingProps,A=_.children,j=u!==null?u.memoizedState:null;if(_.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null,transitions:null},gr(lh,Hs),Hs|=x;else{if(!(x&1073741824))return u=j!==null?j.baseLanes|x:x,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:u,cachePool:null,transitions:null},f.updateQueue=null,gr(lh,Hs),Hs|=u,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=j!==null?j.baseLanes:x,gr(lh,Hs),Hs|=_}else j!==null?(_=j.baseLanes|x,f.memoizedState=null):_=x,gr(lh,Hs),Hs|=_;return ni(u,f,A,x),f.child}function Up(u,f){var x=f.ref;(u===null&&x!==null||u!==null&&u.ref!==x)&&(f.flags|=512,f.flags|=2097152)}function ry(u,f,x,_,A){var j=hi(x)?ya:Yr.current;return j=zs(f,j),Qf(f,A),x=Ft(u,f,x,_,j,A),_=Su(),u!==null&&!Ni?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~A,Yi(u,f,A)):(Er&&_&&tx(f),f.flags|=1,ni(u,f,x,A),f.child)}function xD(u,f,x,_,A){if(hi(x)){var j=!0;bd(f)}else j=!1;if(Qf(f,A),f.stateNode===null)xa(u,f),YC(f,x,_),vx(f,x,_,A),_=!0;else if(u===null){var K=f.stateNode,ee=f.memoizedProps;K.props=ee;var ae=K.context,Te=x.contextType;typeof Te=="object"&&Te!==null?Te=ir(Te):(Te=hi(x)?ya:Yr.current,Te=zs(f,Te));var He=x.getDerivedStateFromProps,Ke=typeof He=="function"||typeof K.getSnapshotBeforeUpdate=="function";Ke||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ee!==_||ae!==Te)&&ey(f,K,_,Te),Sa=!1;var Be=f.memoizedState;K.state=Be,Om(f,_,K,A),ae=f.memoizedState,ee!==_||Be!==ae||fi.current||Sa?(typeof He=="function"&&(yx(f,x,He,_),ae=f.memoizedState),(ee=Sa||qC(f,x,ee,_,Be,ae,Te))?(Ke||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(f.flags|=4194308)):(typeof K.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=ae),K.props=_,K.state=ae,K.context=Te,_=ee):(typeof K.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{K=f.stateNode,HC(u,f),ee=f.memoizedProps,Te=f.type===f.elementType?ee:gs(f.type,ee),K.props=Te,Ke=f.pendingProps,Be=K.context,ae=x.contextType,typeof ae=="object"&&ae!==null?ae=ir(ae):(ae=hi(x)?ya:Yr.current,ae=zs(f,ae));var ft=x.getDerivedStateFromProps;(He=typeof ft=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ee!==Ke||Be!==ae)&&ey(f,K,_,ae),Sa=!1,Be=f.memoizedState,K.state=Be,Om(f,_,K,A);var St=f.memoizedState;ee!==Ke||Be!==St||fi.current||Sa?(typeof ft=="function"&&(yx(f,x,ft,_),St=f.memoizedState),(Te=Sa||qC(f,x,Te,_,Be,St,ae)||!1)?(He||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(_,St,ae),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(_,St,ae)),typeof K.componentDidUpdate=="function"&&(f.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof K.componentDidUpdate!="function"||ee===u.memoizedProps&&Be===u.memoizedState||(f.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ee===u.memoizedProps&&Be===u.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=St),K.props=_,K.state=St,K.context=ae,_=Te):(typeof K.componentDidUpdate!="function"||ee===u.memoizedProps&&Be===u.memoizedState||(f.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ee===u.memoizedProps&&Be===u.memoizedState||(f.flags|=1024),_=!1)}return bx(u,f,x,_,j,A)}function bx(u,f,x,_,A,j){Up(u,f);var K=(f.flags&128)!==0;if(!_&&!K)return A&&va(f,x,!1),Yi(u,f,j);_=f.stateNode,Rd.current=f;var ee=K&&typeof x.getDerivedStateFromError!="function"?null:_.render();return f.flags|=1,u!==null&&K?(f.child=nl(f,u.child,null,j),f.child=nl(f,null,ee,j)):ni(u,f,ee,j),f.memoizedState=_.state,A&&va(f,x,!0),f.child}function iy(u){var f=u.stateNode;f.pendingContext?Mm(u,f.pendingContext,f.pendingContext!==f.context):f.context&&Mm(u,f.context,!1),fx(u,f.containerInfo)}function oh(u,f,x,_,A){return vc(),Tp(A),f.flags|=256,ni(u,f,x,_),f.child}var Cx={dehydrated:null,treeContext:null,retryLane:0};function oy(u){return{baseLanes:u,cachePool:null,transitions:null}}function QC(u,f,x){var _=f.pendingProps,A=Or.current,j=!1,K=(f.flags&128)!==0,ee;if((ee=K)||(ee=u!==null&&u.memoizedState===null?!1:(A&2)!==0),ee?(j=!0,f.flags&=-129):(u===null||u.memoizedState!==null)&&(A|=1),gr(Or,A&1),u===null)return ox(f),u=f.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(f.mode&1?u.data==="$!"?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(K=_.children,u=_.fallback,j?(_=f.mode,j=f.child,K={mode:"hidden",children:K},!(_&1)&&j!==null?(j.childLanes=0,j.pendingProps=K):j=ph(K,_,0,null),u=Iu(u,_,x,null),j.return=f,u.return=f,j.sibling=u,f.child=j,f.child.memoizedState=oy(x),f.memoizedState=Cx,u):$p(f,K));if(A=u.memoizedState,A!==null&&(ee=A.dehydrated,ee!==null))return JC(u,f,K,_,ee,A,x);if(j){j=_.fallback,K=f.mode,A=u.child,ee=A.sibling;var ae={mode:"hidden",children:_.children};return!(K&1)&&f.child!==A?(_=f.child,_.childLanes=0,_.pendingProps=ae,f.deletions=null):(_=Tu(A,ae),_.subtreeFlags=A.subtreeFlags&14680064),ee!==null?j=Tu(ee,j):(j=Iu(j,K,x,null),j.flags|=2),j.return=f,_.return=f,_.sibling=j,f.child=_,_=j,j=f.child,K=u.child.memoizedState,K=K===null?oy(x):{baseLanes:K.baseLanes|x,cachePool:null,transitions:K.transitions},j.memoizedState=K,j.childLanes=u.childLanes&~x,f.memoizedState=Cx,_}return j=u.child,u=j.sibling,_=Tu(j,{mode:"visible",children:_.children}),!(f.mode&1)&&(_.lanes=x),_.return=f,_.sibling=null,u!==null&&(x=f.deletions,x===null?(f.deletions=[u],f.flags|=16):x.push(u)),f.child=_,f.memoizedState=null,_}function $p(u,f){return f=ph({mode:"visible",children:f},u.mode,0,null),f.return=u,u.child=f}function sy(u,f,x,_){return _!==null&&Tp(_),nl(f,u.child,null,x),u=$p(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function JC(u,f,x,_,A,j,K){if(x)return f.flags&256?(f.flags&=-257,_=ty(Error(t(422))),sy(u,f,K,_)):f.memoizedState!==null?(f.child=u.child,f.flags|=128,null):(j=_.fallback,A=f.mode,_=ph({mode:"visible",children:_.children},A,0,null),j=Iu(j,A,K,null),j.flags|=2,_.return=f,j.return=f,_.sibling=j,f.child=_,f.mode&1&&nl(f,u.child,null,K),f.child.memoizedState=oy(K),f.memoizedState=Cx,j);if(!(f.mode&1))return sy(u,f,K,null);if(A.data==="$!"){if(_=A.nextSibling&&A.nextSibling.dataset,_)var ee=_.dgst;return _=ee,j=Error(t(419)),_=ty(j,_,void 0),sy(u,f,K,_)}if(ee=(K&u.childLanes)!==0,Ni||ee){if(_=mi,_!==null){switch(K&-K){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(_.suspendedLanes|K)?0:A,A!==0&&A!==j.retryLane&&(j.retryLane=A,Ml(u,A),Ks(_,u,A,-1))}return Mx(),_=ty(Error(t(421))),sy(u,f,K,_)}return A.data==="$?"?(f.flags|=128,f.child=u.child,f=PD.bind(null,u),A._reactRetry=f,null):(u=j.treeContext,hs=Ja(A.nextSibling),fs=f,Er=!0,tl=null,u!==null&&(Gi[pi++]=jo,Gi[pi++]=Rl,Gi[pi++]=Cd,jo=u.id,Rl=u.overflow,Cd=f),f=$p(f,_.children),f.flags|=4096,f)}function Ex(u,f,x){u.lanes|=f;var _=u.alternate;_!==null&&(_.lanes|=f),cx(u.return,f,x)}function ay(u,f,x,_,A){var j=u.memoizedState;j===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:x,tailMode:A}:(j.isBackwards=f,j.rendering=null,j.renderingStartTime=0,j.last=_,j.tail=x,j.tailMode=A)}function ys(u,f,x){var _=f.pendingProps,A=_.revealOrder,j=_.tail;if(ni(u,f,_.children,x),_=Or.current,_&2)_=_&1|2,f.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&Ex(u,x,f);else if(u.tag===19)Ex(u,x,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}_&=1}if(gr(Or,_),!(f.mode&1))f.memoizedState=null;else switch(A){case"forwards":for(x=f.child,A=null;x!==null;)u=x.alternate,u!==null&&jm(u)===null&&(A=x),x=x.sibling;x=A,x===null?(A=f.child,f.child=null):(A=x.sibling,x.sibling=null),ay(f,!1,A,x,j);break;case"backwards":for(x=null,A=f.child,f.child=null;A!==null;){if(u=A.alternate,u!==null&&jm(u)===null){f.child=A;break}u=A.sibling,A.sibling=x,x=A,A=u}ay(f,!0,x,null,j);break;case"together":ay(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function xa(u,f){!(f.mode&1)&&u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2)}function Yi(u,f,x){if(u!==null&&(f.dependencies=u.dependencies),jd|=f.lanes,!(x&f.childLanes))return null;if(u!==null&&f.child!==u.child)throw Error(t(153));if(f.child!==null){for(u=f.child,x=Tu(u,u.pendingProps),f.child=x,x.return=f;u.sibling!==null;)u=u.sibling,x=x.sibling=Tu(u,u.pendingProps),x.return=f;x.sibling=null}return f.child}function ly(u,f,x){switch(f.tag){case 3:iy(f),vc();break;case 5:hx(f);break;case 1:hi(f.type)&&bd(f);break;case 4:fx(f,f.stateNode.containerInfo);break;case 10:var _=f.type._context,A=f.memoizedProps.value;gr(nt,_._currentValue),_._currentValue=A;break;case 13:if(_=f.memoizedState,_!==null)return _.dehydrated!==null?(gr(Or,Or.current&1),f.flags|=128,null):x&f.child.childLanes?QC(u,f,x):(gr(Or,Or.current&1),u=Yi(u,f,x),u!==null?u.sibling:null);gr(Or,Or.current&1);break;case 19:if(_=(x&f.childLanes)!==0,u.flags&128){if(_)return ys(u,f,x);f.flags|=128}if(A=f.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),gr(Or,Or.current),_)break;return null;case 22:case 23:return f.lanes=0,nn(u,f,x)}return Yi(u,f,x)}var sh,Bs,_i,eE;sh=function(u,f){for(var x=f.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Bs=function(){},_i=function(u,f,x,_){var A=u.memoizedProps;if(A!==_){u=f.stateNode,Pd(Al.current);var j=null;switch(x){case"input":A=an(u,A),_=an(u,_),j=[];break;case"select":A=ke({},A,{value:void 0}),_=ke({},_,{value:void 0}),j=[];break;case"textarea":A=Gr(u,A),_=Gr(u,_),j=[];break;default:typeof A.onClick!="function"&&typeof _.onClick=="function"&&(u.onclick=Tm)}Xn(x,_);var K;x=null;for(Te in A)if(!_.hasOwnProperty(Te)&&A.hasOwnProperty(Te)&&A[Te]!=null)if(Te==="style"){var ee=A[Te];for(K in ee)ee.hasOwnProperty(K)&&(x||(x={}),x[K]="")}else Te!=="dangerouslySetInnerHTML"&&Te!=="children"&&Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&Te!=="autoFocus"&&(i.hasOwnProperty(Te)?j||(j=[]):(j=j||[]).push(Te,null));for(Te in _){var ae=_[Te];if(ee=A!=null?A[Te]:void 0,_.hasOwnProperty(Te)&&ae!==ee&&(ae!=null||ee!=null))if(Te==="style")if(ee){for(K in ee)!ee.hasOwnProperty(K)||ae&&ae.hasOwnProperty(K)||(x||(x={}),x[K]="");for(K in ae)ae.hasOwnProperty(K)&&ee[K]!==ae[K]&&(x||(x={}),x[K]=ae[K])}else x||(j||(j=[]),j.push(Te,x)),x=ae;else Te==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ee=ee?ee.__html:void 0,ae!=null&&ee!==ae&&(j=j||[]).push(Te,ae)):Te==="children"?typeof ae!="string"&&typeof ae!="number"||(j=j||[]).push(Te,""+ae):Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&(i.hasOwnProperty(Te)?(ae!=null&&Te==="onScroll"&&er("scroll",u),j||ee===ae||(j=[])):(j=j||[]).push(Te,ae))}x&&(j=j||[]).push("style",x);var Te=j;(f.updateQueue=Te)&&(f.flags|=4)}},eE=function(u,f,x,_){x!==_&&(f.flags|=4)};function Bp(u,f){if(!Er)switch(u.tailMode){case"hidden":f=u.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?u.tail=null:x.sibling=null;break;case"collapsed":x=u.tail;for(var _=null;x!==null;)x.alternate!==null&&(_=x),x=x.sibling;_===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:_.sibling=null}}function go(u){var f=u.alternate!==null&&u.alternate.child===u.child,x=0,_=0;if(f)for(var A=u.child;A!==null;)x|=A.lanes|A.childLanes,_|=A.subtreeFlags&14680064,_|=A.flags&14680064,A.return=u,A=A.sibling;else for(A=u.child;A!==null;)x|=A.lanes|A.childLanes,_|=A.subtreeFlags,_|=A.flags,A.return=u,A=A.sibling;return u.subtreeFlags|=_,u.childLanes=x,f}function _x(u,f,x){var _=f.pendingProps;switch(Am(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return go(f),null;case 1:return hi(f.type)&&kl(),go(f),null;case 3:return _=f.stateNode,eh(),ur(fi),ur(Yr),Mp(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(u===null||u.child===null)&&(ti(f)?f.flags|=4:u===null||u.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,tl!==null&&(Zp(tl),tl=null))),Bs(u,f),go(f),null;case 5:px(f);var A=Pd(Rp.current);if(x=f.type,u!==null&&f.stateNode!=null)_i(u,f,x,_,A),u.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!_){if(f.stateNode===null)throw Error(t(166));return go(f),null}if(u=Pd(Al.current),ti(f)){_=f.stateNode,x=f.type;var j=f.memoizedProps;switch(_[ma]=f,_[Cp]=j,u=(f.mode&1)!==0,x){case"dialog":er("cancel",_),er("close",_);break;case"iframe":case"object":case"embed":er("load",_);break;case"video":case"audio":for(A=0;A<vp.length;A++)er(vp[A],_);break;case"source":er("error",_);break;case"img":case"image":case"link":er("error",_),er("load",_);break;case"details":er("toggle",_);break;case"input":ln(_,j),er("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!j.multiple},er("invalid",_);break;case"textarea":qr(_,j),er("invalid",_)}Xn(x,j),A=null;for(var K in j)if(j.hasOwnProperty(K)){var ee=j[K];K==="children"?typeof ee=="string"?_.textContent!==ee&&(j.suppressHydrationWarning!==!0&&Pm(_.textContent,ee,u),A=["children",ee]):typeof ee=="number"&&_.textContent!==""+ee&&(j.suppressHydrationWarning!==!0&&Pm(_.textContent,ee,u),A=["children",""+ee]):i.hasOwnProperty(K)&&ee!=null&&K==="onScroll"&&er("scroll",_)}switch(x){case"input":Pt(_),br(_,j,!0);break;case"textarea":Pt(_),ko(_);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(_.onclick=Tm)}_=A,f.updateQueue=_,_!==null&&(f.flags|=4)}else{K=A.nodeType===9?A:A.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Rr(x)),u==="http://www.w3.org/1999/xhtml"?x==="script"?(u=K.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof _.is=="string"?u=K.createElement(x,{is:_.is}):(u=K.createElement(x),x==="select"&&(K=u,_.multiple?K.multiple=!0:_.size&&(K.size=_.size))):u=K.createElementNS(u,x),u[ma]=f,u[Cp]=_,sh(u,f,!1,!1),f.stateNode=u;e:{switch(K=Dn(x,_),x){case"dialog":er("cancel",u),er("close",u),A=_;break;case"iframe":case"object":case"embed":er("load",u),A=_;break;case"video":case"audio":for(A=0;A<vp.length;A++)er(vp[A],u);A=_;break;case"source":er("error",u),A=_;break;case"img":case"image":case"link":er("error",u),er("load",u),A=_;break;case"details":er("toggle",u),A=_;break;case"input":ln(u,_),A=an(u,_),er("invalid",u);break;case"option":A=_;break;case"select":u._wrapperState={wasMultiple:!!_.multiple},A=ke({},_,{value:void 0}),er("invalid",u);break;case"textarea":qr(u,_),A=Gr(u,_),er("invalid",u);break;default:A=_}Xn(x,A),ee=A;for(j in ee)if(ee.hasOwnProperty(j)){var ae=ee[j];j==="style"?cn(u,ae):j==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&ss(u,ae)):j==="children"?typeof ae=="string"?(x!=="textarea"||ae!=="")&&Ee(u,ae):typeof ae=="number"&&Ee(u,""+ae):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?ae!=null&&j==="onScroll"&&er("scroll",u):ae!=null&&L(u,j,ae,K))}switch(x){case"input":Pt(u),br(u,_,!1);break;case"textarea":Pt(u),ko(u);break;case"option":_.value!=null&&u.setAttribute("value",""+We(_.value));break;case"select":u.multiple=!!_.multiple,j=_.value,j!=null?Cr(u,!!_.multiple,j,!1):_.defaultValue!=null&&Cr(u,!!_.multiple,_.defaultValue,!0);break;default:typeof A.onClick=="function"&&(u.onclick=Tm)}switch(x){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return go(f),null;case 6:if(u&&f.stateNode!=null)eE(u,f,u.memoizedProps,_);else{if(typeof _!="string"&&f.stateNode===null)throw Error(t(166));if(x=Pd(Rp.current),Pd(Al.current),ti(f)){if(_=f.stateNode,x=f.memoizedProps,_[ma]=f,(j=_.nodeValue!==x)&&(u=fs,u!==null))switch(u.tag){case 3:Pm(_.nodeValue,x,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&Pm(_.nodeValue,x,(u.mode&1)!==0)}j&&(f.flags|=4)}else _=(x.nodeType===9?x:x.ownerDocument).createTextNode(_),_[ma]=f,f.stateNode=_}return go(f),null;case 13:if(ur(Or),_=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Er&&hs!==null&&f.mode&1&&!(f.flags&128))zC(),vc(),f.flags|=98560,j=!1;else if(j=ti(f),_!==null&&_.dehydrated!==null){if(u===null){if(!j)throw Error(t(318));if(j=f.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(t(317));j[ma]=f}else vc(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;go(f),j=!1}else tl!==null&&(Zp(tl),tl=null),j=!0;if(!j)return f.flags&65536?f:null}return f.flags&128?(f.lanes=x,f):(_=_!==null,_!==(u!==null&&u.memoizedState!==null)&&_&&(f.child.flags|=8192,f.mode&1&&(u===null||Or.current&1?Pi===0&&(Pi=3):Mx())),f.updateQueue!==null&&(f.flags|=4),go(f),null);case 4:return eh(),Bs(u,f),u===null&&xp(f.stateNode.containerInfo),go(f),null;case 10:return lx(f.type._context),go(f),null;case 17:return hi(f.type)&&kl(),go(f),null;case 19:if(ur(Or),j=f.memoizedState,j===null)return go(f),null;if(_=(f.flags&128)!==0,K=j.rendering,K===null)if(_)Bp(j,!1);else{if(Pi!==0||u!==null&&u.flags&128)for(u=f.child;u!==null;){if(K=jm(u),K!==null){for(f.flags|=128,Bp(j,!1),_=K.updateQueue,_!==null&&(f.updateQueue=_,f.flags|=4),f.subtreeFlags=0,_=x,x=f.child;x!==null;)j=x,u=_,j.flags&=14680066,K=j.alternate,K===null?(j.childLanes=0,j.lanes=u,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=K.childLanes,j.lanes=K.lanes,j.child=K.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=K.memoizedProps,j.memoizedState=K.memoizedState,j.updateQueue=K.updateQueue,j.type=K.type,u=K.dependencies,j.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),x=x.sibling;return gr(Or,Or.current&1|2),f.child}u=u.sibling}j.tail!==null&&Un()>uh&&(f.flags|=128,_=!0,Bp(j,!1),f.lanes=4194304)}else{if(!_)if(u=jm(K),u!==null){if(f.flags|=128,_=!0,x=u.updateQueue,x!==null&&(f.updateQueue=x,f.flags|=4),Bp(j,!0),j.tail===null&&j.tailMode==="hidden"&&!K.alternate&&!Er)return go(f),null}else 2*Un()-j.renderingStartTime>uh&&x!==1073741824&&(f.flags|=128,_=!0,Bp(j,!1),f.lanes=4194304);j.isBackwards?(K.sibling=f.child,f.child=K):(x=j.last,x!==null?x.sibling=K:f.child=K,j.last=K)}return j.tail!==null?(f=j.tail,j.rendering=f,j.tail=f.sibling,j.renderingStartTime=Un(),f.sibling=null,x=Or.current,gr(Or,_?x&1|2:x&1),f):(go(f),null);case 22:case 23:return Rx(),_=f.memoizedState!==null,u!==null&&u.memoizedState!==null!==_&&(f.flags|=8192),_&&f.mode&1?Hs&1073741824&&(go(f),f.subtreeFlags&6&&(f.flags|=8192)):go(f),null;case 24:return null;case 25:return null}throw Error(t(156,f.tag))}function tE(u,f){switch(Am(f),f.tag){case 1:return hi(f.type)&&kl(),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return eh(),ur(fi),ur(Yr),Mp(),u=f.flags,u&65536&&!(u&128)?(f.flags=u&-65537|128,f):null;case 5:return px(f),null;case 13:if(ur(Or),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(t(340));vc()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return ur(Or),null;case 4:return eh(),null;case 10:return lx(f.type._context),null;case 22:case 23:return Rx(),null;case 24:return null;default:return null}}var Ad=!1,Xi=!1,wD=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Cu(u,f){var x=u.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(_){Xr(u,f,_)}else x.current=null}function Px(u,f,x){try{x()}catch(_){Xr(u,f,_)}}var Tx=!1;function bD(u,f){if(Sd=pe,u=uu(),$f(u)){if("selectionStart"in u)var x={start:u.selectionStart,end:u.selectionEnd};else e:{x=(x=u.ownerDocument)&&x.defaultView||window;var _=x.getSelection&&x.getSelection();if(_&&_.rangeCount!==0){x=_.anchorNode;var A=_.anchorOffset,j=_.focusNode;_=_.focusOffset;try{x.nodeType,j.nodeType}catch{x=null;break e}var K=0,ee=-1,ae=-1,Te=0,He=0,Ke=u,Be=null;t:for(;;){for(var ft;Ke!==x||A!==0&&Ke.nodeType!==3||(ee=K+A),Ke!==j||_!==0&&Ke.nodeType!==3||(ae=K+_),Ke.nodeType===3&&(K+=Ke.nodeValue.length),(ft=Ke.firstChild)!==null;)Be=Ke,Ke=ft;for(;;){if(Ke===u)break t;if(Be===x&&++Te===A&&(ee=K),Be===j&&++He===_&&(ae=K),(ft=Ke.nextSibling)!==null)break;Ke=Be,Be=Ke.parentNode}Ke=ft}x=ee===-1||ae===-1?null:{start:ee,end:ae}}else x=null}x=x||{start:0,end:0}}else x=null;for(bp={focusedElem:u,selectionRange:x},pe=!1,vt=f;vt!==null;)if(f=vt,u=f.child,(f.subtreeFlags&1028)!==0&&u!==null)u.return=f,vt=u;else for(;vt!==null;){f=vt;try{var St=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(St!==null){var Et=St.memoizedProps,ii=St.memoizedState,ye=f.stateNode,de=ye.getSnapshotBeforeUpdate(f.elementType===f.type?Et:gs(f.type,Et),ii);ye.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var Ce=f.stateNode.containerInfo;Ce.nodeType===1?Ce.textContent="":Ce.nodeType===9&&Ce.documentElement&&Ce.removeChild(Ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ye){Xr(f,f.return,Ye)}if(u=f.sibling,u!==null){u.return=f.return,vt=u;break}vt=f.return}return St=Tx,Tx=!1,St}function ah(u,f,x){var _=f.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var A=_=_.next;do{if((A.tag&u)===u){var j=A.destroy;A.destroy=void 0,j!==void 0&&Px(f,x,j)}A=A.next}while(A!==_)}}function cy(u,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&u)===u){var _=x.create;x.destroy=_()}x=x.next}while(x!==f)}}function uy(u){var f=u.ref;if(f!==null){var x=u.stateNode;switch(u.tag){case 5:u=x;break;default:u=x}typeof f=="function"?f(u):f.current=u}}function nE(u){var f=u.alternate;f!==null&&(u.alternate=null,nE(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&(delete f[ma],delete f[Cp],delete f[QS],delete f[JS],delete f[Yf])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function dy(u){return u.tag===5||u.tag===3||u.tag===4}function Hp(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||dy(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Dl(u,f,x){var _=u.tag;if(_===5||_===6)u=u.stateNode,f?x.nodeType===8?x.parentNode.insertBefore(u,f):x.insertBefore(u,f):(x.nodeType===8?(f=x.parentNode,f.insertBefore(u,x)):(f=x,f.appendChild(u)),x=x._reactRootContainer,x!=null||f.onclick!==null||(f.onclick=Tm));else if(_!==4&&(u=u.child,u!==null))for(Dl(u,f,x),u=u.sibling;u!==null;)Dl(u,f,x),u=u.sibling}function Ol(u,f,x){var _=u.tag;if(_===5||_===6)u=u.stateNode,f?x.insertBefore(u,f):x.appendChild(u);else if(_!==4&&(u=u.child,u!==null))for(Ol(u,f,x),u=u.sibling;u!==null;)Ol(u,f,x),u=u.sibling}var jr=null,Lo=!1;function wa(u,f,x){for(x=x.child;x!==null;)xc(u,f,x),x=x.sibling}function xc(u,f,x){if(co&&typeof co.onCommitFiberUnmount=="function")try{co.onCommitFiberUnmount(Cl,x)}catch{}switch(x.tag){case 5:Xi||Cu(x,f);case 6:var _=jr,A=Lo;jr=null,wa(u,f,x),jr=_,Lo=A,jr!==null&&(Lo?(u=jr,x=x.stateNode,u.nodeType===8?u.parentNode.removeChild(x):u.removeChild(x)):jr.removeChild(x.stateNode));break;case 18:jr!==null&&(Lo?(u=jr,x=x.stateNode,u.nodeType===8?Gf(u.parentNode,x):u.nodeType===1&&Gf(u,x),cs(u)):Gf(jr,x.stateNode));break;case 4:_=jr,A=Lo,jr=x.stateNode.containerInfo,Lo=!0,wa(u,f,x),jr=_,Lo=A;break;case 0:case 11:case 14:case 15:if(!Xi&&(_=x.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){A=_=_.next;do{var j=A,K=j.destroy;j=j.tag,K!==void 0&&(j&2||j&4)&&Px(x,f,K),A=A.next}while(A!==_)}wa(u,f,x);break;case 1:if(!Xi&&(Cu(x,f),_=x.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=x.memoizedProps,_.state=x.memoizedState,_.componentWillUnmount()}catch(ee){Xr(x,f,ee)}wa(u,f,x);break;case 21:wa(u,f,x);break;case 22:x.mode&1?(Xi=(_=Xi)||x.memoizedState!==null,wa(u,f,x),Xi=_):wa(u,f,x);break;default:wa(u,f,x)}}function rE(u){var f=u.updateQueue;if(f!==null){u.updateQueue=null;var x=u.stateNode;x===null&&(x=u.stateNode=new wD),f.forEach(function(_){var A=TD.bind(null,u,_);x.has(_)||(x.add(_),_.then(A,A))})}}function rl(u,f){var x=f.deletions;if(x!==null)for(var _=0;_<x.length;_++){var A=x[_];try{var j=u,K=f,ee=K;e:for(;ee!==null;){switch(ee.tag){case 5:jr=ee.stateNode,Lo=!1;break e;case 3:jr=ee.stateNode.containerInfo,Lo=!0;break e;case 4:jr=ee.stateNode.containerInfo,Lo=!0;break e}ee=ee.return}if(jr===null)throw Error(t(160));xc(j,K,A),jr=null,Lo=!1;var ae=A.alternate;ae!==null&&(ae.return=null),A.return=null}catch(Te){Xr(A,f,Te)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)iE(f,u),f=f.sibling}function iE(u,f){var x=u.alternate,_=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(rl(f,u),il(u),_&4){try{ah(3,u,u.return),cy(3,u)}catch(Et){Xr(u,u.return,Et)}try{ah(5,u,u.return)}catch(Et){Xr(u,u.return,Et)}}break;case 1:rl(f,u),il(u),_&512&&x!==null&&Cu(x,x.return);break;case 5:if(rl(f,u),il(u),_&512&&x!==null&&Cu(x,x.return),u.flags&32){var A=u.stateNode;try{Ee(A,"")}catch(Et){Xr(u,u.return,Et)}}if(_&4&&(A=u.stateNode,A!=null)){var j=u.memoizedProps,K=x!==null?x.memoizedProps:j,ee=u.type,ae=u.updateQueue;if(u.updateQueue=null,ae!==null)try{ee==="input"&&j.type==="radio"&&j.name!=null&&Yt(A,j),Dn(ee,K);var Te=Dn(ee,j);for(K=0;K<ae.length;K+=2){var He=ae[K],Ke=ae[K+1];He==="style"?cn(A,Ke):He==="dangerouslySetInnerHTML"?ss(A,Ke):He==="children"?Ee(A,Ke):L(A,He,Ke,Te)}switch(ee){case"input":Yn(A,j);break;case"textarea":li(A,j);break;case"select":var Be=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!j.multiple;var ft=j.value;ft!=null?Cr(A,!!j.multiple,ft,!1):Be!==!!j.multiple&&(j.defaultValue!=null?Cr(A,!!j.multiple,j.defaultValue,!0):Cr(A,!!j.multiple,j.multiple?[]:"",!1))}A[Cp]=j}catch(Et){Xr(u,u.return,Et)}}break;case 6:if(rl(f,u),il(u),_&4){if(u.stateNode===null)throw Error(t(162));A=u.stateNode,j=u.memoizedProps;try{A.nodeValue=j}catch(Et){Xr(u,u.return,Et)}}break;case 3:if(rl(f,u),il(u),_&4&&x!==null&&x.memoizedState.isDehydrated)try{cs(f.containerInfo)}catch(Et){Xr(u,u.return,Et)}break;case 4:rl(f,u),il(u);break;case 13:rl(f,u),il(u),A=u.child,A.flags&8192&&(j=A.memoizedState!==null,A.stateNode.isHidden=j,!j||A.alternate!==null&&A.alternate.memoizedState!==null||(kx=Un())),_&4&&rE(u);break;case 22:if(He=x!==null&&x.memoizedState!==null,u.mode&1?(Xi=(Te=Xi)||He,rl(f,u),Xi=Te):rl(f,u),il(u),_&8192){if(Te=u.memoizedState!==null,(u.stateNode.isHidden=Te)&&!He&&u.mode&1)for(vt=u,He=u.child;He!==null;){for(Ke=vt=He;vt!==null;){switch(Be=vt,ft=Be.child,Be.tag){case 0:case 11:case 14:case 15:ah(4,Be,Be.return);break;case 1:Cu(Be,Be.return);var St=Be.stateNode;if(typeof St.componentWillUnmount=="function"){_=Be,x=Be.return;try{f=_,St.props=f.memoizedProps,St.state=f.memoizedState,St.componentWillUnmount()}catch(Et){Xr(_,x,Et)}}break;case 5:Cu(Be,Be.return);break;case 22:if(Be.memoizedState!==null){sE(Ke);continue}}ft!==null?(ft.return=Be,vt=ft):sE(Ke)}He=He.sibling}e:for(He=null,Ke=u;;){if(Ke.tag===5){if(He===null){He=Ke;try{A=Ke.stateNode,Te?(j=A.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(ee=Ke.stateNode,ae=Ke.memoizedProps.style,K=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,ee.style.display=mt("display",K))}catch(Et){Xr(u,u.return,Et)}}}else if(Ke.tag===6){if(He===null)try{Ke.stateNode.nodeValue=Te?"":Ke.memoizedProps}catch(Et){Xr(u,u.return,Et)}}else if((Ke.tag!==22&&Ke.tag!==23||Ke.memoizedState===null||Ke===u)&&Ke.child!==null){Ke.child.return=Ke,Ke=Ke.child;continue}if(Ke===u)break e;for(;Ke.sibling===null;){if(Ke.return===null||Ke.return===u)break e;He===Ke&&(He=null),Ke=Ke.return}He===Ke&&(He=null),Ke.sibling.return=Ke.return,Ke=Ke.sibling}}break;case 19:rl(f,u),il(u),_&4&&rE(u);break;case 21:break;default:rl(f,u),il(u)}}function il(u){var f=u.flags;if(f&2){try{e:{for(var x=u.return;x!==null;){if(dy(x)){var _=x;break e}x=x.return}throw Error(t(160))}switch(_.tag){case 5:var A=_.stateNode;_.flags&32&&(Ee(A,""),_.flags&=-33);var j=Hp(u);Ol(u,j,A);break;case 3:case 4:var K=_.stateNode.containerInfo,ee=Hp(u);Dl(u,ee,K);break;default:throw Error(t(161))}}catch(ae){Xr(u,u.return,ae)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function Vp(u,f,x){vt=u,oE(u)}function oE(u,f,x){for(var _=(u.mode&1)!==0;vt!==null;){var A=vt,j=A.child;if(A.tag===22&&_){var K=A.memoizedState!==null||Ad;if(!K){var ee=A.alternate,ae=ee!==null&&ee.memoizedState!==null||Xi;ee=Ad;var Te=Xi;if(Ad=K,(Xi=ae)&&!Te)for(vt=A;vt!==null;)K=vt,ae=K.child,K.tag===22&&K.memoizedState!==null?Kp(A):ae!==null?(ae.return=K,vt=ae):Kp(A);for(;j!==null;)vt=j,oE(j),j=j.sibling;vt=A,Ad=ee,Xi=Te}Ix(u)}else A.subtreeFlags&8772&&j!==null?(j.return=A,vt=j):Ix(u)}}function Ix(u){for(;vt!==null;){var f=vt;if(f.flags&8772){var x=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:Xi||cy(5,f);break;case 1:var _=f.stateNode;if(f.flags&4&&!Xi)if(x===null)_.componentDidMount();else{var A=f.elementType===f.type?x.memoizedProps:gs(f.type,x.memoizedProps);_.componentDidUpdate(A,x.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var j=f.updateQueue;j!==null&&dx(f,j,_);break;case 3:var K=f.updateQueue;if(K!==null){if(x=null,f.child!==null)switch(f.child.tag){case 5:x=f.child.stateNode;break;case 1:x=f.child.stateNode}dx(f,K,x)}break;case 5:var ee=f.stateNode;if(x===null&&f.flags&4){x=ee;var ae=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&x.focus();break;case"img":ae.src&&(x.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var Te=f.alternate;if(Te!==null){var He=Te.memoizedState;if(He!==null){var Ke=He.dehydrated;Ke!==null&&cs(Ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Xi||f.flags&512&&uy(f)}catch(Be){Xr(f,f.return,Be)}}if(f===u){vt=null;break}if(x=f.sibling,x!==null){x.return=f.return,vt=x;break}vt=f.return}}function sE(u){for(;vt!==null;){var f=vt;if(f===u){vt=null;break}var x=f.sibling;if(x!==null){x.return=f.return,vt=x;break}vt=f.return}}function Kp(u){for(;vt!==null;){var f=vt;try{switch(f.tag){case 0:case 11:case 15:var x=f.return;try{cy(4,f)}catch(ae){Xr(f,x,ae)}break;case 1:var _=f.stateNode;if(typeof _.componentDidMount=="function"){var A=f.return;try{_.componentDidMount()}catch(ae){Xr(f,A,ae)}}var j=f.return;try{uy(f)}catch(ae){Xr(f,j,ae)}break;case 5:var K=f.return;try{uy(f)}catch(ae){Xr(f,K,ae)}}}catch(ae){Xr(f,f.return,ae)}if(f===u){vt=null;break}var ee=f.sibling;if(ee!==null){ee.return=f.return,vt=ee;break}vt=f.return}}var aE=Math.ceil,fy=O.ReactCurrentDispatcher,Dd=O.ReactCurrentOwner,mo=O.ReactCurrentBatchConfig,wn=0,mi=null,ri=null,Zi=0,Hs=0,lh=ds(0),Pi=0,Od=null,jd=0,Ld=0,Wp=0,ch=null,vs=null,kx=0,uh=1/0,wc=null,Eu=!1,Gp=null,ba=null,hy=!1,_u=null,qp=0,dh=0,fh=null,Nd=-1,Yp=0;function mr(){return wn&6?Un():Nd!==-1?Nd:Nd=Un()}function Vs(u){return u.mode&1?wn&2&&Zi!==0?Zi&-Zi:Ed.transition!==null?(Yp===0&&(Yp=lc()),Yp):(u=dn,u!==0||(u=window.event,u=u===void 0?16:Dr(u.type)),u):1}function Ks(u,f,x,_){if(50<dh)throw dh=0,fh=null,Error(t(185));Pl(u,x,_),(!(wn&2)||u!==mi)&&(u===mi&&(!(wn&2)&&(Ld|=x),Pi===4&&Pu(u,Zi)),Fi(u,_),x===1&&wn===0&&!(f.mode&1)&&(uh=Un()+500,_p&&Oo()))}function Fi(u,f){var x=u.callbackNode;ou(u,f);var _=Os(u,u===mi?Zi:0);if(_===0)x!==null&&zn(x),u.callbackNode=null,u.callbackPriority=0;else if(f=_&-_,u.callbackPriority!==f){if(x!=null&&zn(x),f===1)u.tag===0?ex(Jp.bind(null,u)):fu(Jp.bind(null,u)),vD(function(){!(wn&6)&&Oo()}),x=null;else{switch(pa(_)){case 1:x=Gt;break;case 4:x=Do;break;case 16:x=qa;break;case 536870912:x=Ai;break;default:x=qa}x=hE(x,lE.bind(null,u))}u.callbackPriority=f,u.callbackNode=x}}function lE(u,f){if(Nd=-1,Yp=0,wn&6)throw Error(t(327));var x=u.callbackNode;if(hh()&&u.callbackNode!==x)return null;var _=Os(u,u===mi?Zi:0);if(_===0)return null;if(_&30||_&u.expiredLanes||f)f=my(u,_);else{f=_;var A=wn;wn|=2;var j=cE();(mi!==u||Zi!==f)&&(wc=null,uh=Un()+500,zd(u,f));do try{ED();break}catch(ee){gy(u,ee)}while(!0);ax(),fy.current=j,wn=A,ri!==null?f=0:(mi=null,Zi=0,f=Pi)}if(f!==0){if(f===2&&(A=Xa(u),A!==0&&(_=A,f=Xp(u,A))),f===1)throw x=Od,zd(u,0),Pu(u,_),Fi(u,Un()),x;if(f===6)Pu(u,_);else{if(A=u.current.alternate,!(_&30)&&!Qp(A)&&(f=my(u,_),f===2&&(j=Xa(u),j!==0&&(_=j,f=Xp(u,j))),f===1))throw x=Od,zd(u,0),Pu(u,_),Fi(u,Un()),x;switch(u.finishedWork=A,u.finishedLanes=_,f){case 0:case 1:throw Error(t(345));case 2:Ud(u,vs,wc);break;case 3:if(Pu(u,_),(_&130023424)===_&&(f=kx+500-Un(),10<f)){if(Os(u,0)!==0)break;if(A=u.suspendedLanes,(A&_)!==_){mr(),u.pingedLanes|=u.suspendedLanes&A;break}u.timeoutHandle=Im(Ud.bind(null,u,vs,wc),f);break}Ud(u,vs,wc);break;case 4:if(Pu(u,_),(_&4194240)===_)break;for(f=u.eventTimes,A=-1;0<_;){var K=31-Ki(_);j=1<<K,K=f[K],K>A&&(A=K),_&=~j}if(_=A,_=Un()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*aE(_/1960))-_,10<_){u.timeoutHandle=Im(Ud.bind(null,u,vs,wc),_);break}Ud(u,vs,wc);break;case 5:Ud(u,vs,wc);break;default:throw Error(t(329))}}}return Fi(u,Un()),u.callbackNode===x?lE.bind(null,u):null}function Xp(u,f){var x=ch;return u.current.memoizedState.isDehydrated&&(zd(u,f).flags|=256),u=my(u,f),u!==2&&(f=vs,vs=x,f!==null&&Zp(f)),u}function Zp(u){vs===null?vs=u:vs.push.apply(vs,u)}function Qp(u){for(var f=u;;){if(f.flags&16384){var x=f.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var _=0;_<x.length;_++){var A=x[_],j=A.getSnapshot;A=A.value;try{if(!Qa(j(),A))return!1}catch{return!1}}}if(x=f.child,f.subtreeFlags&16384&&x!==null)x.return=f,f=x;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Pu(u,f){for(f&=~Wp,f&=~Ld,u.suspendedLanes|=f,u.pingedLanes&=~f,u=u.expirationTimes;0<f;){var x=31-Ki(f),_=1<<x;u[x]=-1,f&=~_}}function Jp(u){if(wn&6)throw Error(t(327));hh();var f=Os(u,0);if(!(f&1))return Fi(u,Un()),null;var x=my(u,f);if(u.tag!==0&&x===2){var _=Xa(u);_!==0&&(f=_,x=Xp(u,_))}if(x===1)throw x=Od,zd(u,0),Pu(u,f),Fi(u,Un()),x;if(x===6)throw Error(t(345));return u.finishedWork=u.current.alternate,u.finishedLanes=f,Ud(u,vs,wc),Fi(u,Un()),null}function py(u,f){var x=wn;wn|=1;try{return u(f)}finally{wn=x,wn===0&&(uh=Un()+500,_p&&Oo())}}function Fd(u){_u!==null&&_u.tag===0&&!(wn&6)&&hh();var f=wn;wn|=1;var x=mo.transition,_=dn;try{if(mo.transition=null,dn=1,u)return u()}finally{dn=_,mo.transition=x,wn=f,!(wn&6)&&Oo()}}function Rx(){Hs=lh.current,ur(lh)}function zd(u,f){u.finishedWork=null,u.finishedLanes=0;var x=u.timeoutHandle;if(x!==-1&&(u.timeoutHandle=-1,jC(x)),ri!==null)for(x=ri.return;x!==null;){var _=x;switch(Am(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&kl();break;case 3:eh(),ur(fi),ur(Yr),Mp();break;case 5:px(_);break;case 4:eh();break;case 13:ur(Or);break;case 19:ur(Or);break;case 10:lx(_.type._context);break;case 22:case 23:Rx()}x=x.return}if(mi=u,ri=u=Tu(u.current,null),Zi=Hs=f,Pi=0,Od=null,Wp=Ld=jd=0,vs=ch=null,_d!==null){for(f=0;f<_d.length;f++)if(x=_d[f],_=x.interleaved,_!==null){x.interleaved=null;var A=_.next,j=x.pending;if(j!==null){var K=j.next;j.next=A,_.next=K}x.pending=_}_d=null}return u}function gy(u,f){do{var x=ri;try{if(ax(),Mt.current=or,Lm){for(var _=Jt.memoizedState;_!==null;){var A=_.queue;A!==null&&(A.pending=null),_=_.next}Lm=!1}if(kn=0,Ei=dr=Jt=null,Ap=!1,Dp=0,Dd.current=null,x===null||x.return===null){Pi=1,Od=f,ri=null;break}e:{var j=u,K=x.return,ee=x,ae=f;if(f=Zi,ee.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Te=ae,He=ee,Ke=He.tag;if(!(He.mode&1)&&(Ke===0||Ke===11||Ke===15)){var Be=He.alternate;Be?(He.updateQueue=Be.updateQueue,He.memoizedState=Be.memoizedState,He.lanes=Be.lanes):(He.updateQueue=null,He.memoizedState=null)}var ft=wx(K);if(ft!==null){ft.flags&=-257,ZC(ft,K,ee,j,f),ft.mode&1&&xx(j,Te,f),f=ft,ae=Te;var St=f.updateQueue;if(St===null){var Et=new Set;Et.add(ae),f.updateQueue=Et}else St.add(ae);break e}else{if(!(f&1)){xx(j,Te,f),Mx();break e}ae=Error(t(426))}}else if(Er&&ee.mode&1){var ii=wx(K);if(ii!==null){!(ii.flags&65536)&&(ii.flags|=256),ZC(ii,K,ee,j,f),Tp(bu(ae,ee));break e}}j=ae=bu(ae,ee),Pi!==4&&(Pi=2),ch===null?ch=[j]:ch.push(j),j=K;do{switch(j.tag){case 3:j.flags|=65536,f&=-f,j.lanes|=f;var ye=zp(j,ae,f);VC(j,ye);break e;case 1:ee=ae;var de=j.type,Ce=j.stateNode;if(!(j.flags&128)&&(typeof de.getDerivedStateFromError=="function"||Ce!==null&&typeof Ce.componentDidCatch=="function"&&(ba===null||!ba.has(Ce)))){j.flags|=65536,f&=-f,j.lanes|=f;var Ye=XC(j,ee,f);VC(j,Ye);break e}}j=j.return}while(j!==null)}uE(x)}catch(_t){f=_t,ri===x&&x!==null&&(ri=x=x.return);continue}break}while(!0)}function cE(){var u=fy.current;return fy.current=or,u===null?or:u}function Mx(){(Pi===0||Pi===3||Pi===2)&&(Pi=4),mi===null||!(jd&268435455)&&!(Ld&268435455)||Pu(mi,Zi)}function my(u,f){var x=wn;wn|=2;var _=cE();(mi!==u||Zi!==f)&&(wc=null,zd(u,f));do try{CD();break}catch(A){gy(u,A)}while(!0);if(ax(),wn=x,fy.current=_,ri!==null)throw Error(t(261));return mi=null,Zi=0,Pi}function CD(){for(;ri!==null;)Ax(ri)}function ED(){for(;ri!==null&&!Mi();)Ax(ri)}function Ax(u){var f=Ox(u.alternate,u,Hs);u.memoizedProps=u.pendingProps,f===null?uE(u):ri=f,Dd.current=null}function uE(u){var f=u;do{var x=f.alternate;if(u=f.return,f.flags&32768){if(x=tE(x,f),x!==null){x.flags&=32767,ri=x;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Pi=6,ri=null;return}}else if(x=_x(x,f,Hs),x!==null){ri=x;return}if(f=f.sibling,f!==null){ri=f;return}ri=f=u}while(f!==null);Pi===0&&(Pi=5)}function Ud(u,f,x){var _=dn,A=mo.transition;try{mo.transition=null,dn=1,_D(u,f,x,_)}finally{mo.transition=A,dn=_}return null}function _D(u,f,x,_){do hh();while(_u!==null);if(wn&6)throw Error(t(327));x=u.finishedWork;var A=u.finishedLanes;if(x===null)return null;if(u.finishedWork=null,u.finishedLanes=0,x===u.current)throw Error(t(177));u.callbackNode=null,u.callbackPriority=0;var j=x.lanes|x.childLanes;if(pd(u,j),u===mi&&(ri=mi=null,Zi=0),!(x.subtreeFlags&2064)&&!(x.flags&2064)||hy||(hy=!0,hE(qa,function(){return hh(),null})),j=(x.flags&15990)!==0,x.subtreeFlags&15990||j){j=mo.transition,mo.transition=null;var K=dn;dn=1;var ee=wn;wn|=4,Dd.current=null,bD(u,x),iE(x,u),PC(bp),pe=!!Sd,bp=Sd=null,u.current=x,Vp(x),Ds(),wn=ee,dn=K,mo.transition=j}else u.current=x;if(hy&&(hy=!1,_u=u,qp=A),j=u.pendingLanes,j===0&&(ba=null),fd(x.stateNode),Fi(u,Un()),f!==null)for(_=u.onRecoverableError,x=0;x<f.length;x++)A=f[x],_(A.value,{componentStack:A.stack,digest:A.digest});if(Eu)throw Eu=!1,u=Gp,Gp=null,u;return qp&1&&u.tag!==0&&hh(),j=u.pendingLanes,j&1?u===fh?dh++:(dh=0,fh=u):dh=0,Oo(),null}function hh(){if(_u!==null){var u=pa(qp),f=mo.transition,x=dn;try{if(mo.transition=null,dn=16>u?16:u,_u===null)var _=!1;else{if(u=_u,_u=null,qp=0,wn&6)throw Error(t(331));var A=wn;for(wn|=4,vt=u.current;vt!==null;){var j=vt,K=j.child;if(vt.flags&16){var ee=j.deletions;if(ee!==null){for(var ae=0;ae<ee.length;ae++){var Te=ee[ae];for(vt=Te;vt!==null;){var He=vt;switch(He.tag){case 0:case 11:case 15:ah(8,He,j)}var Ke=He.child;if(Ke!==null)Ke.return=He,vt=Ke;else for(;vt!==null;){He=vt;var Be=He.sibling,ft=He.return;if(nE(He),He===Te){vt=null;break}if(Be!==null){Be.return=ft,vt=Be;break}vt=ft}}}var St=j.alternate;if(St!==null){var Et=St.child;if(Et!==null){St.child=null;do{var ii=Et.sibling;Et.sibling=null,Et=ii}while(Et!==null)}}vt=j}}if(j.subtreeFlags&2064&&K!==null)K.return=j,vt=K;else e:for(;vt!==null;){if(j=vt,j.flags&2048)switch(j.tag){case 0:case 11:case 15:ah(9,j,j.return)}var ye=j.sibling;if(ye!==null){ye.return=j.return,vt=ye;break e}vt=j.return}}var de=u.current;for(vt=de;vt!==null;){K=vt;var Ce=K.child;if(K.subtreeFlags&2064&&Ce!==null)Ce.return=K,vt=Ce;else e:for(K=de;vt!==null;){if(ee=vt,ee.flags&2048)try{switch(ee.tag){case 0:case 11:case 15:cy(9,ee)}}catch(_t){Xr(ee,ee.return,_t)}if(ee===K){vt=null;break e}var Ye=ee.sibling;if(Ye!==null){Ye.return=ee.return,vt=Ye;break e}vt=ee.return}}if(wn=A,Oo(),co&&typeof co.onPostCommitFiberRoot=="function")try{co.onPostCommitFiberRoot(Cl,u)}catch{}_=!0}return _}finally{dn=x,mo.transition=f}}return!1}function dE(u,f,x){f=bu(x,f),f=zp(u,f,1),u=vu(u,f,1),f=mr(),u!==null&&(Pl(u,1,f),Fi(u,f))}function Xr(u,f,x){if(u.tag===3)dE(u,u,x);else for(;f!==null;){if(f.tag===3){dE(f,u,x);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(ba===null||!ba.has(_))){u=bu(x,u),u=XC(f,u,1),f=vu(f,u,1),u=mr(),f!==null&&(Pl(f,1,u),Fi(f,u));break}}f=f.return}}function Dx(u,f,x){var _=u.pingCache;_!==null&&_.delete(f),f=mr(),u.pingedLanes|=u.suspendedLanes&x,mi===u&&(Zi&x)===x&&(Pi===4||Pi===3&&(Zi&130023424)===Zi&&500>Un()-kx?zd(u,0):Wp|=x),Fi(u,f)}function fE(u,f){f===0&&(u.mode&1?(f=ls,ls<<=1,!(ls&130023424)&&(ls=4194304)):f=1);var x=mr();u=Ml(u,f),u!==null&&(Pl(u,f,x),Fi(u,x))}function PD(u){var f=u.memoizedState,x=0;f!==null&&(x=f.retryLane),fE(u,x)}function TD(u,f){var x=0;switch(u.tag){case 13:var _=u.stateNode,A=u.memoizedState;A!==null&&(x=A.retryLane);break;case 19:_=u.stateNode;break;default:throw Error(t(314))}_!==null&&_.delete(f),fE(u,x)}var Ox;Ox=function(u,f,x){if(u!==null)if(u.memoizedProps!==f.pendingProps||fi.current)Ni=!0;else{if(!(u.lanes&x)&&!(f.flags&128))return Ni=!1,ly(u,f,x);Ni=!!(u.flags&131072)}else Ni=!1,Er&&f.flags&1048576&&NC(f,gu,f.index);switch(f.lanes=0,f.tag){case 2:var _=f.type;xa(u,f),u=f.pendingProps;var A=zs(f,Yr.current);Qf(f,x),A=Ft(null,f,_,u,A,x);var j=Su();return f.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,hi(_)?(j=!0,bd(f)):j=!1,f.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,yu(f),A.updater=Jm,f.stateNode=A,A._reactInternals=f,vx(f,_,u,x),f=bx(null,f,_,!0,j,x)):(f.tag=0,Er&&j&&tx(f),ni(null,f,A,x),f=f.child),f;case 16:_=f.elementType;e:{switch(xa(u,f),u=f.pendingProps,A=_._init,_=A(_._payload),f.type=_,A=f.tag=kD(_),u=gs(_,u),A){case 0:f=ry(null,f,_,u,x);break e;case 1:f=xD(null,f,_,u,x);break e;case 11:f=ny(null,f,_,u,x);break e;case 14:f=ms(null,f,_,gs(_.type,u),x);break e}throw Error(t(306,_,""))}return f;case 0:return _=f.type,A=f.pendingProps,A=f.elementType===_?A:gs(_,A),ry(u,f,_,A,x);case 1:return _=f.type,A=f.pendingProps,A=f.elementType===_?A:gs(_,A),xD(u,f,_,A,x);case 3:e:{if(iy(f),u===null)throw Error(t(387));_=f.pendingProps,j=f.memoizedState,A=j.element,HC(u,f),Om(f,_,null,x);var K=f.memoizedState;if(_=K.element,j.isDehydrated)if(j={element:_,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},f.updateQueue.baseState=j,f.memoizedState=j,f.flags&256){A=bu(Error(t(423)),f),f=oh(u,f,_,x,A);break e}else if(_!==A){A=bu(Error(t(424)),f),f=oh(u,f,_,x,A);break e}else for(hs=Ja(f.stateNode.containerInfo.firstChild),fs=f,Er=!0,tl=null,x=qi(f,null,_,x),f.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(vc(),_===A){f=Yi(u,f,x);break e}ni(u,f,_,x)}f=f.child}return f;case 5:return hx(f),u===null&&ox(f),_=f.type,A=f.pendingProps,j=u!==null?u.memoizedProps:null,K=A.children,xd(_,A)?K=null:j!==null&&xd(_,j)&&(f.flags|=32),Up(u,f),ni(u,f,K,x),f.child;case 6:return u===null&&ox(f),null;case 13:return QC(u,f,x);case 4:return fx(f,f.stateNode.containerInfo),_=f.pendingProps,u===null?f.child=nl(f,null,_,x):ni(u,f,_,x),f.child;case 11:return _=f.type,A=f.pendingProps,A=f.elementType===_?A:gs(_,A),ny(u,f,_,A,x);case 7:return ni(u,f,f.pendingProps,x),f.child;case 8:return ni(u,f,f.pendingProps.children,x),f.child;case 12:return ni(u,f,f.pendingProps.children,x),f.child;case 10:e:{if(_=f.type._context,A=f.pendingProps,j=f.memoizedProps,K=A.value,gr(nt,_._currentValue),_._currentValue=K,j!==null)if(Qa(j.value,K)){if(j.children===A.children&&!fi.current){f=Yi(u,f,x);break e}}else for(j=f.child,j!==null&&(j.return=f);j!==null;){var ee=j.dependencies;if(ee!==null){K=j.child;for(var ae=ee.firstContext;ae!==null;){if(ae.context===_){if(j.tag===1){ae=Sc(-1,x&-x),ae.tag=2;var Te=j.updateQueue;if(Te!==null){Te=Te.shared;var He=Te.pending;He===null?ae.next=ae:(ae.next=He.next,He.next=ae),Te.pending=ae}}j.lanes|=x,ae=j.alternate,ae!==null&&(ae.lanes|=x),cx(j.return,x,f),ee.lanes|=x;break}ae=ae.next}}else if(j.tag===10)K=j.type===f.type?null:j.child;else if(j.tag===18){if(K=j.return,K===null)throw Error(t(341));K.lanes|=x,ee=K.alternate,ee!==null&&(ee.lanes|=x),cx(K,x,f),K=j.sibling}else K=j.child;if(K!==null)K.return=j;else for(K=j;K!==null;){if(K===f){K=null;break}if(j=K.sibling,j!==null){j.return=K.return,K=j;break}K=K.return}j=K}ni(u,f,A.children,x),f=f.child}return f;case 9:return A=f.type,_=f.pendingProps.children,Qf(f,x),A=ir(A),_=_(A),f.flags|=1,ni(u,f,_,x),f.child;case 14:return _=f.type,A=gs(_,f.pendingProps),A=gs(_.type,A),ms(u,f,_,A,x);case 15:return Md(u,f,f.type,f.pendingProps,x);case 17:return _=f.type,A=f.pendingProps,A=f.elementType===_?A:gs(_,A),xa(u,f),f.tag=1,hi(_)?(u=!0,bd(f)):u=!1,Qf(f,x),YC(f,_,A),vx(f,_,A,x),bx(null,f,_,!0,u,x);case 19:return ys(u,f,x);case 22:return nn(u,f,x)}throw Error(t(156,f.tag))};function hE(u,f){return lr(u,f)}function ID(u,f,x,_){this.tag=u,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ca(u,f,x,_){return new ID(u,f,x,_)}function jx(u){return u=u.prototype,!(!u||!u.isReactComponent)}function kD(u){if(typeof u=="function")return jx(u)?1:0;if(u!=null){if(u=u.$$typeof,u===ie)return 11;if(u===oe)return 14}return 2}function Tu(u,f){var x=u.alternate;return x===null?(x=Ca(u.tag,f,u.key,u.mode),x.elementType=u.elementType,x.type=u.type,x.stateNode=u.stateNode,x.alternate=u,u.alternate=x):(x.pendingProps=f,x.type=u.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=u.flags&14680064,x.childLanes=u.childLanes,x.lanes=u.lanes,x.child=u.child,x.memoizedProps=u.memoizedProps,x.memoizedState=u.memoizedState,x.updateQueue=u.updateQueue,f=u.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=u.sibling,x.index=u.index,x.ref=u.ref,x}function yy(u,f,x,_,A,j){var K=2;if(_=u,typeof u=="function")jx(u)&&(K=1);else if(typeof u=="string")K=5;else e:switch(u){case H:return Iu(x.children,A,j,f);case V:K=8,A|=8;break;case re:return u=Ca(12,x,f,A|2),u.elementType=re,u.lanes=j,u;case W:return u=Ca(13,x,f,A),u.elementType=W,u.lanes=j,u;case Y:return u=Ca(19,x,f,A),u.elementType=Y,u.lanes=j,u;case ce:return ph(x,A,j,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case q:K=10;break e;case J:K=9;break e;case ie:K=11;break e;case oe:K=14;break e;case le:K=16,_=null;break e}throw Error(t(130,u==null?u:typeof u,""))}return f=Ca(K,x,f,A),f.elementType=u,f.type=_,f.lanes=j,f}function Iu(u,f,x,_){return u=Ca(7,u,_,f),u.lanes=x,u}function ph(u,f,x,_){return u=Ca(22,u,_,f),u.elementType=ce,u.lanes=x,u.stateNode={isHidden:!1},u}function $d(u,f,x){return u=Ca(6,u,null,f),u.lanes=x,u}function Lx(u,f,x){return f=Ca(4,u.children!==null?u.children:[],u.key,f),f.lanes=x,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function pE(u,f,x,_,A){this.tag=f,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_l(0),this.expirationTimes=_l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_l(0),this.identifierPrefix=_,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function vy(u,f,x,_,A,j,K,ee,ae){return u=new pE(u,f,x,ee,ae),f===1?(f=1,j===!0&&(f|=8)):f=0,j=Ca(3,null,null,f),u.current=j,j.stateNode=u,j.memoizedState={element:_,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},yu(j),u}function gE(u,f,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:_==null?null:""+_,children:u,containerInfo:f,implementation:x}}function mE(u){if(!u)return pn;u=u._reactInternals;e:{if(rt(u)!==u||u.tag!==1)throw Error(t(170));var f=u;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(hi(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(t(171))}if(u.tag===1){var x=u.type;if(hi(x))return LC(u,x,f)}return f}function Nx(u,f,x,_,A,j,K,ee,ae){return u=vy(x,_,!0,u,A,j,K,ee,ae),u.context=mE(null),x=u.current,_=mr(),A=Vs(x),j=Sc(_,A),j.callback=f??null,vu(x,j,A),u.current.lanes=A,Pl(u,A,_),Fi(u,_),u}function Sy(u,f,x,_){var A=f.current,j=mr(),K=Vs(A);return x=mE(x),f.context===null?f.context=x:f.pendingContext=x,f=Sc(j,K),f.payload={element:u},_=_===void 0?null:_,_!==null&&(f.callback=_),u=vu(A,f,K),u!==null&&(Ks(u,A,K,j),Dm(u,A,K)),K}function xy(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function yE(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var x=u.retryLane;u.retryLane=x!==0&&x<f?x:f}}function wy(u,f){yE(u,f),(u=u.alternate)&&yE(u,f)}var Fx=typeof reportError=="function"?reportError:function(u){console.error(u)};function by(u){this._internalRoot=u}bc.prototype.render=by.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(t(409));Sy(u,f,null,null)},bc.prototype.unmount=by.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;Fd(function(){Sy(null,u,null,null)}),f[mc]=null}};function bc(u){this._internalRoot=u}bc.prototype.unstable_scheduleHydration=function(u){if(u){var f=ga();u={blockedOn:null,target:u,priority:f};for(var x=0;x<Ns.length&&f!==0&&f<Ns[x].priority;x++);Ns.splice(x,0,u),x===0&&uc(u)}};function zx(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Cy(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function vE(){}function RD(u,f,x,_,A){if(A){if(typeof _=="function"){var j=_;_=function(){var Te=xy(K);j.call(Te)}}var K=Nx(f,_,u,0,null,!1,!1,"",vE);return u._reactRootContainer=K,u[mc]=K.current,xp(u.nodeType===8?u.parentNode:u),Fd(),K}for(;A=u.lastChild;)u.removeChild(A);if(typeof _=="function"){var ee=_;_=function(){var Te=xy(ae);ee.call(Te)}}var ae=vy(u,0,!1,null,null,!1,!1,"",vE);return u._reactRootContainer=ae,u[mc]=ae.current,xp(u.nodeType===8?u.parentNode:u),Fd(function(){Sy(f,ae,x,_)}),ae}function Ey(u,f,x,_,A){var j=x._reactRootContainer;if(j){var K=j;if(typeof A=="function"){var ee=A;A=function(){var ae=xy(K);ee.call(ae)}}Sy(f,K,u,A)}else K=RD(x,f,u,A,_);return xy(K)}au=function(u){switch(u.tag){case 3:var f=u.stateNode;if(f.current.memoizedState.isDehydrated){var x=Wi(f.pendingLanes);x!==0&&(su(f,x|1),Fi(f,Un()),!(wn&6)&&(uh=Un()+500,Oo()))}break;case 13:Fd(function(){var _=Ml(u,1);if(_!==null){var A=mr();Ks(_,u,1,A)}}),wy(u,1)}},Cn=function(u){if(u.tag===13){var f=Ml(u,134217728);if(f!==null){var x=mr();Ks(f,u,134217728,x)}wy(u,134217728)}},js=function(u){if(u.tag===13){var f=Vs(u),x=Ml(u,f);if(x!==null){var _=mr();Ks(x,u,f,_)}wy(u,f)}},ga=function(){return dn},Bt=function(u,f){var x=dn;try{return dn=u,f()}finally{dn=x}},Sn=function(u,f,x){switch(f){case"input":if(Yn(u,x),f=x.name,x.type==="radio"&&f!=null){for(x=u;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<x.length;f++){var _=x[f];if(_!==u&&_.form===u.form){var A=yc(_);if(!A)throw Error(t(90));yn(_),Yn(_,A)}}}break;case"textarea":li(u,x);break;case"select":f=x.value,f!=null&&Cr(u,!!x.multiple,f,!1)}},Ka=py,Wa=Fd;var MD={usingClientEntryPoint:!1,Events:[Ep,Rt,yc,ki,As,py]},gh={findFiberByHostInstance:wd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AD={bundleType:gh.bundleType,version:gh.version,rendererPackageName:gh.rendererPackageName,rendererConfig:gh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=en(u),u===null?null:u.stateNode},findFiberByHostInstance:gh.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_y.isDisabled&&_y.supportsFiber)try{Cl=_y.inject(AD),co=_y}catch{}}return Zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MD,Zs.createPortal=function(u,f){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zx(f))throw Error(t(200));return gE(u,f,null,x)},Zs.createRoot=function(u,f){if(!zx(u))throw Error(t(299));var x=!1,_="",A=Fx;return f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onRecoverableError!==void 0&&(A=f.onRecoverableError)),f=vy(u,1,!1,null,null,x,!1,_,A),u[mc]=f.current,xp(u.nodeType===8?u.parentNode:u),new by(f)},Zs.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(t(188)):(u=Object.keys(u).join(","),Error(t(268,u)));return u=en(f),u=u===null?null:u.stateNode,u},Zs.flushSync=function(u){return Fd(u)},Zs.hydrate=function(u,f,x){if(!Cy(f))throw Error(t(200));return Ey(null,u,f,!0,x)},Zs.hydrateRoot=function(u,f,x){if(!zx(u))throw Error(t(405));var _=x!=null&&x.hydratedSources||null,A=!1,j="",K=Fx;if(x!=null&&(x.unstable_strictMode===!0&&(A=!0),x.identifierPrefix!==void 0&&(j=x.identifierPrefix),x.onRecoverableError!==void 0&&(K=x.onRecoverableError)),f=Nx(f,null,u,1,x??null,A,!1,j,K),u[mc]=f.current,xp(u),_)for(u=0;u<_.length;u++)x=_[u],A=x._getVersion,A=A(x._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[x,A]:f.mutableSourceEagerHydrationData.push(x,A);return new bc(f)},Zs.render=function(u,f,x){if(!Cy(f))throw Error(t(200));return Ey(null,u,f,!1,x)},Zs.unmountComponentAtNode=function(u){if(!Cy(u))throw Error(t(40));return u._reactRootContainer?(Fd(function(){Ey(null,null,u,!1,function(){u._reactRootContainer=null,u[mc]=null})}),!0):!1},Zs.unstable_batchedUpdates=py,Zs.unstable_renderSubtreeIntoContainer=function(u,f,x,_){if(!Cy(x))throw Error(t(200));if(u==null||u._reactInternals===void 0)throw Error(t(38));return Ey(u,f,x,!1,_)},Zs.version="18.3.1-next-f1338f8080-20240426",Zs}var Qs={},AL;function _Y(){if(AL)return Qs;AL=1;var n={};/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return n.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=rv(),t=RL(),r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,i=!1;function s(o){i=o}function l(o){if(!i){for(var a=arguments.length,p=new Array(a>1?a-1:0),S=1;S<a;S++)p[S-1]=arguments[S];d("warn",o,p)}}function c(o){if(!i){for(var a=arguments.length,p=new Array(a>1?a-1:0),S=1;S<a;S++)p[S-1]=arguments[S];d("error",o,p)}}function d(o,a,p){{var S=r.ReactDebugCurrentFrame,b=S.getStackAddendum();b!==""&&(a+="%s",p=p.concat([b]));var T=p.map(function(D){return String(D)});T.unshift("Warning: "+a),Function.prototype.apply.call(console[o],console,T)}}var h=0,g=1,y=2,v=3,w=4,C=5,E=6,P=7,I=8,k=9,L=10,O=11,z=12,F=13,H=14,V=15,re=16,q=17,J=18,ie=19,W=21,Y=22,oe=23,le=24,ce=25,Q=!0,he=!1,ke=!1,te=!1,me=!1,Oe=!0,Ze=!0,De=!0,yt=!0,ot=new Set,We={},Qe={};function gt(o,a){Pt(o,a),Pt(o+"Capture",a)}function Pt(o,a){We[o]&&c("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",o),We[o]=a;{var p=o.toLowerCase();Qe[p]=o,o==="onDoubleClick"&&(Qe.ondblclick=o)}for(var S=0;S<a.length;S++)ot.add(a[S])}var yn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zt=Object.prototype.hasOwnProperty;function an(o){{var a=typeof Symbol=="function"&&Symbol.toStringTag,p=a&&o[Symbol.toStringTag]||o.constructor.name||"Object";return p}}function ln(o){try{return Yt(o),!1}catch{return!0}}function Yt(o){return""+o}function Yn(o,a){if(ln(o))return c("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",a,an(o)),Yt(o)}function br(o){if(ln(o))return c("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",an(o)),Yt(o)}function Wr(o,a){if(ln(o))return c("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",a,an(o)),Yt(o)}function kr(o,a){if(ln(o))return c("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",a,an(o)),Yt(o)}function Cr(o){if(ln(o))return c("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",an(o)),Yt(o)}function Gr(o){if(ln(o))return c("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",an(o)),Yt(o)}var qr=0,li=1,ko=2,Rr=3,Mr=4,Jr=5,ss=6,Ee=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ve=Ee+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",$e=new RegExp("^["+Ee+"]["+ve+"]*$"),mt={},cn={};function vn(o){return Zt.call(cn,o)?!0:Zt.call(mt,o)?!1:$e.test(o)?(cn[o]=!0,!0):(mt[o]=!0,c("Invalid attribute name: `%s`",o),!1)}function Xn(o,a,p){return a!==null?a.type===qr:p?!1:o.length>2&&(o[0]==="o"||o[0]==="O")&&(o[1]==="n"||o[1]==="N")}function Dn(o,a,p,S){if(p!==null&&p.type===qr)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":{if(S)return!1;if(p!==null)return!p.acceptsBooleans;var b=o.toLowerCase().slice(0,5);return b!=="data-"&&b!=="aria-"}default:return!1}}function ar(o,a,p,S){if(a===null||typeof a>"u"||Dn(o,a,p,S))return!0;if(S)return!1;if(p!==null)switch(p.type){case Rr:return!a;case Mr:return a===!1;case Jr:return isNaN(a);case ss:return isNaN(a)||a<1}return!1}function bn(o){return hn.hasOwnProperty(o)?hn[o]:null}function Sn(o,a,p,S,b,T,D){this.acceptsBooleans=a===ko||a===Rr||a===Mr,this.attributeName=S,this.attributeNamespace=b,this.mustUseProperty=p,this.propertyName=o,this.type=a,this.sanitizeURL=T,this.removeEmptyString=D}var hn={},Ii=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];Ii.forEach(function(o){hn[o]=new Sn(o,qr,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0],p=o[1];hn[a]=new Sn(a,li,!1,p,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){hn[o]=new Sn(o,ko,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){hn[o]=new Sn(o,ko,!1,o,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(o){hn[o]=new Sn(o,Rr,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){hn[o]=new Sn(o,Rr,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){hn[o]=new Sn(o,Mr,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){hn[o]=new Sn(o,ss,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){hn[o]=new Sn(o,Jr,!1,o.toLowerCase(),null,!1,!1)});var lo=/[\-\:]([a-z])/g,ki=function(o){return o[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(o){var a=o.replace(lo,ki);hn[a]=new Sn(a,li,!1,o,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(o){var a=o.replace(lo,ki);hn[a]=new Sn(a,li,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace(lo,ki);hn[a]=new Sn(a,li,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){hn[o]=new Sn(o,li,!1,o.toLowerCase(),null,!1,!1)});var As="xlinkHref";hn[As]=new Sn("xlinkHref",li,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){hn[o]=new Sn(o,li,!1,o.toLowerCase(),null,!0,!0)});var Ka=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Wa=!1;function Ro(o){!Wa&&Ka.test(o)&&(Wa=!0,c("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(o)))}function sc(o,a,p,S){if(S.mustUseProperty){var b=S.propertyName;return o[b]}else{Yn(p,a),S.sanitizeURL&&Ro(""+p);var T=S.attributeName,D=null;if(S.type===Mr){if(o.hasAttribute(T)){var N=o.getAttribute(T);return N===""?!0:ar(a,p,S,!1)?N:N===""+p?p:N}}else if(o.hasAttribute(T)){if(ar(a,p,S,!1))return o.getAttribute(T);if(S.type===Rr)return p;D=o.getAttribute(T)}return ar(a,p,S,!1)?D===null?p:D:D===""+p?p:D}}function ha(o,a,p,S){{if(!vn(a))return;if(!o.hasAttribute(a))return p===void 0?void 0:null;var b=o.getAttribute(a);return Yn(p,a),b===""+p?p:b}}function Mo(o,a,p,S){var b=bn(a);if(!Xn(a,b,S)){if(ar(a,p,b,S)&&(p=null),S||b===null){if(vn(a)){var T=a;p===null?o.removeAttribute(T):(Yn(p,a),o.setAttribute(T,""+p))}return}var D=b.mustUseProperty;if(D){var N=b.propertyName;if(p===null){var $=b.type;o[N]=$===Rr?!1:""}else o[N]=p;return}var G=b.attributeName,X=b.attributeNamespace;if(p===null)o.removeAttribute(G);else{var fe=b.type,ue;fe===Rr||fe===Mr&&p===!0?ue="":(Yn(p,G),ue=""+p,b.sanitizeURL&&Ro(ue.toString())),X?o.setAttributeNS(X,G,ue):o.setAttribute(G,ue)}}}var Ci=Symbol.for("react.element"),Ao=Symbol.for("react.portal"),Vi=Symbol.for("react.fragment"),as=Symbol.for("react.strict_mode"),Ri=Symbol.for("react.profiler"),Ga=Symbol.for("react.provider"),se=Symbol.for("react.context"),Ue=Symbol.for("react.forward_ref"),tt=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),$t=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),un=Symbol.for("react.scope"),en=Symbol.for("react.debug_trace_mode"),Ur=Symbol.for("react.offscreen"),lr=Symbol.for("react.legacy_hidden"),zn=Symbol.for("react.cache"),Mi=Symbol.for("react.tracing_marker"),Ds=Symbol.iterator,Un="@@iterator";function Sr(o){if(o===null||typeof o!="object")return null;var a=Ds&&o[Ds]||o[Un];return typeof a=="function"?a:null}var Gt=Object.assign,Do=0,qa,jf,Ai,Cl,co,fd,Ki;function hd(){}hd.__reactDisabledLog=!0;function Lf(){{if(Do===0){qa=console.log,jf=console.info,Ai=console.warn,Cl=console.error,co=console.group,fd=console.groupCollapsed,Ki=console.groupEnd;var o={configurable:!0,enumerable:!0,value:hd,writable:!0};Object.defineProperties(console,{info:o,log:o,warn:o,error:o,group:o,groupCollapsed:o,groupEnd:o})}Do++}}function ac(){{if(Do--,Do===0){var o={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Gt({},o,{value:qa}),info:Gt({},o,{value:jf}),warn:Gt({},o,{value:Ai}),error:Gt({},o,{value:Cl}),group:Gt({},o,{value:co}),groupCollapsed:Gt({},o,{value:fd}),groupEnd:Gt({},o,{value:Ki})})}Do<0&&c("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ya=r.ReactCurrentDispatcher,ls;function Wi(o,a,p){{if(ls===void 0)try{throw Error()}catch(b){var S=b.stack.trim().match(/\n( *(at )?)/);ls=S&&S[1]||""}return`
`+ls+o}}var Os=!1,El;{var ou=typeof WeakMap=="function"?WeakMap:Map;El=new ou}function Xa(o,a){if(!o||Os)return"";{var p=El.get(o);if(p!==void 0)return p}var S;Os=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var T;T=Ya.current,Ya.current=null,Lf();try{if(a){var D=function(){throw Error()};if(Object.defineProperty(D.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(D,[])}catch(Ie){S=Ie}Reflect.construct(o,[],D)}else{try{D.call()}catch(Ie){S=Ie}o.call(D.prototype)}}else{try{throw Error()}catch(Ie){S=Ie}o()}}catch(Ie){if(Ie&&S&&typeof Ie.stack=="string"){for(var N=Ie.stack.split(`
`),$=S.stack.split(`
`),G=N.length-1,X=$.length-1;G>=1&&X>=0&&N[G]!==$[X];)X--;for(;G>=1&&X>=0;G--,X--)if(N[G]!==$[X]){if(G!==1||X!==1)do if(G--,X--,X<0||N[G]!==$[X]){var fe=`
`+N[G].replace(" at new "," at ");return o.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",o.displayName)),typeof o=="function"&&El.set(o,fe),fe}while(G>=1&&X>=0);break}}}finally{Os=!1,Ya.current=T,ac(),Error.prepareStackTrace=b}var ue=o?o.displayName||o.name:"",_e=ue?Wi(ue):"";return typeof o=="function"&&El.set(o,_e),_e}function lc(o,a,p){return Xa(o,!0)}function _l(o,a,p){return Xa(o,!1)}function Pl(o){var a=o.prototype;return!!(a&&a.isReactComponent)}function pd(o,a,p){if(o==null)return"";if(typeof o=="function")return Xa(o,Pl(o));if(typeof o=="string")return Wi(o);switch(o){case tt:return Wi("Suspense");case rt:return Wi("SuspenseList")}if(typeof o=="object")switch(o.$$typeof){case Ue:return _l(o.render);case $t:return pd(o.type,a,p);case Vt:{var S=o,b=S._payload,T=S._init;try{return pd(T(b),a,p)}catch{}}}return""}function su(o){switch(o._debugOwner&&o._debugOwner.type,o._debugSource,o.tag){case C:return Wi(o.type);case re:return Wi("Lazy");case F:return Wi("Suspense");case ie:return Wi("SuspenseList");case h:case y:case V:return _l(o.type);case O:return _l(o.type.render);case g:return lc(o.type);default:return""}}function dn(o){try{var a="",p=o;do a+=su(p),p=p.return;while(p);return a}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}function pa(o,a,p){var S=o.displayName;if(S)return S;var b=a.displayName||a.name||"";return b!==""?p+"("+b+")":p}function au(o){return o.displayName||"Context"}function Cn(o){if(o==null)return null;if(typeof o.tag=="number"&&c("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case Vi:return"Fragment";case Ao:return"Portal";case Ri:return"Profiler";case as:return"StrictMode";case tt:return"Suspense";case rt:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case se:var a=o;return au(a)+".Consumer";case Ga:var p=o;return au(p._context)+".Provider";case Ue:return pa(o,o.render,"ForwardRef");case $t:var S=o.displayName||null;return S!==null?S:Cn(o.type)||"Memo";case Vt:{var b=o,T=b._payload,D=b._init;try{return Cn(D(T))}catch{return null}}}return null}function js(o,a,p){var S=a.displayName||a.name||"";return o.displayName||(S!==""?p+"("+S+")":p)}function ga(o){return o.displayName||"Context"}function Bt(o){var a=o.tag,p=o.type;switch(a){case le:return"Cache";case k:var S=p;return ga(S)+".Consumer";case L:var b=p;return ga(b._context)+".Provider";case J:return"DehydratedFragment";case O:return js(p,p.render,"ForwardRef");case P:return"Fragment";case C:return p;case w:return"Portal";case v:return"Root";case E:return"Text";case re:return Cn(p);case I:return p===as?"StrictMode":"Mode";case Y:return"Offscreen";case z:return"Profiler";case W:return"Scope";case F:return"Suspense";case ie:return"SuspenseList";case ce:return"TracingMarker";case g:case h:case q:case y:case H:case V:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;break}return null}var cc=r.ReactDebugCurrentFrame,ci=null,uo=!1;function $r(){{if(ci===null)return null;var o=ci._debugOwner;if(o!==null&&typeof o<"u")return Bt(o)}return null}function Ls(){return ci===null?"":dn(ci)}function Ar(){cc.getCurrentStack=null,ci=null,uo=!1}function $n(o){cc.getCurrentStack=o===null?null:Ls,ci=o,uo=!1}function Ns(){return ci}function fo(o){uo=o}function Di(o){return""+o}function Oi(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return Gr(o),o;default:return""}}var Nf={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function uc(o,a){Nf[a.type]||a.onChange||a.onInput||a.readOnly||a.disabled||a.value==null||c("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),a.onChange||a.readOnly||a.disabled||a.checked==null||c("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function Fs(o){var a=o.type,p=o.nodeName;return p&&p.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function dc(o){return o._valueTracker}function lu(o){o._valueTracker=null}function fc(o){var a="";return o&&(Fs(o)?a=o.checked?"true":"false":a=o.value),a}function cs(o){var a=Fs(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,a);Gr(o[a]);var S=""+o[a];if(!(o.hasOwnProperty(a)||typeof p>"u"||typeof p.get!="function"||typeof p.set!="function")){var b=p.get,T=p.set;Object.defineProperty(o,a,{configurable:!0,get:function(){return b.call(this)},set:function(N){Gr(N),S=""+N,T.call(this,N)}}),Object.defineProperty(o,a,{enumerable:p.enumerable});var D={getValue:function(){return S},setValue:function(N){Gr(N),S=""+N},stopTracking:function(){lu(o),delete o[a]}};return D}}function Z(o){dc(o)||(o._valueTracker=cs(o))}function pe(o){if(!o)return!1;var a=dc(o);if(!a)return!0;var p=a.getValue(),S=fc(o);return S!==p?(a.setValue(S),!0):!1}function ze(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var ct=!1,Fn=!1,Lt=!1,rr=!1;function Dr(o){var a=o.type==="checkbox"||o.type==="radio";return a?o.checked!=null:o.value!=null}function Qn(o,a){var p=o,S=a.checked,b=Gt({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??p._wrapperState.initialChecked});return b}function Jn(o,a){uc("input",a),a.checked!==void 0&&a.defaultChecked!==void 0&&!Fn&&(c("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",$r()||"A component",a.type),Fn=!0),a.value!==void 0&&a.defaultValue!==void 0&&!ct&&(c("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",$r()||"A component",a.type),ct=!0);var p=o,S=a.defaultValue==null?"":a.defaultValue;p._wrapperState={initialChecked:a.checked!=null?a.checked:a.defaultChecked,initialValue:Oi(a.value!=null?a.value:S),controlled:Dr(a)}}function B(o,a){var p=o,S=a.checked;S!=null&&Mo(p,"checked",S,!1)}function ne(o,a){var p=o;{var S=Dr(a);!p._wrapperState.controlled&&S&&!rr&&(c("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),rr=!0),p._wrapperState.controlled&&!S&&!Lt&&(c("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Lt=!0)}B(o,a);var b=Oi(a.value),T=a.type;if(b!=null)T==="number"?(b===0&&p.value===""||p.value!=b)&&(p.value=Di(b)):p.value!==Di(b)&&(p.value=Di(b));else if(T==="submit"||T==="reset"){p.removeAttribute("value");return}a.hasOwnProperty("value")?st(p,a.type,b):a.hasOwnProperty("defaultValue")&&st(p,a.type,Oi(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(p.defaultChecked=!!a.defaultChecked)}function ge(o,a,p){var S=o;if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var b=a.type,T=b==="submit"||b==="reset";if(T&&(a.value===void 0||a.value===null))return;var D=Di(S._wrapperState.initialValue);p||D!==S.value&&(S.value=D),S.defaultValue=D}var N=S.name;N!==""&&(S.name=""),S.defaultChecked=!S.defaultChecked,S.defaultChecked=!!S._wrapperState.initialChecked,N!==""&&(S.name=N)}function Re(o,a){var p=o;ne(p,a),Ve(p,a)}function Ve(o,a){var p=a.name;if(a.type==="radio"&&p!=null){for(var S=o;S.parentNode;)S=S.parentNode;Yn(p,"name");for(var b=S.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),T=0;T<b.length;T++){var D=b[T];if(!(D===o||D.form!==o.form)){var N=jE(D);if(!N)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");pe(D),ne(D,N)}}}}function st(o,a,p){(a!=="number"||ze(o.ownerDocument)!==o)&&(p==null?o.defaultValue=Di(o._wrapperState.initialValue):o.defaultValue!==Di(p)&&(o.defaultValue=Di(p)))}var Je=!1,kt=!1,Qt=!1;function On(o,a){a.value==null&&(typeof a.children=="object"&&a.children!==null?e.Children.forEach(a.children,function(p){p!=null&&(typeof p=="string"||typeof p=="number"||kt||(kt=!0,c("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):a.dangerouslySetInnerHTML!=null&&(Qt||(Qt=!0,c("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),a.selected!=null&&!Je&&(c("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Je=!0)}function Bn(o,a){a.value!=null&&o.setAttribute("value",Di(Oi(a.value)))}var cr=Array.isArray;function tn(o){return cr(o)}var pr;pr=!1;function ei(){var o=$r();return o?`

Check the render method of \``+o+"`.":""}var gd=["value","defaultValue"];function cp(o){{uc("select",o);for(var a=0;a<gd.length;a++){var p=gd[a];if(o[p]!=null){var S=tn(o[p]);o.multiple&&!S?c("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",p,ei()):!o.multiple&&S&&c("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",p,ei())}}}}function hc(o,a,p,S){var b=o.options;if(a){for(var T=p,D={},N=0;N<T.length;N++)D["$"+T[N]]=!0;for(var $=0;$<b.length;$++){var G=D.hasOwnProperty("$"+b[$].value);b[$].selected!==G&&(b[$].selected=G),G&&S&&(b[$].defaultSelected=!0)}}else{for(var X=Di(Oi(p)),fe=null,ue=0;ue<b.length;ue++){if(b[ue].value===X){b[ue].selected=!0,S&&(b[ue].defaultSelected=!0);return}fe===null&&!b[ue].disabled&&(fe=b[ue])}fe!==null&&(fe.selected=!0)}}function md(o,a){return Gt({},a,{value:void 0})}function up(o,a){var p=o;cp(a),p._wrapperState={wasMultiple:!!a.multiple},a.value!==void 0&&a.defaultValue!==void 0&&!pr&&(c("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),pr=!0)}function zS(o,a){var p=o;p.multiple=!!a.multiple;var S=a.value;S!=null?hc(p,!!a.multiple,S,!1):a.defaultValue!=null&&hc(p,!!a.multiple,a.defaultValue,!0)}function mm(o,a){var p=o,S=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?hc(p,!!a.multiple,b,!1):S!==!!a.multiple&&(a.defaultValue!=null?hc(p,!!a.multiple,a.defaultValue,!0):hc(p,!!a.multiple,a.multiple?[]:"",!1))}function US(o,a){var p=o,S=a.value;S!=null&&hc(p,!!a.multiple,S,!1)}var sC=!1;function ym(o,a){var p=o;if(a.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var S=Gt({},a,{value:void 0,defaultValue:void 0,children:Di(p._wrapperState.initialValue)});return S}function aC(o,a){var p=o;uc("textarea",a),a.value!==void 0&&a.defaultValue!==void 0&&!sC&&(c("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",$r()||"A component"),sC=!0);var S=a.value;if(S==null){var b=a.children,T=a.defaultValue;if(b!=null){c("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(T!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(tn(b)){if(b.length>1)throw new Error("<textarea> can only have at most one child.");b=b[0]}T=b}}T==null&&(T=""),S=T}p._wrapperState={initialValue:Oi(S)}}function lC(o,a){var p=o,S=Oi(a.value),b=Oi(a.defaultValue);if(S!=null){var T=Di(S);T!==p.value&&(p.value=T),a.defaultValue==null&&p.defaultValue!==T&&(p.defaultValue=T)}b!=null&&(p.defaultValue=Di(b))}function cC(o,a){var p=o,S=p.textContent;S===p._wrapperState.initialValue&&S!==""&&S!==null&&(p.value=S)}function sD(o,a){lC(o,a)}var Za="http://www.w3.org/1999/xhtml",aD="http://www.w3.org/1998/Math/MathML",$S="http://www.w3.org/2000/svg";function BS(o){switch(o){case"svg":return $S;case"math":return aD;default:return Za}}function vm(o,a){return o==null||o===Za?BS(a):o===$S&&a==="foreignObject"?Za:o}var lD=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,p,S,b){MSApp.execUnsafeLocalFunction(function(){return o(a,p,S,b)})}:o},Sm,uC=lD(function(o,a){if(o.namespaceURI===$S&&!("innerHTML"in o)){Sm=Sm||document.createElement("div"),Sm.innerHTML="<svg>"+a.valueOf().toString()+"</svg>";for(var p=Sm.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;p.firstChild;)o.appendChild(p.firstChild);return}o.innerHTML=a}),us=1,pc=3,ui=8,gc=9,dp=11,cu=function(o,a){if(a){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===pc){p.nodeValue=a;return}}o.textContent=a},cD={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},Ff={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function dC(o,a){return o+a.charAt(0).toUpperCase()+a.substring(1)}var fC=["Webkit","ms","Moz","O"];Object.keys(Ff).forEach(function(o){fC.forEach(function(a){Ff[dC(a,o)]=Ff[o]})});function xm(o,a,p){var S=a==null||typeof a=="boolean"||a==="";return S?"":!p&&typeof a=="number"&&a!==0&&!(Ff.hasOwnProperty(o)&&Ff[o])?a+"px":(kr(a,o),(""+a).trim())}var hC=/([A-Z])/g,zf=/^ms-/;function uD(o){return o.replace(hC,"-$1").toLowerCase().replace(zf,"-ms-")}var pC=function(){};{var dD=/^(?:webkit|moz|o)[A-Z]/,gC=/^-ms-/,mC=/-(.)/g,Uf=/;\s*$/,Tl={},HS={},fp=!1,yC=!1,vC=function(o){return o.replace(mC,function(a,p){return p.toUpperCase()})},VS=function(o){Tl.hasOwnProperty(o)&&Tl[o]||(Tl[o]=!0,c("Unsupported style property %s. Did you mean %s?",o,vC(o.replace(gC,"ms-"))))},KS=function(o){Tl.hasOwnProperty(o)&&Tl[o]||(Tl[o]=!0,c("Unsupported vendor-prefixed style property %s. Did you mean %s?",o,o.charAt(0).toUpperCase()+o.slice(1)))},SC=function(o,a){HS.hasOwnProperty(a)&&HS[a]||(HS[a]=!0,c(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,o,a.replace(Uf,"")))},xC=function(o,a){fp||(fp=!0,c("`NaN` is an invalid value for the `%s` css style property.",o))},wC=function(o,a){yC||(yC=!0,c("`Infinity` is an invalid value for the `%s` css style property.",o))};pC=function(o,a){o.indexOf("-")>-1?VS(o):dD.test(o)?KS(o):Uf.test(a)&&SC(o,a),typeof a=="number"&&(isNaN(a)?xC(o,a):isFinite(a)||wC(o,a))}}var fD=pC;function hD(o){{var a="",p="";for(var S in o)if(o.hasOwnProperty(S)){var b=o[S];if(b!=null){var T=S.indexOf("--")===0;a+=p+(T?S:uD(S))+":",a+=xm(S,b,T),p=";"}}return a||null}}function bC(o,a){var p=o.style;for(var S in a)if(a.hasOwnProperty(S)){var b=S.indexOf("--")===0;b||fD(S,a[S]);var T=xm(S,a[S],b);S==="float"&&(S="cssFloat"),b?p.setProperty(S,T):p[S]=T}}function pD(o){return o==null||typeof o=="boolean"||o===""}function CC(o){var a={};for(var p in o)for(var S=cD[p]||[p],b=0;b<S.length;b++)a[S[b]]=p;return a}function Qa(o,a){{if(!a)return;var p=CC(o),S=CC(a),b={};for(var T in p){var D=p[T],N=S[T];if(N&&D!==N){var $=D+","+N;if(b[$])continue;b[$]=!0,c("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",pD(o[D])?"Removing":"Updating",D,N)}}}}var hp={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},EC=Gt({menuitem:!0},hp),_C="__html";function wm(o,a){if(a){if(EC[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw new Error(o+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof a.dangerouslySetInnerHTML!="object"||!(_C in a.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!a.suppressContentEditableWarning&&a.contentEditable&&a.children!=null&&c("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),a.style!=null&&typeof a.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function uu(o,a){if(o.indexOf("-")===-1)return typeof a.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $f={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},PC={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Bf={},Hf=new RegExp("^(aria)-["+ve+"]*$"),WS=new RegExp("^(aria)[A-Z]["+ve+"]*$");function pp(o,a){{if(Zt.call(Bf,a)&&Bf[a])return!0;if(WS.test(a)){var p="aria-"+a.slice(4).toLowerCase(),S=PC.hasOwnProperty(p)?p:null;if(S==null)return c("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",a),Bf[a]=!0,!0;if(a!==S)return c("Invalid ARIA attribute `%s`. Did you mean `%s`?",a,S),Bf[a]=!0,!0}if(Hf.test(a)){var b=a.toLowerCase(),T=PC.hasOwnProperty(b)?b:null;if(T==null)return Bf[a]=!0,!1;if(a!==T)return c("Unknown ARIA attribute `%s`. Did you mean `%s`?",a,T),Bf[a]=!0,!0}}return!0}function GS(o,a){{var p=[];for(var S in a){var b=pp(o,S);b||p.push(S)}var T=p.map(function(D){return"`"+D+"`"}).join(", ");p.length===1?c("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",T,o):p.length>1&&c("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",T,o)}}function TC(o,a){uu(o,a)||GS(o,a)}var gp=!1;function Vf(o,a){{if(o!=="input"&&o!=="textarea"&&o!=="select")return;a!=null&&a.value===null&&!gp&&(gp=!0,o==="select"&&a.multiple?c("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",o):c("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",o))}}var bm=function(){};{var ho={},mp=/^on./,IC=/^on[^A-Z]/,kC=new RegExp("^(aria)-["+ve+"]*$"),RC=new RegExp("^(aria)[A-Z]["+ve+"]*$");bm=function(o,a,p,S){if(Zt.call(ho,a)&&ho[a])return!0;var b=a.toLowerCase();if(b==="onfocusin"||b==="onfocusout")return c("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),ho[a]=!0,!0;if(S!=null){var T=S.registrationNameDependencies,D=S.possibleRegistrationNames;if(T.hasOwnProperty(a))return!0;var N=D.hasOwnProperty(b)?D[b]:null;if(N!=null)return c("Invalid event handler property `%s`. Did you mean `%s`?",a,N),ho[a]=!0,!0;if(mp.test(a))return c("Unknown event handler property `%s`. It will be ignored.",a),ho[a]=!0,!0}else if(mp.test(a))return IC.test(a)&&c("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",a),ho[a]=!0,!0;if(kC.test(a)||RC.test(a))return!0;if(b==="innerhtml")return c("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),ho[a]=!0,!0;if(b==="aria")return c("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),ho[a]=!0,!0;if(b==="is"&&p!==null&&p!==void 0&&typeof p!="string")return c("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof p),ho[a]=!0,!0;if(typeof p=="number"&&isNaN(p))return c("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",a),ho[a]=!0,!0;var $=bn(a),G=$!==null&&$.type===qr;if($f.hasOwnProperty(b)){var X=$f[b];if(X!==a)return c("Invalid DOM property `%s`. Did you mean `%s`?",a,X),ho[a]=!0,!0}else if(!G&&a!==b)return c("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",a,b),ho[a]=!0,!0;return typeof p=="boolean"&&Dn(a,p,$,!1)?(p?c('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',p,a,a,p,a):c('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',p,a,a,p,a,a,a),ho[a]=!0,!0):G?!0:Dn(a,p,$,!1)?(ho[a]=!0,!1):((p==="false"||p==="true")&&$!==null&&$.type===Rr&&(c("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",p,a,p==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',a,p),ho[a]=!0),!0)}}var MC=function(o,a,p){{var S=[];for(var b in a){var T=bm(o,b,a[b],p);T||S.push(b)}var D=S.map(function(N){return"`"+N+"`"}).join(", ");S.length===1?c("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",D,o):S.length>1&&c("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",D,o)}};function AC(o,a,p){uu(o,a)||MC(o,a,p)}var qS=1,Il=2,yd=4,YS=qS|Il|yd,yp=null;function gD(o){yp!==null&&c("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),yp=o}function vp(){yp===null&&c("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),yp=null}function mD(o){return o===yp}function Cm(o){var a=o.target||o.srcElement||window;return a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===pc?a.parentNode:a}var Em=null,er=null,du=null;function Sp(o){var a=vh(o);if(a){if(typeof Em!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var p=a.stateNode;if(p){var S=jE(p);Em(a.stateNode,a.type,S)}}}function xp(o){Em=o}function XS(o){er?du?du.push(o):du=[o]:er=o}function ZS(){return er!==null||du!==null}function Kf(){if(er){var o=er,a=du;if(er=null,du=null,Sp(o),a)for(var p=0;p<a.length;p++)Sp(a[p])}}var wp=function(o,a){return o(a)},vd=function(){},_m=!1;function yD(){var o=ZS();o&&(vd(),Kf())}function DC(o,a,p){if(_m)return o(a,p);_m=!0;try{return wp(o,a,p)}finally{_m=!1,yD()}}function OC(o,a,p){wp=o,vd=p}function Pm(o){return o==="button"||o==="input"||o==="select"||o==="textarea"}function Tm(o,a,p){switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(p.disabled&&Pm(a));default:return!1}}function Sd(o,a){var p=o.stateNode;if(p===null)return null;var S=jE(p);if(S===null)return null;var b=S[a];if(Tm(a,o.type,S))return null;if(b&&typeof b!="function")throw new Error("Expected `"+a+"` listener to be a function, instead got a value of `"+typeof b+"` type.");return b}var bp=!1;if(yn)try{var xd={};Object.defineProperty(xd,"passive",{get:function(){bp=!0}}),window.addEventListener("test",xd,xd),window.removeEventListener("test",xd,xd)}catch{bp=!1}function Im(o,a,p,S,b,T,D,N,$){var G=Array.prototype.slice.call(arguments,3);try{a.apply(p,G)}catch(X){this.onError(X)}}var jC=Im;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var km=document.createElement("react");jC=function(a,p,S,b,T,D,N,$,G){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var X=document.createEvent("Event"),fe=!1,ue=!0,_e=window.event,Ie=Object.getOwnPropertyDescriptor(window,"event");function Me(){km.removeEventListener(Ae,Ot,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=_e)}var at=Array.prototype.slice.call(arguments,3);function Ot(){fe=!0,Me(),p.apply(S,at),ue=!1}var Tt,Ln=!1,En=!1;function we(be){if(Tt=be.error,Ln=!0,Tt===null&&be.colno===0&&be.lineno===0&&(En=!0),be.defaultPrevented&&Tt!=null&&typeof Tt=="object")try{Tt._suppressLogging=!0}catch{}}var Ae="react-"+(a||"invokeguardedcallback");if(window.addEventListener("error",we),km.addEventListener(Ae,Ot,!1),X.initEvent(Ae,!1,!1),km.dispatchEvent(X),Ie&&Object.defineProperty(window,"event",Ie),fe&&ue&&(Ln?En&&(Tt=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):Tt=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(Tt)),window.removeEventListener("error",we),!fe)return Me(),Im.apply(this,arguments)}}var vD=jC,Wf=!1,Gf=null,Ja=!1,Rm=null,qf={onError:function(o){Wf=!0,Gf=o}};function ma(o,a,p,S,b,T,D,N,$){Wf=!1,Gf=null,vD.apply(qf,arguments)}function Cp(o,a,p,S,b,T,D,N,$){if(ma.apply(this,arguments),Wf){var G=JS();Ja||(Ja=!0,Rm=G)}}function mc(){if(Ja){var o=Rm;throw Ja=!1,Rm=null,o}}function QS(){return Wf}function JS(){if(Wf){var o=Gf;return Wf=!1,Gf=null,o}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function Yf(o){return o._reactInternals}function wd(o){return o._reactInternals!==void 0}function Ep(o,a){o._reactInternals=a}var Rt=0,yc=1,di=2,xn=4,ds=16,ur=32,gr=64,pn=128,Yr=256,fi=512,ya=1024,zs=2048,hi=4096,kl=8192,Mm=16384,LC=32767,bd=32768,va=65536,el=131072,_p=1048576,Pp=2097152,fu=4194304,ex=8388608,Oo=16777216,hu=33554432,pu=xn|ya|0,Xf=di|xn|ds|ur|fi|hi|kl,gu=xn|gr|fi|kl,Gi=zs|ds,pi=fu|ex|Pp,Cd=r.ReactCurrentOwner;function jo(o){var a=o,p=o;if(o.alternate)for(;a.return;)a=a.return;else{var S=a;do a=S,(a.flags&(di|hi))!==Rt&&(p=a.return),S=a.return;while(S)}return a.tag===v?p:null}function Rl(o){if(o.tag===F){var a=o.memoizedState;if(a===null){var p=o.alternate;p!==null&&(a=p.memoizedState)}if(a!==null)return a.dehydrated}return null}function mu(o){return o.tag===v?o.stateNode.containerInfo:null}function NC(o){return jo(o)===o}function tx(o){{var a=Cd.current;if(a!==null&&a.tag===g){var p=a,S=p.stateNode;S._warnedAboutRefsInRender||c("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",Bt(p)||"A component"),S._warnedAboutRefsInRender=!0}}var b=Yf(o);return b?jo(b)===b:!1}function Am(o){if(jo(o)!==o)throw new Error("Unable to find node on an unmounted component.")}function fs(o){var a=o.alternate;if(!a){var p=jo(o);if(p===null)throw new Error("Unable to find node on an unmounted component.");return p!==o?null:o}for(var S=o,b=a;;){var T=S.return;if(T===null)break;var D=T.alternate;if(D===null){var N=T.return;if(N!==null){S=b=N;continue}break}if(T.child===D.child){for(var $=T.child;$;){if($===S)return Am(T),o;if($===b)return Am(T),a;$=$.sibling}throw new Error("Unable to find node on an unmounted component.")}if(S.return!==b.return)S=T,b=D;else{for(var G=!1,X=T.child;X;){if(X===S){G=!0,S=T,b=D;break}if(X===b){G=!0,b=T,S=D;break}X=X.sibling}if(!G){for(X=D.child;X;){if(X===S){G=!0,S=D,b=T;break}if(X===b){G=!0,b=D,S=T;break}X=X.sibling}if(!G)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(S.alternate!==b)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(S.tag!==v)throw new Error("Unable to find node on an unmounted component.");return S.stateNode.current===S?o:a}function hs(o){var a=fs(o);return a!==null?Er(a):null}function Er(o){if(o.tag===C||o.tag===E)return o;for(var a=o.child;a!==null;){var p=Er(a);if(p!==null)return p;a=a.sibling}return null}function tl(o){var a=fs(o);return a!==null?nx(a):null}function nx(o){if(o.tag===C||o.tag===E)return o;for(var a=o.child;a!==null;){if(a.tag!==w){var p=nx(a);if(p!==null)return p}a=a.sibling}return null}var rx=t.unstable_scheduleCallback,ix=t.unstable_cancelCallback,ox=t.unstable_shouldYield,FC=t.unstable_requestPaint,ti=t.unstable_now,zC=t.unstable_getCurrentPriorityLevel,vc=t.unstable_ImmediatePriority,Tp=t.unstable_UserBlockingPriority,Ed=t.unstable_NormalPriority,Ip=t.unstable_LowPriority,Zf=t.unstable_IdlePriority,UC=t.unstable_yieldValue,$C=t.unstable_setDisableYieldValue,nl=null,qi=null,nt=null,Us=!1,po=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function sx(o){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled)return!0;if(!a.supportsFiber)return c("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{Ze&&(o=Gt({},o,{getLaneLabelMap:ux,injectProfilingHooks:_d})),nl=a.inject(o),qi=a}catch(p){c("React instrumentation encountered an error: %s.",p)}return!!a.checkDCE}function ax(o,a){if(qi&&typeof qi.onScheduleFiberRoot=="function")try{qi.onScheduleFiberRoot(nl,o,a)}catch(p){Us||(Us=!0,c("React instrumentation encountered an error: %s",p))}}function lx(o,a){if(qi&&typeof qi.onCommitFiberRoot=="function")try{var p=(o.current.flags&pn)===pn;if(De){var S;switch(a){case ys:S=vc;break;case xa:S=Tp;break;case Yi:S=Ed;break;case ly:S=Zf;break;default:S=Ed;break}qi.onCommitFiberRoot(nl,o,S,p)}}catch(b){Us||(Us=!0,c("React instrumentation encountered an error: %s",b))}}function cx(o){if(qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(nl,o)}catch(a){Us||(Us=!0,c("React instrumentation encountered an error: %s",a))}}function Qf(o){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(nl,o)}catch(a){Us||(Us=!0,c("React instrumentation encountered an error: %s",a))}}function ir(o){if(typeof UC=="function"&&($C(o),s(o)),qi&&typeof qi.setStrictMode=="function")try{qi.setStrictMode(nl,o)}catch(a){Us||(Us=!0,c("React instrumentation encountered an error: %s",a))}}function _d(o){nt=o}function ux(){{for(var o=new Map,a=1,p=0;p<mx;p++){var S=GC(a);o.set(a,S),a*=2}return o}}function BC(o){nt!==null&&typeof nt.markCommitStarted=="function"&&nt.markCommitStarted(o)}function Ml(){nt!==null&&typeof nt.markCommitStopped=="function"&&nt.markCommitStopped()}function Sa(o){nt!==null&&typeof nt.markComponentRenderStarted=="function"&&nt.markComponentRenderStarted(o)}function yu(){nt!==null&&typeof nt.markComponentRenderStopped=="function"&&nt.markComponentRenderStopped()}function HC(o){nt!==null&&typeof nt.markComponentPassiveEffectMountStarted=="function"&&nt.markComponentPassiveEffectMountStarted(o)}function Sc(){nt!==null&&typeof nt.markComponentPassiveEffectMountStopped=="function"&&nt.markComponentPassiveEffectMountStopped()}function vu(o){nt!==null&&typeof nt.markComponentPassiveEffectUnmountStarted=="function"&&nt.markComponentPassiveEffectUnmountStarted(o)}function Dm(){nt!==null&&typeof nt.markComponentPassiveEffectUnmountStopped=="function"&&nt.markComponentPassiveEffectUnmountStopped()}function VC(o){nt!==null&&typeof nt.markComponentLayoutEffectMountStarted=="function"&&nt.markComponentLayoutEffectMountStarted(o)}function Om(){nt!==null&&typeof nt.markComponentLayoutEffectMountStopped=="function"&&nt.markComponentLayoutEffectMountStopped()}function dx(o){nt!==null&&typeof nt.markComponentLayoutEffectUnmountStarted=="function"&&nt.markComponentLayoutEffectUnmountStarted(o)}function Jf(){nt!==null&&typeof nt.markComponentLayoutEffectUnmountStopped=="function"&&nt.markComponentLayoutEffectUnmountStopped()}function Al(o,a,p){nt!==null&&typeof nt.markComponentErrored=="function"&&nt.markComponentErrored(o,a,p)}function kp(o,a,p){nt!==null&&typeof nt.markComponentSuspended=="function"&&nt.markComponentSuspended(o,a,p)}function Rp(o){nt!==null&&typeof nt.markLayoutEffectsStarted=="function"&&nt.markLayoutEffectsStarted(o)}function Pd(){nt!==null&&typeof nt.markLayoutEffectsStopped=="function"&&nt.markLayoutEffectsStopped()}function fx(o){nt!==null&&typeof nt.markPassiveEffectsStarted=="function"&&nt.markPassiveEffectsStarted(o)}function eh(){nt!==null&&typeof nt.markPassiveEffectsStopped=="function"&&nt.markPassiveEffectsStopped()}function hx(o){nt!==null&&typeof nt.markRenderStarted=="function"&&nt.markRenderStarted(o)}function px(){nt!==null&&typeof nt.markRenderYielded=="function"&&nt.markRenderYielded()}function Or(){nt!==null&&typeof nt.markRenderStopped=="function"&&nt.markRenderStopped()}function jm(o){nt!==null&&typeof nt.markRenderScheduled=="function"&&nt.markRenderScheduled(o)}function gx(o,a){nt!==null&&typeof nt.markForceUpdateScheduled=="function"&&nt.markForceUpdateScheduled(o,a)}function Mp(o,a){nt!==null&&typeof nt.markStateUpdateScheduled=="function"&&nt.markStateUpdateScheduled(o,a)}var Mt=0,gn=1,kn=2,Jt=8,dr=16,Ei=Math.clz32?Math.clz32:Dp,Lm=Math.log,Ap=Math.LN2;function Dp(o){var a=o>>>0;return a===0?32:31-(Lm(a)/Ap|0)|0}var mx=31,je=0,gi=0,Ft=1,Su=2,ji=4,Li=8,ps=16,Td=32,xu=4194240,th=64,Nm=128,Fm=256,zm=512,Um=1024,$m=2048,Bm=4096,Hm=8192,Id=16384,Vm=32768,nh=65536,rh=131072,Km=262144,Op=524288,Wm=1048576,Gm=2097152,jp=130023424,kd=4194304,Lp=8388608,qm=16777216,Ym=33554432,Xm=67108864,KC=kd,ih=134217728,WC=268435455,Np=268435456,wu=536870912,$s=1073741824;function GC(o){{if(o&Ft)return"Sync";if(o&Su)return"InputContinuousHydration";if(o&ji)return"InputContinuous";if(o&Li)return"DefaultHydration";if(o&ps)return"Default";if(o&Td)return"TransitionHydration";if(o&xu)return"Transition";if(o&jp)return"Retry";if(o&ih)return"SelectiveHydration";if(o&Np)return"IdleHydration";if(o&wu)return"Idle";if(o&$s)return"Offscreen"}}var or=-1,Zm=th,Qm=kd;function Fp(o){switch(Rd(o)){case Ft:return Ft;case Su:return Su;case ji:return ji;case Li:return Li;case ps:return ps;case Td:return Td;case th:case Nm:case Fm:case zm:case Um:case $m:case Bm:case Hm:case Id:case Vm:case nh:case rh:case Km:case Op:case Wm:case Gm:return o&xu;case kd:case Lp:case qm:case Ym:case Xm:return o&jp;case ih:return ih;case Np:return Np;case wu:return wu;case $s:return $s;default:return c("Should have found matching lanes. This is a bug in React."),o}}function gs(o,a){var p=o.pendingLanes;if(p===je)return je;var S=je,b=o.suspendedLanes,T=o.pingedLanes,D=p&WC;if(D!==je){var N=D&~b;if(N!==je)S=Fp(N);else{var $=D&T;$!==je&&(S=Fp($))}}else{var G=p&~b;G!==je?S=Fp(G):T!==je&&(S=Fp(T))}if(S===je)return je;if(a!==je&&a!==S&&(a&b)===je){var X=Rd(S),fe=Rd(a);if(X>=fe||X===ps&&(fe&xu)!==je)return a}(S&ji)!==je&&(S|=p&ps);var ue=o.entangledLanes;if(ue!==je)for(var _e=o.entanglements,Ie=S&ue;Ie>0;){var Me=ni(Ie),at=1<<Me;S|=_e[Me],Ie&=~at}return S}function yx(o,a){for(var p=o.eventTimes,S=or;a>0;){var b=ni(a),T=1<<b,D=p[b];D>S&&(S=D),a&=~T}return S}function Jm(o,a){switch(o){case Ft:case Su:case ji:return a+250;case Li:case ps:case Td:case th:case Nm:case Fm:case zm:case Um:case $m:case Bm:case Hm:case Id:case Vm:case nh:case rh:case Km:case Op:case Wm:case Gm:return a+5e3;case kd:case Lp:case qm:case Ym:case Xm:return or;case ih:case Np:case wu:case $s:return or;default:return c("Should have found matching lanes. This is a bug in React."),or}}function qC(o,a){for(var p=o.pendingLanes,S=o.suspendedLanes,b=o.pingedLanes,T=o.expirationTimes,D=p;D>0;){var N=ni(D),$=1<<N,G=T[N];G===or?(($&S)===je||($&b)!==je)&&(T[N]=Jm($,a)):G<=a&&(o.expiredLanes|=$),D&=~$}}function YC(o){return Fp(o.pendingLanes)}function ey(o){var a=o.pendingLanes&-1073741825;return a!==je?a:a&$s?$s:je}function vx(o){return(o&Ft)!==je}function bu(o){return(o&WC)!==je}function ty(o){return(o&jp)===o}function Sx(o){var a=Ft|ji|ps;return(o&a)===je}function SD(o){return(o&xu)===o}function zp(o,a){var p=Su|ji|Li|ps;return(a&p)!==je}function XC(o,a){return(a&o.expiredLanes)!==je}function xx(o){return(o&xu)!==je}function wx(){var o=Zm;return Zm<<=1,(Zm&xu)===je&&(Zm=th),o}function ZC(){var o=Qm;return Qm<<=1,(Qm&jp)===je&&(Qm=kd),o}function Rd(o){return o&-o}function Ni(o){return Rd(o)}function ni(o){return 31-Ei(o)}function ny(o){return ni(o)}function ms(o,a){return(o&a)!==je}function Md(o,a){return(o&a)===a}function nn(o,a){return o|a}function Up(o,a){return o&~a}function ry(o,a){return o&a}function xD(o){return o}function bx(o,a){return o!==gi&&o<a?o:a}function iy(o){for(var a=[],p=0;p<mx;p++)a.push(o);return a}function oh(o,a,p){o.pendingLanes|=a,a!==wu&&(o.suspendedLanes=je,o.pingedLanes=je);var S=o.eventTimes,b=ny(a);S[b]=p}function Cx(o,a){o.suspendedLanes|=a,o.pingedLanes&=~a;for(var p=o.expirationTimes,S=a;S>0;){var b=ni(S),T=1<<b;p[b]=or,S&=~T}}function oy(o,a,p){o.pingedLanes|=o.suspendedLanes&a}function QC(o,a){var p=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=je,o.pingedLanes=je,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a;for(var S=o.entanglements,b=o.eventTimes,T=o.expirationTimes,D=p;D>0;){var N=ni(D),$=1<<N;S[N]=je,b[N]=or,T[N]=or,D&=~$}}function $p(o,a){for(var p=o.entangledLanes|=a,S=o.entanglements,b=p;b;){var T=ni(b),D=1<<T;D&a|S[T]&a&&(S[T]|=a),b&=~D}}function sy(o,a){var p=Rd(a),S;switch(p){case ji:S=Su;break;case ps:S=Li;break;case th:case Nm:case Fm:case zm:case Um:case $m:case Bm:case Hm:case Id:case Vm:case nh:case rh:case Km:case Op:case Wm:case Gm:case kd:case Lp:case qm:case Ym:case Xm:S=Td;break;case wu:S=Np;break;default:S=gi;break}return(S&(o.suspendedLanes|a))!==gi?gi:S}function JC(o,a,p){if(po)for(var S=o.pendingUpdatersLaneMap;p>0;){var b=ny(p),T=1<<b,D=S[b];D.add(a),p&=~T}}function Ex(o,a){if(po)for(var p=o.pendingUpdatersLaneMap,S=o.memoizedUpdaters;a>0;){var b=ny(a),T=1<<b,D=p[b];D.size>0&&(D.forEach(function(N){var $=N.alternate;($===null||!S.has($))&&S.add(N)}),D.clear()),a&=~T}}function ay(o,a){return null}var ys=Ft,xa=ji,Yi=ps,ly=wu,sh=gi;function Bs(){return sh}function _i(o){sh=o}function eE(o,a){var p=sh;try{return sh=o,a()}finally{sh=p}}function Bp(o,a){return o!==0&&o<a?o:a}function go(o,a){return o>a?o:a}function _x(o,a){return o!==0&&o<a}function tE(o){var a=Rd(o);return _x(ys,a)?_x(xa,a)?bu(a)?Yi:ly:xa:ys}function Ad(o){var a=o.current.memoizedState;return a.isDehydrated}var Xi;function wD(o){Xi=o}function vt(o){Xi(o)}var Cu;function Px(o){Cu=o}var Tx;function bD(o){Tx=o}var ah;function cy(o){ah=o}var uy;function nE(o){uy=o}var dy=!1,Hp=[],Dl=null,Ol=null,jr=null,Lo=new Map,wa=new Map,xc=[],rE=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function rl(o){return rE.indexOf(o)>-1}function iE(o,a,p,S,b){return{blockedOn:o,domEventName:a,eventSystemFlags:p,nativeEvent:b,targetContainers:[S]}}function il(o,a){switch(o){case"focusin":case"focusout":Dl=null;break;case"dragenter":case"dragleave":Ol=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":{var p=a.pointerId;Lo.delete(p);break}case"gotpointercapture":case"lostpointercapture":{var S=a.pointerId;wa.delete(S);break}}}function Vp(o,a,p,S,b,T){if(o===null||o.nativeEvent!==T){var D=iE(a,p,S,b,T);if(a!==null){var N=vh(a);N!==null&&Cu(N)}return D}o.eventSystemFlags|=S;var $=o.targetContainers;return b!==null&&$.indexOf(b)===-1&&$.push(b),o}function oE(o,a,p,S,b){switch(a){case"focusin":{var T=b;return Dl=Vp(Dl,o,a,p,S,T),!0}case"dragenter":{var D=b;return Ol=Vp(Ol,o,a,p,S,D),!0}case"mouseover":{var N=b;return jr=Vp(jr,o,a,p,S,N),!0}case"pointerover":{var $=b,G=$.pointerId;return Lo.set(G,Vp(Lo.get(G)||null,o,a,p,S,$)),!0}case"gotpointercapture":{var X=b,fe=X.pointerId;return wa.set(fe,Vp(wa.get(fe)||null,o,a,p,S,X)),!0}}return!1}function Ix(o){var a=ng(o.target);if(a!==null){var p=jo(a);if(p!==null){var S=p.tag;if(S===F){var b=Rl(p);if(b!==null){o.blockedOn=b,uy(o.priority,function(){Tx(p)});return}}else if(S===v){var T=p.stateNode;if(Ad(T)){o.blockedOn=mu(p);return}}}}o.blockedOn=null}function sE(o){for(var a=ah(),p={blockedOn:null,target:o,priority:a},S=0;S<xc.length&&_x(a,xc[S].priority);S++);xc.splice(S,0,p),S===0&&Ix(p)}function Kp(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;a.length>0;){var p=a[0],S=Wp(o.domEventName,o.eventSystemFlags,p,o.nativeEvent);if(S===null){var b=o.nativeEvent,T=new b.constructor(b.type,b);gD(T),b.target.dispatchEvent(T),vp()}else{var D=vh(S);return D!==null&&Cu(D),o.blockedOn=S,!1}a.shift()}return!0}function aE(o,a,p){Kp(o)&&p.delete(a)}function fy(){dy=!1,Dl!==null&&Kp(Dl)&&(Dl=null),Ol!==null&&Kp(Ol)&&(Ol=null),jr!==null&&Kp(jr)&&(jr=null),Lo.forEach(aE),wa.forEach(aE)}function Dd(o,a){o.blockedOn===a&&(o.blockedOn=null,dy||(dy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fy)))}function mo(o){if(Hp.length>0){Dd(Hp[0],o);for(var a=1;a<Hp.length;a++){var p=Hp[a];p.blockedOn===o&&(p.blockedOn=null)}}Dl!==null&&Dd(Dl,o),Ol!==null&&Dd(Ol,o),jr!==null&&Dd(jr,o);var S=function(N){return Dd(N,o)};Lo.forEach(S),wa.forEach(S);for(var b=0;b<xc.length;b++){var T=xc[b];T.blockedOn===o&&(T.blockedOn=null)}for(;xc.length>0;){var D=xc[0];if(D.blockedOn!==null)break;Ix(D),D.blockedOn===null&&xc.shift()}}var wn=r.ReactCurrentBatchConfig,mi=!0;function ri(o){mi=!!o}function Zi(){return mi}function Hs(o,a,p){var S=ch(a),b;switch(S){case ys:b=lh;break;case xa:b=Pi;break;case Yi:default:b=Od;break}return b.bind(null,a,p,o)}function lh(o,a,p,S){var b=Bs(),T=wn.transition;wn.transition=null;try{_i(ys),Od(o,a,p,S)}finally{_i(b),wn.transition=T}}function Pi(o,a,p,S){var b=Bs(),T=wn.transition;wn.transition=null;try{_i(xa),Od(o,a,p,S)}finally{_i(b),wn.transition=T}}function Od(o,a,p,S){mi&&jd(o,a,p,S)}function jd(o,a,p,S){var b=Wp(o,a,p,S);if(b===null){UD(o,a,S,Ld,p),il(o,S);return}if(oE(b,o,a,p,S)){S.stopPropagation();return}if(il(o,S),a&yd&&rl(o)){for(;b!==null;){var T=vh(b);T!==null&&vt(T);var D=Wp(o,a,p,S);if(D===null&&UD(o,a,S,Ld,p),D===b)break;b=D}b!==null&&S.stopPropagation();return}UD(o,a,S,null,p)}var Ld=null;function Wp(o,a,p,S){Ld=null;var b=Cm(S),T=ng(b);if(T!==null){var D=jo(T);if(D===null)T=null;else{var N=D.tag;if(N===F){var $=Rl(D);if($!==null)return $;T=null}else if(N===v){var G=D.stateNode;if(Ad(G))return mu(D);T=null}else D!==T&&(T=null)}}return Ld=T,null}function ch(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return ys;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return xa;case"message":{var a=zC();switch(a){case vc:return ys;case Tp:return xa;case Ed:case Ip:return Yi;case Zf:return ly;default:return Yi}}default:return Yi}}function vs(o,a,p){return o.addEventListener(a,p,!1),p}function kx(o,a,p){return o.addEventListener(a,p,!0),p}function uh(o,a,p,S){return o.addEventListener(a,p,{capture:!0,passive:S}),p}function wc(o,a,p,S){return o.addEventListener(a,p,{passive:S}),p}var Eu=null,Gp=null,ba=null;function hy(o){return Eu=o,Gp=dh(),!0}function _u(){Eu=null,Gp=null,ba=null}function qp(){if(ba)return ba;var o,a=Gp,p=a.length,S,b=dh(),T=b.length;for(o=0;o<p&&a[o]===b[o];o++);var D=p-o;for(S=1;S<=D&&a[p-S]===b[T-S];S++);var N=S>1?1-S:void 0;return ba=b.slice(o,N),ba}function dh(){return"value"in Eu?Eu.value:Eu.textContent}function fh(o){var a,p=o.keyCode;return"charCode"in o?(a=o.charCode,a===0&&p===13&&(a=13)):a=p,a===10&&(a=13),a>=32||a===13?a:0}function Nd(){return!0}function Yp(){return!1}function mr(o){function a(p,S,b,T,D){this._reactName=p,this._targetInst=b,this.type=S,this.nativeEvent=T,this.target=D,this.currentTarget=null;for(var N in o)if(o.hasOwnProperty(N)){var $=o[N];$?this[N]=$(T):this[N]=T[N]}var G=T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1;return G?this.isDefaultPrevented=Nd:this.isDefaultPrevented=Yp,this.isPropagationStopped=Yp,this}return Gt(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Nd)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Nd)},persist:function(){},isPersistent:Nd}),a}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=mr(Vs),Fi=Gt({},Vs,{view:0,detail:0}),lE=mr(Fi),Xp,Zp,Qp;function Pu(o){o!==Qp&&(Qp&&o.type==="mousemove"?(Xp=o.screenX-Qp.screenX,Zp=o.screenY-Qp.screenY):(Xp=0,Zp=0),Qp=o)}var Jp=Gt({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dx,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(Pu(o),Xp)},movementY:function(o){return"movementY"in o?o.movementY:Zp}}),py=mr(Jp),Fd=Gt({},Jp,{dataTransfer:0}),Rx=mr(Fd),zd=Gt({},Fi,{relatedTarget:0}),gy=mr(zd),cE=Gt({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),Mx=mr(cE),my=Gt({},Vs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),CD=mr(my),ED=Gt({},Vs,{data:0}),Ax=mr(ED),uE=Ax,Ud={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_D={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function hh(o){if(o.key){var a=Ud[o.key]||o.key;if(a!=="Unidentified")return a}if(o.type==="keypress"){var p=fh(o);return p===13?"Enter":String.fromCharCode(p)}return o.type==="keydown"||o.type==="keyup"?_D[o.keyCode]||"Unidentified":""}var dE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xr(o){var a=this,p=a.nativeEvent;if(p.getModifierState)return p.getModifierState(o);var S=dE[o];return S?!!p[S]:!1}function Dx(o){return Xr}var fE=Gt({},Fi,{key:hh,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dx,charCode:function(o){return o.type==="keypress"?fh(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?fh(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),PD=mr(fE),TD=Gt({},Jp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ox=mr(TD),hE=Gt({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dx}),ID=mr(hE),Ca=Gt({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),jx=mr(Ca),kD=Gt({},Jp,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Tu=mr(kD),yy=[9,13,27,32],Iu=229,ph=yn&&"CompositionEvent"in window,$d=null;yn&&"documentMode"in document&&($d=document.documentMode);var Lx=yn&&"TextEvent"in window&&!$d,pE=yn&&(!ph||$d&&$d>8&&$d<=11),vy=32,gE=String.fromCharCode(vy);function mE(){gt("onBeforeInput",["compositionend","keypress","textInput","paste"]),gt("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),gt("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),gt("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var Nx=!1;function Sy(o){return(o.ctrlKey||o.altKey||o.metaKey)&&!(o.ctrlKey&&o.altKey)}function xy(o){switch(o){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function yE(o,a){return o==="keydown"&&a.keyCode===Iu}function wy(o,a){switch(o){case"keyup":return yy.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==Iu;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fx(o){var a=o.detail;return typeof a=="object"&&"data"in a?a.data:null}function by(o){return o.locale==="ko"}var bc=!1;function zx(o,a,p,S,b){var T,D;if(ph?T=xy(a):bc?wy(a,S)&&(T="onCompositionEnd"):yE(a,S)&&(T="onCompositionStart"),!T)return null;pE&&!by(S)&&(!bc&&T==="onCompositionStart"?bc=hy(b):T==="onCompositionEnd"&&bc&&(D=qp()));var N=bE(p,T);if(N.length>0){var $=new Ax(T,a,null,S,b);if(o.push({event:$,listeners:N}),D)$.data=D;else{var G=Fx(S);G!==null&&($.data=G)}}}function Cy(o,a){switch(o){case"compositionend":return Fx(a);case"keypress":var p=a.which;return p!==vy?null:(Nx=!0,gE);case"textInput":var S=a.data;return S===gE&&Nx?null:S;default:return null}}function vE(o,a){if(bc){if(o==="compositionend"||!ph&&wy(o,a)){var p=qp();return _u(),bc=!1,p}return null}switch(o){case"paste":return null;case"keypress":if(!Sy(a)){if(a.char&&a.char.length>1)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return pE&&!by(a)?null:a.data;default:return null}}function RD(o,a,p,S,b){var T;if(Lx?T=Cy(a,S):T=vE(a,S),!T)return null;var D=bE(p,"onBeforeInput");if(D.length>0){var N=new uE("onBeforeInput","beforeinput",null,S,b);o.push({event:N,listeners:D}),N.data=T}}function Ey(o,a,p,S,b,T,D){zx(o,a,p,S,b),RD(o,a,p,S,b)}var MD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gh(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!MD[o.type]:a==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function AD(o){if(!yn)return!1;var a="on"+o,p=a in document;if(!p){var S=document.createElement("div");S.setAttribute(a,"return;"),p=typeof S[a]=="function"}return p}function _y(){gt("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function u(o,a,p,S){XS(S);var b=bE(a,"onChange");if(b.length>0){var T=new Ks("onChange","change",null,p,S);o.push({event:T,listeners:b})}}var f=null,x=null;function _(o){var a=o.nodeName&&o.nodeName.toLowerCase();return a==="select"||a==="input"&&o.type==="file"}function A(o){var a=[];u(a,x,o,Cm(o)),DC(j,a)}function j(o){XK(o,0)}function K(o){var a=My(o);if(pe(a))return o}function ee(o,a){if(o==="change")return a}var ae=!1;yn&&(ae=AD("input")&&(!document.documentMode||document.documentMode>9));function Te(o,a){f=o,x=a,f.attachEvent("onpropertychange",Ke)}function He(){f&&(f.detachEvent("onpropertychange",Ke),f=null,x=null)}function Ke(o){o.propertyName==="value"&&K(x)&&A(o)}function Be(o,a,p){o==="focusin"?(He(),Te(a,p)):o==="focusout"&&He()}function ft(o,a){if(o==="selectionchange"||o==="keyup"||o==="keydown")return K(x)}function St(o){var a=o.nodeName;return a&&a.toLowerCase()==="input"&&(o.type==="checkbox"||o.type==="radio")}function Et(o,a){if(o==="click")return K(a)}function ii(o,a){if(o==="input"||o==="change")return K(a)}function ye(o){var a=o._wrapperState;!a||!a.controlled||o.type!=="number"||st(o,"number",o.value)}function de(o,a,p,S,b,T,D){var N=p?My(p):window,$,G;if(_(N)?$=ee:gh(N)?ae?$=ii:($=ft,G=Be):St(N)&&($=Et),$){var X=$(a,p);if(X){u(o,X,S,b);return}}G&&G(a,N,p),a==="focusout"&&ye(N)}function Ce(){Pt("onMouseEnter",["mouseout","mouseover"]),Pt("onMouseLeave",["mouseout","mouseover"]),Pt("onPointerEnter",["pointerout","pointerover"]),Pt("onPointerLeave",["pointerout","pointerover"])}function Ye(o,a,p,S,b,T,D){var N=a==="mouseover"||a==="pointerover",$=a==="mouseout"||a==="pointerout";if(N&&!mD(S)){var G=S.relatedTarget||S.fromElement;if(G&&(ng(G)||Jx(G)))return}if(!(!$&&!N)){var X;if(b.window===b)X=b;else{var fe=b.ownerDocument;fe?X=fe.defaultView||fe.parentWindow:X=window}var ue,_e;if($){var Ie=S.relatedTarget||S.toElement;if(ue=p,_e=Ie?ng(Ie):null,_e!==null){var Me=jo(_e);(_e!==Me||_e.tag!==C&&_e.tag!==E)&&(_e=null)}}else ue=null,_e=p;if(ue!==_e){var at=py,Ot="onMouseLeave",Tt="onMouseEnter",Ln="mouse";(a==="pointerout"||a==="pointerover")&&(at=Ox,Ot="onPointerLeave",Tt="onPointerEnter",Ln="pointer");var En=ue==null?X:My(ue),we=_e==null?X:My(_e),Ae=new at(Ot,Ln+"leave",ue,S,b);Ae.target=En,Ae.relatedTarget=we;var be=null,Ge=ng(b);if(Ge===p){var pt=new at(Tt,Ln+"enter",_e,S,b);pt.target=we,pt.relatedTarget=En,be=pt}kxe(o,Ae,be,ue,_e)}}}function _t(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var xt=typeof Object.is=="function"?Object.is:_t;function At(o,a){if(xt(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var p=Object.keys(o),S=Object.keys(a);if(p.length!==S.length)return!1;for(var b=0;b<p.length;b++){var T=p[b];if(!Zt.call(a,T)||!xt(o[T],a[T]))return!1}return!0}function Kt(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function zi(o){for(;o;){if(o.nextSibling)return o.nextSibling;o=o.parentNode}}function Hn(o,a){for(var p=Kt(o),S=0,b=0;p;){if(p.nodeType===pc){if(b=S+p.textContent.length,S<=a&&b>=a)return{node:p,offset:a-S};S=b}p=Kt(zi(p))}}function ku(o){var a=o.ownerDocument,p=a&&a.defaultView||window,S=p.getSelection&&p.getSelection();if(!S||S.rangeCount===0)return null;var b=S.anchorNode,T=S.anchorOffset,D=S.focusNode,N=S.focusOffset;try{b.nodeType,D.nodeType}catch{return null}return DD(o,b,T,D,N)}function DD(o,a,p,S,b){var T=0,D=-1,N=-1,$=0,G=0,X=o,fe=null;e:for(;;){for(var ue=null;X===a&&(p===0||X.nodeType===pc)&&(D=T+p),X===S&&(b===0||X.nodeType===pc)&&(N=T+b),X.nodeType===pc&&(T+=X.nodeValue.length),(ue=X.firstChild)!==null;)fe=X,X=ue;for(;;){if(X===o)break e;if(fe===a&&++$===p&&(D=T),fe===S&&++G===b&&(N=T),(ue=X.nextSibling)!==null)break;X=fe,fe=X.parentNode}X=ue}return D===-1||N===-1?null:{start:D,end:N}}function uxe(o,a){var p=o.ownerDocument||document,S=p&&p.defaultView||window;if(S.getSelection){var b=S.getSelection(),T=o.textContent.length,D=Math.min(a.start,T),N=a.end===void 0?D:Math.min(a.end,T);if(!b.extend&&D>N){var $=N;N=D,D=$}var G=Hn(o,D),X=Hn(o,N);if(G&&X){if(b.rangeCount===1&&b.anchorNode===G.node&&b.anchorOffset===G.offset&&b.focusNode===X.node&&b.focusOffset===X.offset)return;var fe=p.createRange();fe.setStart(G.node,G.offset),b.removeAllRanges(),D>N?(b.addRange(fe),b.extend(X.node,X.offset)):(fe.setEnd(X.node,X.offset),b.addRange(fe))}}}function FK(o){return o&&o.nodeType===pc}function zK(o,a){return!o||!a?!1:o===a?!0:FK(o)?!1:FK(a)?zK(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1}function dxe(o){return o&&o.ownerDocument&&zK(o.ownerDocument.documentElement,o)}function fxe(o){try{return typeof o.contentWindow.location.href=="string"}catch{return!1}}function UK(){for(var o=window,a=ze();a instanceof o.HTMLIFrameElement;){if(fxe(a))o=a.contentWindow;else return a;a=ze(o.document)}return a}function OD(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}function hxe(){var o=UK();return{focusedElem:o,selectionRange:OD(o)?gxe(o):null}}function pxe(o){var a=UK(),p=o.focusedElem,S=o.selectionRange;if(a!==p&&dxe(p)){S!==null&&OD(p)&&mxe(p,S);for(var b=[],T=p;T=T.parentNode;)T.nodeType===us&&b.push({element:T,left:T.scrollLeft,top:T.scrollTop});typeof p.focus=="function"&&p.focus();for(var D=0;D<b.length;D++){var N=b[D];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}}function gxe(o){var a;return"selectionStart"in o?a={start:o.selectionStart,end:o.selectionEnd}:a=ku(o),a||{start:0,end:0}}function mxe(o,a){var p=a.start,S=a.end;S===void 0&&(S=p),"selectionStart"in o?(o.selectionStart=p,o.selectionEnd=Math.min(S,o.value.length)):uxe(o,a)}var yxe=yn&&"documentMode"in document&&document.documentMode<=11;function vxe(){gt("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var Py=null,jD=null,Ux=null,LD=!1;function Sxe(o){if("selectionStart"in o&&OD(o))return{start:o.selectionStart,end:o.selectionEnd};var a=o.ownerDocument&&o.ownerDocument.defaultView||window,p=a.getSelection();return{anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}}function xxe(o){return o.window===o?o.document:o.nodeType===gc?o:o.ownerDocument}function $K(o,a,p){var S=xxe(p);if(!(LD||Py==null||Py!==ze(S))){var b=Sxe(Py);if(!Ux||!At(Ux,b)){Ux=b;var T=bE(jD,"onSelect");if(T.length>0){var D=new Ks("onSelect","select",null,a,p);o.push({event:D,listeners:T}),D.target=Py}}}}function wxe(o,a,p,S,b,T,D){var N=p?My(p):window;switch(a){case"focusin":(gh(N)||N.contentEditable==="true")&&(Py=N,jD=p,Ux=null);break;case"focusout":Py=null,jD=null,Ux=null;break;case"mousedown":LD=!0;break;case"contextmenu":case"mouseup":case"dragend":LD=!1,$K(o,S,b);break;case"selectionchange":if(yxe)break;case"keydown":case"keyup":$K(o,S,b)}}function SE(o,a){var p={};return p[o.toLowerCase()]=a.toLowerCase(),p["Webkit"+o]="webkit"+a,p["Moz"+o]="moz"+a,p}var Ty={animationend:SE("Animation","AnimationEnd"),animationiteration:SE("Animation","AnimationIteration"),animationstart:SE("Animation","AnimationStart"),transitionend:SE("Transition","TransitionEnd")},ND={},BK={};yn&&(BK=document.createElement("div").style,"AnimationEvent"in window||(delete Ty.animationend.animation,delete Ty.animationiteration.animation,delete Ty.animationstart.animation),"TransitionEvent"in window||delete Ty.transitionend.transition);function xE(o){if(ND[o])return ND[o];if(!Ty[o])return o;var a=Ty[o];for(var p in a)if(a.hasOwnProperty(p)&&p in BK)return ND[o]=a[p];return o}var HK=xE("animationend"),VK=xE("animationiteration"),KK=xE("animationstart"),WK=xE("transitionend"),GK=new Map,qK=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function mh(o,a){GK.set(o,a),gt(a,[o])}function bxe(){for(var o=0;o<qK.length;o++){var a=qK[o],p=a.toLowerCase(),S=a[0].toUpperCase()+a.slice(1);mh(p,"on"+S)}mh(HK,"onAnimationEnd"),mh(VK,"onAnimationIteration"),mh(KK,"onAnimationStart"),mh("dblclick","onDoubleClick"),mh("focusin","onFocus"),mh("focusout","onBlur"),mh(WK,"onTransitionEnd")}function Cxe(o,a,p,S,b,T,D){var N=GK.get(a);if(N!==void 0){var $=Ks,G=a;switch(a){case"keypress":if(fh(S)===0)return;case"keydown":case"keyup":$=PD;break;case"focusin":G="focus",$=gy;break;case"focusout":G="blur",$=gy;break;case"beforeblur":case"afterblur":$=gy;break;case"click":if(S.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Rx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=ID;break;case HK:case VK:case KK:$=Mx;break;case WK:$=jx;break;case"scroll":$=lE;break;case"wheel":$=Tu;break;case"copy":case"cut":case"paste":$=CD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Ox;break}var X=(T&yd)!==0;{var fe=!X&&a==="scroll",ue=Txe(p,N,S.type,X,fe);if(ue.length>0){var _e=new $(N,G,null,S,b);o.push({event:_e,listeners:ue})}}}}bxe(),Ce(),_y(),vxe(),mE();function Exe(o,a,p,S,b,T,D){Cxe(o,a,p,S,b,T);var N=(T&YS)===0;N&&(Ye(o,a,p,S,b),de(o,a,p,S,b),wxe(o,a,p,S,b),Ey(o,a,p,S,b))}var $x=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],FD=new Set(["cancel","close","invalid","load","scroll","toggle"].concat($x));function YK(o,a,p){var S=o.type||"unknown-event";o.currentTarget=p,Cp(S,a,void 0,o),o.currentTarget=null}function _xe(o,a,p){var S;if(p)for(var b=a.length-1;b>=0;b--){var T=a[b],D=T.instance,N=T.currentTarget,$=T.listener;if(D!==S&&o.isPropagationStopped())return;YK(o,$,N),S=D}else for(var G=0;G<a.length;G++){var X=a[G],fe=X.instance,ue=X.currentTarget,_e=X.listener;if(fe!==S&&o.isPropagationStopped())return;YK(o,_e,ue),S=fe}}function XK(o,a){for(var p=(a&yd)!==0,S=0;S<o.length;S++){var b=o[S],T=b.event,D=b.listeners;_xe(T,D,p)}mc()}function Pxe(o,a,p,S,b){var T=Cm(p),D=[];Exe(D,o,S,p,T,a),XK(D,a)}function Br(o,a){FD.has(o)||c('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',o);var p=!1,S=nbe(a),b=Rxe(o);S.has(b)||(ZK(a,o,Il,p),S.add(b))}function zD(o,a,p){FD.has(o)&&!a&&c('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',o);var S=0;a&&(S|=yd),ZK(p,o,S,a)}var wE="_reactListening"+Math.random().toString(36).slice(2);function Bx(o){if(!o[wE]){o[wE]=!0,ot.forEach(function(p){p!=="selectionchange"&&(FD.has(p)||zD(p,!1,o),zD(p,!0,o))});var a=o.nodeType===gc?o:o.ownerDocument;a!==null&&(a[wE]||(a[wE]=!0,zD("selectionchange",!1,a)))}}function ZK(o,a,p,S,b){var T=Hs(o,a,p),D=void 0;bp&&(a==="touchstart"||a==="touchmove"||a==="wheel")&&(D=!0),o=o,S?D!==void 0?uh(o,a,T,D):kx(o,a,T):D!==void 0?wc(o,a,T,D):vs(o,a,T)}function QK(o,a){return o===a||o.nodeType===ui&&o.parentNode===a}function UD(o,a,p,S,b){var T=S;if(!(a&qS)&&!(a&Il)){var D=b;if(S!==null){var N=S;e:for(;;){if(N===null)return;var $=N.tag;if($===v||$===w){var G=N.stateNode.containerInfo;if(QK(G,D))break;if($===w)for(var X=N.return;X!==null;){var fe=X.tag;if(fe===v||fe===w){var ue=X.stateNode.containerInfo;if(QK(ue,D))return}X=X.return}for(;G!==null;){var _e=ng(G);if(_e===null)return;var Ie=_e.tag;if(Ie===C||Ie===E){N=T=_e;continue e}G=G.parentNode}}N=N.return}}}DC(function(){return Pxe(o,a,p,T)})}function Hx(o,a,p){return{instance:o,listener:a,currentTarget:p}}function Txe(o,a,p,S,b,T){for(var D=a!==null?a+"Capture":null,N=S?D:a,$=[],G=o,X=null;G!==null;){var fe=G,ue=fe.stateNode,_e=fe.tag;if(_e===C&&ue!==null&&(X=ue,N!==null)){var Ie=Sd(G,N);Ie!=null&&$.push(Hx(G,Ie,X))}if(b)break;G=G.return}return $}function bE(o,a){for(var p=a+"Capture",S=[],b=o;b!==null;){var T=b,D=T.stateNode,N=T.tag;if(N===C&&D!==null){var $=D,G=Sd(b,p);G!=null&&S.unshift(Hx(b,G,$));var X=Sd(b,a);X!=null&&S.push(Hx(b,X,$))}b=b.return}return S}function Iy(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==C);return o||null}function Ixe(o,a){for(var p=o,S=a,b=0,T=p;T;T=Iy(T))b++;for(var D=0,N=S;N;N=Iy(N))D++;for(;b-D>0;)p=Iy(p),b--;for(;D-b>0;)S=Iy(S),D--;for(var $=b;$--;){if(p===S||S!==null&&p===S.alternate)return p;p=Iy(p),S=Iy(S)}return null}function JK(o,a,p,S,b){for(var T=a._reactName,D=[],N=p;N!==null&&N!==S;){var $=N,G=$.alternate,X=$.stateNode,fe=$.tag;if(G!==null&&G===S)break;if(fe===C&&X!==null){var ue=X;if(b){var _e=Sd(N,T);_e!=null&&D.unshift(Hx(N,_e,ue))}else if(!b){var Ie=Sd(N,T);Ie!=null&&D.push(Hx(N,Ie,ue))}}N=N.return}D.length!==0&&o.push({event:a,listeners:D})}function kxe(o,a,p,S,b){var T=S&&b?Ixe(S,b):null;S!==null&&JK(o,a,S,T,!1),b!==null&&p!==null&&JK(o,p,b,T,!0)}function Rxe(o,a){return o+"__bubble"}var Ea=!1,Vx="dangerouslySetInnerHTML",CE="suppressContentEditableWarning",yh="suppressHydrationWarning",eW="autoFocus",eg="children",tg="style",EE="__html",$D,_E,Kx,tW,PE,nW,rW;$D={dialog:!0,webview:!0},_E=function(o,a){TC(o,a),Vf(o,a),AC(o,a,{registrationNameDependencies:We,possibleRegistrationNames:Qe})},nW=yn&&!document.documentMode,Kx=function(o,a,p){if(!Ea){var S=TE(p),b=TE(a);b!==S&&(Ea=!0,c("Prop `%s` did not match. Server: %s Client: %s",o,JSON.stringify(b),JSON.stringify(S)))}},tW=function(o){if(!Ea){Ea=!0;var a=[];o.forEach(function(p){a.push(p)}),c("Extra attributes from the server: %s",a)}},PE=function(o,a){a===!1?c("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",o,o,o):c("Expected `%s` listener to be a function, instead got a value of `%s` type.",o,typeof a)},rW=function(o,a){var p=o.namespaceURI===Za?o.ownerDocument.createElement(o.tagName):o.ownerDocument.createElementNS(o.namespaceURI,o.tagName);return p.innerHTML=a,p.innerHTML};var Mxe=/\r\n?/g,Axe=/\u0000|\uFFFD/g;function TE(o){Cr(o);var a=typeof o=="string"?o:""+o;return a.replace(Mxe,`
`).replace(Axe,"")}function IE(o,a,p,S){var b=TE(a),T=TE(o);if(T!==b&&(S&&(Ea||(Ea=!0,c('Text content did not match. Server: "%s" Client: "%s"',T,b))),p&&Q))throw new Error("Text content does not match server-rendered HTML.")}function iW(o){return o.nodeType===gc?o:o.ownerDocument}function Dxe(){}function kE(o){o.onclick=Dxe}function Oxe(o,a,p,S,b){for(var T in S)if(S.hasOwnProperty(T)){var D=S[T];if(T===tg)D&&Object.freeze(D),bC(a,D);else if(T===Vx){var N=D?D[EE]:void 0;N!=null&&uC(a,N)}else if(T===eg)if(typeof D=="string"){var $=o!=="textarea"||D!=="";$&&cu(a,D)}else typeof D=="number"&&cu(a,""+D);else T===CE||T===yh||T===eW||(We.hasOwnProperty(T)?D!=null&&(typeof D!="function"&&PE(T,D),T==="onScroll"&&Br("scroll",a)):D!=null&&Mo(a,T,D,b))}}function jxe(o,a,p,S){for(var b=0;b<a.length;b+=2){var T=a[b],D=a[b+1];T===tg?bC(o,D):T===Vx?uC(o,D):T===eg?cu(o,D):Mo(o,T,D,S)}}function Lxe(o,a,p,S){var b,T=iW(p),D,N=S;if(N===Za&&(N=BS(o)),N===Za){if(b=uu(o,a),!b&&o!==o.toLowerCase()&&c("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",o),o==="script"){var $=T.createElement("div");$.innerHTML="<script><\/script>";var G=$.firstChild;D=$.removeChild(G)}else if(typeof a.is=="string")D=T.createElement(o,{is:a.is});else if(D=T.createElement(o),o==="select"){var X=D;a.multiple?X.multiple=!0:a.size&&(X.size=a.size)}}else D=T.createElementNS(N,o);return N===Za&&!b&&Object.prototype.toString.call(D)==="[object HTMLUnknownElement]"&&!Zt.call($D,o)&&($D[o]=!0,c("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",o)),D}function Nxe(o,a){return iW(a).createTextNode(o)}function Fxe(o,a,p,S){var b=uu(a,p);_E(a,p);var T;switch(a){case"dialog":Br("cancel",o),Br("close",o),T=p;break;case"iframe":case"object":case"embed":Br("load",o),T=p;break;case"video":case"audio":for(var D=0;D<$x.length;D++)Br($x[D],o);T=p;break;case"source":Br("error",o),T=p;break;case"img":case"image":case"link":Br("error",o),Br("load",o),T=p;break;case"details":Br("toggle",o),T=p;break;case"input":Jn(o,p),T=Qn(o,p),Br("invalid",o);break;case"option":On(o,p),T=p;break;case"select":up(o,p),T=md(o,p),Br("invalid",o);break;case"textarea":aC(o,p),T=ym(o,p),Br("invalid",o);break;default:T=p}switch(wm(a,T),Oxe(a,o,S,T,b),a){case"input":Z(o),ge(o,p,!1);break;case"textarea":Z(o),cC(o);break;case"option":Bn(o,p);break;case"select":zS(o,p);break;default:typeof T.onClick=="function"&&kE(o);break}}function zxe(o,a,p,S,b){_E(a,S);var T=null,D,N;switch(a){case"input":D=Qn(o,p),N=Qn(o,S),T=[];break;case"select":D=md(o,p),N=md(o,S),T=[];break;case"textarea":D=ym(o,p),N=ym(o,S),T=[];break;default:D=p,N=S,typeof D.onClick!="function"&&typeof N.onClick=="function"&&kE(o);break}wm(a,N);var $,G,X=null;for($ in D)if(!(N.hasOwnProperty($)||!D.hasOwnProperty($)||D[$]==null))if($===tg){var fe=D[$];for(G in fe)fe.hasOwnProperty(G)&&(X||(X={}),X[G]="")}else $===Vx||$===eg||$===CE||$===yh||$===eW||(We.hasOwnProperty($)?T||(T=[]):(T=T||[]).push($,null));for($ in N){var ue=N[$],_e=D!=null?D[$]:void 0;if(!(!N.hasOwnProperty($)||ue===_e||ue==null&&_e==null))if($===tg)if(ue&&Object.freeze(ue),_e){for(G in _e)_e.hasOwnProperty(G)&&(!ue||!ue.hasOwnProperty(G))&&(X||(X={}),X[G]="");for(G in ue)ue.hasOwnProperty(G)&&_e[G]!==ue[G]&&(X||(X={}),X[G]=ue[G])}else X||(T||(T=[]),T.push($,X)),X=ue;else if($===Vx){var Ie=ue?ue[EE]:void 0,Me=_e?_e[EE]:void 0;Ie!=null&&Me!==Ie&&(T=T||[]).push($,Ie)}else $===eg?(typeof ue=="string"||typeof ue=="number")&&(T=T||[]).push($,""+ue):$===CE||$===yh||(We.hasOwnProperty($)?(ue!=null&&(typeof ue!="function"&&PE($,ue),$==="onScroll"&&Br("scroll",o)),!T&&_e!==ue&&(T=[])):(T=T||[]).push($,ue))}return X&&(Qa(X,N[tg]),(T=T||[]).push(tg,X)),T}function Uxe(o,a,p,S,b){p==="input"&&b.type==="radio"&&b.name!=null&&B(o,b);var T=uu(p,S),D=uu(p,b);switch(jxe(o,a,T,D),p){case"input":ne(o,b);break;case"textarea":lC(o,b);break;case"select":mm(o,b);break}}function $xe(o){{var a=o.toLowerCase();return $f.hasOwnProperty(a)&&$f[a]||null}}function Bxe(o,a,p,S,b,T,D){var N,$;switch(N=uu(a,p),_E(a,p),a){case"dialog":Br("cancel",o),Br("close",o);break;case"iframe":case"object":case"embed":Br("load",o);break;case"video":case"audio":for(var G=0;G<$x.length;G++)Br($x[G],o);break;case"source":Br("error",o);break;case"img":case"image":case"link":Br("error",o),Br("load",o);break;case"details":Br("toggle",o);break;case"input":Jn(o,p),Br("invalid",o);break;case"option":On(o,p);break;case"select":up(o,p),Br("invalid",o);break;case"textarea":aC(o,p),Br("invalid",o);break}wm(a,p);{$=new Set;for(var X=o.attributes,fe=0;fe<X.length;fe++){var ue=X[fe].name.toLowerCase();switch(ue){case"value":break;case"checked":break;case"selected":break;default:$.add(X[fe].name)}}}var _e=null;for(var Ie in p)if(p.hasOwnProperty(Ie)){var Me=p[Ie];if(Ie===eg)typeof Me=="string"?o.textContent!==Me&&(p[yh]!==!0&&IE(o.textContent,Me,T,D),_e=[eg,Me]):typeof Me=="number"&&o.textContent!==""+Me&&(p[yh]!==!0&&IE(o.textContent,Me,T,D),_e=[eg,""+Me]);else if(We.hasOwnProperty(Ie))Me!=null&&(typeof Me!="function"&&PE(Ie,Me),Ie==="onScroll"&&Br("scroll",o));else if(D&&typeof N=="boolean"){var at=void 0,Ot=bn(Ie);if(p[yh]!==!0){if(!(Ie===CE||Ie===yh||Ie==="value"||Ie==="checked"||Ie==="selected")){if(Ie===Vx){var Tt=o.innerHTML,Ln=Me?Me[EE]:void 0;if(Ln!=null){var En=rW(o,Ln);En!==Tt&&Kx(Ie,Tt,En)}}else if(Ie===tg){if($.delete(Ie),nW){var we=hD(Me);at=o.getAttribute("style"),we!==at&&Kx(Ie,at,we)}}else if(N)$.delete(Ie.toLowerCase()),at=ha(o,Ie,Me),Me!==at&&Kx(Ie,at,Me);else if(!Xn(Ie,Ot,N)&&!ar(Ie,Me,Ot,N)){var Ae=!1;if(Ot!==null)$.delete(Ot.attributeName),at=sc(o,Ie,Me,Ot);else{var be=S;if(be===Za&&(be=BS(a)),be===Za)$.delete(Ie.toLowerCase());else{var Ge=$xe(Ie);Ge!==null&&Ge!==Ie&&(Ae=!0,$.delete(Ge)),$.delete(Ie)}at=ha(o,Ie,Me)}var pt=me;!pt&&Me!==at&&!Ae&&Kx(Ie,at,Me)}}}}}switch(D&&$.size>0&&p[yh]!==!0&&tW($),a){case"input":Z(o),ge(o,p,!0);break;case"textarea":Z(o),cC(o);break;case"select":case"option":break;default:typeof p.onClick=="function"&&kE(o);break}return _e}function Hxe(o,a,p){var S=o.nodeValue!==a;return S}function BD(o,a){{if(Ea)return;Ea=!0,c("Did not expect server HTML to contain a <%s> in <%s>.",a.nodeName.toLowerCase(),o.nodeName.toLowerCase())}}function HD(o,a){{if(Ea)return;Ea=!0,c('Did not expect server HTML to contain the text node "%s" in <%s>.',a.nodeValue,o.nodeName.toLowerCase())}}function VD(o,a,p){{if(Ea)return;Ea=!0,c("Expected server HTML to contain a matching <%s> in <%s>.",a,o.nodeName.toLowerCase())}}function KD(o,a){{if(a===""||Ea)return;Ea=!0,c('Expected server HTML to contain a matching text node for "%s" in <%s>.',a,o.nodeName.toLowerCase())}}function Vxe(o,a,p){switch(a){case"input":Re(o,p);return;case"textarea":sD(o,p);return;case"select":US(o,p);return}}var Wx=function(){},Gx=function(){};{var Kxe=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],oW=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],Wxe=oW.concat(["button"]),Gxe=["dd","dt","li","option","optgroup","p","rp","rt"],sW={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};Gx=function(o,a){var p=Gt({},o||sW),S={tag:a};return oW.indexOf(a)!==-1&&(p.aTagInScope=null,p.buttonTagInScope=null,p.nobrTagInScope=null),Wxe.indexOf(a)!==-1&&(p.pTagInButtonScope=null),Kxe.indexOf(a)!==-1&&a!=="address"&&a!=="div"&&a!=="p"&&(p.listItemTagAutoclosing=null,p.dlItemTagAutoclosing=null),p.current=S,a==="form"&&(p.formTag=S),a==="a"&&(p.aTagInScope=S),a==="button"&&(p.buttonTagInScope=S),a==="nobr"&&(p.nobrTagInScope=S),a==="p"&&(p.pTagInButtonScope=S),a==="li"&&(p.listItemTagAutoclosing=S),(a==="dd"||a==="dt")&&(p.dlItemTagAutoclosing=S),p};var qxe=function(o,a){switch(a){case"select":return o==="option"||o==="optgroup"||o==="#text";case"optgroup":return o==="option"||o==="#text";case"option":return o==="#text";case"tr":return o==="th"||o==="td"||o==="style"||o==="script"||o==="template";case"tbody":case"thead":case"tfoot":return o==="tr"||o==="style"||o==="script"||o==="template";case"colgroup":return o==="col"||o==="template";case"table":return o==="caption"||o==="colgroup"||o==="tbody"||o==="tfoot"||o==="thead"||o==="style"||o==="script"||o==="template";case"head":return o==="base"||o==="basefont"||o==="bgsound"||o==="link"||o==="meta"||o==="title"||o==="noscript"||o==="noframes"||o==="style"||o==="script"||o==="template";case"html":return o==="head"||o==="body"||o==="frameset";case"frameset":return o==="frame";case"#document":return o==="html"}switch(o){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return a!=="h1"&&a!=="h2"&&a!=="h3"&&a!=="h4"&&a!=="h5"&&a!=="h6";case"rp":case"rt":return Gxe.indexOf(a)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return a==null}return!0},Yxe=function(o,a){switch(o){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return a.pTagInButtonScope;case"form":return a.formTag||a.pTagInButtonScope;case"li":return a.listItemTagAutoclosing;case"dd":case"dt":return a.dlItemTagAutoclosing;case"button":return a.buttonTagInScope;case"a":return a.aTagInScope;case"nobr":return a.nobrTagInScope}return null},aW={};Wx=function(o,a,p){p=p||sW;var S=p.current,b=S&&S.tag;a!=null&&(o!=null&&c("validateDOMNesting: when childText is passed, childTag should be null"),o="#text");var T=qxe(o,b)?null:S,D=T?null:Yxe(o,p),N=T||D;if(N){var $=N.tag,G=!!T+"|"+o+"|"+$;if(!aW[G]){aW[G]=!0;var X=o,fe="";if(o==="#text"?/\S/.test(a)?X="Text nodes":(X="Whitespace text nodes",fe=" Make sure you don't have any extra whitespace between tags on each line of your source code."):X="<"+o+">",T){var ue="";$==="table"&&o==="tr"&&(ue+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),c("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",X,$,fe,ue)}else c("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",X,$)}}}}var RE="suppressHydrationWarning",ME="$",AE="/$",qx="$?",Yx="$!",Xxe="style",WD=null,GD=null;function Zxe(o){var a,p,S=o.nodeType;switch(S){case gc:case dp:{a=S===gc?"#document":"#fragment";var b=o.documentElement;p=b?b.namespaceURI:vm(null,"");break}default:{var T=S===ui?o.parentNode:o,D=T.namespaceURI||null;a=T.tagName,p=vm(D,a);break}}{var N=a.toLowerCase(),$=Gx(null,N);return{namespace:p,ancestorInfo:$}}}function Qxe(o,a,p){{var S=o,b=vm(S.namespace,a),T=Gx(S.ancestorInfo,a);return{namespace:b,ancestorInfo:T}}}function yEe(o){return o}function Jxe(o){WD=Zi(),GD=hxe();var a=null;return ri(!1),a}function ewe(o){pxe(GD),ri(WD),WD=null,GD=null}function twe(o,a,p,S,b){var T;{var D=S;if(Wx(o,null,D.ancestorInfo),typeof a.children=="string"||typeof a.children=="number"){var N=""+a.children,$=Gx(D.ancestorInfo,o);Wx(null,N,$)}T=D.namespace}var G=Lxe(o,a,p,T);return Qx(b,G),tO(G,a),G}function nwe(o,a){o.appendChild(a)}function rwe(o,a,p,S,b){switch(Fxe(o,a,p,S),a){case"button":case"input":case"select":case"textarea":return!!p.autoFocus;case"img":return!0;default:return!1}}function iwe(o,a,p,S,b,T){{var D=T;if(typeof S.children!=typeof p.children&&(typeof S.children=="string"||typeof S.children=="number")){var N=""+S.children,$=Gx(D.ancestorInfo,a);Wx(null,N,$)}}return zxe(o,a,p,S)}function qD(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}function owe(o,a,p,S){{var b=p;Wx(null,o,b.ancestorInfo)}var T=Nxe(o,a);return Qx(S,T),T}function swe(){var o=window.event;return o===void 0?Yi:ch(o.type)}var YD=typeof setTimeout=="function"?setTimeout:void 0,awe=typeof clearTimeout=="function"?clearTimeout:void 0,XD=-1,lW=typeof Promise=="function"?Promise:void 0,lwe=typeof queueMicrotask=="function"?queueMicrotask:typeof lW<"u"?function(o){return lW.resolve(null).then(o).catch(cwe)}:YD;function cwe(o){setTimeout(function(){throw o})}function uwe(o,a,p,S){switch(a){case"button":case"input":case"select":case"textarea":p.autoFocus&&o.focus();return;case"img":{p.src&&(o.src=p.src);return}}}function dwe(o,a,p,S,b,T){Uxe(o,a,p,S,b),tO(o,b)}function cW(o){cu(o,"")}function fwe(o,a,p){o.nodeValue=p}function hwe(o,a){o.appendChild(a)}function pwe(o,a){var p;o.nodeType===ui?(p=o.parentNode,p.insertBefore(a,o)):(p=o,p.appendChild(a));var S=o._reactRootContainer;S==null&&p.onclick===null&&kE(p)}function gwe(o,a,p){o.insertBefore(a,p)}function mwe(o,a,p){o.nodeType===ui?o.parentNode.insertBefore(a,p):o.insertBefore(a,p)}function ywe(o,a){o.removeChild(a)}function vwe(o,a){o.nodeType===ui?o.parentNode.removeChild(a):o.removeChild(a)}function ZD(o,a){var p=a,S=0;do{var b=p.nextSibling;if(o.removeChild(p),b&&b.nodeType===ui){var T=b.data;if(T===AE)if(S===0){o.removeChild(b),mo(a);return}else S--;else(T===ME||T===qx||T===Yx)&&S++}p=b}while(p);mo(a)}function Swe(o,a){o.nodeType===ui?ZD(o.parentNode,a):o.nodeType===us&&ZD(o,a),mo(o)}function xwe(o){o=o;var a=o.style;typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"}function wwe(o){o.nodeValue=""}function bwe(o,a){o=o;var p=a[Xxe],S=p!=null&&p.hasOwnProperty("display")?p.display:null;o.style.display=xm("display",S)}function Cwe(o,a){o.nodeValue=a}function Ewe(o){o.nodeType===us?o.textContent="":o.nodeType===gc&&o.documentElement&&o.removeChild(o.documentElement)}function _we(o,a,p){return o.nodeType!==us||a.toLowerCase()!==o.nodeName.toLowerCase()?null:o}function Pwe(o,a){return a===""||o.nodeType!==pc?null:o}function Twe(o){return o.nodeType!==ui?null:o}function uW(o){return o.data===qx}function QD(o){return o.data===Yx}function Iwe(o){var a=o.nextSibling&&o.nextSibling.dataset,p,S,b;return a&&(p=a.dgst,S=a.msg,b=a.stck),{message:S,digest:p,stack:b}}function kwe(o,a){o._reactRetry=a}function DE(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===us||a===pc)break;if(a===ui){var p=o.data;if(p===ME||p===Yx||p===qx)break;if(p===AE)return null}}return o}function Xx(o){return DE(o.nextSibling)}function Rwe(o){return DE(o.firstChild)}function Mwe(o){return DE(o.firstChild)}function Awe(o){return DE(o.nextSibling)}function Dwe(o,a,p,S,b,T,D){Qx(T,o),tO(o,p);var N;{var $=b;N=$.namespace}var G=(T.mode&gn)!==Mt;return Bxe(o,a,p,N,S,G,D)}function Owe(o,a,p,S){return Qx(p,o),p.mode&gn,Hxe(o,a)}function jwe(o,a){Qx(a,o)}function Lwe(o){for(var a=o.nextSibling,p=0;a;){if(a.nodeType===ui){var S=a.data;if(S===AE){if(p===0)return Xx(a);p--}else(S===ME||S===Yx||S===qx)&&p++}a=a.nextSibling}return null}function dW(o){for(var a=o.previousSibling,p=0;a;){if(a.nodeType===ui){var S=a.data;if(S===ME||S===Yx||S===qx){if(p===0)return a;p--}else S===AE&&p++}a=a.previousSibling}return null}function Nwe(o){mo(o)}function Fwe(o){mo(o)}function zwe(o){return o!=="head"&&o!=="body"}function Uwe(o,a,p,S){var b=!0;IE(a.nodeValue,p,S,b)}function $we(o,a,p,S,b,T){if(a[RE]!==!0){var D=!0;IE(S.nodeValue,b,T,D)}}function Bwe(o,a){a.nodeType===us?BD(o,a):a.nodeType===ui||HD(o,a)}function Hwe(o,a){{var p=o.parentNode;p!==null&&(a.nodeType===us?BD(p,a):a.nodeType===ui||HD(p,a))}}function Vwe(o,a,p,S,b){(b||a[RE]!==!0)&&(S.nodeType===us?BD(p,S):S.nodeType===ui||HD(p,S))}function Kwe(o,a,p){VD(o,a)}function Wwe(o,a){KD(o,a)}function Gwe(o,a,p){{var S=o.parentNode;S!==null&&VD(S,a)}}function qwe(o,a){{var p=o.parentNode;p!==null&&KD(p,a)}}function Ywe(o,a,p,S,b,T){(T||a[RE]!==!0)&&VD(p,S)}function Xwe(o,a,p,S,b){(b||a[RE]!==!0)&&KD(p,S)}function Zwe(o){c("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",o.nodeName.toLowerCase())}function Qwe(o){Bx(o)}var ky=Math.random().toString(36).slice(2),Ry="__reactFiber$"+ky,JD="__reactProps$"+ky,Zx="__reactContainer$"+ky,eO="__reactEvents$"+ky,Jwe="__reactListeners$"+ky,ebe="__reactHandles$"+ky;function tbe(o){delete o[Ry],delete o[JD],delete o[eO],delete o[Jwe],delete o[ebe]}function Qx(o,a){a[Ry]=o}function OE(o,a){a[Zx]=o}function fW(o){o[Zx]=null}function Jx(o){return!!o[Zx]}function ng(o){var a=o[Ry];if(a)return a;for(var p=o.parentNode;p;){if(a=p[Zx]||p[Ry],a){var S=a.alternate;if(a.child!==null||S!==null&&S.child!==null)for(var b=dW(o);b!==null;){var T=b[Ry];if(T)return T;b=dW(b)}return a}o=p,p=o.parentNode}return null}function vh(o){var a=o[Ry]||o[Zx];return a&&(a.tag===C||a.tag===E||a.tag===F||a.tag===v)?a:null}function My(o){if(o.tag===C||o.tag===E)return o.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function jE(o){return o[JD]||null}function tO(o,a){o[JD]=a}function nbe(o){var a=o[eO];return a===void 0&&(a=o[eO]=new Set),a}var hW={},pW=r.ReactDebugCurrentFrame;function LE(o){if(o){var a=o._owner,p=pd(o.type,o._source,a?a.type:null);pW.setExtraStackFrame(p)}else pW.setExtraStackFrame(null)}function Cc(o,a,p,S,b){{var T=Function.call.bind(Zt);for(var D in o)if(T(o,D)){var N=void 0;try{if(typeof o[D]!="function"){var $=Error((S||"React class")+": "+p+" type `"+D+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof o[D]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw $.name="Invariant Violation",$}N=o[D](a,D,S,p,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(G){N=G}N&&!(N instanceof Error)&&(LE(b),c("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",S||"React class",p,D,typeof N),LE(null)),N instanceof Error&&!(N.message in hW)&&(hW[N.message]=!0,LE(b),c("Failed %s type: %s",p,N.message),LE(null))}}}var nO=[],NE;NE=[];var Bd=-1;function Sh(o){return{current:o}}function Ss(o,a){if(Bd<0){c("Unexpected pop.");return}a!==NE[Bd]&&c("Unexpected Fiber popped."),o.current=nO[Bd],nO[Bd]=null,NE[Bd]=null,Bd--}function xs(o,a,p){Bd++,nO[Bd]=o.current,NE[Bd]=p,o.current=a}var rO;rO={};var ol={};Object.freeze(ol);var Hd=Sh(ol),Ru=Sh(!1),iO=ol;function Ay(o,a,p){return p&&Mu(a)?iO:Hd.current}function gW(o,a,p){{var S=o.stateNode;S.__reactInternalMemoizedUnmaskedChildContext=a,S.__reactInternalMemoizedMaskedChildContext=p}}function Dy(o,a){{var p=o.type,S=p.contextTypes;if(!S)return ol;var b=o.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===a)return b.__reactInternalMemoizedMaskedChildContext;var T={};for(var D in S)T[D]=a[D];{var N=Bt(o)||"Unknown";Cc(S,T,"context",N)}return b&&gW(o,a,T),T}}function FE(){return Ru.current}function Mu(o){{var a=o.childContextTypes;return a!=null}}function zE(o){Ss(Ru,o),Ss(Hd,o)}function oO(o){Ss(Ru,o),Ss(Hd,o)}function mW(o,a,p){{if(Hd.current!==ol)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");xs(Hd,a,o),xs(Ru,p,o)}}function yW(o,a,p){{var S=o.stateNode,b=a.childContextTypes;if(typeof S.getChildContext!="function"){{var T=Bt(o)||"Unknown";rO[T]||(rO[T]=!0,c("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",T,T))}return p}var D=S.getChildContext();for(var N in D)if(!(N in b))throw new Error((Bt(o)||"Unknown")+'.getChildContext(): key "'+N+'" is not defined in childContextTypes.');{var $=Bt(o)||"Unknown";Cc(b,D,"child context",$)}return Gt({},p,D)}}function UE(o){{var a=o.stateNode,p=a&&a.__reactInternalMemoizedMergedChildContext||ol;return iO=Hd.current,xs(Hd,p,o),xs(Ru,Ru.current,o),!0}}function vW(o,a,p){{var S=o.stateNode;if(!S)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(p){var b=yW(o,a,iO);S.__reactInternalMemoizedMergedChildContext=b,Ss(Ru,o),Ss(Hd,o),xs(Hd,b,o),xs(Ru,p,o)}else Ss(Ru,o),xs(Ru,p,o)}}function rbe(o){{if(!NC(o)||o.tag!==g)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var a=o;do{switch(a.tag){case v:return a.stateNode.context;case g:{var p=a.type;if(Mu(p))return a.stateNode.__reactInternalMemoizedMergedChildContext;break}}a=a.return}while(a!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var xh=0,$E=1,Vd=null,sO=!1,aO=!1;function SW(o){Vd===null?Vd=[o]:Vd.push(o)}function ibe(o){sO=!0,SW(o)}function xW(){sO&&wh()}function wh(){if(!aO&&Vd!==null){aO=!0;var o=0,a=Bs();try{var p=!0,S=Vd;for(_i(ys);o<S.length;o++){var b=S[o];do b=b(p);while(b!==null)}Vd=null,sO=!1}catch(T){throw Vd!==null&&(Vd=Vd.slice(o+1)),rx(vc,wh),T}finally{_i(a),aO=!1}}return null}var Oy=[],jy=0,BE=null,HE=0,jl=[],Ll=0,rg=null,Kd=1,Wd="";function obe(o){return og(),(o.flags&_p)!==Rt}function sbe(o){return og(),HE}function abe(){var o=Wd,a=Kd,p=a&~lbe(a);return p.toString(32)+o}function ig(o,a){og(),Oy[jy++]=HE,Oy[jy++]=BE,BE=o,HE=a}function wW(o,a,p){og(),jl[Ll++]=Kd,jl[Ll++]=Wd,jl[Ll++]=rg,rg=o;var S=Kd,b=Wd,T=VE(S)-1,D=S&~(1<<T),N=p+1,$=VE(a)+T;if($>30){var G=T-T%5,X=(1<<G)-1,fe=(D&X).toString(32),ue=D>>G,_e=T-G,Ie=VE(a)+_e,Me=N<<_e,at=Me|ue,Ot=fe+b;Kd=1<<Ie|at,Wd=Ot}else{var Tt=N<<T,Ln=Tt|D,En=b;Kd=1<<$|Ln,Wd=En}}function lO(o){og();var a=o.return;if(a!==null){var p=1,S=0;ig(o,p),wW(o,p,S)}}function VE(o){return 32-Ei(o)}function lbe(o){return 1<<VE(o)-1}function cO(o){for(;o===BE;)BE=Oy[--jy],Oy[jy]=null,HE=Oy[--jy],Oy[jy]=null;for(;o===rg;)rg=jl[--Ll],jl[Ll]=null,Wd=jl[--Ll],jl[Ll]=null,Kd=jl[--Ll],jl[Ll]=null}function cbe(){return og(),rg!==null?{id:Kd,overflow:Wd}:null}function ube(o,a){og(),jl[Ll++]=Kd,jl[Ll++]=Wd,jl[Ll++]=rg,Kd=a.id,Wd=a.overflow,rg=o}function og(){Fo()||c("Expected to be hydrating. This is a bug in React. Please file an issue.")}var No=null,Nl=null,Ec=!1,sg=!1,bh=null;function dbe(){Ec&&c("We should not be hydrating here. This is a bug in React. Please file a bug.")}function bW(){sg=!0}function fbe(){return sg}function hbe(o){var a=o.stateNode.containerInfo;return Nl=Mwe(a),No=o,Ec=!0,bh=null,sg=!1,!0}function pbe(o,a,p){return Nl=Awe(a),No=o,Ec=!0,bh=null,sg=!1,p!==null&&ube(o,p),!0}function CW(o,a){switch(o.tag){case v:{Bwe(o.stateNode.containerInfo,a);break}case C:{var p=(o.mode&gn)!==Mt;Vwe(o.type,o.memoizedProps,o.stateNode,a,p);break}case F:{var S=o.memoizedState;S.dehydrated!==null&&Hwe(S.dehydrated,a);break}}}function EW(o,a){CW(o,a);var p=vCe();p.stateNode=a,p.return=o;var S=o.deletions;S===null?(o.deletions=[p],o.flags|=ds):S.push(p)}function uO(o,a){{if(sg)return;switch(o.tag){case v:{var p=o.stateNode.containerInfo;switch(a.tag){case C:var S=a.type;a.pendingProps,Kwe(p,S);break;case E:var b=a.pendingProps;Wwe(p,b);break}break}case C:{var T=o.type,D=o.memoizedProps,N=o.stateNode;switch(a.tag){case C:{var $=a.type,G=a.pendingProps,X=(o.mode&gn)!==Mt;Ywe(T,D,N,$,G,X);break}case E:{var fe=a.pendingProps,ue=(o.mode&gn)!==Mt;Xwe(T,D,N,fe,ue);break}}break}case F:{var _e=o.memoizedState,Ie=_e.dehydrated;if(Ie!==null)switch(a.tag){case C:var Me=a.type;a.pendingProps,Gwe(Ie,Me);break;case E:var at=a.pendingProps;qwe(Ie,at);break}break}default:return}}}function _W(o,a){a.flags=a.flags&-4097|di,uO(o,a)}function PW(o,a){switch(o.tag){case C:{var p=o.type;o.pendingProps;var S=_we(a,p);return S!==null?(o.stateNode=S,No=o,Nl=Rwe(S),!0):!1}case E:{var b=o.pendingProps,T=Pwe(a,b);return T!==null?(o.stateNode=T,No=o,Nl=null,!0):!1}case F:{var D=Twe(a);if(D!==null){var N={dehydrated:D,treeContext:cbe(),retryLane:$s};o.memoizedState=N;var $=SCe(D);return $.return=o,o.child=$,No=o,Nl=null,!0}return!1}default:return!1}}function dO(o){return(o.mode&gn)!==Mt&&(o.flags&pn)===Rt}function fO(o){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function hO(o){if(Ec){var a=Nl;if(!a){dO(o)&&(uO(No,o),fO()),_W(No,o),Ec=!1,No=o;return}var p=a;if(!PW(o,a)){dO(o)&&(uO(No,o),fO()),a=Xx(p);var S=No;if(!a||!PW(o,a)){_W(No,o),Ec=!1,No=o;return}EW(S,p)}}}function gbe(o,a,p){var S=o.stateNode,b=!sg,T=Dwe(S,o.type,o.memoizedProps,a,p,o,b);return o.updateQueue=T,T!==null}function mbe(o){var a=o.stateNode,p=o.memoizedProps,S=Owe(a,p,o);if(S){var b=No;if(b!==null)switch(b.tag){case v:{var T=b.stateNode.containerInfo,D=(b.mode&gn)!==Mt;Uwe(T,a,p,D);break}case C:{var N=b.type,$=b.memoizedProps,G=b.stateNode,X=(b.mode&gn)!==Mt;$we(N,$,G,a,p,X);break}}}return S}function ybe(o){var a=o.memoizedState,p=a!==null?a.dehydrated:null;if(!p)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");jwe(p,o)}function vbe(o){var a=o.memoizedState,p=a!==null?a.dehydrated:null;if(!p)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return Lwe(p)}function TW(o){for(var a=o.return;a!==null&&a.tag!==C&&a.tag!==v&&a.tag!==F;)a=a.return;No=a}function KE(o){if(o!==No)return!1;if(!Ec)return TW(o),Ec=!0,!1;if(o.tag!==v&&(o.tag!==C||zwe(o.type)&&!qD(o.type,o.memoizedProps))){var a=Nl;if(a)if(dO(o))IW(o),fO();else for(;a;)EW(o,a),a=Xx(a)}return TW(o),o.tag===F?Nl=vbe(o):Nl=No?Xx(o.stateNode):null,!0}function Sbe(){return Ec&&Nl!==null}function IW(o){for(var a=Nl;a;)CW(o,a),a=Xx(a)}function Ly(){No=null,Nl=null,Ec=!1,sg=!1}function kW(){bh!==null&&(bq(bh),bh=null)}function Fo(){return Ec}function pO(o){bh===null?bh=[o]:bh.push(o)}var xbe=r.ReactCurrentBatchConfig,wbe=null;function bbe(){return xbe.transition}var _c={recordUnsafeLifecycleWarnings:function(o,a){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(o,a){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var Cbe=function(o){for(var a=null,p=o;p!==null;)p.mode&Jt&&(a=p),p=p.return;return a},ag=function(o){var a=[];return o.forEach(function(p){a.push(p)}),a.sort().join(", ")},ew=[],tw=[],nw=[],rw=[],iw=[],ow=[],lg=new Set;_c.recordUnsafeLifecycleWarnings=function(o,a){lg.has(o.type)||(typeof a.componentWillMount=="function"&&a.componentWillMount.__suppressDeprecationWarning!==!0&&ew.push(o),o.mode&Jt&&typeof a.UNSAFE_componentWillMount=="function"&&tw.push(o),typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&nw.push(o),o.mode&Jt&&typeof a.UNSAFE_componentWillReceiveProps=="function"&&rw.push(o),typeof a.componentWillUpdate=="function"&&a.componentWillUpdate.__suppressDeprecationWarning!==!0&&iw.push(o),o.mode&Jt&&typeof a.UNSAFE_componentWillUpdate=="function"&&ow.push(o))},_c.flushPendingUnsafeLifecycleWarnings=function(){var o=new Set;ew.length>0&&(ew.forEach(function(ue){o.add(Bt(ue)||"Component"),lg.add(ue.type)}),ew=[]);var a=new Set;tw.length>0&&(tw.forEach(function(ue){a.add(Bt(ue)||"Component"),lg.add(ue.type)}),tw=[]);var p=new Set;nw.length>0&&(nw.forEach(function(ue){p.add(Bt(ue)||"Component"),lg.add(ue.type)}),nw=[]);var S=new Set;rw.length>0&&(rw.forEach(function(ue){S.add(Bt(ue)||"Component"),lg.add(ue.type)}),rw=[]);var b=new Set;iw.length>0&&(iw.forEach(function(ue){b.add(Bt(ue)||"Component"),lg.add(ue.type)}),iw=[]);var T=new Set;if(ow.length>0&&(ow.forEach(function(ue){T.add(Bt(ue)||"Component"),lg.add(ue.type)}),ow=[]),a.size>0){var D=ag(a);c(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,D)}if(S.size>0){var N=ag(S);c(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,N)}if(T.size>0){var $=ag(T);c(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,$)}if(o.size>0){var G=ag(o);l(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,G)}if(p.size>0){var X=ag(p);l(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,X)}if(b.size>0){var fe=ag(b);l(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,fe)}};var WE=new Map,RW=new Set;_c.recordLegacyContextWarning=function(o,a){var p=Cbe(o);if(p===null){c("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!RW.has(o.type)){var S=WE.get(p);(o.type.contextTypes!=null||o.type.childContextTypes!=null||a!==null&&typeof a.getChildContext=="function")&&(S===void 0&&(S=[],WE.set(p,S)),S.push(o))}},_c.flushLegacyContextWarning=function(){WE.forEach(function(o,a){if(o.length!==0){var p=o[0],S=new Set;o.forEach(function(T){S.add(Bt(T)||"Component"),RW.add(T.type)});var b=ag(S);try{$n(p),c(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,b)}finally{Ar()}}})},_c.discardPendingWarnings=function(){ew=[],tw=[],nw=[],rw=[],iw=[],ow=[],WE=new Map}}var gO,mO,yO,vO,SO,MW=function(o,a){};gO=!1,mO=!1,yO={},vO={},SO={},MW=function(o,a){if(!(o===null||typeof o!="object")&&!(!o._store||o._store.validated||o.key!=null)){if(typeof o._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");o._store.validated=!0;var p=Bt(a)||"Component";vO[p]||(vO[p]=!0,c('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function Ebe(o){return o.prototype&&o.prototype.isReactComponent}function sw(o,a,p){var S=p.ref;if(S!==null&&typeof S!="function"&&typeof S!="object"){if((o.mode&Jt||Oe)&&!(p._owner&&p._self&&p._owner.stateNode!==p._self)&&!(p._owner&&p._owner.tag!==g)&&!(typeof p.type=="function"&&!Ebe(p.type))&&p._owner){var b=Bt(o)||"Component";yO[b]||(c('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',b,S),yO[b]=!0)}if(p._owner){var T=p._owner,D;if(T){var N=T;if(N.tag!==g)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");D=N.stateNode}if(!D)throw new Error("Missing owner for string ref "+S+". This error is likely caused by a bug in React. Please file an issue.");var $=D;Wr(S,"ref");var G=""+S;if(a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===G)return a.ref;var X=function(fe){var ue=$.refs;fe===null?delete ue[G]:ue[G]=fe};return X._stringRef=G,X}else{if(typeof S!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!p._owner)throw new Error("Element ref was specified as a string ("+S+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return S}function GE(o,a){var p=Object.prototype.toString.call(a);throw new Error("Objects are not valid as a React child (found: "+(p==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":p)+"). If you meant to render a collection of children, use an array instead.")}function qE(o){{var a=Bt(o)||"Component";if(SO[a])return;SO[a]=!0,c("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function AW(o){var a=o._payload,p=o._init;return p(a)}function DW(o){function a(we,Ae){if(o){var be=we.deletions;be===null?(we.deletions=[Ae],we.flags|=ds):be.push(Ae)}}function p(we,Ae){if(!o)return null;for(var be=Ae;be!==null;)a(we,be),be=be.sibling;return null}function S(we,Ae){for(var be=new Map,Ge=Ae;Ge!==null;)Ge.key!==null?be.set(Ge.key,Ge):be.set(Ge.index,Ge),Ge=Ge.sibling;return be}function b(we,Ae){var be=yg(we,Ae);return be.index=0,be.sibling=null,be}function T(we,Ae,be){if(we.index=be,!o)return we.flags|=_p,Ae;var Ge=we.alternate;if(Ge!==null){var pt=Ge.index;return pt<Ae?(we.flags|=di,Ae):pt}else return we.flags|=di,Ae}function D(we){return o&&we.alternate===null&&(we.flags|=di),we}function N(we,Ae,be,Ge){if(Ae===null||Ae.tag!==E){var pt=pL(be,we.mode,Ge);return pt.return=we,pt}else{var ut=b(Ae,be);return ut.return=we,ut}}function $(we,Ae,be,Ge){var pt=be.type;if(pt===Vi)return X(we,Ae,be.props.children,Ge,be.key);if(Ae!==null&&(Ae.elementType===pt||Fq(Ae,be)||typeof pt=="object"&&pt!==null&&pt.$$typeof===Vt&&AW(pt)===Ae.type)){var ut=b(Ae,be.props);return ut.ref=sw(we,Ae,be),ut.return=we,ut._debugSource=be._source,ut._debugOwner=be._owner,ut}var Ht=hL(be,we.mode,Ge);return Ht.ref=sw(we,Ae,be),Ht.return=we,Ht}function G(we,Ae,be,Ge){if(Ae===null||Ae.tag!==w||Ae.stateNode.containerInfo!==be.containerInfo||Ae.stateNode.implementation!==be.implementation){var pt=gL(be,we.mode,Ge);return pt.return=we,pt}else{var ut=b(Ae,be.children||[]);return ut.return=we,ut}}function X(we,Ae,be,Ge,pt){if(Ae===null||Ae.tag!==P){var ut=Dh(be,we.mode,Ge,pt);return ut.return=we,ut}else{var Ht=b(Ae,be);return Ht.return=we,Ht}}function fe(we,Ae,be){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"){var Ge=pL(""+Ae,we.mode,be);return Ge.return=we,Ge}if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case Ci:{var pt=hL(Ae,we.mode,be);return pt.ref=sw(we,null,Ae),pt.return=we,pt}case Ao:{var ut=gL(Ae,we.mode,be);return ut.return=we,ut}case Vt:{var Ht=Ae._payload,Xt=Ae._init;return fe(we,Xt(Ht),be)}}if(tn(Ae)||Sr(Ae)){var hr=Dh(Ae,we.mode,be,null);return hr.return=we,hr}GE(we,Ae)}return typeof Ae=="function"&&qE(we),null}function ue(we,Ae,be,Ge){var pt=Ae!==null?Ae.key:null;if(typeof be=="string"&&be!==""||typeof be=="number")return pt!==null?null:N(we,Ae,""+be,Ge);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case Ci:return be.key===pt?$(we,Ae,be,Ge):null;case Ao:return be.key===pt?G(we,Ae,be,Ge):null;case Vt:{var ut=be._payload,Ht=be._init;return ue(we,Ae,Ht(ut),Ge)}}if(tn(be)||Sr(be))return pt!==null?null:X(we,Ae,be,Ge,null);GE(we,be)}return typeof be=="function"&&qE(we),null}function _e(we,Ae,be,Ge,pt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"){var ut=we.get(be)||null;return N(Ae,ut,""+Ge,pt)}if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case Ci:{var Ht=we.get(Ge.key===null?be:Ge.key)||null;return $(Ae,Ht,Ge,pt)}case Ao:{var Xt=we.get(Ge.key===null?be:Ge.key)||null;return G(Ae,Xt,Ge,pt)}case Vt:var hr=Ge._payload,Kn=Ge._init;return _e(we,Ae,be,Kn(hr),pt)}if(tn(Ge)||Sr(Ge)){var Ti=we.get(be)||null;return X(Ae,Ti,Ge,pt,null)}GE(Ae,Ge)}return typeof Ge=="function"&&qE(Ae),null}function Ie(we,Ae,be){{if(typeof we!="object"||we===null)return Ae;switch(we.$$typeof){case Ci:case Ao:MW(we,be);var Ge=we.key;if(typeof Ge!="string")break;if(Ae===null){Ae=new Set,Ae.add(Ge);break}if(!Ae.has(Ge)){Ae.add(Ge);break}c("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted  the behavior is unsupported and could change in a future version.",Ge);break;case Vt:var pt=we._payload,ut=we._init;Ie(ut(pt),Ae,be);break}}return Ae}function Me(we,Ae,be,Ge){for(var pt=null,ut=0;ut<be.length;ut++){var Ht=be[ut];pt=Ie(Ht,pt,we)}for(var Xt=null,hr=null,Kn=Ae,Ti=0,Wn=0,yi=null;Kn!==null&&Wn<be.length;Wn++){Kn.index>Wn?(yi=Kn,Kn=null):yi=Kn.sibling;var bs=ue(we,Kn,be[Wn],Ge);if(bs===null){Kn===null&&(Kn=yi);break}o&&Kn&&bs.alternate===null&&a(we,Kn),Ti=T(bs,Ti,Wn),hr===null?Xt=bs:hr.sibling=bs,hr=bs,Kn=yi}if(Wn===be.length){if(p(we,Kn),Fo()){var Ko=Wn;ig(we,Ko)}return Xt}if(Kn===null){for(;Wn<be.length;Wn++){var al=fe(we,be[Wn],Ge);al!==null&&(Ti=T(al,Ti,Wn),hr===null?Xt=al:hr.sibling=al,hr=al)}if(Fo()){var Ys=Wn;ig(we,Ys)}return Xt}for(var Xs=S(we,Kn);Wn<be.length;Wn++){var Cs=_e(Xs,we,Wn,be[Wn],Ge);Cs!==null&&(o&&Cs.alternate!==null&&Xs.delete(Cs.key===null?Wn:Cs.key),Ti=T(Cs,Ti,Wn),hr===null?Xt=Cs:hr.sibling=Cs,hr=Cs)}if(o&&Xs.forEach(function(tv){return a(we,tv)}),Fo()){var Jd=Wn;ig(we,Jd)}return Xt}function at(we,Ae,be,Ge){var pt=Sr(be);if(typeof pt!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&be[Symbol.toStringTag]==="Generator"&&(mO||c("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),mO=!0),be.entries===pt&&(gO||c("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),gO=!0);var ut=pt.call(be);if(ut)for(var Ht=null,Xt=ut.next();!Xt.done;Xt=ut.next()){var hr=Xt.value;Ht=Ie(hr,Ht,we)}}var Kn=pt.call(be);if(Kn==null)throw new Error("An iterable object provided no iterator.");for(var Ti=null,Wn=null,yi=Ae,bs=0,Ko=0,al=null,Ys=Kn.next();yi!==null&&!Ys.done;Ko++,Ys=Kn.next()){yi.index>Ko?(al=yi,yi=null):al=yi.sibling;var Xs=ue(we,yi,Ys.value,Ge);if(Xs===null){yi===null&&(yi=al);break}o&&yi&&Xs.alternate===null&&a(we,yi),bs=T(Xs,bs,Ko),Wn===null?Ti=Xs:Wn.sibling=Xs,Wn=Xs,yi=al}if(Ys.done){if(p(we,yi),Fo()){var Cs=Ko;ig(we,Cs)}return Ti}if(yi===null){for(;!Ys.done;Ko++,Ys=Kn.next()){var Jd=fe(we,Ys.value,Ge);Jd!==null&&(bs=T(Jd,bs,Ko),Wn===null?Ti=Jd:Wn.sibling=Jd,Wn=Jd)}if(Fo()){var tv=Ko;ig(we,tv)}return Ti}for(var Fw=S(we,yi);!Ys.done;Ko++,Ys=Kn.next()){var zu=_e(Fw,we,Ko,Ys.value,Ge);zu!==null&&(o&&zu.alternate!==null&&Fw.delete(zu.key===null?Ko:zu.key),bs=T(zu,bs,Ko),Wn===null?Ti=zu:Wn.sibling=zu,Wn=zu)}if(o&&Fw.forEach(function(XCe){return a(we,XCe)}),Fo()){var YCe=Ko;ig(we,YCe)}return Ti}function Ot(we,Ae,be,Ge){if(Ae!==null&&Ae.tag===E){p(we,Ae.sibling);var pt=b(Ae,be);return pt.return=we,pt}p(we,Ae);var ut=pL(be,we.mode,Ge);return ut.return=we,ut}function Tt(we,Ae,be,Ge){for(var pt=be.key,ut=Ae;ut!==null;){if(ut.key===pt){var Ht=be.type;if(Ht===Vi){if(ut.tag===P){p(we,ut.sibling);var Xt=b(ut,be.props.children);return Xt.return=we,Xt._debugSource=be._source,Xt._debugOwner=be._owner,Xt}}else if(ut.elementType===Ht||Fq(ut,be)||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Vt&&AW(Ht)===ut.type){p(we,ut.sibling);var hr=b(ut,be.props);return hr.ref=sw(we,ut,be),hr.return=we,hr._debugSource=be._source,hr._debugOwner=be._owner,hr}p(we,ut);break}else a(we,ut);ut=ut.sibling}if(be.type===Vi){var Kn=Dh(be.props.children,we.mode,Ge,be.key);return Kn.return=we,Kn}else{var Ti=hL(be,we.mode,Ge);return Ti.ref=sw(we,Ae,be),Ti.return=we,Ti}}function Ln(we,Ae,be,Ge){for(var pt=be.key,ut=Ae;ut!==null;){if(ut.key===pt)if(ut.tag===w&&ut.stateNode.containerInfo===be.containerInfo&&ut.stateNode.implementation===be.implementation){p(we,ut.sibling);var Ht=b(ut,be.children||[]);return Ht.return=we,Ht}else{p(we,ut);break}else a(we,ut);ut=ut.sibling}var Xt=gL(be,we.mode,Ge);return Xt.return=we,Xt}function En(we,Ae,be,Ge){var pt=typeof be=="object"&&be!==null&&be.type===Vi&&be.key===null;if(pt&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case Ci:return D(Tt(we,Ae,be,Ge));case Ao:return D(Ln(we,Ae,be,Ge));case Vt:var ut=be._payload,Ht=be._init;return En(we,Ae,Ht(ut),Ge)}if(tn(be))return Me(we,Ae,be,Ge);if(Sr(be))return at(we,Ae,be,Ge);GE(we,be)}return typeof be=="string"&&be!==""||typeof be=="number"?D(Ot(we,Ae,""+be,Ge)):(typeof be=="function"&&qE(we),p(we,Ae))}return En}var Ny=DW(!0),OW=DW(!1);function _be(o,a){if(o!==null&&a.child!==o.child)throw new Error("Resuming work not yet implemented.");if(a.child!==null){var p=a.child,S=yg(p,p.pendingProps);for(a.child=S,S.return=a;p.sibling!==null;)p=p.sibling,S=S.sibling=yg(p,p.pendingProps),S.return=a;S.sibling=null}}function Pbe(o,a){for(var p=o.child;p!==null;)hCe(p,a),p=p.sibling}var xO=Sh(null),wO;wO={};var YE=null,Fy=null,bO=null,XE=!1;function ZE(){YE=null,Fy=null,bO=null,XE=!1}function jW(){XE=!0}function LW(){XE=!1}function NW(o,a,p){xs(xO,a._currentValue,o),a._currentValue=p,a._currentRenderer!==void 0&&a._currentRenderer!==null&&a._currentRenderer!==wO&&c("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),a._currentRenderer=wO}function CO(o,a){var p=xO.current;Ss(xO,a),o._currentValue=p}function EO(o,a,p){for(var S=o;S!==null;){var b=S.alternate;if(Md(S.childLanes,a)?b!==null&&!Md(b.childLanes,a)&&(b.childLanes=nn(b.childLanes,a)):(S.childLanes=nn(S.childLanes,a),b!==null&&(b.childLanes=nn(b.childLanes,a))),S===p)break;S=S.return}S!==p&&c("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function Tbe(o,a,p){Ibe(o,a,p)}function Ibe(o,a,p){var S=o.child;for(S!==null&&(S.return=o);S!==null;){var b=void 0,T=S.dependencies;if(T!==null){b=S.child;for(var D=T.firstContext;D!==null;){if(D.context===a){if(S.tag===g){var N=Ni(p),$=Gd(or,N);$.tag=JE;var G=S.updateQueue;if(G!==null){var X=G.shared,fe=X.pending;fe===null?$.next=$:($.next=fe.next,fe.next=$),X.pending=$}}S.lanes=nn(S.lanes,p);var ue=S.alternate;ue!==null&&(ue.lanes=nn(ue.lanes,p)),EO(S.return,p,o),T.lanes=nn(T.lanes,p);break}D=D.next}}else if(S.tag===L)b=S.type===o.type?null:S.child;else if(S.tag===J){var _e=S.return;if(_e===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");_e.lanes=nn(_e.lanes,p);var Ie=_e.alternate;Ie!==null&&(Ie.lanes=nn(Ie.lanes,p)),EO(_e,p,o),b=S.sibling}else b=S.child;if(b!==null)b.return=S;else for(b=S;b!==null;){if(b===o){b=null;break}var Me=b.sibling;if(Me!==null){Me.return=b.return,b=Me;break}b=b.return}S=b}}function zy(o,a){YE=o,Fy=null,bO=null;var p=o.dependencies;if(p!==null){var S=p.firstContext;S!==null&&(ms(p.lanes,a)&&ww(),p.firstContext=null)}}function Ui(o){XE&&c("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var a=o._currentValue;if(bO!==o){var p={context:o,memoizedValue:a,next:null};if(Fy===null){if(YE===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Fy=p,YE.dependencies={lanes:je,firstContext:p}}else Fy=Fy.next=p}return a}var cg=null;function _O(o){cg===null?cg=[o]:cg.push(o)}function kbe(){if(cg!==null){for(var o=0;o<cg.length;o++){var a=cg[o],p=a.interleaved;if(p!==null){a.interleaved=null;var S=p.next,b=a.pending;if(b!==null){var T=b.next;b.next=S,p.next=T}a.pending=p}}cg=null}}function FW(o,a,p,S){var b=a.interleaved;return b===null?(p.next=p,_O(a)):(p.next=b.next,b.next=p),a.interleaved=p,QE(o,S)}function Rbe(o,a,p,S){var b=a.interleaved;b===null?(p.next=p,_O(a)):(p.next=b.next,b.next=p),a.interleaved=p}function Mbe(o,a,p,S){var b=a.interleaved;return b===null?(p.next=p,_O(a)):(p.next=b.next,b.next=p),a.interleaved=p,QE(o,S)}function _a(o,a){return QE(o,a)}var Abe=QE;function QE(o,a){o.lanes=nn(o.lanes,a);var p=o.alternate;p!==null&&(p.lanes=nn(p.lanes,a)),p===null&&(o.flags&(di|hi))!==Rt&&Oq(o);for(var S=o,b=o.return;b!==null;)b.childLanes=nn(b.childLanes,a),p=b.alternate,p!==null?p.childLanes=nn(p.childLanes,a):(b.flags&(di|hi))!==Rt&&Oq(o),S=b,b=b.return;if(S.tag===v){var T=S.stateNode;return T}else return null}var zW=0,UW=1,JE=2,PO=3,e_=!1,TO,t_;TO=!1,t_=null;function IO(o){var a={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:je},effects:null};o.updateQueue=a}function $W(o,a){var p=a.updateQueue,S=o.updateQueue;if(p===S){var b={baseState:S.baseState,firstBaseUpdate:S.firstBaseUpdate,lastBaseUpdate:S.lastBaseUpdate,shared:S.shared,effects:S.effects};a.updateQueue=b}}function Gd(o,a){var p={eventTime:o,lane:a,tag:zW,payload:null,callback:null,next:null};return p}function Ch(o,a,p){var S=o.updateQueue;if(S===null)return null;var b=S.shared;if(t_===b&&!TO&&(c("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),TO=!0),R1e()){var T=b.pending;return T===null?a.next=a:(a.next=T.next,T.next=a),b.pending=a,Abe(o,p)}else return Mbe(o,b,a,p)}function n_(o,a,p){var S=a.updateQueue;if(S!==null){var b=S.shared;if(xx(p)){var T=b.lanes;T=ry(T,o.pendingLanes);var D=nn(T,p);b.lanes=D,$p(o,D)}}}function kO(o,a){var p=o.updateQueue,S=o.alternate;if(S!==null){var b=S.updateQueue;if(p===b){var T=null,D=null,N=p.firstBaseUpdate;if(N!==null){var $=N;do{var G={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};D===null?T=D=G:(D.next=G,D=G),$=$.next}while($!==null);D===null?T=D=a:(D.next=a,D=a)}else T=D=a;p={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:D,shared:b.shared,effects:b.effects},o.updateQueue=p;return}}var X=p.lastBaseUpdate;X===null?p.firstBaseUpdate=a:X.next=a,p.lastBaseUpdate=a}function Dbe(o,a,p,S,b,T){switch(p.tag){case UW:{var D=p.payload;if(typeof D=="function"){jW();var N=D.call(T,S,b);{if(o.mode&Jt){ir(!0);try{D.call(T,S,b)}finally{ir(!1)}}LW()}return N}return D}case PO:o.flags=o.flags&-65537|pn;case zW:{var $=p.payload,G;if(typeof $=="function"){jW(),G=$.call(T,S,b);{if(o.mode&Jt){ir(!0);try{$.call(T,S,b)}finally{ir(!1)}}LW()}}else G=$;return G==null?S:Gt({},S,G)}case JE:return e_=!0,S}return S}function r_(o,a,p,S){var b=o.updateQueue;e_=!1,t_=b.shared;var T=b.firstBaseUpdate,D=b.lastBaseUpdate,N=b.shared.pending;if(N!==null){b.shared.pending=null;var $=N,G=$.next;$.next=null,D===null?T=G:D.next=G,D=$;var X=o.alternate;if(X!==null){var fe=X.updateQueue,ue=fe.lastBaseUpdate;ue!==D&&(ue===null?fe.firstBaseUpdate=G:ue.next=G,fe.lastBaseUpdate=$)}}if(T!==null){var _e=b.baseState,Ie=je,Me=null,at=null,Ot=null,Tt=T;do{var Ln=Tt.lane,En=Tt.eventTime;if(Md(S,Ln)){if(Ot!==null){var Ae={eventTime:En,lane:gi,tag:Tt.tag,payload:Tt.payload,callback:Tt.callback,next:null};Ot=Ot.next=Ae}_e=Dbe(o,b,Tt,_e,a,p);var be=Tt.callback;if(be!==null&&Tt.lane!==gi){o.flags|=gr;var Ge=b.effects;Ge===null?b.effects=[Tt]:Ge.push(Tt)}}else{var we={eventTime:En,lane:Ln,tag:Tt.tag,payload:Tt.payload,callback:Tt.callback,next:null};Ot===null?(at=Ot=we,Me=_e):Ot=Ot.next=we,Ie=nn(Ie,Ln)}if(Tt=Tt.next,Tt===null){if(N=b.shared.pending,N===null)break;var pt=N,ut=pt.next;pt.next=null,Tt=ut,b.lastBaseUpdate=pt,b.shared.pending=null}}while(!0);Ot===null&&(Me=_e),b.baseState=Me,b.firstBaseUpdate=at,b.lastBaseUpdate=Ot;var Ht=b.shared.interleaved;if(Ht!==null){var Xt=Ht;do Ie=nn(Ie,Xt.lane),Xt=Xt.next;while(Xt!==Ht)}else T===null&&(b.shared.lanes=je);Dw(Ie),o.lanes=Ie,o.memoizedState=_e}t_=null}function Obe(o,a){if(typeof o!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+o));o.call(a)}function BW(){e_=!1}function i_(){return e_}function HW(o,a,p){var S=a.effects;if(a.effects=null,S!==null)for(var b=0;b<S.length;b++){var T=S[b],D=T.callback;D!==null&&(T.callback=null,Obe(D,p))}}var aw={},Eh=Sh(aw),lw=Sh(aw),o_=Sh(aw);function s_(o){if(o===aw)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return o}function VW(){var o=s_(o_.current);return o}function RO(o,a){xs(o_,a,o),xs(lw,o,o),xs(Eh,aw,o);var p=Zxe(a);Ss(Eh,o),xs(Eh,p,o)}function Uy(o){Ss(Eh,o),Ss(lw,o),Ss(o_,o)}function MO(){var o=s_(Eh.current);return o}function KW(o){s_(o_.current);var a=s_(Eh.current),p=Qxe(a,o.type);a!==p&&(xs(lw,o,o),xs(Eh,p,o))}function AO(o){lw.current===o&&(Ss(Eh,o),Ss(lw,o))}var jbe=0,WW=1,GW=1,cw=2,Pc=Sh(jbe);function DO(o,a){return(o&a)!==0}function $y(o){return o&WW}function OO(o,a){return o&WW|a}function Lbe(o,a){return o|a}function _h(o,a){xs(Pc,a,o)}function By(o){Ss(Pc,o)}function Nbe(o,a){var p=o.memoizedState;return p!==null?p.dehydrated!==null:(o.memoizedProps,!0)}function a_(o){for(var a=o;a!==null;){if(a.tag===F){var p=a.memoizedState;if(p!==null){var S=p.dehydrated;if(S===null||uW(S)||QD(S))return a}}else if(a.tag===ie&&a.memoizedProps.revealOrder!==void 0){var b=(a.flags&pn)!==Rt;if(b)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)return null;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Pa=0,Qi=1,Au=2,Ji=4,zo=8,jO=[];function LO(){for(var o=0;o<jO.length;o++){var a=jO[o];a._workInProgressVersionPrimary=null}jO.length=0}function Fbe(o,a){var p=a._getVersion,S=p(a._source);o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[a,S]:o.mutableSourceEagerHydrationData.push(a,S)}var ht=r.ReactCurrentDispatcher,uw=r.ReactCurrentBatchConfig,NO,Hy;NO=new Set;var ug=je,fr=null,eo=null,to=null,l_=!1,dw=!1,fw=0,zbe=0,Ube=25,Fe=null,Fl=null,Ph=-1,FO=!1;function tr(){{var o=Fe;Fl===null?Fl=[o]:Fl.push(o)}}function et(){{var o=Fe;Fl!==null&&(Ph++,Fl[Ph]!==o&&$be(o))}}function Vy(o){o!=null&&!tn(o)&&c("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",Fe,typeof o)}function $be(o){{var a=Bt(fr);if(!NO.has(a)&&(NO.add(a),Fl!==null)){for(var p="",S=30,b=0;b<=Ph;b++){for(var T=Fl[b],D=b===Ph?o:T,N=b+1+". "+T;N.length<S;)N+=" ";N+=D+`
`,p+=N}c(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,a,p)}}}function ws(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function zO(o,a){if(FO)return!1;if(a===null)return c("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",Fe),!1;o.length!==a.length&&c(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,Fe,"["+a.join(", ")+"]","["+o.join(", ")+"]");for(var p=0;p<a.length&&p<o.length;p++)if(!xt(o[p],a[p]))return!1;return!0}function Ky(o,a,p,S,b,T){ug=T,fr=a,Fl=o!==null?o._debugHookTypes:null,Ph=-1,FO=o!==null&&o.type!==a.type,a.memoizedState=null,a.updateQueue=null,a.lanes=je,o!==null&&o.memoizedState!==null?ht.current=gG:Fl!==null?ht.current=pG:ht.current=hG;var D=p(S,b);if(dw){var N=0;do{if(dw=!1,fw=0,N>=Ube)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");N+=1,FO=!1,eo=null,to=null,a.updateQueue=null,Ph=-1,ht.current=mG,D=p(S,b)}while(dw)}ht.current=w_,a._debugHookTypes=Fl;var $=eo!==null&&eo.next!==null;if(ug=je,fr=null,eo=null,to=null,Fe=null,Fl=null,Ph=-1,o!==null&&(o.flags&pi)!==(a.flags&pi)&&(o.mode&gn)!==Mt&&c("Internal React error: Expected static flag was missing. Please notify the React team."),l_=!1,$)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return D}function Wy(){var o=fw!==0;return fw=0,o}function qW(o,a,p){a.updateQueue=o.updateQueue,(a.mode&dr)!==Mt?a.flags&=-50333701:a.flags&=-2053,o.lanes=Up(o.lanes,p)}function YW(){if(ht.current=w_,l_){for(var o=fr.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}l_=!1}ug=je,fr=null,eo=null,to=null,Fl=null,Ph=-1,Fe=null,lG=!1,dw=!1,fw=0}function Du(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return to===null?fr.memoizedState=to=o:to=to.next=o,to}function zl(){var o;if(eo===null){var a=fr.alternate;a!==null?o=a.memoizedState:o=null}else o=eo.next;var p;if(to===null?p=fr.memoizedState:p=to.next,p!==null)to=p,p=to.next,eo=o;else{if(o===null)throw new Error("Rendered more hooks than during the previous render.");eo=o;var S={memoizedState:eo.memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null};to===null?fr.memoizedState=to=S:to=to.next=S}return to}function XW(){return{lastEffect:null,stores:null}}function UO(o,a){return typeof a=="function"?a(o):a}function $O(o,a,p){var S=Du(),b;p!==void 0?b=p(a):b=a,S.memoizedState=S.baseState=b;var T={pending:null,interleaved:null,lanes:je,dispatch:null,lastRenderedReducer:o,lastRenderedState:b};S.queue=T;var D=T.dispatch=Kbe.bind(null,fr,T);return[S.memoizedState,D]}function BO(o,a,p){var S=zl(),b=S.queue;if(b===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");b.lastRenderedReducer=o;var T=eo,D=T.baseQueue,N=b.pending;if(N!==null){if(D!==null){var $=D.next,G=N.next;D.next=G,N.next=$}T.baseQueue!==D&&c("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),T.baseQueue=D=N,b.pending=null}if(D!==null){var X=D.next,fe=T.baseState,ue=null,_e=null,Ie=null,Me=X;do{var at=Me.lane;if(Md(ug,at)){if(Ie!==null){var Tt={lane:gi,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null};Ie=Ie.next=Tt}if(Me.hasEagerState)fe=Me.eagerState;else{var Ln=Me.action;fe=o(fe,Ln)}}else{var Ot={lane:at,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null};Ie===null?(_e=Ie=Ot,ue=fe):Ie=Ie.next=Ot,fr.lanes=nn(fr.lanes,at),Dw(at)}Me=Me.next}while(Me!==null&&Me!==X);Ie===null?ue=fe:Ie.next=_e,xt(fe,S.memoizedState)||ww(),S.memoizedState=fe,S.baseState=ue,S.baseQueue=Ie,b.lastRenderedState=fe}var En=b.interleaved;if(En!==null){var we=En;do{var Ae=we.lane;fr.lanes=nn(fr.lanes,Ae),Dw(Ae),we=we.next}while(we!==En)}else D===null&&(b.lanes=je);var be=b.dispatch;return[S.memoizedState,be]}function HO(o,a,p){var S=zl(),b=S.queue;if(b===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");b.lastRenderedReducer=o;var T=b.dispatch,D=b.pending,N=S.memoizedState;if(D!==null){b.pending=null;var $=D.next,G=$;do{var X=G.action;N=o(N,X),G=G.next}while(G!==$);xt(N,S.memoizedState)||ww(),S.memoizedState=N,S.baseQueue===null&&(S.baseState=N),b.lastRenderedState=N}return[N,T]}function vEe(o,a,p){}function SEe(o,a,p){}function VO(o,a,p){var S=fr,b=Du(),T,D=Fo();if(D){if(p===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");T=p(),Hy||T!==p()&&(c("The result of getServerSnapshot should be cached to avoid an infinite loop"),Hy=!0)}else{if(T=a(),!Hy){var N=a();xt(T,N)||(c("The result of getSnapshot should be cached to avoid an infinite loop"),Hy=!0)}var $=U_();if($===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");zp($,ug)||ZW(S,a,T)}b.memoizedState=T;var G={value:T,getSnapshot:a};return b.queue=G,h_(JW.bind(null,S,G,o),[o]),S.flags|=zs,hw(Qi|zo,QW.bind(null,S,G,T,a),void 0,null),T}function c_(o,a,p){var S=fr,b=zl(),T=a();if(!Hy){var D=a();xt(T,D)||(c("The result of getSnapshot should be cached to avoid an infinite loop"),Hy=!0)}var N=b.memoizedState,$=!xt(N,T);$&&(b.memoizedState=T,ww());var G=b.queue;if(gw(JW.bind(null,S,G,o),[o]),G.getSnapshot!==a||$||to!==null&&to.memoizedState.tag&Qi){S.flags|=zs,hw(Qi|zo,QW.bind(null,S,G,T,a),void 0,null);var X=U_();if(X===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");zp(X,ug)||ZW(S,a,T)}return T}function ZW(o,a,p){o.flags|=Mm;var S={getSnapshot:a,value:p},b=fr.updateQueue;if(b===null)b=XW(),fr.updateQueue=b,b.stores=[S];else{var T=b.stores;T===null?b.stores=[S]:T.push(S)}}function QW(o,a,p,S){a.value=p,a.getSnapshot=S,eG(a)&&tG(o)}function JW(o,a,p){var S=function(){eG(a)&&tG(o)};return p(S)}function eG(o){var a=o.getSnapshot,p=o.value;try{var S=a();return!xt(p,S)}catch{return!0}}function tG(o){var a=_a(o,Ft);a!==null&&oo(a,o,Ft,or)}function u_(o){var a=Du();typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o;var p={pending:null,interleaved:null,lanes:je,dispatch:null,lastRenderedReducer:UO,lastRenderedState:o};a.queue=p;var S=p.dispatch=Wbe.bind(null,fr,p);return[a.memoizedState,S]}function KO(o){return BO(UO)}function WO(o){return HO(UO)}function hw(o,a,p,S){var b={tag:o,create:a,destroy:p,deps:S,next:null},T=fr.updateQueue;if(T===null)T=XW(),fr.updateQueue=T,T.lastEffect=b.next=b;else{var D=T.lastEffect;if(D===null)T.lastEffect=b.next=b;else{var N=D.next;D.next=b,b.next=N,T.lastEffect=b}}return b}function GO(o){var a=Du();{var p={current:o};return a.memoizedState=p,p}}function d_(o){var a=zl();return a.memoizedState}function pw(o,a,p,S){var b=Du(),T=S===void 0?null:S;fr.flags|=o,b.memoizedState=hw(Qi|a,p,void 0,T)}function f_(o,a,p,S){var b=zl(),T=S===void 0?null:S,D=void 0;if(eo!==null){var N=eo.memoizedState;if(D=N.destroy,T!==null){var $=N.deps;if(zO(T,$)){b.memoizedState=hw(a,p,D,T);return}}}fr.flags|=o,b.memoizedState=hw(Qi|a,p,D,T)}function h_(o,a){return(fr.mode&dr)!==Mt?pw(hu|zs|ex,zo,o,a):pw(zs|ex,zo,o,a)}function gw(o,a){return f_(zs,zo,o,a)}function qO(o,a){return pw(xn,Au,o,a)}function p_(o,a){return f_(xn,Au,o,a)}function YO(o,a){var p=xn;return p|=fu,(fr.mode&dr)!==Mt&&(p|=Oo),pw(p,Ji,o,a)}function g_(o,a){return f_(xn,Ji,o,a)}function nG(o,a){if(typeof a=="function"){var p=a,S=o();return p(S),function(){p(null)}}else if(a!=null){var b=a;b.hasOwnProperty("current")||c("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(b).join(", ")+"}");var T=o();return b.current=T,function(){b.current=null}}}function XO(o,a,p){typeof a!="function"&&c("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",a!==null?typeof a:"null");var S=p!=null?p.concat([o]):null,b=xn;return b|=fu,(fr.mode&dr)!==Mt&&(b|=Oo),pw(b,Ji,nG.bind(null,a,o),S)}function m_(o,a,p){typeof a!="function"&&c("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",a!==null?typeof a:"null");var S=p!=null?p.concat([o]):null;return f_(xn,Ji,nG.bind(null,a,o),S)}function Bbe(o,a){}var y_=Bbe;function ZO(o,a){var p=Du(),S=a===void 0?null:a;return p.memoizedState=[o,S],o}function v_(o,a){var p=zl(),S=a===void 0?null:a,b=p.memoizedState;if(b!==null&&S!==null){var T=b[1];if(zO(S,T))return b[0]}return p.memoizedState=[o,S],o}function QO(o,a){var p=Du(),S=a===void 0?null:a,b=o();return p.memoizedState=[b,S],b}function S_(o,a){var p=zl(),S=a===void 0?null:a,b=p.memoizedState;if(b!==null&&S!==null){var T=b[1];if(zO(S,T))return b[0]}var D=o();return p.memoizedState=[D,S],D}function JO(o){var a=Du();return a.memoizedState=o,o}function rG(o){var a=zl(),p=eo,S=p.memoizedState;return oG(a,S,o)}function iG(o){var a=zl();if(eo===null)return a.memoizedState=o,o;var p=eo.memoizedState;return oG(a,p,o)}function oG(o,a,p){var S=!Sx(ug);if(S){if(!xt(p,a)){var b=wx();fr.lanes=nn(fr.lanes,b),Dw(b),o.baseState=!0}return a}else return o.baseState&&(o.baseState=!1,ww()),o.memoizedState=p,p}function Hbe(o,a,p){var S=Bs();_i(Bp(S,xa)),o(!0);var b=uw.transition;uw.transition={};var T=uw.transition;uw.transition._updatedFibers=new Set;try{o(!1),a()}finally{if(_i(S),uw.transition=b,b===null&&T._updatedFibers){var D=T._updatedFibers.size;D>10&&l("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),T._updatedFibers.clear()}}}function ej(){var o=u_(!1),a=o[0],p=o[1],S=Hbe.bind(null,p),b=Du();return b.memoizedState=S,[a,S]}function sG(){var o=KO(),a=o[0],p=zl(),S=p.memoizedState;return[a,S]}function aG(){var o=WO(),a=o[0],p=zl(),S=p.memoizedState;return[a,S]}var lG=!1;function Vbe(){return lG}function tj(){var o=Du(),a=U_(),p=a.identifierPrefix,S;if(Fo()){var b=abe();S=":"+p+"R"+b;var T=fw++;T>0&&(S+="H"+T.toString(32)),S+=":"}else{var D=zbe++;S=":"+p+"r"+D.toString(32)+":"}return o.memoizedState=S,S}function x_(){var o=zl(),a=o.memoizedState;return a}function Kbe(o,a,p){typeof arguments[3]=="function"&&c("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var S=Mh(o),b={lane:S,action:p,hasEagerState:!1,eagerState:null,next:null};if(cG(o))uG(a,b);else{var T=FW(o,a,b,S);if(T!==null){var D=qs();oo(T,o,S,D),dG(T,a,S)}}fG(o,S)}function Wbe(o,a,p){typeof arguments[3]=="function"&&c("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var S=Mh(o),b={lane:S,action:p,hasEagerState:!1,eagerState:null,next:null};if(cG(o))uG(a,b);else{var T=o.alternate;if(o.lanes===je&&(T===null||T.lanes===je)){var D=a.lastRenderedReducer;if(D!==null){var N;N=ht.current,ht.current=Tc;try{var $=a.lastRenderedState,G=D($,p);if(b.hasEagerState=!0,b.eagerState=G,xt(G,$)){Rbe(o,a,b,S);return}}catch{}finally{ht.current=N}}}var X=FW(o,a,b,S);if(X!==null){var fe=qs();oo(X,o,S,fe),dG(X,a,S)}}fG(o,S)}function cG(o){var a=o.alternate;return o===fr||a!==null&&a===fr}function uG(o,a){dw=l_=!0;var p=o.pending;p===null?a.next=a:(a.next=p.next,p.next=a),o.pending=a}function dG(o,a,p){if(xx(p)){var S=a.lanes;S=ry(S,o.pendingLanes);var b=nn(S,p);a.lanes=b,$p(o,b)}}function fG(o,a,p){Mp(o,a)}var w_={readContext:Ui,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useInsertionEffect:ws,useLayoutEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useMutableSource:ws,useSyncExternalStore:ws,useId:ws,unstable_isNewReconciler:he},hG=null,pG=null,gG=null,mG=null,Ou=null,Tc=null,b_=null;{var nj=function(){c("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},qt=function(){c("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};hG={readContext:function(o){return Ui(o)},useCallback:function(o,a){return Fe="useCallback",tr(),Vy(a),ZO(o,a)},useContext:function(o){return Fe="useContext",tr(),Ui(o)},useEffect:function(o,a){return Fe="useEffect",tr(),Vy(a),h_(o,a)},useImperativeHandle:function(o,a,p){return Fe="useImperativeHandle",tr(),Vy(p),XO(o,a,p)},useInsertionEffect:function(o,a){return Fe="useInsertionEffect",tr(),Vy(a),qO(o,a)},useLayoutEffect:function(o,a){return Fe="useLayoutEffect",tr(),Vy(a),YO(o,a)},useMemo:function(o,a){Fe="useMemo",tr(),Vy(a);var p=ht.current;ht.current=Ou;try{return QO(o,a)}finally{ht.current=p}},useReducer:function(o,a,p){Fe="useReducer",tr();var S=ht.current;ht.current=Ou;try{return $O(o,a,p)}finally{ht.current=S}},useRef:function(o){return Fe="useRef",tr(),GO(o)},useState:function(o){Fe="useState",tr();var a=ht.current;ht.current=Ou;try{return u_(o)}finally{ht.current=a}},useDebugValue:function(o,a){return Fe="useDebugValue",tr(),void 0},useDeferredValue:function(o){return Fe="useDeferredValue",tr(),JO(o)},useTransition:function(){return Fe="useTransition",tr(),ej()},useMutableSource:function(o,a,p){return Fe="useMutableSource",tr(),void 0},useSyncExternalStore:function(o,a,p){return Fe="useSyncExternalStore",tr(),VO(o,a,p)},useId:function(){return Fe="useId",tr(),tj()},unstable_isNewReconciler:he},pG={readContext:function(o){return Ui(o)},useCallback:function(o,a){return Fe="useCallback",et(),ZO(o,a)},useContext:function(o){return Fe="useContext",et(),Ui(o)},useEffect:function(o,a){return Fe="useEffect",et(),h_(o,a)},useImperativeHandle:function(o,a,p){return Fe="useImperativeHandle",et(),XO(o,a,p)},useInsertionEffect:function(o,a){return Fe="useInsertionEffect",et(),qO(o,a)},useLayoutEffect:function(o,a){return Fe="useLayoutEffect",et(),YO(o,a)},useMemo:function(o,a){Fe="useMemo",et();var p=ht.current;ht.current=Ou;try{return QO(o,a)}finally{ht.current=p}},useReducer:function(o,a,p){Fe="useReducer",et();var S=ht.current;ht.current=Ou;try{return $O(o,a,p)}finally{ht.current=S}},useRef:function(o){return Fe="useRef",et(),GO(o)},useState:function(o){Fe="useState",et();var a=ht.current;ht.current=Ou;try{return u_(o)}finally{ht.current=a}},useDebugValue:function(o,a){return Fe="useDebugValue",et(),void 0},useDeferredValue:function(o){return Fe="useDeferredValue",et(),JO(o)},useTransition:function(){return Fe="useTransition",et(),ej()},useMutableSource:function(o,a,p){return Fe="useMutableSource",et(),void 0},useSyncExternalStore:function(o,a,p){return Fe="useSyncExternalStore",et(),VO(o,a,p)},useId:function(){return Fe="useId",et(),tj()},unstable_isNewReconciler:he},gG={readContext:function(o){return Ui(o)},useCallback:function(o,a){return Fe="useCallback",et(),v_(o,a)},useContext:function(o){return Fe="useContext",et(),Ui(o)},useEffect:function(o,a){return Fe="useEffect",et(),gw(o,a)},useImperativeHandle:function(o,a,p){return Fe="useImperativeHandle",et(),m_(o,a,p)},useInsertionEffect:function(o,a){return Fe="useInsertionEffect",et(),p_(o,a)},useLayoutEffect:function(o,a){return Fe="useLayoutEffect",et(),g_(o,a)},useMemo:function(o,a){Fe="useMemo",et();var p=ht.current;ht.current=Tc;try{return S_(o,a)}finally{ht.current=p}},useReducer:function(o,a,p){Fe="useReducer",et();var S=ht.current;ht.current=Tc;try{return BO(o,a,p)}finally{ht.current=S}},useRef:function(o){return Fe="useRef",et(),d_()},useState:function(o){Fe="useState",et();var a=ht.current;ht.current=Tc;try{return KO(o)}finally{ht.current=a}},useDebugValue:function(o,a){return Fe="useDebugValue",et(),y_()},useDeferredValue:function(o){return Fe="useDeferredValue",et(),rG(o)},useTransition:function(){return Fe="useTransition",et(),sG()},useMutableSource:function(o,a,p){return Fe="useMutableSource",et(),void 0},useSyncExternalStore:function(o,a,p){return Fe="useSyncExternalStore",et(),c_(o,a)},useId:function(){return Fe="useId",et(),x_()},unstable_isNewReconciler:he},mG={readContext:function(o){return Ui(o)},useCallback:function(o,a){return Fe="useCallback",et(),v_(o,a)},useContext:function(o){return Fe="useContext",et(),Ui(o)},useEffect:function(o,a){return Fe="useEffect",et(),gw(o,a)},useImperativeHandle:function(o,a,p){return Fe="useImperativeHandle",et(),m_(o,a,p)},useInsertionEffect:function(o,a){return Fe="useInsertionEffect",et(),p_(o,a)},useLayoutEffect:function(o,a){return Fe="useLayoutEffect",et(),g_(o,a)},useMemo:function(o,a){Fe="useMemo",et();var p=ht.current;ht.current=b_;try{return S_(o,a)}finally{ht.current=p}},useReducer:function(o,a,p){Fe="useReducer",et();var S=ht.current;ht.current=b_;try{return HO(o,a,p)}finally{ht.current=S}},useRef:function(o){return Fe="useRef",et(),d_()},useState:function(o){Fe="useState",et();var a=ht.current;ht.current=b_;try{return WO(o)}finally{ht.current=a}},useDebugValue:function(o,a){return Fe="useDebugValue",et(),y_()},useDeferredValue:function(o){return Fe="useDeferredValue",et(),iG(o)},useTransition:function(){return Fe="useTransition",et(),aG()},useMutableSource:function(o,a,p){return Fe="useMutableSource",et(),void 0},useSyncExternalStore:function(o,a,p){return Fe="useSyncExternalStore",et(),c_(o,a)},useId:function(){return Fe="useId",et(),x_()},unstable_isNewReconciler:he},Ou={readContext:function(o){return nj(),Ui(o)},useCallback:function(o,a){return Fe="useCallback",qt(),tr(),ZO(o,a)},useContext:function(o){return Fe="useContext",qt(),tr(),Ui(o)},useEffect:function(o,a){return Fe="useEffect",qt(),tr(),h_(o,a)},useImperativeHandle:function(o,a,p){return Fe="useImperativeHandle",qt(),tr(),XO(o,a,p)},useInsertionEffect:function(o,a){return Fe="useInsertionEffect",qt(),tr(),qO(o,a)},useLayoutEffect:function(o,a){return Fe="useLayoutEffect",qt(),tr(),YO(o,a)},useMemo:function(o,a){Fe="useMemo",qt(),tr();var p=ht.current;ht.current=Ou;try{return QO(o,a)}finally{ht.current=p}},useReducer:function(o,a,p){Fe="useReducer",qt(),tr();var S=ht.current;ht.current=Ou;try{return $O(o,a,p)}finally{ht.current=S}},useRef:function(o){return Fe="useRef",qt(),tr(),GO(o)},useState:function(o){Fe="useState",qt(),tr();var a=ht.current;ht.current=Ou;try{return u_(o)}finally{ht.current=a}},useDebugValue:function(o,a){return Fe="useDebugValue",qt(),tr(),void 0},useDeferredValue:function(o){return Fe="useDeferredValue",qt(),tr(),JO(o)},useTransition:function(){return Fe="useTransition",qt(),tr(),ej()},useMutableSource:function(o,a,p){return Fe="useMutableSource",qt(),tr(),void 0},useSyncExternalStore:function(o,a,p){return Fe="useSyncExternalStore",qt(),tr(),VO(o,a,p)},useId:function(){return Fe="useId",qt(),tr(),tj()},unstable_isNewReconciler:he},Tc={readContext:function(o){return nj(),Ui(o)},useCallback:function(o,a){return Fe="useCallback",qt(),et(),v_(o,a)},useContext:function(o){return Fe="useContext",qt(),et(),Ui(o)},useEffect:function(o,a){return Fe="useEffect",qt(),et(),gw(o,a)},useImperativeHandle:function(o,a,p){return Fe="useImperativeHandle",qt(),et(),m_(o,a,p)},useInsertionEffect:function(o,a){return Fe="useInsertionEffect",qt(),et(),p_(o,a)},useLayoutEffect:function(o,a){return Fe="useLayoutEffect",qt(),et(),g_(o,a)},useMemo:function(o,a){Fe="useMemo",qt(),et();var p=ht.current;ht.current=Tc;try{return S_(o,a)}finally{ht.current=p}},useReducer:function(o,a,p){Fe="useReducer",qt(),et();var S=ht.current;ht.current=Tc;try{return BO(o,a,p)}finally{ht.current=S}},useRef:function(o){return Fe="useRef",qt(),et(),d_()},useState:function(o){Fe="useState",qt(),et();var a=ht.current;ht.current=Tc;try{return KO(o)}finally{ht.current=a}},useDebugValue:function(o,a){return Fe="useDebugValue",qt(),et(),y_()},useDeferredValue:function(o){return Fe="useDeferredValue",qt(),et(),rG(o)},useTransition:function(){return Fe="useTransition",qt(),et(),sG()},useMutableSource:function(o,a,p){return Fe="useMutableSource",qt(),et(),void 0},useSyncExternalStore:function(o,a,p){return Fe="useSyncExternalStore",qt(),et(),c_(o,a)},useId:function(){return Fe="useId",qt(),et(),x_()},unstable_isNewReconciler:he},b_={readContext:function(o){return nj(),Ui(o)},useCallback:function(o,a){return Fe="useCallback",qt(),et(),v_(o,a)},useContext:function(o){return Fe="useContext",qt(),et(),Ui(o)},useEffect:function(o,a){return Fe="useEffect",qt(),et(),gw(o,a)},useImperativeHandle:function(o,a,p){return Fe="useImperativeHandle",qt(),et(),m_(o,a,p)},useInsertionEffect:function(o,a){return Fe="useInsertionEffect",qt(),et(),p_(o,a)},useLayoutEffect:function(o,a){return Fe="useLayoutEffect",qt(),et(),g_(o,a)},useMemo:function(o,a){Fe="useMemo",qt(),et();var p=ht.current;ht.current=Tc;try{return S_(o,a)}finally{ht.current=p}},useReducer:function(o,a,p){Fe="useReducer",qt(),et();var S=ht.current;ht.current=Tc;try{return HO(o,a,p)}finally{ht.current=S}},useRef:function(o){return Fe="useRef",qt(),et(),d_()},useState:function(o){Fe="useState",qt(),et();var a=ht.current;ht.current=Tc;try{return WO(o)}finally{ht.current=a}},useDebugValue:function(o,a){return Fe="useDebugValue",qt(),et(),y_()},useDeferredValue:function(o){return Fe="useDeferredValue",qt(),et(),iG(o)},useTransition:function(){return Fe="useTransition",qt(),et(),aG()},useMutableSource:function(o,a,p){return Fe="useMutableSource",qt(),et(),void 0},useSyncExternalStore:function(o,a,p){return Fe="useSyncExternalStore",qt(),et(),c_(o,a)},useId:function(){return Fe="useId",qt(),et(),x_()},unstable_isNewReconciler:he}}var Th=t.unstable_now,yG=0,C_=-1,mw=-1,E_=-1,rj=!1,__=!1;function vG(){return rj}function Gbe(){__=!0}function qbe(){rj=!1,__=!1}function Ybe(){rj=__,__=!1}function SG(){return yG}function xG(){yG=Th()}function ij(o){mw=Th(),o.actualStartTime<0&&(o.actualStartTime=Th())}function wG(o){mw=-1}function P_(o,a){if(mw>=0){var p=Th()-mw;o.actualDuration+=p,a&&(o.selfBaseDuration=p),mw=-1}}function ju(o){if(C_>=0){var a=Th()-C_;C_=-1;for(var p=o.return;p!==null;){switch(p.tag){case v:var S=p.stateNode;S.effectDuration+=a;return;case z:var b=p.stateNode;b.effectDuration+=a;return}p=p.return}}}function oj(o){if(E_>=0){var a=Th()-E_;E_=-1;for(var p=o.return;p!==null;){switch(p.tag){case v:var S=p.stateNode;S!==null&&(S.passiveEffectDuration+=a);return;case z:var b=p.stateNode;b!==null&&(b.passiveEffectDuration+=a);return}p=p.return}}}function Lu(){C_=Th()}function sj(){E_=Th()}function aj(o){for(var a=o.child;a;)o.actualDuration+=a.actualDuration,a=a.sibling}function Ic(o,a){if(o&&o.defaultProps){var p=Gt({},a),S=o.defaultProps;for(var b in S)p[b]===void 0&&(p[b]=S[b]);return p}return a}var lj={},cj,uj,dj,fj,hj,bG,T_,pj,gj,mj,yw;{cj=new Set,uj=new Set,dj=new Set,fj=new Set,pj=new Set,hj=new Set,gj=new Set,mj=new Set,yw=new Set;var CG=new Set;T_=function(o,a){if(!(o===null||typeof o=="function")){var p=a+"_"+o;CG.has(p)||(CG.add(p),c("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",a,o))}},bG=function(o,a){if(a===void 0){var p=Cn(o)||"Component";hj.has(p)||(hj.add(p),c("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",p))}},Object.defineProperty(lj,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(lj)}function yj(o,a,p,S){var b=o.memoizedState,T=p(S,b);{if(o.mode&Jt){ir(!0);try{T=p(S,b)}finally{ir(!1)}}bG(a,T)}var D=T==null?b:Gt({},b,T);if(o.memoizedState=D,o.lanes===je){var N=o.updateQueue;N.baseState=D}}var vj={isMounted:tx,enqueueSetState:function(o,a,p){var S=Yf(o),b=qs(),T=Mh(S),D=Gd(b,T);D.payload=a,p!=null&&(T_(p,"setState"),D.callback=p);var N=Ch(S,D,T);N!==null&&(oo(N,S,T,b),n_(N,S,T)),Mp(S,T)},enqueueReplaceState:function(o,a,p){var S=Yf(o),b=qs(),T=Mh(S),D=Gd(b,T);D.tag=UW,D.payload=a,p!=null&&(T_(p,"replaceState"),D.callback=p);var N=Ch(S,D,T);N!==null&&(oo(N,S,T,b),n_(N,S,T)),Mp(S,T)},enqueueForceUpdate:function(o,a){var p=Yf(o),S=qs(),b=Mh(p),T=Gd(S,b);T.tag=JE,a!=null&&(T_(a,"forceUpdate"),T.callback=a);var D=Ch(p,T,b);D!==null&&(oo(D,p,b,S),n_(D,p,b)),gx(p,b)}};function EG(o,a,p,S,b,T,D){var N=o.stateNode;if(typeof N.shouldComponentUpdate=="function"){var $=N.shouldComponentUpdate(S,T,D);{if(o.mode&Jt){ir(!0);try{$=N.shouldComponentUpdate(S,T,D)}finally{ir(!1)}}$===void 0&&c("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",Cn(a)||"Component")}return $}return a.prototype&&a.prototype.isPureReactComponent?!At(p,S)||!At(b,T):!0}function Xbe(o,a,p){var S=o.stateNode;{var b=Cn(a)||"Component",T=S.render;T||(a.prototype&&typeof a.prototype.render=="function"?c("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",b):c("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",b)),S.getInitialState&&!S.getInitialState.isReactClassApproved&&!S.state&&c("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",b),S.getDefaultProps&&!S.getDefaultProps.isReactClassApproved&&c("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",b),S.propTypes&&c("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",b),S.contextType&&c("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",b),a.childContextTypes&&!yw.has(a)&&(o.mode&Jt)===Mt&&(yw.add(a),c(`%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead

.Learn more about this warning here: https://reactjs.org/link/legacy-context`,b)),a.contextTypes&&!yw.has(a)&&(o.mode&Jt)===Mt&&(yw.add(a),c(`%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.

Learn more about this warning here: https://reactjs.org/link/legacy-context`,b)),S.contextTypes&&c("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",b),a.contextType&&a.contextTypes&&!gj.has(a)&&(gj.add(a),c("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",b)),typeof S.componentShouldUpdate=="function"&&c("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",b),a.prototype&&a.prototype.isPureReactComponent&&typeof S.shouldComponentUpdate<"u"&&c("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",Cn(a)||"A pure component"),typeof S.componentDidUnmount=="function"&&c("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",b),typeof S.componentDidReceiveProps=="function"&&c("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",b),typeof S.componentWillRecieveProps=="function"&&c("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",b),typeof S.UNSAFE_componentWillRecieveProps=="function"&&c("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",b);var D=S.props!==p;S.props!==void 0&&D&&c("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",b,b),S.defaultProps&&c("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",b,b),typeof S.getSnapshotBeforeUpdate=="function"&&typeof S.componentDidUpdate!="function"&&!dj.has(a)&&(dj.add(a),c("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",Cn(a))),typeof S.getDerivedStateFromProps=="function"&&c("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",b),typeof S.getDerivedStateFromError=="function"&&c("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",b),typeof a.getSnapshotBeforeUpdate=="function"&&c("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",b);var N=S.state;N&&(typeof N!="object"||tn(N))&&c("%s.state: must be set to an object or null",b),typeof S.getChildContext=="function"&&typeof a.childContextTypes!="object"&&c("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",b)}}function _G(o,a){a.updater=vj,o.stateNode=a,Ep(a,o),a._reactInternalInstance=lj}function PG(o,a,p){var S=!1,b=ol,T=ol,D=a.contextType;if("contextType"in a){var N=D===null||D!==void 0&&D.$$typeof===se&&D._context===void 0;if(!N&&!mj.has(a)){mj.add(a);var $="";D===void 0?$=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof D!="object"?$=" However, it is set to a "+typeof D+".":D.$$typeof===Ga?$=" Did you accidentally pass the Context.Provider instead?":D._context!==void 0?$=" Did you accidentally pass the Context.Consumer instead?":$=" However, it is set to an object with keys {"+Object.keys(D).join(", ")+"}.",c("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",Cn(a)||"Component",$)}}if(typeof D=="object"&&D!==null)T=Ui(D);else{b=Ay(o,a,!0);var G=a.contextTypes;S=G!=null,T=S?Dy(o,b):ol}var X=new a(p,T);if(o.mode&Jt){ir(!0);try{X=new a(p,T)}finally{ir(!1)}}var fe=o.memoizedState=X.state!==null&&X.state!==void 0?X.state:null;_G(o,X);{if(typeof a.getDerivedStateFromProps=="function"&&fe===null){var ue=Cn(a)||"Component";uj.has(ue)||(uj.add(ue),c("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",ue,X.state===null?"null":"undefined",ue))}if(typeof a.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"){var _e=null,Ie=null,Me=null;if(typeof X.componentWillMount=="function"&&X.componentWillMount.__suppressDeprecationWarning!==!0?_e="componentWillMount":typeof X.UNSAFE_componentWillMount=="function"&&(_e="UNSAFE_componentWillMount"),typeof X.componentWillReceiveProps=="function"&&X.componentWillReceiveProps.__suppressDeprecationWarning!==!0?Ie="componentWillReceiveProps":typeof X.UNSAFE_componentWillReceiveProps=="function"&&(Ie="UNSAFE_componentWillReceiveProps"),typeof X.componentWillUpdate=="function"&&X.componentWillUpdate.__suppressDeprecationWarning!==!0?Me="componentWillUpdate":typeof X.UNSAFE_componentWillUpdate=="function"&&(Me="UNSAFE_componentWillUpdate"),_e!==null||Ie!==null||Me!==null){var at=Cn(a)||"Component",Ot=typeof a.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";fj.has(at)||(fj.add(at),c(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,at,Ot,_e!==null?`
  `+_e:"",Ie!==null?`
  `+Ie:"",Me!==null?`
  `+Me:""))}}}return S&&gW(o,b,T),X}function Zbe(o,a){var p=a.state;typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),p!==a.state&&(c("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",Bt(o)||"Component"),vj.enqueueReplaceState(a,a.state,null))}function TG(o,a,p,S){var b=a.state;if(typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(p,S),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(p,S),a.state!==b){{var T=Bt(o)||"Component";cj.has(T)||(cj.add(T),c("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",T))}vj.enqueueReplaceState(a,a.state,null)}}function Sj(o,a,p,S){Xbe(o,a,p);var b=o.stateNode;b.props=p,b.state=o.memoizedState,b.refs={},IO(o);var T=a.contextType;if(typeof T=="object"&&T!==null)b.context=Ui(T);else{var D=Ay(o,a,!0);b.context=Dy(o,D)}{if(b.state===p){var N=Cn(a)||"Component";pj.has(N)||(pj.add(N),c("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",N))}o.mode&Jt&&_c.recordLegacyContextWarning(o,b),_c.recordUnsafeLifecycleWarnings(o,b)}b.state=o.memoizedState;var $=a.getDerivedStateFromProps;if(typeof $=="function"&&(yj(o,a,$,p),b.state=o.memoizedState),typeof a.getDerivedStateFromProps!="function"&&typeof b.getSnapshotBeforeUpdate!="function"&&(typeof b.UNSAFE_componentWillMount=="function"||typeof b.componentWillMount=="function")&&(Zbe(o,b),r_(o,p,b,S),b.state=o.memoizedState),typeof b.componentDidMount=="function"){var G=xn;G|=fu,(o.mode&dr)!==Mt&&(G|=Oo),o.flags|=G}}function Qbe(o,a,p,S){var b=o.stateNode,T=o.memoizedProps;b.props=T;var D=b.context,N=a.contextType,$=ol;if(typeof N=="object"&&N!==null)$=Ui(N);else{var G=Ay(o,a,!0);$=Dy(o,G)}var X=a.getDerivedStateFromProps,fe=typeof X=="function"||typeof b.getSnapshotBeforeUpdate=="function";!fe&&(typeof b.UNSAFE_componentWillReceiveProps=="function"||typeof b.componentWillReceiveProps=="function")&&(T!==p||D!==$)&&TG(o,b,p,$),BW();var ue=o.memoizedState,_e=b.state=ue;if(r_(o,p,b,S),_e=o.memoizedState,T===p&&ue===_e&&!FE()&&!i_()){if(typeof b.componentDidMount=="function"){var Ie=xn;Ie|=fu,(o.mode&dr)!==Mt&&(Ie|=Oo),o.flags|=Ie}return!1}typeof X=="function"&&(yj(o,a,X,p),_e=o.memoizedState);var Me=i_()||EG(o,a,T,p,ue,_e,$);if(Me){if(!fe&&(typeof b.UNSAFE_componentWillMount=="function"||typeof b.componentWillMount=="function")&&(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"){var at=xn;at|=fu,(o.mode&dr)!==Mt&&(at|=Oo),o.flags|=at}}else{if(typeof b.componentDidMount=="function"){var Ot=xn;Ot|=fu,(o.mode&dr)!==Mt&&(Ot|=Oo),o.flags|=Ot}o.memoizedProps=p,o.memoizedState=_e}return b.props=p,b.state=_e,b.context=$,Me}function Jbe(o,a,p,S,b){var T=a.stateNode;$W(o,a);var D=a.memoizedProps,N=a.type===a.elementType?D:Ic(a.type,D);T.props=N;var $=a.pendingProps,G=T.context,X=p.contextType,fe=ol;if(typeof X=="object"&&X!==null)fe=Ui(X);else{var ue=Ay(a,p,!0);fe=Dy(a,ue)}var _e=p.getDerivedStateFromProps,Ie=typeof _e=="function"||typeof T.getSnapshotBeforeUpdate=="function";!Ie&&(typeof T.UNSAFE_componentWillReceiveProps=="function"||typeof T.componentWillReceiveProps=="function")&&(D!==$||G!==fe)&&TG(a,T,S,fe),BW();var Me=a.memoizedState,at=T.state=Me;if(r_(a,S,T,b),at=a.memoizedState,D===$&&Me===at&&!FE()&&!i_())return typeof T.componentDidUpdate=="function"&&(D!==o.memoizedProps||Me!==o.memoizedState)&&(a.flags|=xn),typeof T.getSnapshotBeforeUpdate=="function"&&(D!==o.memoizedProps||Me!==o.memoizedState)&&(a.flags|=ya),!1;typeof _e=="function"&&(yj(a,p,_e,S),at=a.memoizedState);var Ot=i_()||EG(a,p,N,S,Me,at,fe)||ke;return Ot?(!Ie&&(typeof T.UNSAFE_componentWillUpdate=="function"||typeof T.componentWillUpdate=="function")&&(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(S,at,fe),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(S,at,fe)),typeof T.componentDidUpdate=="function"&&(a.flags|=xn),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=ya)):(typeof T.componentDidUpdate=="function"&&(D!==o.memoizedProps||Me!==o.memoizedState)&&(a.flags|=xn),typeof T.getSnapshotBeforeUpdate=="function"&&(D!==o.memoizedProps||Me!==o.memoizedState)&&(a.flags|=ya),a.memoizedProps=S,a.memoizedState=at),T.props=S,T.state=at,T.context=fe,Ot}function dg(o,a){return{value:o,source:a,stack:dn(a),digest:null}}function xj(o,a,p){return{value:o,source:null,stack:p??null,digest:a??null}}function e0e(o,a){return!0}function wj(o,a){try{var p=e0e(o,a);if(p===!1)return;var S=a.value,b=a.source,T=a.stack,D=T!==null?T:"";if(S!=null&&S._suppressLogging){if(o.tag===g)return;console.error(S)}var N=b?Bt(b):null,$=N?"The above error occurred in the <"+N+"> component:":"The above error occurred in one of your React components:",G;if(o.tag===v)G=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var X=Bt(o)||"Anonymous";G="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+X+".")}var fe=$+`
`+D+`

`+(""+G);console.error(fe)}catch(ue){setTimeout(function(){throw ue})}}var t0e=typeof WeakMap=="function"?WeakMap:Map;function IG(o,a,p){var S=Gd(or,p);S.tag=PO,S.payload={element:null};var b=a.value;return S.callback=function(){G1e(b),wj(o,a)},S}function bj(o,a,p){var S=Gd(or,p);S.tag=PO;var b=o.type.getDerivedStateFromError;if(typeof b=="function"){var T=a.value;S.payload=function(){return b(T)},S.callback=function(){zq(o),wj(o,a)}}var D=o.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(S.callback=function(){zq(o),wj(o,a),typeof b!="function"&&K1e(this);var $=a.value,G=a.stack;this.componentDidCatch($,{componentStack:G!==null?G:""}),typeof b!="function"&&(ms(o.lanes,Ft)||c("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",Bt(o)||"Unknown"))}),S}function kG(o,a,p){var S=o.pingCache,b;if(S===null?(S=o.pingCache=new t0e,b=new Set,S.set(a,b)):(b=S.get(a),b===void 0&&(b=new Set,S.set(a,b))),!b.has(p)){b.add(p);var T=q1e.bind(null,o,a,p);po&&Ow(o,p),a.then(T,T)}}function n0e(o,a,p,S){var b=o.updateQueue;if(b===null){var T=new Set;T.add(p),o.updateQueue=T}else b.add(p)}function r0e(o,a){var p=o.tag;if((o.mode&gn)===Mt&&(p===h||p===O||p===V)){var S=o.alternate;S?(o.updateQueue=S.updateQueue,o.memoizedState=S.memoizedState,o.lanes=S.lanes):(o.updateQueue=null,o.memoizedState=null)}}function RG(o){var a=o;do{if(a.tag===F&&Nbe(a))return a;a=a.return}while(a!==null);return null}function MG(o,a,p,S,b){if((o.mode&gn)===Mt){if(o===a)o.flags|=va;else{if(o.flags|=pn,p.flags|=el,p.flags&=-52805,p.tag===g){var T=p.alternate;if(T===null)p.tag=q;else{var D=Gd(or,Ft);D.tag=JE,Ch(p,D,Ft)}}p.lanes=nn(p.lanes,Ft)}return o}return o.flags|=va,o.lanes=b,o}function i0e(o,a,p,S,b){if(p.flags|=bd,po&&Ow(o,b),S!==null&&typeof S=="object"&&typeof S.then=="function"){var T=S;r0e(p),Fo()&&p.mode&gn&&bW();var D=RG(a);if(D!==null){D.flags&=-257,MG(D,a,p,o,b),D.mode&gn&&kG(o,T,b),n0e(D,o,T);return}else{if(!vx(b)){kG(o,T,b),tL();return}var N=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");S=N}}else if(Fo()&&p.mode&gn){bW();var $=RG(a);if($!==null){($.flags&va)===Rt&&($.flags|=Yr),MG($,a,p,o,b),pO(dg(S,p));return}}S=dg(S,p),N1e(S);var G=a;do{switch(G.tag){case v:{var X=S;G.flags|=va;var fe=Ni(b);G.lanes=nn(G.lanes,fe);var ue=IG(G,X,fe);kO(G,ue);return}case g:var _e=S,Ie=G.type,Me=G.stateNode;if((G.flags&pn)===Rt&&(typeof Ie.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&!Rq(Me))){G.flags|=va;var at=Ni(b);G.lanes=nn(G.lanes,at);var Ot=bj(G,_e,at);kO(G,Ot);return}break}G=G.return}while(G!==null)}function o0e(){return null}var vw=r.ReactCurrentOwner,kc=!1,Cj,Sw,Ej,_j,Pj,fg,Tj,I_,xw;Cj={},Sw={},Ej={},_j={},Pj={},fg=!1,Tj={},I_={},xw={};function Ws(o,a,p,S){o===null?a.child=OW(a,null,p,S):a.child=Ny(a,o.child,p,S)}function s0e(o,a,p,S){a.child=Ny(a,o.child,null,S),a.child=Ny(a,null,p,S)}function AG(o,a,p,S,b){if(a.type!==a.elementType){var T=p.propTypes;T&&Cc(T,S,"prop",Cn(p))}var D=p.render,N=a.ref,$,G;zy(a,b),Sa(a);{if(vw.current=a,fo(!0),$=Ky(o,a,D,S,N,b),G=Wy(),a.mode&Jt){ir(!0);try{$=Ky(o,a,D,S,N,b),G=Wy()}finally{ir(!1)}}fo(!1)}return yu(),o!==null&&!kc?(qW(o,a,b),qd(o,a,b)):(Fo()&&G&&lO(a),a.flags|=yc,Ws(o,a,$,b),a.child)}function DG(o,a,p,S,b){if(o===null){var T=p.type;if(dCe(T)&&p.compare===null&&p.defaultProps===void 0){var D=T;return D=ev(T),a.tag=V,a.type=D,Rj(a,T),OG(o,a,D,S,b)}{var N=T.propTypes;if(N&&Cc(N,S,"prop",Cn(T)),p.defaultProps!==void 0){var $=Cn(T)||"Unknown";xw[$]||(c("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",$),xw[$]=!0)}}var G=fL(p.type,null,S,a,a.mode,b);return G.ref=a.ref,G.return=a,a.child=G,G}{var X=p.type,fe=X.propTypes;fe&&Cc(fe,S,"prop",Cn(X))}var ue=o.child,_e=Lj(o,b);if(!_e){var Ie=ue.memoizedProps,Me=p.compare;if(Me=Me!==null?Me:At,Me(Ie,S)&&o.ref===a.ref)return qd(o,a,b)}a.flags|=yc;var at=yg(ue,S);return at.ref=a.ref,at.return=a,a.child=at,at}function OG(o,a,p,S,b){if(a.type!==a.elementType){var T=a.elementType;if(T.$$typeof===Vt){var D=T,N=D._payload,$=D._init;try{T=$(N)}catch{T=null}var G=T&&T.propTypes;G&&Cc(G,S,"prop",Cn(T))}}if(o!==null){var X=o.memoizedProps;if(At(X,S)&&o.ref===a.ref&&a.type===o.type)if(kc=!1,a.pendingProps=S=X,Lj(o,b))(o.flags&el)!==Rt&&(kc=!0);else return a.lanes=o.lanes,qd(o,a,b)}return Ij(o,a,p,S,b)}function jG(o,a,p){var S=a.pendingProps,b=S.children,T=o!==null?o.memoizedState:null;if(S.mode==="hidden"||te)if((a.mode&gn)===Mt){var D={baseLanes:je,cachePool:null,transitions:null};a.memoizedState=D,$_(a,p)}else if(ms(p,$s)){var fe={baseLanes:je,cachePool:null,transitions:null};a.memoizedState=fe;var ue=T!==null?T.baseLanes:p;$_(a,ue)}else{var N=null,$;if(T!==null){var G=T.baseLanes;$=nn(G,p)}else $=p;a.lanes=a.childLanes=$s;var X={baseLanes:$,cachePool:N,transitions:null};return a.memoizedState=X,a.updateQueue=null,$_(a,$),null}else{var _e;T!==null?(_e=nn(T.baseLanes,p),a.memoizedState=null):_e=p,$_(a,_e)}return Ws(o,a,b,p),a.child}function a0e(o,a,p){var S=a.pendingProps;return Ws(o,a,S,p),a.child}function l0e(o,a,p){var S=a.pendingProps.children;return Ws(o,a,S,p),a.child}function c0e(o,a,p){{a.flags|=xn;{var S=a.stateNode;S.effectDuration=0,S.passiveEffectDuration=0}}var b=a.pendingProps,T=b.children;return Ws(o,a,T,p),a.child}function LG(o,a){var p=a.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(a.flags|=fi,a.flags|=Pp)}function Ij(o,a,p,S,b){if(a.type!==a.elementType){var T=p.propTypes;T&&Cc(T,S,"prop",Cn(p))}var D;{var N=Ay(a,p,!0);D=Dy(a,N)}var $,G;zy(a,b),Sa(a);{if(vw.current=a,fo(!0),$=Ky(o,a,p,S,D,b),G=Wy(),a.mode&Jt){ir(!0);try{$=Ky(o,a,p,S,D,b),G=Wy()}finally{ir(!1)}}fo(!1)}return yu(),o!==null&&!kc?(qW(o,a,b),qd(o,a,b)):(Fo()&&G&&lO(a),a.flags|=yc,Ws(o,a,$,b),a.child)}function NG(o,a,p,S,b){{switch(PCe(a)){case!1:{var T=a.stateNode,D=a.type,N=new D(a.memoizedProps,T.context),$=N.state;T.updater.enqueueSetState(T,$,null);break}case!0:{a.flags|=pn,a.flags|=va;var G=new Error("Simulated error coming from DevTools"),X=Ni(b);a.lanes=nn(a.lanes,X);var fe=bj(a,dg(G,a),X);kO(a,fe);break}}if(a.type!==a.elementType){var ue=p.propTypes;ue&&Cc(ue,S,"prop",Cn(p))}}var _e;Mu(p)?(_e=!0,UE(a)):_e=!1,zy(a,b);var Ie=a.stateNode,Me;Ie===null?(R_(o,a),PG(a,p,S),Sj(a,p,S,b),Me=!0):o===null?Me=Qbe(a,p,S,b):Me=Jbe(o,a,p,S,b);var at=kj(o,a,p,Me,_e,b);{var Ot=a.stateNode;Me&&Ot.props!==S&&(fg||c("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",Bt(a)||"a component"),fg=!0)}return at}function kj(o,a,p,S,b,T){LG(o,a);var D=(a.flags&pn)!==Rt;if(!S&&!D)return b&&vW(a,p,!1),qd(o,a,T);var N=a.stateNode;vw.current=a;var $;if(D&&typeof p.getDerivedStateFromError!="function")$=null,wG();else{Sa(a);{if(fo(!0),$=N.render(),a.mode&Jt){ir(!0);try{N.render()}finally{ir(!1)}}fo(!1)}yu()}return a.flags|=yc,o!==null&&D?s0e(o,a,$,T):Ws(o,a,$,T),a.memoizedState=N.state,b&&vW(a,p,!0),a.child}function FG(o){var a=o.stateNode;a.pendingContext?mW(o,a.pendingContext,a.pendingContext!==a.context):a.context&&mW(o,a.context,!1),RO(o,a.containerInfo)}function u0e(o,a,p){if(FG(a),o===null)throw new Error("Should have a current fiber. This is a bug in React.");var S=a.pendingProps,b=a.memoizedState,T=b.element;$W(o,a),r_(a,S,null,p);var D=a.memoizedState;a.stateNode;var N=D.element;if(b.isDehydrated){var $={element:N,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},G=a.updateQueue;if(G.baseState=$,a.memoizedState=$,a.flags&Yr){var X=dg(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),a);return zG(o,a,N,p,X)}else if(N!==T){var fe=dg(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),a);return zG(o,a,N,p,fe)}else{hbe(a);var ue=OW(a,null,N,p);a.child=ue;for(var _e=ue;_e;)_e.flags=_e.flags&-3|hi,_e=_e.sibling}}else{if(Ly(),N===T)return qd(o,a,p);Ws(o,a,N,p)}return a.child}function zG(o,a,p,S,b){return Ly(),pO(b),a.flags|=Yr,Ws(o,a,p,S),a.child}function d0e(o,a,p){KW(a),o===null&&hO(a);var S=a.type,b=a.pendingProps,T=o!==null?o.memoizedProps:null,D=b.children,N=qD(S,b);return N?D=null:T!==null&&qD(S,T)&&(a.flags|=ur),LG(o,a),Ws(o,a,D,p),a.child}function f0e(o,a){return o===null&&hO(a),null}function h0e(o,a,p,S){R_(o,a);var b=a.pendingProps,T=p,D=T._payload,N=T._init,$=N(D);a.type=$;var G=a.tag=fCe($),X=Ic($,b),fe;switch(G){case h:return Rj(a,$),a.type=$=ev($),fe=Ij(null,a,$,X,S),fe;case g:return a.type=$=sL($),fe=NG(null,a,$,X,S),fe;case O:return a.type=$=aL($),fe=AG(null,a,$,X,S),fe;case H:{if(a.type!==a.elementType){var ue=$.propTypes;ue&&Cc(ue,X,"prop",Cn($))}return fe=DG(null,a,$,Ic($.type,X),S),fe}}var _e="";throw $!==null&&typeof $=="object"&&$.$$typeof===Vt&&(_e=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+$+". "+("Lazy element type must resolve to a class or function."+_e))}function p0e(o,a,p,S,b){R_(o,a),a.tag=g;var T;return Mu(p)?(T=!0,UE(a)):T=!1,zy(a,b),PG(a,p,S),Sj(a,p,S,b),kj(null,a,p,!0,T,b)}function g0e(o,a,p,S){R_(o,a);var b=a.pendingProps,T;{var D=Ay(a,p,!1);T=Dy(a,D)}zy(a,S);var N,$;Sa(a);{if(p.prototype&&typeof p.prototype.render=="function"){var G=Cn(p)||"Unknown";Cj[G]||(c("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",G,G),Cj[G]=!0)}a.mode&Jt&&_c.recordLegacyContextWarning(a,null),fo(!0),vw.current=a,N=Ky(null,a,p,b,T,S),$=Wy(),fo(!1)}if(yu(),a.flags|=yc,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0){var X=Cn(p)||"Unknown";Sw[X]||(c("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",X,X,X),Sw[X]=!0)}if(typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0){{var fe=Cn(p)||"Unknown";Sw[fe]||(c("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",fe,fe,fe),Sw[fe]=!0)}a.tag=g,a.memoizedState=null,a.updateQueue=null;var ue=!1;return Mu(p)?(ue=!0,UE(a)):ue=!1,a.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,IO(a),_G(a,N),Sj(a,p,b,S),kj(null,a,p,!0,ue,S)}else{if(a.tag=h,a.mode&Jt){ir(!0);try{N=Ky(null,a,p,b,T,S),$=Wy()}finally{ir(!1)}}return Fo()&&$&&lO(a),Ws(null,a,N,S),Rj(a,p),a.child}}function Rj(o,a){{if(a&&a.childContextTypes&&c("%s(...): childContextTypes cannot be defined on a function component.",a.displayName||a.name||"Component"),o.ref!==null){var p="",S=$r();S&&(p+=`

Check the render method of \``+S+"`.");var b=S||"",T=o._debugSource;T&&(b=T.fileName+":"+T.lineNumber),Pj[b]||(Pj[b]=!0,c("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",p))}if(a.defaultProps!==void 0){var D=Cn(a)||"Unknown";xw[D]||(c("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",D),xw[D]=!0)}if(typeof a.getDerivedStateFromProps=="function"){var N=Cn(a)||"Unknown";_j[N]||(c("%s: Function components do not support getDerivedStateFromProps.",N),_j[N]=!0)}if(typeof a.contextType=="object"&&a.contextType!==null){var $=Cn(a)||"Unknown";Ej[$]||(c("%s: Function components do not support contextType.",$),Ej[$]=!0)}}}var Mj={dehydrated:null,treeContext:null,retryLane:gi};function Aj(o){return{baseLanes:o,cachePool:o0e(),transitions:null}}function m0e(o,a){var p=null;return{baseLanes:nn(o.baseLanes,a),cachePool:p,transitions:o.transitions}}function y0e(o,a,p,S){if(a!==null){var b=a.memoizedState;if(b===null)return!1}return DO(o,cw)}function v0e(o,a){return Up(o.childLanes,a)}function UG(o,a,p){var S=a.pendingProps;TCe(a)&&(a.flags|=pn);var b=Pc.current,T=!1,D=(a.flags&pn)!==Rt;if(D||y0e(b,o)?(T=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(b=Lbe(b,GW)),b=$y(b),_h(a,b),o===null){hO(a);var N=a.memoizedState;if(N!==null){var $=N.dehydrated;if($!==null)return C0e(a,$)}var G=S.children,X=S.fallback;if(T){var fe=S0e(a,G,X,p),ue=a.child;return ue.memoizedState=Aj(p),a.memoizedState=Mj,fe}else return Dj(a,G)}else{var _e=o.memoizedState;if(_e!==null){var Ie=_e.dehydrated;if(Ie!==null)return E0e(o,a,D,S,Ie,_e,p)}if(T){var Me=S.fallback,at=S.children,Ot=w0e(o,a,at,Me,p),Tt=a.child,Ln=o.child.memoizedState;return Tt.memoizedState=Ln===null?Aj(p):m0e(Ln,p),Tt.childLanes=v0e(o,p),a.memoizedState=Mj,Ot}else{var En=S.children,we=x0e(o,a,En,p);return a.memoizedState=null,we}}}function Dj(o,a,p){var S=o.mode,b={mode:"visible",children:a},T=Oj(b,S);return T.return=o,o.child=T,T}function S0e(o,a,p,S){var b=o.mode,T=o.child,D={mode:"hidden",children:a},N,$;return(b&gn)===Mt&&T!==null?(N=T,N.childLanes=je,N.pendingProps=D,o.mode&kn&&(N.actualDuration=0,N.actualStartTime=-1,N.selfBaseDuration=0,N.treeBaseDuration=0),$=Dh(p,b,S,null)):(N=Oj(D,b),$=Dh(p,b,S,null)),N.return=o,$.return=o,N.sibling=$,o.child=N,$}function Oj(o,a,p){return $q(o,a,je,null)}function $G(o,a){return yg(o,a)}function x0e(o,a,p,S){var b=o.child,T=b.sibling,D=$G(b,{mode:"visible",children:p});if((a.mode&gn)===Mt&&(D.lanes=S),D.return=a,D.sibling=null,T!==null){var N=a.deletions;N===null?(a.deletions=[T],a.flags|=ds):N.push(T)}return a.child=D,D}function w0e(o,a,p,S,b){var T=a.mode,D=o.child,N=D.sibling,$={mode:"hidden",children:p},G;if((T&gn)===Mt&&a.child!==D){var X=a.child;G=X,G.childLanes=je,G.pendingProps=$,a.mode&kn&&(G.actualDuration=0,G.actualStartTime=-1,G.selfBaseDuration=D.selfBaseDuration,G.treeBaseDuration=D.treeBaseDuration),a.deletions=null}else G=$G(D,$),G.subtreeFlags=D.subtreeFlags&pi;var fe;return N!==null?fe=yg(N,S):(fe=Dh(S,T,b,null),fe.flags|=di),fe.return=a,G.return=a,G.sibling=fe,a.child=G,fe}function k_(o,a,p,S){S!==null&&pO(S),Ny(a,o.child,null,p);var b=a.pendingProps,T=b.children,D=Dj(a,T);return D.flags|=di,a.memoizedState=null,D}function b0e(o,a,p,S,b){var T=a.mode,D={mode:"visible",children:p},N=Oj(D,T),$=Dh(S,T,b,null);return $.flags|=di,N.return=a,$.return=a,N.sibling=$,a.child=N,(a.mode&gn)!==Mt&&Ny(a,o.child,null,b),$}function C0e(o,a,p){return(o.mode&gn)===Mt?(c("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),o.lanes=Ft):QD(a)?o.lanes=Li:o.lanes=$s,null}function E0e(o,a,p,S,b,T,D){if(p)if(a.flags&Yr){a.flags&=-257;var we=xj(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return k_(o,a,D,we)}else{if(a.memoizedState!==null)return a.child=o.child,a.flags|=pn,null;var Ae=S.children,be=S.fallback,Ge=b0e(o,a,Ae,be,D),pt=a.child;return pt.memoizedState=Aj(D),a.memoizedState=Mj,Ge}else{if(dbe(),(a.mode&gn)===Mt)return k_(o,a,D,null);if(QD(b)){var N,$,G;{var X=Iwe(b);N=X.digest,$=X.message,G=X.stack}var fe;$?fe=new Error($):fe=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var ue=xj(fe,N,G);return k_(o,a,D,ue)}var _e=ms(D,o.childLanes);if(kc||_e){var Ie=U_();if(Ie!==null){var Me=sy(Ie,D);if(Me!==gi&&Me!==T.retryLane){T.retryLane=Me;var at=or;_a(o,Me),oo(Ie,o,Me,at)}}tL();var Ot=xj(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return k_(o,a,D,Ot)}else if(uW(b)){a.flags|=pn,a.child=o.child;var Tt=Y1e.bind(null,o);return kwe(b,Tt),null}else{pbe(a,b,T.treeContext);var Ln=S.children,En=Dj(a,Ln);return En.flags|=hi,En}}}function BG(o,a,p){o.lanes=nn(o.lanes,a);var S=o.alternate;S!==null&&(S.lanes=nn(S.lanes,a)),EO(o.return,a,p)}function _0e(o,a,p){for(var S=a;S!==null;){if(S.tag===F){var b=S.memoizedState;b!==null&&BG(S,p,o)}else if(S.tag===ie)BG(S,p,o);else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)return;for(;S.sibling===null;){if(S.return===null||S.return===o)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function P0e(o){for(var a=o,p=null;a!==null;){var S=a.alternate;S!==null&&a_(S)===null&&(p=a),a=a.sibling}return p}function T0e(o){if(o!==void 0&&o!=="forwards"&&o!=="backwards"&&o!=="together"&&!Tj[o])if(Tj[o]=!0,typeof o=="string")switch(o.toLowerCase()){case"together":case"forwards":case"backwards":{c('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',o,o.toLowerCase());break}case"forward":case"backward":{c('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',o,o.toLowerCase());break}default:c('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',o);break}else c('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',o)}function I0e(o,a){o!==void 0&&!I_[o]&&(o!=="collapsed"&&o!=="hidden"?(I_[o]=!0,c('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',o)):a!=="forwards"&&a!=="backwards"&&(I_[o]=!0,c('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',o)))}function HG(o,a){{var p=tn(o),S=!p&&typeof Sr(o)=="function";if(p||S){var b=p?"array":"iterable";return c("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",b,a,b),!1}}return!0}function k0e(o,a){if((a==="forwards"||a==="backwards")&&o!==void 0&&o!==null&&o!==!1)if(tn(o)){for(var p=0;p<o.length;p++)if(!HG(o[p],p))return}else{var S=Sr(o);if(typeof S=="function"){var b=S.call(o);if(b)for(var T=b.next(),D=0;!T.done;T=b.next()){if(!HG(T.value,D))return;D++}}else c('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',a)}}function jj(o,a,p,S,b){var T=o.memoizedState;T===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:S,tail:p,tailMode:b}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=S,T.tail=p,T.tailMode=b)}function VG(o,a,p){var S=a.pendingProps,b=S.revealOrder,T=S.tail,D=S.children;T0e(b),I0e(T,b),k0e(D,b),Ws(o,a,D,p);var N=Pc.current,$=DO(N,cw);if($)N=OO(N,cw),a.flags|=pn;else{var G=o!==null&&(o.flags&pn)!==Rt;G&&_0e(a,a.child,p),N=$y(N)}if(_h(a,N),(a.mode&gn)===Mt)a.memoizedState=null;else switch(b){case"forwards":{var X=P0e(a.child),fe;X===null?(fe=a.child,a.child=null):(fe=X.sibling,X.sibling=null),jj(a,!1,fe,X,T);break}case"backwards":{var ue=null,_e=a.child;for(a.child=null;_e!==null;){var Ie=_e.alternate;if(Ie!==null&&a_(Ie)===null){a.child=_e;break}var Me=_e.sibling;_e.sibling=ue,ue=_e,_e=Me}jj(a,!0,ue,null,T);break}case"together":{jj(a,!1,null,null,void 0);break}default:a.memoizedState=null}return a.child}function R0e(o,a,p){RO(a,a.stateNode.containerInfo);var S=a.pendingProps;return o===null?a.child=Ny(a,null,S,p):Ws(o,a,S,p),a.child}var KG=!1;function M0e(o,a,p){var S=a.type,b=S._context,T=a.pendingProps,D=a.memoizedProps,N=T.value;{"value"in T||KG||(KG=!0,c("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var $=a.type.propTypes;$&&Cc($,T,"prop","Context.Provider")}if(NW(a,b,N),D!==null){var G=D.value;if(xt(G,N)){if(D.children===T.children&&!FE())return qd(o,a,p)}else Tbe(a,b,p)}var X=T.children;return Ws(o,a,X,p),a.child}var WG=!1;function A0e(o,a,p){var S=a.type;S._context===void 0?S!==S.Consumer&&(WG||(WG=!0,c("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):S=S._context;var b=a.pendingProps,T=b.children;typeof T!="function"&&c("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),zy(a,p);var D=Ui(S);Sa(a);var N;return vw.current=a,fo(!0),N=T(D),fo(!1),yu(),a.flags|=yc,Ws(o,a,N,p),a.child}function ww(){kc=!0}function R_(o,a){(a.mode&gn)===Mt&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=di)}function qd(o,a,p){return o!==null&&(a.dependencies=o.dependencies),wG(),Dw(a.lanes),ms(p,a.childLanes)?(_be(o,a),a.child):null}function D0e(o,a,p){{var S=a.return;if(S===null)throw new Error("Cannot swap the root fiber.");if(o.alternate=null,a.alternate=null,p.index=a.index,p.sibling=a.sibling,p.return=a.return,p.ref=a.ref,a===S.child)S.child=p;else{var b=S.child;if(b===null)throw new Error("Expected parent to have a child.");for(;b.sibling!==a;)if(b=b.sibling,b===null)throw new Error("Expected to find the previous sibling.");b.sibling=p}var T=S.deletions;return T===null?(S.deletions=[o],S.flags|=ds):T.push(o),p.flags|=di,p}}function Lj(o,a){var p=o.lanes;return!!ms(p,a)}function O0e(o,a,p){switch(a.tag){case v:FG(a),a.stateNode,Ly();break;case C:KW(a);break;case g:{var S=a.type;Mu(S)&&UE(a);break}case w:RO(a,a.stateNode.containerInfo);break;case L:{var b=a.memoizedProps.value,T=a.type._context;NW(a,T,b);break}case z:{var D=ms(p,a.childLanes);D&&(a.flags|=xn);{var N=a.stateNode;N.effectDuration=0,N.passiveEffectDuration=0}}break;case F:{var $=a.memoizedState;if($!==null){if($.dehydrated!==null)return _h(a,$y(Pc.current)),a.flags|=pn,null;var G=a.child,X=G.childLanes;if(ms(p,X))return UG(o,a,p);_h(a,$y(Pc.current));var fe=qd(o,a,p);return fe!==null?fe.sibling:null}else _h(a,$y(Pc.current));break}case ie:{var ue=(o.flags&pn)!==Rt,_e=ms(p,a.childLanes);if(ue){if(_e)return VG(o,a,p);a.flags|=pn}var Ie=a.memoizedState;if(Ie!==null&&(Ie.rendering=null,Ie.tail=null,Ie.lastEffect=null),_h(a,Pc.current),_e)break;return null}case Y:case oe:return a.lanes=je,jG(o,a,p)}return qd(o,a,p)}function GG(o,a,p){if(a._debugNeedsRemount&&o!==null)return D0e(o,a,fL(a.type,a.key,a.pendingProps,a._debugOwner||null,a.mode,a.lanes));if(o!==null){var S=o.memoizedProps,b=a.pendingProps;if(S!==b||FE()||a.type!==o.type)kc=!0;else{var T=Lj(o,p);if(!T&&(a.flags&pn)===Rt)return kc=!1,O0e(o,a,p);(o.flags&el)!==Rt?kc=!0:kc=!1}}else if(kc=!1,Fo()&&obe(a)){var D=a.index,N=sbe();wW(a,N,D)}switch(a.lanes=je,a.tag){case y:return g0e(o,a,a.type,p);case re:{var $=a.elementType;return h0e(o,a,$,p)}case h:{var G=a.type,X=a.pendingProps,fe=a.elementType===G?X:Ic(G,X);return Ij(o,a,G,fe,p)}case g:{var ue=a.type,_e=a.pendingProps,Ie=a.elementType===ue?_e:Ic(ue,_e);return NG(o,a,ue,Ie,p)}case v:return u0e(o,a,p);case C:return d0e(o,a,p);case E:return f0e(o,a);case F:return UG(o,a,p);case w:return R0e(o,a,p);case O:{var Me=a.type,at=a.pendingProps,Ot=a.elementType===Me?at:Ic(Me,at);return AG(o,a,Me,Ot,p)}case P:return a0e(o,a,p);case I:return l0e(o,a,p);case z:return c0e(o,a,p);case L:return M0e(o,a,p);case k:return A0e(o,a,p);case H:{var Tt=a.type,Ln=a.pendingProps,En=Ic(Tt,Ln);if(a.type!==a.elementType){var we=Tt.propTypes;we&&Cc(we,En,"prop",Cn(Tt))}return En=Ic(Tt.type,En),DG(o,a,Tt,En,p)}case V:return OG(o,a,a.type,a.pendingProps,p);case q:{var Ae=a.type,be=a.pendingProps,Ge=a.elementType===Ae?be:Ic(Ae,be);return p0e(o,a,Ae,Ge,p)}case ie:return VG(o,a,p);case W:break;case Y:return jG(o,a,p)}throw new Error("Unknown unit of work tag ("+a.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function Gy(o){o.flags|=xn}function qG(o){o.flags|=fi,o.flags|=Pp}var YG,Nj,XG,ZG;YG=function(o,a,p,S){for(var b=a.child;b!==null;){if(b.tag===C||b.tag===E)nwe(o,b.stateNode);else if(b.tag!==w){if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===a)return;for(;b.sibling===null;){if(b.return===null||b.return===a)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Nj=function(o,a){},XG=function(o,a,p,S,b){var T=o.memoizedProps;if(T!==S){var D=a.stateNode,N=MO(),$=iwe(D,p,T,S,b,N);a.updateQueue=$,$&&Gy(a)}},ZG=function(o,a,p,S){p!==S&&Gy(a)};function bw(o,a){if(!Fo())switch(o.tailMode){case"hidden":{for(var p=o.tail,S=null;p!==null;)p.alternate!==null&&(S=p),p=p.sibling;S===null?o.tail=null:S.sibling=null;break}case"collapsed":{for(var b=o.tail,T=null;b!==null;)b.alternate!==null&&(T=b),b=b.sibling;T===null?!a&&o.tail!==null?o.tail.sibling=null:o.tail=null:T.sibling=null;break}}}function Uo(o){var a=o.alternate!==null&&o.alternate.child===o.child,p=je,S=Rt;if(a){if((o.mode&kn)!==Mt){for(var $=o.selfBaseDuration,G=o.child;G!==null;)p=nn(p,nn(G.lanes,G.childLanes)),S|=G.subtreeFlags&pi,S|=G.flags&pi,$+=G.treeBaseDuration,G=G.sibling;o.treeBaseDuration=$}else for(var X=o.child;X!==null;)p=nn(p,nn(X.lanes,X.childLanes)),S|=X.subtreeFlags&pi,S|=X.flags&pi,X.return=o,X=X.sibling;o.subtreeFlags|=S}else{if((o.mode&kn)!==Mt){for(var b=o.actualDuration,T=o.selfBaseDuration,D=o.child;D!==null;)p=nn(p,nn(D.lanes,D.childLanes)),S|=D.subtreeFlags,S|=D.flags,b+=D.actualDuration,T+=D.treeBaseDuration,D=D.sibling;o.actualDuration=b,o.treeBaseDuration=T}else for(var N=o.child;N!==null;)p=nn(p,nn(N.lanes,N.childLanes)),S|=N.subtreeFlags,S|=N.flags,N.return=o,N=N.sibling;o.subtreeFlags|=S}return o.childLanes=p,a}function j0e(o,a,p){if(Sbe()&&(a.mode&gn)!==Mt&&(a.flags&pn)===Rt)return IW(a),Ly(),a.flags|=Yr|bd|va,!1;var S=KE(a);if(p!==null&&p.dehydrated!==null)if(o===null){if(!S)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(ybe(a),Uo(a),(a.mode&kn)!==Mt){var b=p!==null;if(b){var T=a.child;T!==null&&(a.treeBaseDuration-=T.treeBaseDuration)}}return!1}else{if(Ly(),(a.flags&pn)===Rt&&(a.memoizedState=null),a.flags|=xn,Uo(a),(a.mode&kn)!==Mt){var D=p!==null;if(D){var N=a.child;N!==null&&(a.treeBaseDuration-=N.treeBaseDuration)}}return!1}else return kW(),!0}function QG(o,a,p){var S=a.pendingProps;switch(cO(a),a.tag){case y:case re:case V:case h:case O:case P:case I:case z:case k:case H:return Uo(a),null;case g:{var b=a.type;return Mu(b)&&zE(a),Uo(a),null}case v:{var T=a.stateNode;if(Uy(a),oO(a),LO(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),o===null||o.child===null){var D=KE(a);if(D)Gy(a);else if(o!==null){var N=o.memoizedState;(!N.isDehydrated||(a.flags&Yr)!==Rt)&&(a.flags|=ya,kW())}}return Nj(o,a),Uo(a),null}case C:{AO(a);var $=VW(),G=a.type;if(o!==null&&a.stateNode!=null)XG(o,a,G,S,$),o.ref!==a.ref&&qG(a);else{if(!S){if(a.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return Uo(a),null}var X=MO(),fe=KE(a);if(fe)gbe(a,$,X)&&Gy(a);else{var ue=twe(G,S,$,X,a);YG(ue,a,!1,!1),a.stateNode=ue,rwe(ue,G,S,$)&&Gy(a)}a.ref!==null&&qG(a)}return Uo(a),null}case E:{var _e=S;if(o&&a.stateNode!=null){var Ie=o.memoizedProps;ZG(o,a,Ie,_e)}else{if(typeof _e!="string"&&a.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var Me=VW(),at=MO(),Ot=KE(a);Ot?mbe(a)&&Gy(a):a.stateNode=owe(_e,Me,at,a)}return Uo(a),null}case F:{By(a);var Tt=a.memoizedState;if(o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){var Ln=j0e(o,a,Tt);if(!Ln)return a.flags&va?a:null}if((a.flags&pn)!==Rt)return a.lanes=p,(a.mode&kn)!==Mt&&aj(a),a;var En=Tt!==null,we=o!==null&&o.memoizedState!==null;if(En!==we&&En){var Ae=a.child;if(Ae.flags|=kl,(a.mode&gn)!==Mt){var be=o===null&&(a.memoizedProps.unstable_avoidThisFallback!==!0||!0);be||DO(Pc.current,GW)?L1e():tL()}}var Ge=a.updateQueue;if(Ge!==null&&(a.flags|=xn),Uo(a),(a.mode&kn)!==Mt&&En){var pt=a.child;pt!==null&&(a.treeBaseDuration-=pt.treeBaseDuration)}return null}case w:return Uy(a),Nj(o,a),o===null&&Qwe(a.stateNode.containerInfo),Uo(a),null;case L:var ut=a.type._context;return CO(ut,a),Uo(a),null;case q:{var Ht=a.type;return Mu(Ht)&&zE(a),Uo(a),null}case ie:{By(a);var Xt=a.memoizedState;if(Xt===null)return Uo(a),null;var hr=(a.flags&pn)!==Rt,Kn=Xt.rendering;if(Kn===null)if(hr)bw(Xt,!1);else{var Ti=F1e()&&(o===null||(o.flags&pn)===Rt);if(!Ti)for(var Wn=a.child;Wn!==null;){var yi=a_(Wn);if(yi!==null){hr=!0,a.flags|=pn,bw(Xt,!1);var bs=yi.updateQueue;return bs!==null&&(a.updateQueue=bs,a.flags|=xn),a.subtreeFlags=Rt,Pbe(a,p),_h(a,OO(Pc.current,cw)),a.child}Wn=Wn.sibling}Xt.tail!==null&&ti()>Sq()&&(a.flags|=pn,hr=!0,bw(Xt,!1),a.lanes=KC)}else{if(!hr){var Ko=a_(Kn);if(Ko!==null){a.flags|=pn,hr=!0;var al=Ko.updateQueue;if(al!==null&&(a.updateQueue=al,a.flags|=xn),bw(Xt,!0),Xt.tail===null&&Xt.tailMode==="hidden"&&!Kn.alternate&&!Fo())return Uo(a),null}else ti()*2-Xt.renderingStartTime>Sq()&&p!==$s&&(a.flags|=pn,hr=!0,bw(Xt,!1),a.lanes=KC)}if(Xt.isBackwards)Kn.sibling=a.child,a.child=Kn;else{var Ys=Xt.last;Ys!==null?Ys.sibling=Kn:a.child=Kn,Xt.last=Kn}}if(Xt.tail!==null){var Xs=Xt.tail;Xt.rendering=Xs,Xt.tail=Xs.sibling,Xt.renderingStartTime=ti(),Xs.sibling=null;var Cs=Pc.current;return hr?Cs=OO(Cs,cw):Cs=$y(Cs),_h(a,Cs),Xs}return Uo(a),null}case W:break;case Y:case oe:{eL(a);var Jd=a.memoizedState,tv=Jd!==null;if(o!==null){var Fw=o.memoizedState,zu=Fw!==null;zu!==tv&&(a.flags|=kl)}return!tv||(a.mode&gn)===Mt?Uo(a):ms(Fu,$s)&&(Uo(a),a.subtreeFlags&(di|xn)&&(a.flags|=kl)),null}case le:return null;case ce:return null}throw new Error("Unknown unit of work tag ("+a.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function L0e(o,a,p){switch(cO(a),a.tag){case g:{var S=a.type;Mu(S)&&zE(a);var b=a.flags;return b&va?(a.flags=b&-65537|pn,(a.mode&kn)!==Mt&&aj(a),a):null}case v:{a.stateNode,Uy(a),oO(a),LO();var T=a.flags;return(T&va)!==Rt&&(T&pn)===Rt?(a.flags=T&-65537|pn,a):null}case C:return AO(a),null;case F:{By(a);var D=a.memoizedState;if(D!==null&&D.dehydrated!==null){if(a.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Ly()}var N=a.flags;return N&va?(a.flags=N&-65537|pn,(a.mode&kn)!==Mt&&aj(a),a):null}case ie:return By(a),null;case w:return Uy(a),null;case L:var $=a.type._context;return CO($,a),null;case Y:case oe:return eL(a),null;case le:return null;default:return null}}function JG(o,a,p){switch(cO(a),a.tag){case g:{var S=a.type.childContextTypes;S!=null&&zE(a);break}case v:{a.stateNode,Uy(a),oO(a),LO();break}case C:{AO(a);break}case w:Uy(a);break;case F:By(a);break;case ie:By(a);break;case L:var b=a.type._context;CO(b,a);break;case Y:case oe:eL(a);break}}var eq=null;eq=new Set;var M_=!1,$o=!1,N0e=typeof WeakSet=="function"?WeakSet:Set,wt=null,qy=null,Yy=null;function F0e(o){ma(null,function(){throw o}),JS()}var z0e=function(o,a){if(a.props=o.memoizedProps,a.state=o.memoizedState,o.mode&kn)try{Lu(),a.componentWillUnmount()}finally{ju(o)}else a.componentWillUnmount()};function tq(o,a){try{Ih(Ji,o)}catch(p){_r(o,a,p)}}function Fj(o,a,p){try{z0e(o,p)}catch(S){_r(o,a,S)}}function U0e(o,a,p){try{p.componentDidMount()}catch(S){_r(o,a,S)}}function nq(o,a){try{iq(o)}catch(p){_r(o,a,p)}}function Xy(o,a){var p=o.ref;if(p!==null)if(typeof p=="function"){var S;try{if(De&&yt&&o.mode&kn)try{Lu(),S=p(null)}finally{ju(o)}else S=p(null)}catch(b){_r(o,a,b)}typeof S=="function"&&c("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Bt(o))}else p.current=null}function A_(o,a,p){try{p()}catch(S){_r(o,a,S)}}var rq=!1;function $0e(o,a){Jxe(o.containerInfo),wt=a,B0e();var p=rq;return rq=!1,p}function B0e(){for(;wt!==null;){var o=wt,a=o.child;(o.subtreeFlags&pu)!==Rt&&a!==null?(a.return=o,wt=a):H0e()}}function H0e(){for(;wt!==null;){var o=wt;$n(o);try{V0e(o)}catch(p){_r(o,o.return,p)}Ar();var a=o.sibling;if(a!==null){a.return=o.return,wt=a;return}wt=o.return}}function V0e(o){var a=o.alternate,p=o.flags;if((p&ya)!==Rt){switch($n(o),o.tag){case h:case O:case V:break;case g:{if(a!==null){var S=a.memoizedProps,b=a.memoizedState,T=o.stateNode;o.type===o.elementType&&!fg&&(T.props!==o.memoizedProps&&c("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Bt(o)||"instance"),T.state!==o.memoizedState&&c("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Bt(o)||"instance"));var D=T.getSnapshotBeforeUpdate(o.elementType===o.type?S:Ic(o.type,S),b);{var N=eq;D===void 0&&!N.has(o.type)&&(N.add(o.type),c("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",Bt(o)))}T.__reactInternalSnapshotBeforeUpdate=D}break}case v:{{var $=o.stateNode;Ewe($.containerInfo)}break}case C:case E:case w:case q:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}Ar()}}function Rc(o,a,p){var S=a.updateQueue,b=S!==null?S.lastEffect:null;if(b!==null){var T=b.next,D=T;do{if((D.tag&o)===o){var N=D.destroy;D.destroy=void 0,N!==void 0&&((o&zo)!==Pa?vu(a):(o&Ji)!==Pa&&dx(a),(o&Au)!==Pa&&jw(!0),A_(a,p,N),(o&Au)!==Pa&&jw(!1),(o&zo)!==Pa?Dm():(o&Ji)!==Pa&&Jf())}D=D.next}while(D!==T)}}function Ih(o,a){var p=a.updateQueue,S=p!==null?p.lastEffect:null;if(S!==null){var b=S.next,T=b;do{if((T.tag&o)===o){(o&zo)!==Pa?HC(a):(o&Ji)!==Pa&&VC(a);var D=T.create;(o&Au)!==Pa&&jw(!0),T.destroy=D(),(o&Au)!==Pa&&jw(!1),(o&zo)!==Pa?Sc():(o&Ji)!==Pa&&Om();{var N=T.destroy;if(N!==void 0&&typeof N!="function"){var $=void 0;(T.tag&Ji)!==Rt?$="useLayoutEffect":(T.tag&Au)!==Rt?$="useInsertionEffect":$="useEffect";var G=void 0;N===null?G=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof N.then=="function"?G=`

It looks like you wrote `+$+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+$+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:G=" You returned: "+N,c("%s must not return anything besides a function, which is used for clean-up.%s",$,G)}}}T=T.next}while(T!==b)}}function K0e(o,a){if((a.flags&xn)!==Rt)switch(a.tag){case z:{var p=a.stateNode.passiveEffectDuration,S=a.memoizedProps,b=S.id,T=S.onPostCommit,D=SG(),N=a.alternate===null?"mount":"update";vG()&&(N="nested-update"),typeof T=="function"&&T(b,N,p,D);var $=a.return;e:for(;$!==null;){switch($.tag){case v:var G=$.stateNode;G.passiveEffectDuration+=p;break e;case z:var X=$.stateNode;X.passiveEffectDuration+=p;break e}$=$.return}break}}}function W0e(o,a,p,S){if((p.flags&gu)!==Rt)switch(p.tag){case h:case O:case V:{if(!$o)if(p.mode&kn)try{Lu(),Ih(Ji|Qi,p)}finally{ju(p)}else Ih(Ji|Qi,p);break}case g:{var b=p.stateNode;if(p.flags&xn&&!$o)if(a===null)if(p.type===p.elementType&&!fg&&(b.props!==p.memoizedProps&&c("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Bt(p)||"instance"),b.state!==p.memoizedState&&c("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Bt(p)||"instance")),p.mode&kn)try{Lu(),b.componentDidMount()}finally{ju(p)}else b.componentDidMount();else{var T=p.elementType===p.type?a.memoizedProps:Ic(p.type,a.memoizedProps),D=a.memoizedState;if(p.type===p.elementType&&!fg&&(b.props!==p.memoizedProps&&c("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Bt(p)||"instance"),b.state!==p.memoizedState&&c("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Bt(p)||"instance")),p.mode&kn)try{Lu(),b.componentDidUpdate(T,D,b.__reactInternalSnapshotBeforeUpdate)}finally{ju(p)}else b.componentDidUpdate(T,D,b.__reactInternalSnapshotBeforeUpdate)}var N=p.updateQueue;N!==null&&(p.type===p.elementType&&!fg&&(b.props!==p.memoizedProps&&c("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Bt(p)||"instance"),b.state!==p.memoizedState&&c("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Bt(p)||"instance")),HW(p,N,b));break}case v:{var $=p.updateQueue;if($!==null){var G=null;if(p.child!==null)switch(p.child.tag){case C:G=p.child.stateNode;break;case g:G=p.child.stateNode;break}HW(p,$,G)}break}case C:{var X=p.stateNode;if(a===null&&p.flags&xn){var fe=p.type,ue=p.memoizedProps;uwe(X,fe,ue)}break}case E:break;case w:break;case z:{{var _e=p.memoizedProps,Ie=_e.onCommit,Me=_e.onRender,at=p.stateNode.effectDuration,Ot=SG(),Tt=a===null?"mount":"update";vG()&&(Tt="nested-update"),typeof Me=="function"&&Me(p.memoizedProps.id,Tt,p.actualDuration,p.treeBaseDuration,p.actualStartTime,Ot);{typeof Ie=="function"&&Ie(p.memoizedProps.id,Tt,at,Ot),H1e(p);var Ln=p.return;e:for(;Ln!==null;){switch(Ln.tag){case v:var En=Ln.stateNode;En.effectDuration+=at;break e;case z:var we=Ln.stateNode;we.effectDuration+=at;break e}Ln=Ln.return}}}break}case F:{e1e(o,p);break}case ie:case q:case W:case Y:case oe:case ce:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}$o||p.flags&fi&&iq(p)}function G0e(o){switch(o.tag){case h:case O:case V:{if(o.mode&kn)try{Lu(),tq(o,o.return)}finally{ju(o)}else tq(o,o.return);break}case g:{var a=o.stateNode;typeof a.componentDidMount=="function"&&U0e(o,o.return,a),nq(o,o.return);break}case C:{nq(o,o.return);break}}}function q0e(o,a){for(var p=null,S=o;;){if(S.tag===C){if(p===null){p=S;try{var b=S.stateNode;a?xwe(b):bwe(S.stateNode,S.memoizedProps)}catch(D){_r(o,o.return,D)}}}else if(S.tag===E){if(p===null)try{var T=S.stateNode;a?wwe(T):Cwe(T,S.memoizedProps)}catch(D){_r(o,o.return,D)}}else if(!((S.tag===Y||S.tag===oe)&&S.memoizedState!==null&&S!==o)){if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===o)return;for(;S.sibling===null;){if(S.return===null||S.return===o)return;p===S&&(p=null),S=S.return}p===S&&(p=null),S.sibling.return=S.return,S=S.sibling}}function iq(o){var a=o.ref;if(a!==null){var p=o.stateNode,S;switch(o.tag){case C:S=p;break;default:S=p}if(typeof a=="function"){var b;if(o.mode&kn)try{Lu(),b=a(S)}finally{ju(o)}else b=a(S);typeof b=="function"&&c("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Bt(o))}else a.hasOwnProperty("current")||c("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",Bt(o)),a.current=S}}function Y0e(o){var a=o.alternate;a!==null&&(a.return=null),o.return=null}function oq(o){var a=o.alternate;a!==null&&(o.alternate=null,oq(a));{if(o.child=null,o.deletions=null,o.sibling=null,o.tag===C){var p=o.stateNode;p!==null&&tbe(p)}o.stateNode=null,o._debugOwner=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}}function X0e(o){for(var a=o.return;a!==null;){if(sq(a))return a;a=a.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function sq(o){return o.tag===C||o.tag===v||o.tag===w}function aq(o){var a=o;e:for(;;){for(;a.sibling===null;){if(a.return===null||sq(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==C&&a.tag!==E&&a.tag!==J;){if(a.flags&di||a.child===null||a.tag===w)continue e;a.child.return=a,a=a.child}if(!(a.flags&di))return a.stateNode}}function Z0e(o){var a=X0e(o);switch(a.tag){case C:{var p=a.stateNode;a.flags&ur&&(cW(p),a.flags&=-33);var S=aq(o);Uj(o,S,p);break}case v:case w:{var b=a.stateNode.containerInfo,T=aq(o);zj(o,T,b);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function zj(o,a,p){var S=o.tag,b=S===C||S===E;if(b){var T=o.stateNode;a?mwe(p,T,a):pwe(p,T)}else if(S!==w){var D=o.child;if(D!==null){zj(D,a,p);for(var N=D.sibling;N!==null;)zj(N,a,p),N=N.sibling}}}function Uj(o,a,p){var S=o.tag,b=S===C||S===E;if(b){var T=o.stateNode;a?gwe(p,T,a):hwe(p,T)}else if(S!==w){var D=o.child;if(D!==null){Uj(D,a,p);for(var N=D.sibling;N!==null;)Uj(N,a,p),N=N.sibling}}}var Bo=null,Mc=!1;function Q0e(o,a,p){{var S=a;e:for(;S!==null;){switch(S.tag){case C:{Bo=S.stateNode,Mc=!1;break e}case v:{Bo=S.stateNode.containerInfo,Mc=!0;break e}case w:{Bo=S.stateNode.containerInfo,Mc=!0;break e}}S=S.return}if(Bo===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");lq(o,a,p),Bo=null,Mc=!1}Y0e(p)}function kh(o,a,p){for(var S=p.child;S!==null;)lq(o,a,S),S=S.sibling}function lq(o,a,p){switch(Qf(p),p.tag){case C:$o||Xy(p,a);case E:{{var S=Bo,b=Mc;Bo=null,kh(o,a,p),Bo=S,Mc=b,Bo!==null&&(Mc?vwe(Bo,p.stateNode):ywe(Bo,p.stateNode))}return}case J:{Bo!==null&&(Mc?Swe(Bo,p.stateNode):ZD(Bo,p.stateNode));return}case w:{{var T=Bo,D=Mc;Bo=p.stateNode.containerInfo,Mc=!0,kh(o,a,p),Bo=T,Mc=D}return}case h:case O:case H:case V:{if(!$o){var N=p.updateQueue;if(N!==null){var $=N.lastEffect;if($!==null){var G=$.next,X=G;do{var fe=X,ue=fe.destroy,_e=fe.tag;ue!==void 0&&((_e&Au)!==Pa?A_(p,a,ue):(_e&Ji)!==Pa&&(dx(p),p.mode&kn?(Lu(),A_(p,a,ue),ju(p)):A_(p,a,ue),Jf())),X=X.next}while(X!==G)}}}kh(o,a,p);return}case g:{if(!$o){Xy(p,a);var Ie=p.stateNode;typeof Ie.componentWillUnmount=="function"&&Fj(p,a,Ie)}kh(o,a,p);return}case W:{kh(o,a,p);return}case Y:{if(p.mode&gn){var Me=$o;$o=Me||p.memoizedState!==null,kh(o,a,p),$o=Me}else kh(o,a,p);break}default:{kh(o,a,p);return}}}function J0e(o){o.memoizedState}function e1e(o,a){var p=a.memoizedState;if(p===null){var S=a.alternate;if(S!==null){var b=S.memoizedState;if(b!==null){var T=b.dehydrated;T!==null&&Fwe(T)}}}}function cq(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new N0e),a.forEach(function(S){var b=X1e.bind(null,o,S);if(!p.has(S)){if(p.add(S),po)if(qy!==null&&Yy!==null)Ow(Yy,qy);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");S.then(b,b)}})}}function t1e(o,a,p){qy=p,Yy=o,$n(a),uq(a,o),$n(a),qy=null,Yy=null}function Ac(o,a,p){var S=a.deletions;if(S!==null)for(var b=0;b<S.length;b++){var T=S[b];try{Q0e(o,a,T)}catch($){_r(T,a,$)}}var D=Ns();if(a.subtreeFlags&Xf)for(var N=a.child;N!==null;)$n(N),uq(N,o),N=N.sibling;$n(D)}function uq(o,a,p){var S=o.alternate,b=o.flags;switch(o.tag){case h:case O:case H:case V:{if(Ac(a,o),Nu(o),b&xn){try{Rc(Au|Qi,o,o.return),Ih(Au|Qi,o)}catch(Ht){_r(o,o.return,Ht)}if(o.mode&kn){try{Lu(),Rc(Ji|Qi,o,o.return)}catch(Ht){_r(o,o.return,Ht)}ju(o)}else try{Rc(Ji|Qi,o,o.return)}catch(Ht){_r(o,o.return,Ht)}}return}case g:{Ac(a,o),Nu(o),b&fi&&S!==null&&Xy(S,S.return);return}case C:{Ac(a,o),Nu(o),b&fi&&S!==null&&Xy(S,S.return);{if(o.flags&ur){var T=o.stateNode;try{cW(T)}catch(Ht){_r(o,o.return,Ht)}}if(b&xn){var D=o.stateNode;if(D!=null){var N=o.memoizedProps,$=S!==null?S.memoizedProps:N,G=o.type,X=o.updateQueue;if(o.updateQueue=null,X!==null)try{dwe(D,X,G,$,N,o)}catch(Ht){_r(o,o.return,Ht)}}}}return}case E:{if(Ac(a,o),Nu(o),b&xn){if(o.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var fe=o.stateNode,ue=o.memoizedProps,_e=S!==null?S.memoizedProps:ue;try{fwe(fe,_e,ue)}catch(Ht){_r(o,o.return,Ht)}}return}case v:{if(Ac(a,o),Nu(o),b&xn&&S!==null){var Ie=S.memoizedState;if(Ie.isDehydrated)try{Nwe(a.containerInfo)}catch(Ht){_r(o,o.return,Ht)}}return}case w:{Ac(a,o),Nu(o);return}case F:{Ac(a,o),Nu(o);var Me=o.child;if(Me.flags&kl){var at=Me.stateNode,Ot=Me.memoizedState,Tt=Ot!==null;if(at.isHidden=Tt,Tt){var Ln=Me.alternate!==null&&Me.alternate.memoizedState!==null;Ln||j1e()}}if(b&xn){try{J0e(o)}catch(Ht){_r(o,o.return,Ht)}cq(o)}return}case Y:{var En=S!==null&&S.memoizedState!==null;if(o.mode&gn){var we=$o;$o=we||En,Ac(a,o),$o=we}else Ac(a,o);if(Nu(o),b&kl){var Ae=o.stateNode,be=o.memoizedState,Ge=be!==null,pt=o;if(Ae.isHidden=Ge,Ge&&!En&&(pt.mode&gn)!==Mt){wt=pt;for(var ut=pt.child;ut!==null;)wt=ut,r1e(ut),ut=ut.sibling}q0e(pt,Ge)}return}case ie:{Ac(a,o),Nu(o),b&xn&&cq(o);return}case W:return;default:{Ac(a,o),Nu(o);return}}}function Nu(o){var a=o.flags;if(a&di){try{Z0e(o)}catch(p){_r(o,o.return,p)}o.flags&=-3}a&hi&&(o.flags&=-4097)}function n1e(o,a,p){qy=p,Yy=a,wt=o,dq(o,a,p),qy=null,Yy=null}function dq(o,a,p){for(var S=(o.mode&gn)!==Mt;wt!==null;){var b=wt,T=b.child;if(b.tag===Y&&S){var D=b.memoizedState!==null,N=D||M_;if(N){$j(o,a,p);continue}else{var $=b.alternate,G=$!==null&&$.memoizedState!==null,X=G||$o,fe=M_,ue=$o;M_=N,$o=X,$o&&!ue&&(wt=b,i1e(b));for(var _e=T;_e!==null;)wt=_e,dq(_e,a,p),_e=_e.sibling;wt=b,M_=fe,$o=ue,$j(o,a,p);continue}}(b.subtreeFlags&gu)!==Rt&&T!==null?(T.return=b,wt=T):$j(o,a,p)}}function $j(o,a,p){for(;wt!==null;){var S=wt;if((S.flags&gu)!==Rt){var b=S.alternate;$n(S);try{W0e(a,b,S,p)}catch(D){_r(S,S.return,D)}Ar()}if(S===o){wt=null;return}var T=S.sibling;if(T!==null){T.return=S.return,wt=T;return}wt=S.return}}function r1e(o){for(;wt!==null;){var a=wt,p=a.child;switch(a.tag){case h:case O:case H:case V:{if(a.mode&kn)try{Lu(),Rc(Ji,a,a.return)}finally{ju(a)}else Rc(Ji,a,a.return);break}case g:{Xy(a,a.return);var S=a.stateNode;typeof S.componentWillUnmount=="function"&&Fj(a,a.return,S);break}case C:{Xy(a,a.return);break}case Y:{var b=a.memoizedState!==null;if(b){fq(o);continue}break}}p!==null?(p.return=a,wt=p):fq(o)}}function fq(o){for(;wt!==null;){var a=wt;if(a===o){wt=null;return}var p=a.sibling;if(p!==null){p.return=a.return,wt=p;return}wt=a.return}}function i1e(o){for(;wt!==null;){var a=wt,p=a.child;if(a.tag===Y){var S=a.memoizedState!==null;if(S){hq(o);continue}}p!==null?(p.return=a,wt=p):hq(o)}}function hq(o){for(;wt!==null;){var a=wt;$n(a);try{G0e(a)}catch(S){_r(a,a.return,S)}if(Ar(),a===o){wt=null;return}var p=a.sibling;if(p!==null){p.return=a.return,wt=p;return}wt=a.return}}function o1e(o,a,p,S){wt=a,s1e(a,o,p,S)}function s1e(o,a,p,S){for(;wt!==null;){var b=wt,T=b.child;(b.subtreeFlags&Gi)!==Rt&&T!==null?(T.return=b,wt=T):a1e(o,a,p,S)}}function a1e(o,a,p,S){for(;wt!==null;){var b=wt;if((b.flags&zs)!==Rt){$n(b);try{l1e(a,b,p,S)}catch(D){_r(b,b.return,D)}Ar()}if(b===o){wt=null;return}var T=b.sibling;if(T!==null){T.return=b.return,wt=T;return}wt=b.return}}function l1e(o,a,p,S){switch(a.tag){case h:case O:case V:{if(a.mode&kn){sj();try{Ih(zo|Qi,a)}finally{oj(a)}}else Ih(zo|Qi,a);break}}}function c1e(o){wt=o,u1e()}function u1e(){for(;wt!==null;){var o=wt,a=o.child;if((wt.flags&ds)!==Rt){var p=o.deletions;if(p!==null){for(var S=0;S<p.length;S++){var b=p[S];wt=b,h1e(b,o)}{var T=o.alternate;if(T!==null){var D=T.child;if(D!==null){T.child=null;do{var N=D.sibling;D.sibling=null,D=N}while(D!==null)}}}wt=o}}(o.subtreeFlags&Gi)!==Rt&&a!==null?(a.return=o,wt=a):d1e()}}function d1e(){for(;wt!==null;){var o=wt;(o.flags&zs)!==Rt&&($n(o),f1e(o),Ar());var a=o.sibling;if(a!==null){a.return=o.return,wt=a;return}wt=o.return}}function f1e(o){switch(o.tag){case h:case O:case V:{o.mode&kn?(sj(),Rc(zo|Qi,o,o.return),oj(o)):Rc(zo|Qi,o,o.return);break}}}function h1e(o,a){for(;wt!==null;){var p=wt;$n(p),g1e(p,a),Ar();var S=p.child;S!==null?(S.return=p,wt=S):p1e(o)}}function p1e(o){for(;wt!==null;){var a=wt,p=a.sibling,S=a.return;if(oq(a),a===o){wt=null;return}if(p!==null){p.return=S,wt=p;return}wt=S}}function g1e(o,a){switch(o.tag){case h:case O:case V:{o.mode&kn?(sj(),Rc(zo,o,a),oj(o)):Rc(zo,o,a);break}}}function m1e(o){switch(o.tag){case h:case O:case V:{try{Ih(Ji|Qi,o)}catch(p){_r(o,o.return,p)}break}case g:{var a=o.stateNode;try{a.componentDidMount()}catch(p){_r(o,o.return,p)}break}}}function y1e(o){switch(o.tag){case h:case O:case V:{try{Ih(zo|Qi,o)}catch(a){_r(o,o.return,a)}break}}}function v1e(o){switch(o.tag){case h:case O:case V:{try{Rc(Ji|Qi,o,o.return)}catch(p){_r(o,o.return,p)}break}case g:{var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Fj(o,o.return,a);break}}}function S1e(o){switch(o.tag){case h:case O:case V:try{Rc(zo|Qi,o,o.return)}catch(a){_r(o,o.return,a)}}}if(typeof Symbol=="function"&&Symbol.for){var Cw=Symbol.for;Cw("selector.component"),Cw("selector.has_pseudo_class"),Cw("selector.role"),Cw("selector.test_id"),Cw("selector.text")}var x1e=[];function w1e(){x1e.forEach(function(o){return o()})}var b1e=r.ReactCurrentActQueue;function C1e(o){{var a=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,p=typeof jest<"u";return p&&a!==!1}}function pq(){{var o=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!o&&b1e.current!==null&&c("The current testing environment is not configured to support act(...)"),o}}var E1e=Math.ceil,Bj=r.ReactCurrentDispatcher,Hj=r.ReactCurrentOwner,Ho=r.ReactCurrentBatchConfig,Dc=r.ReactCurrentActQueue,no=0,gq=1,Vo=2,Ul=4,Yd=0,Ew=1,hg=2,D_=3,_w=4,mq=5,Vj=6,jn=no,Gs=null,oi=null,ro=je,Fu=je,Kj=Sh(je),io=Yd,Pw=null,O_=je,Tw=je,j_=je,Iw=null,Ta=null,Wj=0,yq=500,vq=1/0,_1e=500,Xd=null;function kw(){vq=ti()+_1e}function Sq(){return vq}var L_=!1,Gj=null,Zy=null,pg=!1,Rh=null,Rw=je,qj=[],Yj=null,P1e=50,Mw=0,Xj=null,Zj=!1,N_=!1,T1e=50,Qy=0,F_=null,Aw=or,z_=je,xq=!1;function U_(){return Gs}function qs(){return(jn&(Vo|Ul))!==no?ti():(Aw!==or||(Aw=ti()),Aw)}function Mh(o){var a=o.mode;if((a&gn)===Mt)return Ft;if((jn&Vo)!==no&&ro!==je)return Ni(ro);var p=bbe()!==wbe;if(p){if(Ho.transition!==null){var S=Ho.transition;S._updatedFibers||(S._updatedFibers=new Set),S._updatedFibers.add(o)}return z_===gi&&(z_=wx()),z_}var b=Bs();if(b!==gi)return b;var T=swe();return T}function I1e(o){var a=o.mode;return(a&gn)===Mt?Ft:ZC()}function oo(o,a,p,S){Q1e(),xq&&c("useInsertionEffect must not schedule updates."),Zj&&(N_=!0),oh(o,p,S),(jn&Vo)!==je&&o===Gs?tCe(a):(po&&JC(o,a,p),nCe(a),o===Gs&&((jn&Vo)===no&&(Tw=nn(Tw,p)),io===_w&&Ah(o,ro)),Ia(o,S),p===Ft&&jn===no&&(a.mode&gn)===Mt&&!Dc.isBatchingLegacy&&(kw(),xW()))}function k1e(o,a,p){var S=o.current;S.lanes=a,oh(o,a,p),Ia(o,p)}function R1e(o){return(jn&Vo)!==no}function Ia(o,a){var p=o.callbackNode;qC(o,a);var S=gs(o,o===Gs?ro:je);if(S===je){p!==null&&Lq(p),o.callbackNode=null,o.callbackPriority=gi;return}var b=Rd(S),T=o.callbackPriority;if(T===b&&!(Dc.current!==null&&p!==iL)){p==null&&T!==Ft&&c("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}p!=null&&Lq(p);var D;if(b===Ft)o.tag===xh?(Dc.isBatchingLegacy!==null&&(Dc.didScheduleLegacyUpdate=!0),ibe(Cq.bind(null,o))):SW(Cq.bind(null,o)),Dc.current!==null?Dc.current.push(wh):lwe(function(){(jn&(Vo|Ul))===no&&wh()}),D=null;else{var N;switch(tE(S)){case ys:N=vc;break;case xa:N=Tp;break;case Yi:N=Ed;break;case ly:N=Zf;break;default:N=Ed;break}D=oL(N,wq.bind(null,o))}o.callbackPriority=b,o.callbackNode=D}function wq(o,a){if(qbe(),Aw=or,z_=je,(jn&(Vo|Ul))!==no)throw new Error("Should not already be working.");var p=o.callbackNode,S=Qd();if(S&&o.callbackNode!==p)return null;var b=gs(o,o===Gs?ro:je);if(b===je)return null;var T=!zp(o,b)&&!XC(o,b)&&!a,D=T?U1e(o,b):B_(o,b);if(D!==Yd){if(D===hg){var N=ey(o);N!==je&&(b=N,D=Qj(o,N))}if(D===Ew){var $=Pw;throw gg(o,je),Ah(o,b),Ia(o,ti()),$}if(D===Vj)Ah(o,b);else{var G=!zp(o,b),X=o.current.alternate;if(G&&!A1e(X)){if(D=B_(o,b),D===hg){var fe=ey(o);fe!==je&&(b=fe,D=Qj(o,fe))}if(D===Ew){var ue=Pw;throw gg(o,je),Ah(o,b),Ia(o,ti()),ue}}o.finishedWork=X,o.finishedLanes=b,M1e(o,D,b)}}return Ia(o,ti()),o.callbackNode===p?wq.bind(null,o):null}function Qj(o,a){var p=Iw;if(Ad(o)){var S=gg(o,a);S.flags|=Yr,Zwe(o.containerInfo)}var b=B_(o,a);if(b!==hg){var T=Ta;Ta=p,T!==null&&bq(T)}return b}function bq(o){Ta===null?Ta=o:Ta.push.apply(Ta,o)}function M1e(o,a,p){switch(a){case Yd:case Ew:throw new Error("Root did not complete. This is a bug in React.");case hg:{mg(o,Ta,Xd);break}case D_:{if(Ah(o,p),ty(p)&&!Nq()){var S=Wj+yq-ti();if(S>10){var b=gs(o,je);if(b!==je)break;var T=o.suspendedLanes;if(!Md(T,p)){qs(),oy(o,T);break}o.timeoutHandle=YD(mg.bind(null,o,Ta,Xd),S);break}}mg(o,Ta,Xd);break}case _w:{if(Ah(o,p),SD(p))break;if(!Nq()){var D=yx(o,p),N=D,$=ti()-N,G=Z1e($)-$;if(G>10){o.timeoutHandle=YD(mg.bind(null,o,Ta,Xd),G);break}}mg(o,Ta,Xd);break}case mq:{mg(o,Ta,Xd);break}default:throw new Error("Unknown root exit status.")}}function A1e(o){for(var a=o;;){if(a.flags&Mm){var p=a.updateQueue;if(p!==null){var S=p.stores;if(S!==null)for(var b=0;b<S.length;b++){var T=S[b],D=T.getSnapshot,N=T.value;try{if(!xt(D(),N))return!1}catch{return!1}}}}var $=a.child;if(a.subtreeFlags&Mm&&$!==null){$.return=a,a=$;continue}if(a===o)return!0;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}return!0}function Ah(o,a){a=Up(a,j_),a=Up(a,Tw),Cx(o,a)}function Cq(o){if(Ybe(),(jn&(Vo|Ul))!==no)throw new Error("Should not already be working.");Qd();var a=gs(o,je);if(!ms(a,Ft))return Ia(o,ti()),null;var p=B_(o,a);if(o.tag!==xh&&p===hg){var S=ey(o);S!==je&&(a=S,p=Qj(o,S))}if(p===Ew){var b=Pw;throw gg(o,je),Ah(o,a),Ia(o,ti()),b}if(p===Vj)throw new Error("Root did not complete. This is a bug in React.");var T=o.current.alternate;return o.finishedWork=T,o.finishedLanes=a,mg(o,Ta,Xd),Ia(o,ti()),null}function D1e(o,a){a!==je&&($p(o,nn(a,Ft)),Ia(o,ti()),(jn&(Vo|Ul))===no&&(kw(),wh()))}function Jj(o,a){var p=jn;jn|=gq;try{return o(a)}finally{jn=p,jn===no&&!Dc.isBatchingLegacy&&(kw(),xW())}}function O1e(o,a,p,S,b){var T=Bs(),D=Ho.transition;try{return Ho.transition=null,_i(ys),o(a,p,S,b)}finally{_i(T),Ho.transition=D,jn===no&&kw()}}function Zd(o){Rh!==null&&Rh.tag===xh&&(jn&(Vo|Ul))===no&&Qd();var a=jn;jn|=gq;var p=Ho.transition,S=Bs();try{return Ho.transition=null,_i(ys),o?o():void 0}finally{_i(S),Ho.transition=p,jn=a,(jn&(Vo|Ul))===no&&wh()}}function Eq(){return(jn&(Vo|Ul))!==no}function $_(o,a){xs(Kj,Fu,o),Fu=nn(Fu,a)}function eL(o){Fu=Kj.current,Ss(Kj,o)}function gg(o,a){o.finishedWork=null,o.finishedLanes=je;var p=o.timeoutHandle;if(p!==XD&&(o.timeoutHandle=XD,awe(p)),oi!==null)for(var S=oi.return;S!==null;){var b=S.alternate;JG(b,S),S=S.return}Gs=o;var T=yg(o.current,null);return oi=T,ro=Fu=a,io=Yd,Pw=null,O_=je,Tw=je,j_=je,Iw=null,Ta=null,kbe(),_c.discardPendingWarnings(),T}function _q(o,a){do{var p=oi;try{if(ZE(),YW(),Ar(),Hj.current=null,p===null||p.return===null){io=Ew,Pw=a,oi=null;return}if(De&&p.mode&kn&&P_(p,!0),Ze)if(yu(),a!==null&&typeof a=="object"&&typeof a.then=="function"){var S=a;kp(p,S,ro)}else Al(p,a,ro);i0e(o,p.return,p,a,ro),kq(p)}catch(b){a=b,oi===p&&p!==null?(p=p.return,oi=p):p=oi;continue}return}while(!0)}function Pq(){var o=Bj.current;return Bj.current=w_,o===null?w_:o}function Tq(o){Bj.current=o}function j1e(){Wj=ti()}function Dw(o){O_=nn(o,O_)}function L1e(){io===Yd&&(io=D_)}function tL(){(io===Yd||io===D_||io===hg)&&(io=_w),Gs!==null&&(bu(O_)||bu(Tw))&&Ah(Gs,ro)}function N1e(o){io!==_w&&(io=hg),Iw===null?Iw=[o]:Iw.push(o)}function F1e(){return io===Yd}function B_(o,a){var p=jn;jn|=Vo;var S=Pq();if(Gs!==o||ro!==a){if(po){var b=o.memoizedUpdaters;b.size>0&&(Ow(o,ro),b.clear()),Ex(o,a)}Xd=ay(),gg(o,a)}hx(a);do try{z1e();break}catch(T){_q(o,T)}while(!0);if(ZE(),jn=p,Tq(S),oi!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Or(),Gs=null,ro=je,io}function z1e(){for(;oi!==null;)Iq(oi)}function U1e(o,a){var p=jn;jn|=Vo;var S=Pq();if(Gs!==o||ro!==a){if(po){var b=o.memoizedUpdaters;b.size>0&&(Ow(o,ro),b.clear()),Ex(o,a)}Xd=ay(),kw(),gg(o,a)}hx(a);do try{$1e();break}catch(T){_q(o,T)}while(!0);return ZE(),Tq(S),jn=p,oi!==null?(px(),Yd):(Or(),Gs=null,ro=je,io)}function $1e(){for(;oi!==null&&!ox();)Iq(oi)}function Iq(o){var a=o.alternate;$n(o);var p;(o.mode&kn)!==Mt?(ij(o),p=nL(a,o,Fu),P_(o,!0)):p=nL(a,o,Fu),Ar(),o.memoizedProps=o.pendingProps,p===null?kq(o):oi=p,Hj.current=null}function kq(o){var a=o;do{var p=a.alternate,S=a.return;if((a.flags&bd)===Rt){$n(a);var b=void 0;if((a.mode&kn)===Mt?b=QG(p,a,Fu):(ij(a),b=QG(p,a,Fu),P_(a,!1)),Ar(),b!==null){oi=b;return}}else{var T=L0e(p,a);if(T!==null){T.flags&=LC,oi=T;return}if((a.mode&kn)!==Mt){P_(a,!1);for(var D=a.actualDuration,N=a.child;N!==null;)D+=N.actualDuration,N=N.sibling;a.actualDuration=D}if(S!==null)S.flags|=bd,S.subtreeFlags=Rt,S.deletions=null;else{io=Vj,oi=null;return}}var $=a.sibling;if($!==null){oi=$;return}a=S,oi=a}while(a!==null);io===Yd&&(io=mq)}function mg(o,a,p){var S=Bs(),b=Ho.transition;try{Ho.transition=null,_i(ys),B1e(o,a,p,S)}finally{Ho.transition=b,_i(S)}return null}function B1e(o,a,p,S){do Qd();while(Rh!==null);if(J1e(),(jn&(Vo|Ul))!==no)throw new Error("Should not already be working.");var b=o.finishedWork,T=o.finishedLanes;if(BC(T),b===null)return Ml(),null;if(T===je&&c("root.finishedLanes should not be empty during a commit. This is a bug in React."),o.finishedWork=null,o.finishedLanes=je,b===o.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");o.callbackNode=null,o.callbackPriority=gi;var D=nn(b.lanes,b.childLanes);QC(o,D),o===Gs&&(Gs=null,oi=null,ro=je),((b.subtreeFlags&Gi)!==Rt||(b.flags&Gi)!==Rt)&&(pg||(pg=!0,Yj=p,oL(Ed,function(){return Qd(),null})));var N=(b.subtreeFlags&(pu|Xf|gu|Gi))!==Rt,$=(b.flags&(pu|Xf|gu|Gi))!==Rt;if(N||$){var G=Ho.transition;Ho.transition=null;var X=Bs();_i(ys);var fe=jn;jn|=Ul,Hj.current=null,$0e(o,b),xG(),t1e(o,b,T),ewe(o.containerInfo),o.current=b,Rp(T),n1e(b,o,T),Pd(),FC(),jn=fe,_i(X),Ho.transition=G}else o.current=b,xG();var ue=pg;if(pg?(pg=!1,Rh=o,Rw=T):(Qy=0,F_=null),D=o.pendingLanes,D===je&&(Zy=null),ue||Dq(o.current,!1),lx(b.stateNode,S),po&&o.memoizedUpdaters.clear(),w1e(),Ia(o,ti()),a!==null)for(var _e=o.onRecoverableError,Ie=0;Ie<a.length;Ie++){var Me=a[Ie],at=Me.stack,Ot=Me.digest;_e(Me.value,{componentStack:at,digest:Ot})}if(L_){L_=!1;var Tt=Gj;throw Gj=null,Tt}return ms(Rw,Ft)&&o.tag!==xh&&Qd(),D=o.pendingLanes,ms(D,Ft)?(Gbe(),o===Xj?Mw++:(Mw=0,Xj=o)):Mw=0,wh(),Ml(),null}function Qd(){if(Rh!==null){var o=tE(Rw),a=go(Yi,o),p=Ho.transition,S=Bs();try{return Ho.transition=null,_i(a),V1e()}finally{_i(S),Ho.transition=p}}return!1}function H1e(o){qj.push(o),pg||(pg=!0,oL(Ed,function(){return Qd(),null}))}function V1e(){if(Rh===null)return!1;var o=Yj;Yj=null;var a=Rh,p=Rw;if(Rh=null,Rw=je,(jn&(Vo|Ul))!==no)throw new Error("Cannot flush passive effects while already rendering.");Zj=!0,N_=!1,fx(p);var S=jn;jn|=Ul,c1e(a.current),o1e(a,a.current,p,o);{var b=qj;qj=[];for(var T=0;T<b.length;T++){var D=b[T];K0e(a,D)}}eh(),Dq(a.current,!0),jn=S,wh(),N_?a===F_?Qy++:(Qy=0,F_=a):Qy=0,Zj=!1,N_=!1,cx(a);{var N=a.current.stateNode;N.effectDuration=0,N.passiveEffectDuration=0}return!0}function Rq(o){return Zy!==null&&Zy.has(o)}function K1e(o){Zy===null?Zy=new Set([o]):Zy.add(o)}function W1e(o){L_||(L_=!0,Gj=o)}var G1e=W1e;function Mq(o,a,p){var S=dg(p,a),b=IG(o,S,Ft),T=Ch(o,b,Ft),D=qs();T!==null&&(oh(T,Ft,D),Ia(T,D))}function _r(o,a,p){if(F0e(p),jw(!1),o.tag===v){Mq(o,o,p);return}var S=null;for(S=a;S!==null;){if(S.tag===v){Mq(S,o,p);return}else if(S.tag===g){var b=S.type,T=S.stateNode;if(typeof b.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&!Rq(T)){var D=dg(p,o),N=bj(S,D,Ft),$=Ch(S,N,Ft),G=qs();$!==null&&(oh($,Ft,G),Ia($,G));return}}S=S.return}c(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,p)}function q1e(o,a,p){var S=o.pingCache;S!==null&&S.delete(a);var b=qs();oy(o,p),rCe(o),Gs===o&&Md(ro,p)&&(io===_w||io===D_&&ty(ro)&&ti()-Wj<yq?gg(o,je):j_=nn(j_,p)),Ia(o,b)}function Aq(o,a){a===gi&&(a=I1e(o));var p=qs(),S=_a(o,a);S!==null&&(oh(S,a,p),Ia(S,p))}function Y1e(o){var a=o.memoizedState,p=gi;a!==null&&(p=a.retryLane),Aq(o,p)}function X1e(o,a){var p=gi,S;switch(o.tag){case F:S=o.stateNode;var b=o.memoizedState;b!==null&&(p=b.retryLane);break;case ie:S=o.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}S!==null&&S.delete(a),Aq(o,p)}function Z1e(o){return o<120?120:o<480?480:o<1080?1080:o<1920?1920:o<3e3?3e3:o<4320?4320:E1e(o/1960)*1960}function Q1e(){if(Mw>P1e)throw Mw=0,Xj=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Qy>T1e&&(Qy=0,F_=null,c("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function J1e(){_c.flushLegacyContextWarning(),_c.flushPendingUnsafeLifecycleWarnings()}function Dq(o,a){$n(o),H_(o,Oo,v1e),a&&H_(o,hu,S1e),H_(o,Oo,m1e),a&&H_(o,hu,y1e),Ar()}function H_(o,a,p){for(var S=o,b=null;S!==null;){var T=S.subtreeFlags&a;S!==b&&S.child!==null&&T!==Rt?S=S.child:((S.flags&a)!==Rt&&p(S),S.sibling!==null?S=S.sibling:S=b=S.return)}}var V_=null;function Oq(o){{if((jn&Vo)!==no||!(o.mode&gn))return;var a=o.tag;if(a!==y&&a!==v&&a!==g&&a!==h&&a!==O&&a!==H&&a!==V)return;var p=Bt(o)||"ReactComponent";if(V_!==null){if(V_.has(p))return;V_.add(p)}else V_=new Set([p]);var S=ci;try{$n(o),c("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{S?$n(o):Ar()}}}var nL;{var eCe=null;nL=function(o,a,p){var S=Bq(eCe,a);try{return GG(o,a,p)}catch(T){if(fbe()||T!==null&&typeof T=="object"&&typeof T.then=="function")throw T;if(ZE(),YW(),JG(o,a),Bq(a,S),a.mode&kn&&ij(a),ma(null,GG,null,o,a,p),QS()){var b=JS();typeof b=="object"&&b!==null&&b._suppressLogging&&typeof T=="object"&&T!==null&&!T._suppressLogging&&(T._suppressLogging=!0)}throw T}}}var jq=!1,rL;rL=new Set;function tCe(o){if(uo&&!Vbe())switch(o.tag){case h:case O:case V:{var a=oi&&Bt(oi)||"Unknown",p=a;if(!rL.has(p)){rL.add(p);var S=Bt(o)||"Unknown";c("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",S,a,a)}break}case g:{jq||(c("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),jq=!0);break}}}function Ow(o,a){if(po){var p=o.memoizedUpdaters;p.forEach(function(S){JC(o,S,a)})}}var iL={};function oL(o,a){{var p=Dc.current;return p!==null?(p.push(a),iL):rx(o,a)}}function Lq(o){if(o!==iL)return ix(o)}function Nq(){return Dc.current!==null}function nCe(o){{if(o.mode&gn){if(!pq())return}else if(!C1e()||jn!==no||o.tag!==h&&o.tag!==O&&o.tag!==V)return;if(Dc.current===null){var a=ci;try{$n(o),c(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,Bt(o))}finally{a?$n(o):Ar()}}}}function rCe(o){o.tag!==xh&&pq()&&Dc.current===null&&c(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function jw(o){xq=o}var $l=null,Jy=null,iCe=function(o){$l=o};function ev(o){{if($l===null)return o;var a=$l(o);return a===void 0?o:a.current}}function sL(o){return ev(o)}function aL(o){{if($l===null)return o;var a=$l(o);if(a===void 0){if(o!=null&&typeof o.render=="function"){var p=ev(o.render);if(o.render!==p){var S={$$typeof:Ue,render:p};return o.displayName!==void 0&&(S.displayName=o.displayName),S}}return o}return a.current}}function Fq(o,a){{if($l===null)return!1;var p=o.elementType,S=a.type,b=!1,T=typeof S=="object"&&S!==null?S.$$typeof:null;switch(o.tag){case g:{typeof S=="function"&&(b=!0);break}case h:{(typeof S=="function"||T===Vt)&&(b=!0);break}case O:{(T===Ue||T===Vt)&&(b=!0);break}case H:case V:{(T===$t||T===Vt)&&(b=!0);break}default:return!1}if(b){var D=$l(p);if(D!==void 0&&D===$l(S))return!0}return!1}}function zq(o){{if($l===null||typeof WeakSet!="function")return;Jy===null&&(Jy=new WeakSet),Jy.add(o)}}var oCe=function(o,a){{if($l===null)return;var p=a.staleFamilies,S=a.updatedFamilies;Qd(),Zd(function(){lL(o.current,S,p)})}},sCe=function(o,a){{if(o.context!==ol)return;Qd(),Zd(function(){Lw(a,o,null,null)})}};function lL(o,a,p){{var S=o.alternate,b=o.child,T=o.sibling,D=o.tag,N=o.type,$=null;switch(D){case h:case V:case g:$=N;break;case O:$=N.render;break}if($l===null)throw new Error("Expected resolveFamily to be set during hot reload.");var G=!1,X=!1;if($!==null){var fe=$l($);fe!==void 0&&(p.has(fe)?X=!0:a.has(fe)&&(D===g?X=!0:G=!0))}if(Jy!==null&&(Jy.has(o)||S!==null&&Jy.has(S))&&(X=!0),X&&(o._debugNeedsRemount=!0),X||G){var ue=_a(o,Ft);ue!==null&&oo(ue,o,Ft,or)}b!==null&&!X&&lL(b,a,p),T!==null&&lL(T,a,p)}}var aCe=function(o,a){{var p=new Set,S=new Set(a.map(function(b){return b.current}));return cL(o.current,S,p),p}};function cL(o,a,p){{var S=o.child,b=o.sibling,T=o.tag,D=o.type,N=null;switch(T){case h:case V:case g:N=D;break;case O:N=D.render;break}var $=!1;N!==null&&a.has(N)&&($=!0),$?lCe(o,p):S!==null&&cL(S,a,p),b!==null&&cL(b,a,p)}}function lCe(o,a){{var p=cCe(o,a);if(p)return;for(var S=o;;){switch(S.tag){case C:a.add(S.stateNode);return;case w:a.add(S.stateNode.containerInfo);return;case v:a.add(S.stateNode.containerInfo);return}if(S.return===null)throw new Error("Expected to reach root first.");S=S.return}}}function cCe(o,a){for(var p=o,S=!1;;){if(p.tag===C)S=!0,a.add(p.stateNode);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)return S;for(;p.sibling===null;){if(p.return===null||p.return===o)return S;p=p.return}p.sibling.return=p.return,p=p.sibling}return!1}var uL;{uL=!1;try{var Uq=Object.preventExtensions({})}catch{uL=!0}}function uCe(o,a,p,S){this.tag=o,this.key=p,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=a,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=S,this.flags=Rt,this.subtreeFlags=Rt,this.deletions=null,this.lanes=je,this.childLanes=je,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!uL&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var sl=function(o,a,p,S){return new uCe(o,a,p,S)};function dL(o){var a=o.prototype;return!!(a&&a.isReactComponent)}function dCe(o){return typeof o=="function"&&!dL(o)&&o.defaultProps===void 0}function fCe(o){if(typeof o=="function")return dL(o)?g:h;if(o!=null){var a=o.$$typeof;if(a===Ue)return O;if(a===$t)return H}return y}function yg(o,a){var p=o.alternate;p===null?(p=sl(o.tag,a,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p._debugSource=o._debugSource,p._debugOwner=o._debugOwner,p._debugHookTypes=o._debugHookTypes,p.alternate=o,o.alternate=p):(p.pendingProps=a,p.type=o.type,p.flags=Rt,p.subtreeFlags=Rt,p.deletions=null,p.actualDuration=0,p.actualStartTime=-1),p.flags=o.flags&pi,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue;var S=o.dependencies;switch(p.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.selfBaseDuration=o.selfBaseDuration,p.treeBaseDuration=o.treeBaseDuration,p._debugNeedsRemount=o._debugNeedsRemount,p.tag){case y:case h:case V:p.type=ev(o.type);break;case g:p.type=sL(o.type);break;case O:p.type=aL(o.type);break}return p}function hCe(o,a){o.flags&=pi|di;var p=o.alternate;if(p===null)o.childLanes=je,o.lanes=a,o.child=null,o.subtreeFlags=Rt,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null,o.selfBaseDuration=0,o.treeBaseDuration=0;else{o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=Rt,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type;var S=p.dependencies;o.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},o.selfBaseDuration=p.selfBaseDuration,o.treeBaseDuration=p.treeBaseDuration}return o}function pCe(o,a,p){var S;return o===$E?(S=gn,a===!0&&(S|=Jt,S|=dr)):S=Mt,po&&(S|=kn),sl(v,null,null,S)}function fL(o,a,p,S,b,T){var D=y,N=o;if(typeof o=="function")dL(o)?(D=g,N=sL(N)):N=ev(N);else if(typeof o=="string")D=C;else e:switch(o){case Vi:return Dh(p.children,b,T,a);case as:D=I,b|=Jt,(b&gn)!==Mt&&(b|=dr);break;case Ri:return gCe(p,b,T,a);case tt:return mCe(p,b,T,a);case rt:return yCe(p,b,T,a);case Ur:return $q(p,b,T,a);case lr:case un:case zn:case Mi:case en:default:{if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ga:D=L;break e;case se:D=k;break e;case Ue:D=O,N=aL(N);break e;case $t:D=H;break e;case Vt:D=re,N=null;break e}var $="";{(o===void 0||typeof o=="object"&&o!==null&&Object.keys(o).length===0)&&($+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var G=S?Bt(S):null;G&&($+=`

Check the render method of \``+G+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(o==null?o:typeof o)+"."+$))}}var X=sl(D,p,a,b);return X.elementType=o,X.type=N,X.lanes=T,X._debugOwner=S,X}function hL(o,a,p){var S=null;S=o._owner;var b=o.type,T=o.key,D=o.props,N=fL(b,T,D,S,a,p);return N._debugSource=o._source,N._debugOwner=o._owner,N}function Dh(o,a,p,S){var b=sl(P,o,S,a);return b.lanes=p,b}function gCe(o,a,p,S){typeof o.id!="string"&&c('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof o.id);var b=sl(z,o,S,a|kn);return b.elementType=Ri,b.lanes=p,b.stateNode={effectDuration:0,passiveEffectDuration:0},b}function mCe(o,a,p,S){var b=sl(F,o,S,a);return b.elementType=tt,b.lanes=p,b}function yCe(o,a,p,S){var b=sl(ie,o,S,a);return b.elementType=rt,b.lanes=p,b}function $q(o,a,p,S){var b=sl(Y,o,S,a);b.elementType=Ur,b.lanes=p;var T={isHidden:!1};return b.stateNode=T,b}function pL(o,a,p){var S=sl(E,o,null,a);return S.lanes=p,S}function vCe(){var o=sl(C,null,null,Mt);return o.elementType="DELETED",o}function SCe(o){var a=sl(J,null,null,Mt);return a.stateNode=o,a}function gL(o,a,p){var S=o.children!==null?o.children:[],b=sl(w,S,o.key,a);return b.lanes=p,b.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},b}function Bq(o,a){return o===null&&(o=sl(y,null,null,Mt)),o.tag=a.tag,o.key=a.key,o.elementType=a.elementType,o.type=a.type,o.stateNode=a.stateNode,o.return=a.return,o.child=a.child,o.sibling=a.sibling,o.index=a.index,o.ref=a.ref,o.pendingProps=a.pendingProps,o.memoizedProps=a.memoizedProps,o.updateQueue=a.updateQueue,o.memoizedState=a.memoizedState,o.dependencies=a.dependencies,o.mode=a.mode,o.flags=a.flags,o.subtreeFlags=a.subtreeFlags,o.deletions=a.deletions,o.lanes=a.lanes,o.childLanes=a.childLanes,o.alternate=a.alternate,o.actualDuration=a.actualDuration,o.actualStartTime=a.actualStartTime,o.selfBaseDuration=a.selfBaseDuration,o.treeBaseDuration=a.treeBaseDuration,o._debugSource=a._debugSource,o._debugOwner=a._debugOwner,o._debugNeedsRemount=a._debugNeedsRemount,o._debugHookTypes=a._debugHookTypes,o}function xCe(o,a,p,S,b){this.tag=a,this.containerInfo=o,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=XD,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=gi,this.eventTimes=iy(je),this.expirationTimes=iy(or),this.pendingLanes=je,this.suspendedLanes=je,this.pingedLanes=je,this.expiredLanes=je,this.mutableReadLanes=je,this.finishedLanes=je,this.entangledLanes=je,this.entanglements=iy(je),this.identifierPrefix=S,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var T=this.pendingUpdatersLaneMap=[],D=0;D<mx;D++)T.push(new Set)}switch(a){case $E:this._debugRootType=p?"hydrateRoot()":"createRoot()";break;case xh:this._debugRootType=p?"hydrate()":"render()";break}}function Hq(o,a,p,S,b,T,D,N,$,G){var X=new xCe(o,a,p,N,$),fe=pCe(a,T);X.current=fe,fe.stateNode=X;{var ue={element:S,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null};fe.memoizedState=ue}return IO(fe),X}var mL="18.3.1";function wCe(o,a,p){var S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return br(S),{$$typeof:Ao,key:S==null?null:""+S,children:o,containerInfo:a,implementation:p}}var yL,vL;yL=!1,vL={};function Vq(o){if(!o)return ol;var a=Yf(o),p=rbe(a);if(a.tag===g){var S=a.type;if(Mu(S))return yW(a,S,p)}return p}function bCe(o,a){{var p=Yf(o);if(p===void 0){if(typeof o.render=="function")throw new Error("Unable to find node on an unmounted component.");var S=Object.keys(o).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+S)}var b=hs(p);if(b===null)return null;if(b.mode&Jt){var T=Bt(p)||"Component";if(!vL[T]){vL[T]=!0;var D=ci;try{$n(b),p.mode&Jt?c("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",a,a,T):c("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",a,a,T)}finally{D?$n(D):Ar()}}}return b.stateNode}}function Kq(o,a,p,S,b,T,D,N){var $=!1,G=null;return Hq(o,a,$,G,p,S,b,T,D)}function Wq(o,a,p,S,b,T,D,N,$,G){var X=!0,fe=Hq(p,S,X,o,b,T,D,N,$);fe.context=Vq(null);var ue=fe.current,_e=qs(),Ie=Mh(ue),Me=Gd(_e,Ie);return Me.callback=a??null,Ch(ue,Me,Ie),k1e(fe,Ie,_e),fe}function Lw(o,a,p,S){ax(a,o);var b=a.current,T=qs(),D=Mh(b);jm(D);var N=Vq(p);a.context===null?a.context=N:a.pendingContext=N,uo&&ci!==null&&!yL&&(yL=!0,c(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,Bt(ci)||"Unknown"));var $=Gd(T,D);$.payload={element:o},S=S===void 0?null:S,S!==null&&(typeof S!="function"&&c("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",S),$.callback=S);var G=Ch(b,$,D);return G!==null&&(oo(G,b,D,T),n_(G,b,D)),D}function K_(o){var a=o.current;if(!a.child)return null;switch(a.child.tag){case C:return a.child.stateNode;default:return a.child.stateNode}}function CCe(o){switch(o.tag){case v:{var a=o.stateNode;if(Ad(a)){var p=YC(a);D1e(a,p)}break}case F:{Zd(function(){var b=_a(o,Ft);if(b!==null){var T=qs();oo(b,o,Ft,T)}});var S=Ft;SL(o,S);break}}}function Gq(o,a){var p=o.memoizedState;p!==null&&p.dehydrated!==null&&(p.retryLane=bx(p.retryLane,a))}function SL(o,a){Gq(o,a);var p=o.alternate;p&&Gq(p,a)}function ECe(o){if(o.tag===F){var a=ih,p=_a(o,a);if(p!==null){var S=qs();oo(p,o,a,S)}SL(o,a)}}function _Ce(o){if(o.tag===F){var a=Mh(o),p=_a(o,a);if(p!==null){var S=qs();oo(p,o,a,S)}SL(o,a)}}function qq(o){var a=tl(o);return a===null?null:a.stateNode}var Yq=function(o){return null};function PCe(o){return Yq(o)}var Xq=function(o){return!1};function TCe(o){return Xq(o)}var Zq=null,Qq=null,Jq=null,eY=null,tY=null,nY=null,rY=null,iY=null,oY=null;{var sY=function(o,a,p){var S=a[p],b=tn(o)?o.slice():Gt({},o);return p+1===a.length?(tn(b)?b.splice(S,1):delete b[S],b):(b[S]=sY(o[S],a,p+1),b)},aY=function(o,a){return sY(o,a,0)},lY=function(o,a,p,S){var b=a[S],T=tn(o)?o.slice():Gt({},o);if(S+1===a.length){var D=p[S];T[D]=T[b],tn(T)?T.splice(b,1):delete T[b]}else T[b]=lY(o[b],a,p,S+1);return T},cY=function(o,a,p){if(a.length!==p.length){l("copyWithRename() expects paths of the same length");return}else for(var S=0;S<p.length-1;S++)if(a[S]!==p[S]){l("copyWithRename() expects paths to be the same except for the deepest key");return}return lY(o,a,p,0)},uY=function(o,a,p,S){if(p>=a.length)return S;var b=a[p],T=tn(o)?o.slice():Gt({},o);return T[b]=uY(o[b],a,p+1,S),T},dY=function(o,a,p){return uY(o,a,0,p)},xL=function(o,a){for(var p=o.memoizedState;p!==null&&a>0;)p=p.next,a--;return p};Zq=function(o,a,p,S){var b=xL(o,a);if(b!==null){var T=dY(b.memoizedState,p,S);b.memoizedState=T,b.baseState=T,o.memoizedProps=Gt({},o.memoizedProps);var D=_a(o,Ft);D!==null&&oo(D,o,Ft,or)}},Qq=function(o,a,p){var S=xL(o,a);if(S!==null){var b=aY(S.memoizedState,p);S.memoizedState=b,S.baseState=b,o.memoizedProps=Gt({},o.memoizedProps);var T=_a(o,Ft);T!==null&&oo(T,o,Ft,or)}},Jq=function(o,a,p,S){var b=xL(o,a);if(b!==null){var T=cY(b.memoizedState,p,S);b.memoizedState=T,b.baseState=T,o.memoizedProps=Gt({},o.memoizedProps);var D=_a(o,Ft);D!==null&&oo(D,o,Ft,or)}},eY=function(o,a,p){o.pendingProps=dY(o.memoizedProps,a,p),o.alternate&&(o.alternate.pendingProps=o.pendingProps);var S=_a(o,Ft);S!==null&&oo(S,o,Ft,or)},tY=function(o,a){o.pendingProps=aY(o.memoizedProps,a),o.alternate&&(o.alternate.pendingProps=o.pendingProps);var p=_a(o,Ft);p!==null&&oo(p,o,Ft,or)},nY=function(o,a,p){o.pendingProps=cY(o.memoizedProps,a,p),o.alternate&&(o.alternate.pendingProps=o.pendingProps);var S=_a(o,Ft);S!==null&&oo(S,o,Ft,or)},rY=function(o){var a=_a(o,Ft);a!==null&&oo(a,o,Ft,or)},iY=function(o){Yq=o},oY=function(o){Xq=o}}function ICe(o){var a=hs(o);return a===null?null:a.stateNode}function kCe(o){return null}function RCe(){return ci}function MCe(o){var a=o.findFiberByHostInstance,p=r.ReactCurrentDispatcher;return sx({bundleType:o.bundleType,version:o.version,rendererPackageName:o.rendererPackageName,rendererConfig:o.rendererConfig,overrideHookState:Zq,overrideHookStateDeletePath:Qq,overrideHookStateRenamePath:Jq,overrideProps:eY,overridePropsDeletePath:tY,overridePropsRenamePath:nY,setErrorHandler:iY,setSuspenseHandler:oY,scheduleUpdate:rY,currentDispatcherRef:p,findHostInstanceByFiber:ICe,findFiberByHostInstance:a||kCe,findHostInstancesForRefresh:aCe,scheduleRefresh:oCe,scheduleRoot:sCe,setRefreshHandler:iCe,getCurrentFiber:RCe,reconcilerVersion:mL})}var fY=typeof reportError=="function"?reportError:function(o){console.error(o)};function wL(o){this._internalRoot=o}W_.prototype.render=wL.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?c("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):G_(arguments[1])?c("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&c("You passed a second argument to root.render(...) but it only accepts one argument.");var p=a.containerInfo;if(p.nodeType!==ui){var S=qq(a.current);S&&S.parentNode!==p&&c("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}Lw(o,a,null,null)},W_.prototype.unmount=wL.prototype.unmount=function(){typeof arguments[0]=="function"&&c("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;Eq()&&c("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),Zd(function(){Lw(null,o,null,null)}),fW(a)}};function ACe(o,a){if(!G_(o))throw new Error("createRoot(...): Target container is not a DOM element.");hY(o);var p=!1,S=!1,b="",T=fY;a!=null&&(a.hydrate?l("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof a=="object"&&a!==null&&a.$$typeof===Ci&&c(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),a.unstable_strictMode===!0&&(p=!0),a.identifierPrefix!==void 0&&(b=a.identifierPrefix),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.transitionCallbacks!==void 0&&a.transitionCallbacks);var D=Kq(o,$E,null,p,S,b,T);OE(D.current,o);var N=o.nodeType===ui?o.parentNode:o;return Bx(N),new wL(D)}function W_(o){this._internalRoot=o}function DCe(o){o&&sE(o)}W_.prototype.unstable_scheduleHydration=DCe;function OCe(o,a,p){if(!G_(o))throw new Error("hydrateRoot(...): Target container is not a DOM element.");hY(o),a===void 0&&c("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var S=p??null,b=p!=null&&p.hydratedSources||null,T=!1,D=!1,N="",$=fY;p!=null&&(p.unstable_strictMode===!0&&(T=!0),p.identifierPrefix!==void 0&&(N=p.identifierPrefix),p.onRecoverableError!==void 0&&($=p.onRecoverableError));var G=Wq(a,null,o,$E,S,T,D,N,$);if(OE(G.current,o),Bx(o),b)for(var X=0;X<b.length;X++){var fe=b[X];Fbe(G,fe)}return new W_(G)}function G_(o){return!!(o&&(o.nodeType===us||o.nodeType===gc||o.nodeType===dp))}function Nw(o){return!!(o&&(o.nodeType===us||o.nodeType===gc||o.nodeType===dp||o.nodeType===ui&&o.nodeValue===" react-mount-point-unstable "))}function hY(o){o.nodeType===us&&o.tagName&&o.tagName.toUpperCase()==="BODY"&&c("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),Jx(o)&&(o._reactRootContainer?c("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):c("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var jCe=r.ReactCurrentOwner,pY;pY=function(o){if(o._reactRootContainer&&o.nodeType!==ui){var a=qq(o._reactRootContainer.current);a&&a.parentNode!==o&&c("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var p=!!o._reactRootContainer,S=bL(o),b=!!(S&&vh(S));b&&!p&&c("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),o.nodeType===us&&o.tagName&&o.tagName.toUpperCase()==="BODY"&&c("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function bL(o){return o?o.nodeType===gc?o.documentElement:o.firstChild:null}function gY(){}function LCe(o,a,p,S,b){if(b){if(typeof S=="function"){var T=S;S=function(){var ue=K_(D);T.call(ue)}}var D=Wq(a,S,o,xh,null,!1,!1,"",gY);o._reactRootContainer=D,OE(D.current,o);var N=o.nodeType===ui?o.parentNode:o;return Bx(N),Zd(),D}else{for(var $;$=o.lastChild;)o.removeChild($);if(typeof S=="function"){var G=S;S=function(){var ue=K_(X);G.call(ue)}}var X=Kq(o,xh,null,!1,!1,"",gY);o._reactRootContainer=X,OE(X.current,o);var fe=o.nodeType===ui?o.parentNode:o;return Bx(fe),Zd(function(){Lw(a,X,p,S)}),X}}function NCe(o,a){o!==null&&typeof o!="function"&&c("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",a,o)}function q_(o,a,p,S,b){pY(p),NCe(b===void 0?null:b,"render");var T=p._reactRootContainer,D;if(!T)D=LCe(p,a,o,b,S);else{if(D=T,typeof b=="function"){var N=b;b=function(){var $=K_(D);N.call($)}}Lw(a,D,o,b)}return K_(D)}var mY=!1;function FCe(o){{mY||(mY=!0,c("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node"));var a=jCe.current;if(a!==null&&a.stateNode!==null){var p=a.stateNode._warnedAboutRefsInRender;p||c("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",Cn(a.type)||"A component"),a.stateNode._warnedAboutRefsInRender=!0}}return o==null?null:o.nodeType===us?o:bCe(o,"findDOMNode")}function zCe(o,a,p){if(c("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Nw(a))throw new Error("Target container is not a DOM element.");{var S=Jx(a)&&a._reactRootContainer===void 0;S&&c("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return q_(null,o,a,!0,p)}function UCe(o,a,p){if(c("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Nw(a))throw new Error("Target container is not a DOM element.");{var S=Jx(a)&&a._reactRootContainer===void 0;S&&c("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return q_(null,o,a,!1,p)}function $Ce(o,a,p,S){if(c("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Nw(p))throw new Error("Target container is not a DOM element.");if(o==null||!wd(o))throw new Error("parentComponent must be a valid React Component");return q_(o,a,p,!1,S)}var yY=!1;function BCe(o){if(yY||(yY=!0,c("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot")),!Nw(o))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var a=Jx(o)&&o._reactRootContainer===void 0;a&&c("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(o._reactRootContainer){{var p=bL(o),S=p&&!vh(p);S&&c("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return Zd(function(){q_(null,null,o,!1,function(){o._reactRootContainer=null,fW(o)})}),!0}else{{var b=bL(o),T=!!(b&&vh(b)),D=o.nodeType===us&&Nw(o.parentNode)&&!!o.parentNode._reactRootContainer;T&&c("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",D?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}wD(CCe),Px(ECe),bD(_Ce),cy(Bs),nE(eE),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&c("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),xp(Vxe),OC(Jj,O1e,Zd);function HCe(o,a){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!G_(a))throw new Error("Target container is not a DOM element.");return wCe(o,a,null,p)}function VCe(o,a,p,S){return $Ce(o,a,p,S)}var CL={usingClientEntryPoint:!1,Events:[vh,My,jE,XS,Kf,Jj]};function KCe(o,a){return CL.usingClientEntryPoint||c('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),ACe(o,a)}function WCe(o,a,p){return CL.usingClientEntryPoint||c('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),OCe(o,a,p)}function GCe(o){return Eq()&&c("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),Zd(o)}var qCe=MCe({findFiberByHostInstance:ng,bundleType:1,version:mL,rendererPackageName:"react-dom"});if(!qCe&&yn&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var vY=window.location.protocol;/^(https?|file):$/.test(vY)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(vY==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}Qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CL,Qs.createPortal=HCe,Qs.createRoot=KCe,Qs.findDOMNode=FCe,Qs.flushSync=GCe,Qs.hydrate=zCe,Qs.hydrateRoot=WCe,Qs.render=UCe,Qs.unmountComponentAtNode=BCe,Qs.unstable_batchedUpdates=Jj,Qs.unstable_renderSubtreeIntoContainer=VCe,Qs.version=mL,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}(),Qs}var DL;function OL(){if(DL)return Uw.exports;DL=1;var n={};function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function")){if(n.NODE_ENV!=="production")throw new Error("^_^");try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}return n.NODE_ENV==="production"?(e(),Uw.exports=EY()):Uw.exports=_Y(),Uw.exports}var jL;function PY(){if(jL)return vg;jL=1;var n={},e=OL();if(n.NODE_ENV==="production")vg.createRoot=e.createRoot,vg.hydrateRoot=e.hydrateRoot;else{var t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;vg.createRoot=function(r,i){t.usingClientEntryPoint=!0;try{return e.createRoot(r,i)}finally{t.usingClientEntryPoint=!1}},vg.hydrateRoot=function(r,i,s){t.usingClientEntryPoint=!0;try{return e.hydrateRoot(r,i,s)}finally{t.usingClientEntryPoint=!1}}}return vg}var LL=PY(),TY=Object.defineProperty,IY=(n,e,t)=>e in n?TY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Bw=(n,e,t)=>IY(n,typeof e!="symbol"?e+"":e,t);const kY={stringify:n=>n?"true":"false",parse:n=>/^[ty1-9]/i.test(n)},RY={stringify:n=>n.name,parse:(n,e,t)=>{const r=(()=>{if(typeof window<"u"&&n in window)return window[n];if(typeof global<"u"&&n in global)return global[n]})();return typeof r=="function"?r.bind(t):void 0}},MY={stringify:n=>JSON.stringify(n),parse:n=>JSON.parse(n)},AY={stringify:n=>`${n}`,parse:n=>parseFloat(n)},DY={stringify:n=>n,parse:n=>n},Z_={string:DY,number:AY,boolean:kY,function:RY,json:MY};function OY(n){return n.replace(/([a-z0-9])([A-Z])/g,(e,t,r)=>`${t}-${r.toLowerCase()}`)}const Hw=Symbol.for("r2wc.render"),Vw=Symbol.for("r2wc.connected"),Oh=Symbol.for("r2wc.context"),Uu=Symbol.for("r2wc.props");function jY(n,e,t){var r,i,s;e.props||(e.props=n.propTypes?Object.keys(n.propTypes):[]),e.events||(e.events=[]);const l=Array.isArray(e.props)?e.props.slice():Object.keys(e.props),c=Array.isArray(e.events)?e.events.slice():Object.keys(e.events),d={},h={},g={},y={};for(const w of l){d[w]=Array.isArray(e.props)?"string":e.props[w];const C=OY(w);g[w]=C,y[C]=w}for(const w of c)h[w]=Array.isArray(e.events)?{}:e.events[w];class v extends HTMLElement{constructor(){super(),Bw(this,s,!0),Bw(this,i),Bw(this,r,{}),Bw(this,"container"),e.shadow?this.container=this.attachShadow({mode:e.shadow}):this.container=this,this[Uu].container=this.container;for(const C of l){const E=g[C],P=this.getAttribute(E),I=d[C],k=I?Z_[I]:null;k!=null&&k.parse&&P&&(this[Uu][C]=k.parse(P,E,this))}for(const C of c)this[Uu][C]=E=>{const P=C.replace(/^on/,"").toLowerCase();this.dispatchEvent(new CustomEvent(P,{detail:E,...h[C]}))}}static get observedAttributes(){return Object.keys(y)}connectedCallback(){this[Vw]=!0,this[Hw]()}disconnectedCallback(){this[Vw]=!1,this[Oh]&&t.unmount(this[Oh]),delete this[Oh]}attributeChangedCallback(C,E,P){const I=y[C],k=d[I],L=k?Z_[k]:null;I in d&&L!=null&&L.parse&&P&&(this[Uu][I]=L.parse(P,C,this),this[Hw]())}[(s=Vw,i=Oh,r=Uu,Hw)](){this[Vw]&&(this[Oh]?t.update(this[Oh],this[Uu]):this[Oh]=t.mount(this.container,n,this[Uu]))}}for(const w of l){const C=g[w],E=d[w];Object.defineProperty(v.prototype,w,{enumerable:!0,configurable:!0,get(){return this[Uu][w]},set(P){this[Uu][w]=P;const I=E?Z_[E]:null;if(I!=null&&I.stringify){const k=I.stringify(P,C,this);this.getAttribute(C)!==k&&this.setAttribute(C,k)}else this[Hw]()}})}return v}function LY(n,e,t){const r=LL.createRoot(n),i=zt.createElement(e,t);return r.render(i),{root:r,ReactComponent:e}}function NY({root:n,ReactComponent:e},t){const r=zt.createElement(e,t);n.render(r)}function FY({root:n}){n.unmount()}function zY(n,e={}){return jY(n,e,{mount:LY,update:NY,unmount:FY})}const Q_="__TLDRAW_LIBRARY_VERSIONS__";function UY(){if(globalThis[Q_])return globalThis[Q_];const n={versions:[],didWarn:!1,scheduledNotice:null};return Object.defineProperty(globalThis,Q_,{value:n,writable:!1,configurable:!1,enumerable:!1}),n}function Oc(n,e,t){if(!n)throw new Error("Missing name/version/module system in built version of tldraw library");const r=UY();if(r.versions.push({name:n,version:e,modules:t}),!r.scheduledNotice)try{r.scheduledNotice=setTimeout(()=>{r.scheduledNotice=null,NL(r)},100)}catch{NL(r)}}function NL(n){if(!n.versions.length||n.didWarn)return;const e=n.versions.sort((c,d)=>FL(c.version,d.version)),t=e[e.length-1].version,r=new Set,i=new Map;for(const c of e){if(i.has(c.name)){r.delete(c.name),J_(i,c.name,new Set).add(c.version);continue}c.version===t?r.add(c.name):(r.delete(c.name),J_(i,c.name,new Set).add(c.version))}if(i.size>0){const c=[`${$u("[tldraw]",["bold","bgRed","textWhite"])} ${$u("You have multiple versions of tldraw libraries installed. This can lead to bugs and unexpected behavior.",["textRed","bold"])}`,"",`The latest version you have installed is ${$u(`v${t}`,["bold","textBlue"])}. The following libraries are on the latest version:`,...Array.from(r,d=>`    ${$u(d,["bold"])}`),"","The following libraries are not on the latest version, or have multiple versions installed:",...Array.from(i,([d,h])=>{const g=Array.from(h).sort(FL).map(y=>$u(`v${y}`,y===t?["textGreen"]:["textRed"]));return`    ${$u(d,["bold"])} (${g.join(", ")})`})];console.log(c.join(`
`)),n.didWarn=!0;return}const s=new Map;for(const c of e)J_(s,c.name,{version:c.version,modules:[]}).modules.push(c.modules);const l=new Map;for(const[c,d]of s)d.modules.length>1&&l.set(c,d);if(l.size>0){const c=[`${$u("[tldraw]",["bold","bgRed","textWhite"])} ${$u("You have multiple instances of some tldraw libraries active. This can lead to bugs and unexpected behavior. ",["textRed","bold"])}`,"","This usually means that your bundler is misconfigured, and is importing the same library multiple times - usually once as an ES Module, and once as a CommonJS module.","","The following libraries have been imported multiple times:",...Array.from(l,([d,h])=>{const g=h.modules.map((y,v)=>y==="esm"?`      ${v+1}. ES Modules`:`      ${v+1}. CommonJS`).join(`
`);return`    ${$u(d,["bold"])} v${h.version}: 
${g}`}),"","You should configure your bundler to only import one version of each library."];console.log(c.join(`
`)),n.didWarn=!0;return}}function FL(n,e){const t=n.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/),r=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/);return!t||!r?n.localeCompare(e):t[1]!==r[1]?Number(t[1])-Number(r[1]):t[2]!==r[2]?Number(t[2])-Number(r[2]):t[3]!==r[3]?Number(t[3])-Number(r[3]):t[4]&&r[4]?t[4].localeCompare(r[4]):t[4]?1:r[4]?-1:0}const $Y={bold:"1",textBlue:"94",textRed:"31",textGreen:"32",bgRed:"41",textWhite:"97"};function $u(n,e=[]){return`\x1B[${e.map(t=>$Y[t]).join(";")}m${n}\x1B[m`}function J_(n,e,t){return n.has(e)?n.get(e):(n.set(e,t),t)}var eP,zL;function BY(){if(zL)return eP;zL=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,d=typeof $i=="object"&&$i&&$i.Object===Object&&$i,h=typeof self=="object"&&self&&self.Object===Object&&self,g=d||h||Function("return this")(),y=Object.prototype,v=y.toString,w=Math.max,C=Math.min,E=function(){return g.Date.now()};function P(F,H,V){var re,q,J,ie,W,Y,oe=0,le=!1,ce=!1,Q=!0;if(typeof F!="function")throw new TypeError(n);H=z(H)||0,k(V)&&(le=!!V.leading,ce="maxWait"in V,J=ce?w(z(V.maxWait)||0,H):J,Q="trailing"in V?!!V.trailing:Q);function he(We){var Qe=re,gt=q;return re=q=void 0,oe=We,ie=F.apply(gt,Qe),ie}function ke(We){return oe=We,W=setTimeout(Oe,H),le?he(We):ie}function te(We){var Qe=We-Y,gt=We-oe,Pt=H-Qe;return ce?C(Pt,J-gt):Pt}function me(We){var Qe=We-Y,gt=We-oe;return Y===void 0||Qe>=H||Qe<0||ce&&gt>=J}function Oe(){var We=E();if(me(We))return Ze(We);W=setTimeout(Oe,te(We))}function Ze(We){return W=void 0,Q&&re?he(We):(re=q=void 0,ie)}function De(){W!==void 0&&clearTimeout(W),oe=0,re=Y=q=W=void 0}function yt(){return W===void 0?ie:Ze(E())}function ot(){var We=E(),Qe=me(We);if(re=arguments,q=this,Y=We,Qe){if(W===void 0)return ke(Y);if(ce)return W=setTimeout(Oe,H),he(Y)}return W===void 0&&(W=setTimeout(Oe,H)),ie}return ot.cancel=De,ot.flush=yt,ot}function I(F,H,V){var re=!0,q=!0;if(typeof F!="function")throw new TypeError(n);return k(V)&&(re="leading"in V?!!V.leading:re,q="trailing"in V?!!V.trailing:q),P(F,H,{leading:re,maxWait:H,trailing:q})}function k(F){var H=typeof F;return!!F&&(H=="object"||H=="function")}function L(F){return!!F&&typeof F=="object"}function O(F){return typeof F=="symbol"||L(F)&&v.call(F)==t}function z(F){if(typeof F=="number")return F;if(O(F))return e;if(k(F)){var H=typeof F.valueOf=="function"?F.valueOf():F;F=k(H)?H+"":H}if(typeof F!="string")return F===0?F:+F;F=F.replace(r,"");var V=s.test(F);return V||l.test(F)?c(F.slice(2),V?2:8):i.test(F)?e:+F}return eP=I,eP}var HY=BY();const UL=ef(HY);var tP,$L;function VY(){if($L)return tP;$L=1;var n=200,e="__lodash_hash_undefined__",t=1/0,r="[object Function]",i="[object GeneratorFunction]",s=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=typeof $i=="object"&&$i&&$i.Object===Object&&$i,d=typeof self=="object"&&self&&self.Object===Object&&self,h=c||d||Function("return this")();function g(Ee,ve){var $e=Ee?Ee.length:0;return!!$e&&v(Ee,ve,0)>-1}function y(Ee,ve,$e,mt){for(var cn=Ee.length,vn=$e+-1;++vn<cn;)if(ve(Ee[vn],vn,Ee))return vn;return-1}function v(Ee,ve,$e){if(ve!==ve)return y(Ee,w,$e);for(var mt=$e-1,cn=Ee.length;++mt<cn;)if(Ee[mt]===ve)return mt;return-1}function w(Ee){return Ee!==Ee}function C(Ee,ve){return Ee.has(ve)}function E(Ee,ve){return Ee==null?void 0:Ee[ve]}function P(Ee){var ve=!1;if(Ee!=null&&typeof Ee.toString!="function")try{ve=!!(Ee+"")}catch{}return ve}function I(Ee){var ve=-1,$e=Array(Ee.size);return Ee.forEach(function(mt){$e[++ve]=mt}),$e}var k=Array.prototype,L=Function.prototype,O=Object.prototype,z=h["__core-js_shared__"],F=function(){var Ee=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||"");return Ee?"Symbol(src)_1."+Ee:""}(),H=L.toString,V=O.hasOwnProperty,re=O.toString,q=RegExp("^"+H.call(V).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=k.splice,ie=Cr(h,"Map"),W=Cr(h,"Set"),Y=Cr(Object,"create");function oe(Ee){var ve=-1,$e=Ee?Ee.length:0;for(this.clear();++ve<$e;){var mt=Ee[ve];this.set(mt[0],mt[1])}}function le(){this.__data__=Y?Y(null):{}}function ce(Ee){return this.has(Ee)&&delete this.__data__[Ee]}function Q(Ee){var ve=this.__data__;if(Y){var $e=ve[Ee];return $e===e?void 0:$e}return V.call(ve,Ee)?ve[Ee]:void 0}function he(Ee){var ve=this.__data__;return Y?ve[Ee]!==void 0:V.call(ve,Ee)}function ke(Ee,ve){var $e=this.__data__;return $e[Ee]=Y&&ve===void 0?e:ve,this}oe.prototype.clear=le,oe.prototype.delete=ce,oe.prototype.get=Q,oe.prototype.has=he,oe.prototype.set=ke;function te(Ee){var ve=-1,$e=Ee?Ee.length:0;for(this.clear();++ve<$e;){var mt=Ee[ve];this.set(mt[0],mt[1])}}function me(){this.__data__=[]}function Oe(Ee){var ve=this.__data__,$e=Yt(ve,Ee);if($e<0)return!1;var mt=ve.length-1;return $e==mt?ve.pop():J.call(ve,$e,1),!0}function Ze(Ee){var ve=this.__data__,$e=Yt(ve,Ee);return $e<0?void 0:ve[$e][1]}function De(Ee){return Yt(this.__data__,Ee)>-1}function yt(Ee,ve){var $e=this.__data__,mt=Yt($e,Ee);return mt<0?$e.push([Ee,ve]):$e[mt][1]=ve,this}te.prototype.clear=me,te.prototype.delete=Oe,te.prototype.get=Ze,te.prototype.has=De,te.prototype.set=yt;function ot(Ee){var ve=-1,$e=Ee?Ee.length:0;for(this.clear();++ve<$e;){var mt=Ee[ve];this.set(mt[0],mt[1])}}function We(){this.__data__={hash:new oe,map:new(ie||te),string:new oe}}function Qe(Ee){return kr(this,Ee).delete(Ee)}function gt(Ee){return kr(this,Ee).get(Ee)}function Pt(Ee){return kr(this,Ee).has(Ee)}function yn(Ee,ve){return kr(this,Ee).set(Ee,ve),this}ot.prototype.clear=We,ot.prototype.delete=Qe,ot.prototype.get=gt,ot.prototype.has=Pt,ot.prototype.set=yn;function Zt(Ee){var ve=-1,$e=Ee?Ee.length:0;for(this.__data__=new ot;++ve<$e;)this.add(Ee[ve])}function an(Ee){return this.__data__.set(Ee,e),this}function ln(Ee){return this.__data__.has(Ee)}Zt.prototype.add=Zt.prototype.push=an,Zt.prototype.has=ln;function Yt(Ee,ve){for(var $e=Ee.length;$e--;)if(Rr(Ee[$e][0],ve))return $e;return-1}function Yn(Ee){if(!Jr(Ee)||qr(Ee))return!1;var ve=Mr(Ee)||P(Ee)?q:l;return ve.test(li(Ee))}function br(Ee,ve,$e){var mt=-1,cn=g,vn=Ee.length,Xn=!0,Dn=[],ar=Dn;if(vn>=n){var bn=Wr(Ee);if(bn)return I(bn);Xn=!1,cn=C,ar=new Zt}else ar=Dn;e:for(;++mt<vn;){var Sn=Ee[mt],hn=Sn;if(Sn=Sn!==0?Sn:0,Xn&&hn===hn){for(var Ii=ar.length;Ii--;)if(ar[Ii]===hn)continue e;Dn.push(Sn)}else cn(ar,hn,$e)||(ar!==Dn&&ar.push(hn),Dn.push(Sn))}return Dn}var Wr=W&&1/I(new W([,-0]))[1]==t?function(Ee){return new W(Ee)}:ss;function kr(Ee,ve){var $e=Ee.__data__;return Gr(ve)?$e[typeof ve=="string"?"string":"hash"]:$e.map}function Cr(Ee,ve){var $e=E(Ee,ve);return Yn($e)?$e:void 0}function Gr(Ee){var ve=typeof Ee;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?Ee!=="__proto__":Ee===null}function qr(Ee){return!!F&&F in Ee}function li(Ee){if(Ee!=null){try{return H.call(Ee)}catch{}try{return Ee+""}catch{}}return""}function ko(Ee){return Ee&&Ee.length?br(Ee):[]}function Rr(Ee,ve){return Ee===ve||Ee!==Ee&&ve!==ve}function Mr(Ee){var ve=Jr(Ee)?re.call(Ee):"";return ve==r||ve==i}function Jr(Ee){var ve=typeof Ee;return!!Ee&&(ve=="object"||ve=="function")}function ss(){}return tP=ko,tP}var KY=VY();const WY=ef(KY);function BL(n){const e=(...t)=>{try{return n(...t)}catch(r){throw r instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(r,e),r}};return e}const iv=()=>{},tf={ok(n){return{ok:!0,value:n}},err(n){return{ok:!1,error:n}}};function Bi(n,e){const t=e&&n&&typeof n=="object"&&e in n?n[e]:n;throw new Error(`Unknown switch case ${t}`)}const rn=BL((n,e)=>{if(!n)throw new Error(e||"Assertion Error")}),Js=BL((n,e)=>{if(n==null)throw new Error(e??"value must be defined");return n});function nP(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});return Object.assign(t,{resolve:n,reject:e})}function rP(n){return new Promise(e=>setTimeout(e,n))}const ov={Good:"#40C057",Mid:"#FFC078",Poor:"#E03131"},GY=ov.Good;class HL{constructor(){U(this,"startTime",0);U(this,"name","");U(this,"frames",0);U(this,"started",!1);U(this,"frame",null);U(this,"recordFrame",()=>{this.frames++,this.started&&(this.frame=requestAnimationFrame(this.recordFrame))})}start(e){this.name=e,this.frames=0,this.started=!0,this.frame!==null&&cancelAnimationFrame(this.frame),this.frame=requestAnimationFrame(this.recordFrame),this.startTime=performance.now()}stop(){this.started=!1,this.frame!==null&&cancelAnimationFrame(this.frame);const e=(performance.now()-this.startTime)/1e3,t=e===0?0:Math.floor(this.frames/e),r=t>55?ov.Good:t>30?ov.Mid:ov.Poor,i=r===ov.Mid?"black":"white",s=this.name[0].toUpperCase()+this.name.slice(1);console.debug(`%cPerf%c ${s} %c${t}%c fps`,`color: white; background: ${GY};padding: 2px;border-radius: 3px;`,"font-weight: normal",`font-weight: bold; padding: 2px; background: ${r};color: ${i};`,"font-weight: normal")}isStarted(){return this.started}}function iP(n,e){const t=[];e:for(const r of n){for(const i of t)if(e?e(r,i):r===i)continue e;t.push(r)}return t}function on(n){return n.filter(e=>e!=null)}function yo(n){return n[n.length-1]}function qY(n,e){let t,r=1/0;for(const i of n){const s=e(i);s<r&&(t=i,r=s)}return t}function YY(n,e){let t,r=-1/0;for(const i of n){const s=e(i);s>r&&(t=i,r=s)}return t}function VL(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Object.is(n[t],e[t]))return!1;return!0}function ea(...n){if(n.length===2){const[e,t]=n;t.addInitializer(function(){rn(Reflect.isExtensible(this),"Cannot bind to a non-extensible class.");const i=e.bind(this),s=Reflect.defineProperty(this,t.name,{value:i,writable:!0,configurable:!0});rn(s,"Cannot bind a non-configurable class method.")})}else{const[e,t,r]=n;if(!r||typeof r.value!="function")throw new TypeError(`Only methods can be decorated with @bind. <${t}> is not a method!`);return{configurable:!0,get(){const i=r.value.bind(this);return Object.defineProperty(this,t,{value:i,configurable:!0,writable:!0}),i}}}}class jc{constructor(){U(this,"items",new WeakMap)}get(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}}function Kw(n,e){let t;const r=(...i)=>(t||(t={},t.promise=new Promise((s,l)=>{t.resolve=s,t.reject=l})),clearTimeout(t.timeout),t.latestArgs=i,t.timeout=setTimeout(()=>{const s=t;t=void 0;try{s.resolve(n(...s.latestArgs))}catch(l){s.reject(l)}},e),t.promise);return r.cancel=()=>{t&&clearTimeout(t.timeout)},r}const KL=new WeakMap;function oP(n,e){if(typeof n!="object"||n===null)return;let t=KL.get(n);t||(t={tags:{},extras:{}},KL.set(n,t)),e.tags&&(t.tags={...t.tags,...e.tags}),e.extras&&(t.extras={...t.extras,...e.extras})}async function Lc(n,e){return window.fetch(n,{referrerPolicy:"strict-origin-when-cross-origin",...e})}const sv=(n,e)=>{const t=new window.Image(n,e);return t.referrerPolicy="strict-origin-when-cross-origin",t};class Bl{static async dataUrlToArrayBuffer(e){return Lc(e).then(function(t){return t.arrayBuffer()})}static async blobToDataUrl(e){return await new Promise((t,r)=>{if(e){const i=new FileReader;i.onload=()=>t(i.result),i.onerror=s=>r(s),i.onabort=s=>r(s),i.readAsDataURL(e)}})}static async blobToText(e){return await new Promise((t,r)=>{if(e){const i=new FileReader;i.onload=()=>t(i.result),i.onerror=s=>r(s),i.onabort=s=>r(s),i.readAsText(e)}})}static rewriteMimeType(e,t){return e.type===t?e:e instanceof File?new File([e],e.name,{type:t}):new Blob([e],{type:t})}}function sP(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return e+""}function WL(n){const e=new DataView(n);let t=0;for(let r=0;r<e.byteLength;r++)t=(t<<5)-t+e.getUint8(r),t|=0;return t+""}/*!
 * MIT License: https://github.com/ai/nanoid/blob/main/LICENSE
 * Modified code originally from <https://github.com/ai/nanoid>
 * Copyright 2017 Andrey Sitnik <andrey@sitnik.ru>
 *
 * `nanoid` is currently only distributed as an ES module. Some tools (jest, playwright) don't
 * properly support ESM-only code yet, and tldraw itself is distributed as both an ES module and a
 * CommonJS module. By including nanoid here, we can make sure it works well in every environment
 * where tldraw is used. We can also remove some unused features like custom alphabets.
 */const GL=globalThis.crypto,XY="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",ZY=128;let jh,Sg;function QY(n){!jh||jh.length<n?(jh=new Uint8Array(n*ZY),GL.getRandomValues(jh),Sg=0):Sg+n>jh.length&&(GL.getRandomValues(jh),Sg=0),Sg+=n}function JY(n=21){QY(n-=0);let e="";for(let t=Sg-n;t<Sg;t++)e+=XY[jh[t]&63];return e}let eX=JY;function nr(n){return eX(n)}/*!
 * MIT License: https://github.com/vHeemstra/is-apng/blob/main/license
 * Copyright (c) Philip van Heemstra
 */function tX(n){const e=new Uint8Array(n);if(!e||!(typeof Buffer<"u"&&Buffer.isBuffer(e)||e instanceof Uint8Array)||e.length<16||!(e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10))return!1;function r(s,l,c,d,h=1024){if(!l)return-1;l=new RegExp(l,"g");const g=l.source.length,y=new TextDecoder,v=s.length;if(typeof d>"u"&&(d=v),c>=v||d<=0||c>=d)return-1;s=s.subarray(c,d);let w=-1,C=0,E=0,P="";e:for(;C<s.length;){const I=C+h,k=s.subarray(C,I),L=y.decode(k,{stream:!0}),O=P+L;let z,F=-1;for(;(z=l.exec(O))!==null;){F=z.index-P.length,w=E+F;break e}C=I,E+=L.length;const H=F>-1?F+g:L.length-g;P=L.slice(H)}return w>=0&&(w+=c>=0?c:v+c),w}const i=r(e,"IDAT",12);return i>=12?r(e,"acTL",8,i)>=8:!1}const nX=n=>new Uint8Array(n)[3]===44;/*!
 * MIT License
 * Modified code originally from <https://github.com/qzb/is-animated>
 * Copyright (c) 2016 Jzef Sokoowski <j.k.sokolowski@gmail.com>
 */function qL(n,e){let t=0;for(;n[e+t];)t+=n[e+t]+1;return t+1}function rX(n){return new TextDecoder("ascii").decode(n.slice(0,3))==="GIF"}function iX(n){const e=new Uint8Array(n);let t,r,i=0,s=0;if(!rX(n))return!1;for(t=e[10]&128,r=e[10]&7,i+=6,i+=7,i+=t?3*Math.pow(2,r+1):0;s<2&&i<e.length;)switch(e[i]){case 44:s+=1,t=e[i+9]&128,r=e[i+9]&7,i+=10,i+=t?3*Math.pow(2,r+1):0,i+=qL(e,i+1)+1;break;case 33:i+=2,i+=qL(e,i);break;case 59:i=e.length;break;default:i=e.length;break}return s>1}/*!
 * MIT License: https://github.com/alexgorbatchev/crc/blob/master/LICENSE
 * Copyright: 2014 Alex Gorbatchev
 * Code: crc32, https://github.com/alexgorbatchev/crc/blob/master/src/calculators/crc32.ts
 */let aP=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(aP=new Int32Array(aP));const oX=(n,e)=>{let t=-1;for(let r=0;r<n.length;r++)t=aP[(t^n[r])&255]^t>>>8;return t^-1},YL=4,XL=4;class Nc{static isPng(e,t){return e.getUint8(t+0)===137&&e.getUint8(t+1)===80&&e.getUint8(t+2)===78&&e.getUint8(t+3)===71&&e.getUint8(t+4)===13&&e.getUint8(t+5)===10&&e.getUint8(t+6)===26&&e.getUint8(t+7)===10}static getChunkType(e,t){return[String.fromCharCode(e.getUint8(t)),String.fromCharCode(e.getUint8(t+1)),String.fromCharCode(e.getUint8(t+2)),String.fromCharCode(e.getUint8(t+3))].join("")}static readChunks(e,t=0){const r={};if(!Nc.isPng(e,t))throw new Error("Not a PNG");for(t+=8;t<=e.buffer.byteLength;){const i=t,s=e.getInt32(t);t+=4;const l=Nc.getChunkType(e,t);if(l==="IDAT"&&r[l]){t+=s+YL+XL;continue}if(l==="IEND")break;r[l]={start:i,dataOffset:t+4,size:s},t+=s+YL+XL}return r}static parsePhys(e,t){return{ppux:e.getUint32(t),ppuy:e.getUint32(t+4),unit:e.getUint8(t+4)}}static findChunk(e,t){return Nc.readChunks(e)[t]}static setPhysChunk(e,t=1,r){let i=46,s=0;const l=Nc.findChunk(e,"pHYs");l&&(i=l.start,s=l.size);const c=Nc.findChunk(e,"IDAT");c&&(i=c.start,s=0);const d=new ArrayBuffer(21),h=new DataView(d);h.setUint32(0,9),h.setUint8(4,112),h.setUint8(5,72),h.setUint8(6,89),h.setUint8(7,115);const g=2835.5;h.setInt32(8,g*t),h.setInt32(12,g*t),h.setInt8(16,1);const y=new Uint8Array(d.slice(4,17));h.setInt32(17,oX(y));const v=e.buffer.slice(0,i),w=e.buffer.slice(i+s);return new Blob([v,d,w],r)}}/*!
 * MIT License: https://github.com/sindresorhus/is-webp/blob/main/license
 * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)
 */function sX(n){return!n||n.length<12?!1:n[8]===87&&n[9]===69&&n[10]===66&&n[11]===80}function aX(n){const e=new Uint8Array(n);return!sX(e)||!e||e.length<21?!1:(e[20]>>1&1)===1}const ZL=Object.freeze(["image/svg+xml"]),QL=Object.freeze(["image/jpeg","image/png","image/webp"]),JL=Object.freeze(["image/gif","image/apng","image/avif"]),Ww=Object.freeze([...QL,...ZL,...JL]),lP=Object.freeze(["video/mp4","video/webm","video/quicktime"]),lX=[...Ww,...lP].join(",");class Ra{static loadVideo(e){return new Promise((t,r)=>{const i=document.createElement("video");i.onloadeddata=()=>t(i),i.onerror=s=>{console.error(s),r(new Error("Could not load video"))},i.crossOrigin="anonymous",i.src=e})}static async getVideoFrameAsDataUrl(e,t=0){const r=nP();let i=!1;const s=()=>{if(!i)if(e.readyState>=e.HAVE_METADATA)i=!0,e.currentTime=t;else return;if(e.readyState>=e.HAVE_CURRENT_DATA){const c=document.createElement("canvas");c.width=e.videoWidth,c.height=e.videoHeight;const d=c.getContext("2d");if(!d)throw new Error("Could not get 2d context");d.drawImage(e,0,0),r.resolve(c.toDataURL())}},l=c=>{console.error(c),r.reject(new Error("Could not get video frame"))};e.addEventListener("loadedmetadata",s),e.addEventListener("loadeddata",s),e.addEventListener("canplay",s),e.addEventListener("seeked",s),e.addEventListener("error",l),e.addEventListener("stalled",l),s();try{return await r}finally{e.removeEventListener("loadedmetadata",s),e.removeEventListener("loadeddata",s),e.removeEventListener("canplay",s),e.removeEventListener("seeked",s),e.removeEventListener("error",l),e.removeEventListener("stalled",l)}}static loadImage(e){return new Promise((t,r)=>{const i=sv();i.onload=()=>t(i),i.onerror=s=>{console.error(s),r(new Error("Could not load image"))},i.crossOrigin="anonymous",i.referrerPolicy="strict-origin-when-cross-origin",i.src=e})}static async getVideoSize(e){return Ra.usingObjectURL(e,async t=>{const r=await Ra.loadVideo(t);return{w:r.videoWidth,h:r.videoHeight}})}static async getImageSize(e){const t=await Ra.usingObjectURL(e,Ra.loadImage);try{if(e.type==="image/png"){const r=new DataView(await e.arrayBuffer());if(Nc.isPng(r,0)){const i=Nc.findChunk(r,"pHYs");if(i){const s=Nc.parsePhys(r,i.dataOffset);if(s.unit===0&&s.ppux===s.ppuy){const l=Math.max(s.ppux/2834.5,1);return{w:Math.round(t.naturalWidth/l),h:Math.round(t.naturalHeight/l)}}}}}}catch(r){return console.error(r),{w:t.naturalWidth,h:t.naturalHeight}}return{w:t.naturalWidth,h:t.naturalHeight}}static async isAnimated(e){return e.type==="image/gif"?iX(await e.arrayBuffer()):e.type==="image/avif"?nX(await e.arrayBuffer()):e.type==="image/webp"?aX(await e.arrayBuffer()):e.type==="image/apng"?tX(await e.arrayBuffer()):!1}static isAnimatedImageType(e){return JL.includes(e||"")}static isStaticImageType(e){return QL.includes(e||"")}static isVectorImageType(e){return ZL.includes(e||"")}static isImageType(e){return Ww.includes(e)}static async usingObjectURL(e,t){const r=URL.createObjectURL(e);try{return await t(r)}finally{URL.revokeObjectURL(r)}}}function Rn(n,e,t){return n+(e-n)*t}function Hl(n=""){let e=0,t=0,r=0,i=0;function s(){const l=e^e<<11;return e=t,t=r,r=i,i^=(i>>>19^l^l>>>8)>>>0,i/4294967296*2}for(let l=0;l<n.length+64;l++)e^=n.charCodeAt(l)|0,s();return s}function xg(n,e,t,r=!1){const[i,s]=e,[l,c]=t,d=l+(n-i)/(s-i)*(c-l);return r?l<c?Math.max(Math.min(d,c),l):Math.max(Math.min(d,l),c):d}function Vl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Wo(n,e){if(Vl(n,e))return n[e]}function e2(n){return Object.keys(n)}function Hr(n){return Object.values(n)}function vo(n){return Object.entries(n)}function cP(n){return Object.fromEntries(n)}function av(n,e){const t={};let r=!1;for(const[i,s]of vo(n))e(i,s)?t[i]=s:r=!0;return r?t:n}function lv(n,e){const t={};for(const[r,i]of vo(n)){const s=e(r,i);t[r]=s}return t}function uP(n,e){if(n===e)return!0;const t=new Set(Object.keys(n)),r=new Set(Object.keys(e));if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i)||!Object.is(n[i],e[i]))return!1;return!0}function cX(n){const e=uX(n.chars),t=dX(e,n.firstPositive,n.mostPositive,n.mostNegative),r=n.jitterRange??Math.floor(Math.pow(e.length,3)/5),i=fX(r,e.length);return{chars:n.chars,byChar:e.byChar,byCode:e.byCode,length:e.length,first:e.byCode[0],last:e.byCode[e.length-1],firstPositive:t.firstPositive,mostPositive:t.mostPositive,firstNegative:t.firstNegative,mostNegative:t.mostNegative,jitterRange:r,paddingDict:i}}function uX(n){const e={},t={},r=n.length;for(let i=0;i<r;i++){const s=n[i];e[i]=s,t[s]=i}return{byCode:e,byChar:t,length:r}}function dX(n,e,t,r){const i=e?n.byChar[e]:Math.ceil(n.length/2),s=t?n.byChar[t]:n.length-1,l=r?n.byChar[r]:0;if(i===void 0||s===void 0||l===void 0)throw new Error("invalid charSet");if(s-i<3)throw new Error("mostPositive must be at least 3 characters away from neutral");if(i-l<3)throw new Error("mostNegative must be at least 3 characters away from neutral");return{firstPositive:n.byCode[i],mostPositive:n.byCode[s],firstNegative:n.byCode[i-1],mostNegative:n.byCode[l]}}function fX(n,e){const t={};for(let r=0;r<100&&(t[r]=Math.pow(e,r),!(t[r]>n));r++);return t}var dP=null;function Gw(){return dP||(dP=cX({chars:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",firstPositive:"a",mostPositive:"z",mostNegative:"A"}))}function nf(n,e,t){const r=t.byChar[n],i=t.byChar[e];return Math.abs(r-i)}function fP(n,e){const t=n[0];if(t>e.mostPositive||t<e.mostNegative)throw new Error("invalid firstChar on key");return t===e.mostPositive?nf(t,e.firstPositive,e)+1+qw(n.slice(1),"positive",e):t===e.mostNegative?nf(t,e.firstNegative,e)+1+qw(n.slice(1),"negative",e):t>=e.firstPositive?nf(t,e.firstPositive,e)+2:nf(t,e.firstNegative,e)+2}function qw(n,e,t){const r=n[0];if(r>t.mostPositive||r<t.mostNegative)throw new Error("invalid firstChar on key");return r===t.mostPositive&&e==="positive"?nf(r,t.mostNegative,t)+1+qw(n.slice(1),e,t):r===t.mostNegative&&e==="negative"?nf(r,t.mostPositive,t)+1+qw(n.slice(1),e,t):e==="positive"?nf(r,t.mostNegative,t)+2:nf(r,t.mostPositive,t)+2}function Yw(n,e,t,r,i){const s=Math.max(n.length,e.length);return t==="start"?[n.padStart(s,r),e.padStart(s,r)]:[n.padEnd(s,r),e.padEnd(s,r)]}function hX(n,e,t){let[r,i]=Yw(n,e,"end",t.first),s=hP(r,i,t);s===1&&(r=r.padEnd(r.length+1,t.first),s=t.length);const l=r2(Math.floor(s/2),t);return pP(r,l,t)}function hP(n,e,t){const[r,i]=Yw(n,e,"end",t.first).sort(),s=t2(i,r,t);return pX(s,t)}function pP(n,e,t){const r=t.length,[i,s]=Yw(n,e,"start",t.first),l=[];let c=0;for(let d=i.length-1;d>=0;d--){const h=t.byChar[i[d]],g=t.byChar[s[d]],y=h+g+c;c=Math.floor(y/r);const v=y%r;l.unshift(t.byCode[v])}return c>0&&l.unshift(t.byCode[c]),l.join("")}function t2(n,e,t){const r=t.length,[i,s]=Yw(n,e,"start",t.first),l=[];let c=0;for(let d=i.length-1;d>=0;d--){let h=t.byChar[i[d]];const g=t.byChar[s[d]]+c;h<g?(c=1,h+=r):c=0;const y=h-g;l.unshift(t.byCode[y])}if(c>0)throw new Error("Subtraction result is negative. Ensure a is greater than or equal to b.");for(;l.length>1&&l[0]===t.byCode[0];)l.shift();return l.join("")}function n2(n,e){return pP(n,e.byCode[1],e)}function gP(n,e){return t2(n,e.byCode[1],e)}function r2(n,e){if(n===0)return e.byCode[0];let t="";const r=e.length;for(;n>0;)t=e.byCode[n%r]+t,n=Math.floor(n/r);return t}function pX(n,e){let t=0;const r=n.length,i=e.length;for(let s=0;s<r;s++)t+=e.byChar[n[s]]*Math.pow(i,r-s-1);return t}function gX(n){return n.firstPositive+n.byCode[0]}function mX(n,e){return fP(n,e)===n.length}function i2(n,e){Xw(n,e)}function Xw(n,e){const t=a2(n,e),r=fP(t,e);if(r>n.length)throw new Error("invalid order key length: "+n);return n.slice(0,r)}function o2(n,e){if(!mX(n,e))throw new Error("invalid integer length: "+n)}function s2(n,e){o2(n,e);const[t,r]=l2(n,e);if(r.split("").some(l=>l!==e.byCode[e.length-1])){const l=n2(r,e);return t+l}const s=vX(t,e);return c2(s,"lower",e)}function yX(n,e){o2(n,e);const[t,r]=l2(n,e);if(r.split("").some(l=>l!==e.byCode[0])){const l=gP(r,e);return t+l}const s=SX(t,e);return c2(s,"upper",e)}function a2(n,e){let t=0;if(n[0]===e.mostPositive)for(;n[t]===e.mostPositive;)t=t+1;if(n[0]===e.mostNegative)for(;n[t]===e.mostNegative;)t=t+1;return n.slice(0,t+1)}function l2(n,e){const t=a2(n,e),r=n.slice(t.length);return[t,r]}function vX(n,e){const t=n>=e.firstPositive,r=n2(n,e),i=n[n.length-1]===e.mostPositive,s=r[r.length-1]===e.mostPositive;return t&&s?r+e.mostNegative:!t&&i?n.slice(0,n.length-1):r}function SX(n,e){const t=n>=e.firstPositive,r=n[n.length-1]===e.mostNegative;if(t&&r){const i=n.slice(0,n.length-1);return gP(i,e)}return!t&&r?n+e.mostPositive:gP(n,e)}function c2(n,e,t){const r=fP(n,t),i=e==="upper"?t.byCode[t.length-1]:t.byCode[0];return n+i.repeat(r-n.length)}function u2(n,e){const t=r2(Math.floor(Math.random()*e.jitterRange),e);return pP(n,t,e)}function xX(n,e,t){const r=n.padEnd(n.length+e,t.first);return u2(r,t)}function wX(n,e,t){const r=Xw(n,t),i=s2(r,t);let s=0;if(e!==null){const c=hP(n,e,t);c<t.jitterRange+1&&(s=Math.max(s,d2(c,t)))}const l=hP(n,i,t);return l<t.jitterRange+1&&(s=Math.max(s,d2(l,t))),s}function d2(n,e){const t=e.jitterRange-n,r=Object.entries(e.paddingDict).find(([i,s])=>s>t);return r?parseInt(r[0]):0}function f2(n,e,t=Gw()){if(n!==null&&i2(n,t),e!==null&&i2(e,t),n===null&&e===null)return gX(t);if(n===null){const r=Xw(e,t);return yX(r,t)}if(e===null){const r=Xw(n,t);return s2(r,t)}if(n>=e)throw new Error(n+" >= "+e);return hX(n,e,t)}function h2(n,e,t,r=Gw()){return m2(n,e,t,r,f2,h2)}function p2(n,e,t=Gw()){const r=f2(n,e,t),i=wX(r,e,t);return i?xX(r,i,t):u2(r,t)}function g2(n,e,t,r=Gw()){return m2(n,e,t,r,p2,g2)}function m2(n,e,t,r,i,s){if(t===0)return[];if(t===1)return[i(n,e,r)];if(e==null){let d=i(n,e,r);const h=[d];for(let g=0;g<t-1;g++)d=i(d,e,r),h.push(d);return h}if(n==null){let d=i(n,e,r);const h=[d];for(let g=0;g<t-1;g++)d=i(n,d,r),h.push(d);return h.reverse(),h}const l=Math.floor(t/2),c=i(n,e,r);return[...s(n,c,l,r),c,...s(c,e,t-l-1,r)]}var bX={};const wg=bX.NODE_ENV==="test"?h2:g2,y2="a0";function CX(n){try{p2(n,null)}catch{throw new Error("invalid index: "+n)}}function bg(n,e,t){return wg(n??null,e??null,t)}function mP(n,e){return wg(n??null,null,e)}function cv(n,e){return wg(n??null,e??null,1)[0]}function Fc(n=null){return wg(n,null,1)[0]}function EX(n=null){return wg(null,n,1)[0]}function uv(n,e="a1"){return[e,...wg(e,null,n)]}function Go(n,e){return n.index<e.index?-1:n.index>e.index?1:0}function _X(n,e){return n.id>e.id?1:-1}function yP(n){try{return localStorage.getItem(n)}catch{return null}}function vP(n,e){try{localStorage.setItem(n,e)}catch{}}function PX(){try{localStorage.clear()}catch{}}function v2(n){try{return sessionStorage.getItem(n)}catch{return null}}function SP(n,e){try{sessionStorage.setItem(n,e)}catch{}}function S2(n){try{sessionStorage.removeItem(n)}catch{}}function TX(){try{sessionStorage.clear()}catch{}}var IX={};const x2=()=>typeof process<"u"&&IX.NODE_ENV==="test"&&!globalThis.__FORCE_RAF_IN_TESTS__,zc=[],dv=Math.ceil(1e3/60);let Lh,xP=0,Zw=0;const kX=()=>{const n=zc.splice(0,zc.length);for(const e of n)e()};function wP(){if(Lh)return;const n=Date.now(),e=n-Zw;if(xP+e<dv){Lh=requestAnimationFrame(()=>{Lh=void 0,wP()});return}Lh=requestAnimationFrame(()=>{Lh=void 0,Zw=n,xP=Math.min(xP+e-dv,dv*10),kX()})}let Qw=!1;function w2(n){if(x2())return n.cancel=()=>Lh&&cancelAnimationFrame(Lh),n;const e=()=>{zc.includes(n)||(zc.push(n),Qw||(Qw=!0,Zw=Date.now()-dv-1),wP())};return e.cancel=()=>{const t=zc.indexOf(n);t>-1&&zc.splice(t,1)},e}function b2(n){return x2()?(n(),()=>{}):(zc.includes(n)||(zc.push(n),Qw||(Qw=!0,Zw=Date.now()-dv-1),wP()),()=>{const e=zc.indexOf(n);e>-1&&zc.splice(e,1)})}class RX{constructor(){U(this,"timeouts",new Map);U(this,"intervals",new Map);U(this,"rafs",new Map);this.setTimeout=this.setTimeout.bind(this),this.setInterval=this.setInterval.bind(this),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.dispose=this.dispose.bind(this)}setTimeout(e,t,r,...i){const s=window.setTimeout(t,r,i),l=this.timeouts.get(e)??[];return this.timeouts.set(e,[...l,s]),s}setInterval(e,t,r,...i){const s=window.setInterval(t,r,i),l=this.intervals.get(e)??[];return this.intervals.set(e,[...l,s]),s}requestAnimationFrame(e,t){const r=window.requestAnimationFrame(t),i=this.rafs.get(e)??[];return this.rafs.set(e,[...i,r]),r}dispose(e){var t,r,i;(t=this.timeouts.get(e))==null||t.forEach(s=>clearTimeout(s)),(r=this.intervals.get(e))==null||r.forEach(s=>clearInterval(s)),(i=this.rafs.get(e))==null||i.forEach(s=>cancelAnimationFrame(s)),this.timeouts.delete(e),this.intervals.delete(e),this.rafs.delete(e)}disposeAll(){for(const e of this.timeouts.keys())this.dispose(e)}forContext(e){return{setTimeout:(t,r,...i)=>this.setTimeout(e,t,r,i),setInterval:(t,r,...i)=>this.setInterval(e,t,r,i),requestAnimationFrame:t=>this.requestAnimationFrame(e,t),dispose:()=>this.dispose(e)}}}const Wt=(n,e)=>{try{return new URL(n,e)}catch{return}};function MX(n){return n!==void 0}function AX(){return typeof globalThis<"u"&&globalThis.structuredClone?[globalThis.structuredClone,!0]:typeof global<"u"&&global.structuredClone?[global.structuredClone,!0]:typeof window<"u"&&window.structuredClone?[window.structuredClone,!0]:[n=>n&&JSON.parse(JSON.stringify(n)),!1]}const C2=AX(),Lr=C2[0];C2[1];const E2=Object.getPrototypeOf(Lr({})),_2=new Set;function DX(n){_2.has(n)||(_2.add(n),console.warn(`[tldraw] ${n}`))}Oc("@tldraw/utils","3.7.0","esm");function P2(n){return n&&typeof n=="object"&&"parents"in n}function T2(n){for(let e=0,t=n.parents.length;e<t;e++)if(n.parents[e].__unsafe__getWithoutCapture(!0),n.parents[e].lastChangedEpoch!==n.parentEpochs[e])return!0;return!1}function Jw(n,e){if(n.children.remove(e)&&n.children.isEmpty&&P2(n))for(let t=0,r=n.parents.length;t<r;t++)Jw(n.parents[t],n)}function bP(n,e){if(n.children.add(e)&&P2(n))for(let t=0,r=n.parents.length;t<r;t++)bP(n.parents[t],n)}function I2(n,e){return n===e||Object.is(n,e)||!!(n&&e&&typeof n.equals=="function"&&n.equals(e))}function rf(n,e){const t=Symbol.for(`com.tldraw.state/${n}`),r=globalThis;return r[t]??(r[t]=e()),r[t]}const Bu=rf("empty_array",()=>Object.freeze([])),k2=8;class eb{constructor(){U(this,"arraySize",0);U(this,"array",Array(k2));U(this,"set",null)}get isEmpty(){if(this.array)return this.arraySize===0;if(this.set)return this.set.size===0;throw new Error("no set or array")}add(e){if(this.array)return this.array.indexOf(e)!==-1?!1:this.arraySize<k2?(this.array[this.arraySize]=e,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(e),!0);if(this.set)return this.set.has(e)?!1:(this.set.add(e),!0);throw new Error("no set or array")}remove(e){if(this.array){const t=this.array.indexOf(e);return t===-1?!1:(this.array[t]=void 0,this.arraySize--,t!==this.arraySize&&(this.array[t]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return this.set.has(e)?(this.set.delete(e),!0):!1;throw new Error("no set or array")}visit(e){if(this.array){for(let t=0;t<this.arraySize;t++){const r=this.array[t];typeof r<"u"&&e(r)}return}if(this.set){this.set.forEach(e);return}throw new Error("no set or array")}has(e){return this.array?this.array.indexOf(e)!==-1:this.set.has(e)}clear(){this.set?this.set.clear():(this.arraySize=0,this.array=[])}size(){return this.set?this.set.size:this.arraySize}}const Ma=Symbol.for("com.tldraw.state/RESET_VALUE");class R2{constructor(e){U(this,"index",0);U(this,"buffer");this.capacity=e,this.buffer=new Array(e)}pushEntry(e,t,r){if(r!==void 0){if(r===Ma){this.clear();return}this.buffer[this.index]=[e,t,r],this.index=(this.index+1)%this.capacity}}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(e){const{index:t,capacity:r,buffer:i}=this;for(let s=0;s<r;s++){const l=(t-1+r-s)%r,c=i[l];if(!c)return Ma;const[d,h]=c;if(s===0&&e>=h)return[];if(d<=e&&e<h){const g=s+1,y=new Array(g);for(let v=0;v<g;v++)y[v]=i[(l+v)%r][2];return y}}return Ma}}class OX{constructor(e,t){U(this,"offset",0);U(this,"maybeRemoved");this.below=e,this.child=t}}const Vr=rf("capture",()=>({stack:null}));function tb(n){const e=Vr.stack;Vr.stack=null;try{return n()}finally{Vr.stack=e}}function M2(n){Vr.stack=new OX(Vr.stack,n),n.parentSet.clear()}function A2(){const n=Vr.stack;if(Vr.stack=n.below,n.offset<n.child.parents.length){for(let e=n.offset;e<n.child.parents.length;e++){const t=n.child.parents[e];n.child.parentSet.has(t)||Jw(t,n.child)}n.child.parents.length=n.offset,n.child.parentEpochs.length=n.offset}if(n.maybeRemoved)for(let e=0;e<n.maybeRemoved.length;e++){const t=n.maybeRemoved[e];n.child.parentSet.has(t)||Jw(t,n.child)}}function nb(n){if(Vr.stack){if(Vr.stack.child.parentSet.has(n))return;if(Vr.stack.child.parentSet.add(n),Vr.stack.child.isActivelyListening&&bP(n,Vr.stack.child),Vr.stack.offset<Vr.stack.child.parents.length){const t=Vr.stack.child.parents[Vr.stack.offset];t!==n&&(Vr.stack.maybeRemoved?Vr.stack.maybeRemoved.push(t):Vr.stack.maybeRemoved=[t])}Vr.stack.child.parents[Vr.stack.offset]=n,Vr.stack.child.parentEpochs[Vr.stack.offset]=n.lastChangedEpoch,Vr.stack.offset++}}const of=-1;class jX{constructor(e,t,r){U(this,"_isActivelyListening",!1);U(this,"lastTraversedEpoch",of);U(this,"lastReactedEpoch",of);U(this,"_scheduleCount",0);U(this,"parentSet",new eb);U(this,"parentEpochs",[]);U(this,"parents",[]);U(this,"_scheduleEffect");U(this,"maybeExecute",()=>{this._isActivelyListening&&this.execute()});this.name=e,this.runEffect=t,this._scheduleEffect=r==null?void 0:r.scheduleEffect}get isActivelyListening(){return this._isActivelyListening}get scheduleCount(){return this._scheduleCount}maybeScheduleEffect(){if(this._isActivelyListening&&this.lastReactedEpoch!==ta()){if(this.parents.length&&!T2(this)){this.lastReactedEpoch=ta();return}this.scheduleEffect()}}scheduleEffect(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}attach(){this._isActivelyListening=!0;for(let e=0,t=this.parents.length;e<t;e++)bP(this.parents[e],this)}detach(){this._isActivelyListening=!1;for(let e=0,t=this.parents.length;e<t;e++)Jw(this.parents[e],this)}execute(){try{M2(this);const e=ta(),t=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=e,t}finally{A2()}}}const Cg=rf("EffectScheduler",()=>jX);function Kl(n,e,t){const r=new Cg(n,e,t);return r.attach(),r.scheduleEffect(),()=>{r.detach()}}function LX(n,e,t){const r=new Cg(n,e,t);return{scheduler:r,start:i=>{const s=(i==null?void 0:i.force)??!1;r.attach(),s?r.scheduleEffect():r.maybeScheduleEffect()},stop:()=>{r.detach()}}}class NX{constructor(e){U(this,"initialAtomValues",new Map);this.parent=e}get isRoot(){return this.parent===null}commit(){if(Zn.globalIsReacting)for(const e of this.initialAtomValues.keys())O2(e);else this.isRoot?D2(this.initialAtomValues.keys()):this.initialAtomValues.forEach((e,t)=>{this.parent.initialAtomValues.has(t)||this.parent.initialAtomValues.set(t,e)})}abort(){Zn.globalEpoch++,this.initialAtomValues.forEach((e,t)=>{var r;t.set(e),(r=t.historyBuffer)==null||r.clear()}),this.commit()}}const Zn=rf("transactions",()=>({globalEpoch:of+1,globalIsReacting:!1,currentTransaction:null,cleanupReactors:null,reactionEpoch:of+1}));function FX(){return Zn.reactionEpoch}function ta(){return Zn.globalEpoch}function zX(){return Zn.globalIsReacting}function CP(n,e){e.lastTraversedEpoch!==Zn.globalEpoch&&(e.lastTraversedEpoch=Zn.globalEpoch,e instanceof Cg?n.add(e):e.children.visit(t=>CP(n,t)))}function D2(n){var t;if(Zn.globalIsReacting)throw new Error("flushChanges cannot be called during a reaction");const e=Zn.currentTransaction;try{Zn.currentTransaction=null,Zn.globalIsReacting=!0,Zn.reactionEpoch=Zn.globalEpoch;const r=new Set;for(const s of n)s.children.visit(l=>CP(r,l));for(const s of r)s.maybeScheduleEffect();let i=0;for(;(t=Zn.cleanupReactors)!=null&&t.size;){if(i++>1e3)throw new Error("Reaction update depth limit exceeded");const s=Zn.cleanupReactors;Zn.cleanupReactors=null;for(const l of s)l.maybeScheduleEffect()}}finally{Zn.cleanupReactors=null,Zn.globalIsReacting=!1,Zn.currentTransaction=e}}function UX(n,e){Zn.currentTransaction?Zn.currentTransaction.initialAtomValues.has(n)||Zn.currentTransaction.initialAtomValues.set(n,e):Zn.globalIsReacting?O2(n):D2([n])}function O2(n){const e=Zn.cleanupReactors??(Zn.cleanupReactors=new Set);n.children.visit(t=>CP(e,t))}function $X(){Zn.globalEpoch++}function BX(n){const e=new NX(Zn.currentTransaction);Zn.currentTransaction=e;try{let t,r=!1;try{t=n(()=>r=!0)}catch(i){throw e.abort(),i}return r?e.abort():e.commit(),t}finally{Zn.currentTransaction=Zn.currentTransaction.parent}}function cl(n){return Zn.currentTransaction?n():BX(n)}class HX{constructor(e,t,r){U(this,"isEqual");U(this,"computeDiff");U(this,"lastChangedEpoch",ta());U(this,"children",new eb);U(this,"historyBuffer");this.name=e,this.current=t,this.isEqual=(r==null?void 0:r.isEqual)??null,r&&(r.historyLength&&(this.historyBuffer=new R2(r.historyLength)),this.computeDiff=r.computeDiff)}__unsafe__getWithoutCapture(e){return this.current}get(){return nb(this),this.current}set(e,t){var i,s;if(((i=this.isEqual)==null?void 0:i.call(this,this.current,e))??I2(this.current,e))return this.current;$X(),this.historyBuffer&&this.historyBuffer.pushEntry(this.lastChangedEpoch,ta(),t??((s=this.computeDiff)==null?void 0:s.call(this,this.current,e,this.lastChangedEpoch,ta()))??Ma),this.lastChangedEpoch=ta();const r=this.current;return this.current=e,UX(this,r),e}update(e){return this.set(e(this.current))}getDiffSince(e){var t;return nb(this),e>=this.lastChangedEpoch?Bu:((t=this.historyBuffer)==null?void 0:t.getChangesSince(e))??Ma}}const j2=rf("Atom",()=>HX);function si(n,e,t){return new j2(n,e,t)}let L2=!1;function VX(){L2||(L2=!0,console.warn(`Using \`@computed\` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use \`@computed\` as a decorator for methods.

// Before
@computed
get foo() {
	return 'foo'
}

// After
@computed
getFoo() {
	return 'foo'
}
`))}const fv=Symbol.for("com.tldraw.state/UNINITIALIZED");function Nh(n){return n===fv}const EP=rf("WithDiff",()=>class{constructor(e,t){this.value=e,this.diff=t}});function hv(n,e){return new EP(n,e)}class KX{constructor(e,t,r){U(this,"lastChangedEpoch",of);U(this,"lastTraversedEpoch",of);U(this,"lastCheckedEpoch",of);U(this,"parentSet",new eb);U(this,"parents",[]);U(this,"parentEpochs",[]);U(this,"children",new eb);U(this,"historyBuffer");U(this,"state",fv);U(this,"error",null);U(this,"computeDiff");U(this,"isEqual");this.name=e,this.derive=t,r!=null&&r.historyLength&&(this.historyBuffer=new R2(r.historyLength)),this.computeDiff=r==null?void 0:r.computeDiff,this.isEqual=(r==null?void 0:r.isEqual)??I2}get isActivelyListening(){return!this.children.isEmpty}__unsafe__getWithoutCapture(e){var i;const t=this.lastChangedEpoch===of,r=ta();if(!t&&(this.lastCheckedEpoch===r||this.isActivelyListening&&zX()&&this.lastTraversedEpoch<FX()||!T2(this)))if(this.lastCheckedEpoch=r,this.error){if(e)return this.state;throw this.error.thrownValue}else return this.state;try{M2(this);const s=this.derive(this.state,this.lastCheckedEpoch),l=s instanceof EP?s.value:s,c=this.state===fv;if(c||!this.isEqual(l,this.state)){if(this.historyBuffer&&!c){const d=s instanceof EP?s.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,ta(),d??((i=this.computeDiff)==null?void 0:i.call(this,this.state,l,this.lastCheckedEpoch,ta()))??Ma)}this.lastChangedEpoch=ta(),this.state=l}return this.error=null,this.lastCheckedEpoch=ta(),this.state}catch(s){if(this.state!==fv&&(this.state=fv,this.lastChangedEpoch=ta()),this.lastCheckedEpoch=ta(),this.historyBuffer&&this.historyBuffer.clear(),this.error={thrownValue:s},!e)throw s;return this.state}finally{A2()}}get(){try{return this.__unsafe__getWithoutCapture()}finally{nb(this)}}getDiffSince(e){var t;return this.__unsafe__getWithoutCapture(!0),nb(this),e>=this.lastChangedEpoch?Bu:((t=this.historyBuffer)==null?void 0:t.getChangesSince(e))??Ma}}const pv=rf("Computed",()=>KX);function WX(n={},e,t,r){const i=r.value,s=Symbol.for("__@tldraw/state__computed__"+t);return r.value=function(){let l=this[s];return l||(l=new pv(t,i.bind(this),n),Object.defineProperty(this,s,{enumerable:!1,configurable:!1,writable:!1,value:l})),l.get()},r.value[F2]=!0,r}function GX(n={},e,t,r){const i=r.get,s=Symbol.for("__@tldraw/state__computed__"+t);return r.get=function(){let l=this[s];return l||(l=new pv(t,i.bind(this),n),Object.defineProperty(this,s,{enumerable:!1,configurable:!1,writable:!1,value:l})),l.get()},r}function qX(n,e,t){rn(t.kind==="method","@computed can only be used on methods");const r=Symbol.for("__@tldraw/state__computed__"+String(t.name)),i=function(){let s=this[r];return s||(s=new pv(String(t.name),e.bind(this),n),Object.defineProperty(this,r,{enumerable:!1,configurable:!1,writable:!1,value:s})),s.get()};return i[F2]=!0,i}function N2(n={},e){if(e.length===2){const[t,r]=e;return qX(n,t,r)}else{const[t,r,i]=e;return i.get?(VX(),GX(n,t,r,i)):WX(n,t,r,i)}}const F2="@@__isComputedMethod__@@";function Le(){if(arguments.length===1){const n=arguments[0];return(...e)=>N2(n,e)}else return typeof arguments[0]=="string"?new pv(arguments[0],arguments[1],arguments[2]):N2(void 0,arguments)}function YX(n){return n instanceof j2||n instanceof pv}const z2=1;if(rf("apiVersion",()=>z2)!==z2)throw new Error("You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.");Oc("@tldraw/state","3.7.0","esm");const XX=1024*1024/4;function ZX(n,e=XX){if(n.length<e)return[n];{const t=[];let r=0,i=n.length;for(;i>0;){const s=`${r}_`,l=Math.max(Math.min(e-s.length,i),1);t.unshift(s+n.slice(i-l,i)),i-=l,r++}return t}}class rb{constructor(e){U(this,"nextValue");U(this,"diff");this.previousValue=e}get(){var r,i,s,l;const e=((i=(r=this.diff)==null?void 0:r.removed)==null?void 0:i.size)??0,t=((l=(s=this.diff)==null?void 0:s.added)==null?void 0:l.size)??0;if(!(e===0&&t===0))return{value:this.nextValue,diff:this.diff}}_add(e,t){var r,i;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.add(e),this.diff??(this.diff={}),t?(r=this.diff.removed)==null||r.delete(e):((i=this.diff).added??(i.added=new Set),this.diff.added.add(e))}add(e){var i,s,l;const t=this.previousValue.has(e);if(t)return((s=(i=this.diff)==null?void 0:i.removed)==null?void 0:s.has(e))?this._add(e,t):void 0;(l=this.nextValue)!=null&&l.has(e)||this._add(e,t)}_remove(e,t){var r,i;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(e),this.diff??(this.diff={}),t?((r=this.diff).removed??(r.removed=new Set),this.diff.removed.add(e)):(i=this.diff.added)==null||i.delete(e)}remove(e){var i,s,l,c;const t=this.previousValue.has(e);if(!t)return((s=(i=this.diff)==null?void 0:i.added)==null?void 0:s.has(e))?this._remove(e,t):void 0;(c=(l=this.diff)==null?void 0:l.removed)!=null&&c.has(e)||this._remove(e,t)}}class ib{constructor(e,t){U(this,"createDefaultProperties");U(this,"validator");U(this,"ephemeralKeys");U(this,"ephemeralKeySet");U(this,"scope");this.typeName=e,this.createDefaultProperties=t.createDefaultProperties,this.validator=t.validator??{validate:i=>i},this.scope=t.scope??"document",this.ephemeralKeys=t.ephemeralKeys;const r=new Set;if(t.ephemeralKeys)for(const[i,s]of vo(t.ephemeralKeys))s&&r.add(i);this.ephemeralKeySet=r}create(e){const t={...this.createDefaultProperties(),id:this.createId()};for(const[r,i]of Object.entries(e))i!==void 0&&(t[r]=i);return t.typeName=this.typeName,t}clone(e){return{...Lr(e),id:this.createId()}}createId(e){return this.typeName+":"+(e??nr())}createCustomId(e){return this.typeName+":"+e}parseId(e){if(!this.isId(e))throw new Error(`ID "${e}" is not a valid ID for type "${this.typeName}"`);return e.slice(this.typeName.length+1)}isInstance(e){return(e==null?void 0:e.typeName)===this.typeName}isId(e){if(!e)return!1;for(let t=0;t<this.typeName.length;t++)if(e[t]!==this.typeName[t])return!1;return e[this.typeName.length]===":"}withDefaultProperties(e){return new ib(this.typeName,{createDefaultProperties:e,validator:this.validator,scope:this.scope,ephemeralKeys:this.ephemeralKeys})}validate(e,t){return t&&this.validator.validateUsingKnownGoodVersion?this.validator.validateUsingKnownGoodVersion(t,e):this.validator.validate(e)}}function Uc(n,e){return new ib(n,{createDefaultProperties:()=>({}),validator:e.validator,scope:e.scope,ephemeralKeys:e.ephemeralKeys})}function ob(){return{added:{},updated:{},removed:{}}}function gv(n){const e={added:n.removed,removed:n.added,updated:{}};for(const[t,r]of Object.values(n.updated))e.updated[t.id]=[r,t];return e}function U2(n){return Object.keys(n.added).length===0&&Object.keys(n.updated).length===0&&Object.keys(n.removed).length===0}function sb(n){const e={added:{},removed:{},updated:{}};return mv(e,n),e}function mv(n,e){for(const t of e){for(const[r,i]of vo(t.added))if(n.removed[r]){const s=n.removed[r];delete n.removed[r],s!==i&&(n.updated[r]=[s,i])}else n.added[r]=i;for(const[r,[i,s]]of vo(t.updated)){if(n.added[r]){n.added[r]=s,delete n.updated[r],delete n.removed[r];continue}if(n.updated[r]){n.updated[r]=[n.updated[r][0],s],delete n.removed[r];continue}n.updated[r]=t.updated[r],delete n.removed[r]}for(const[r,i]of vo(t.removed))n.added[r]?delete n.added[r]:n.updated[r]?(n.removed[r]=n.updated[r][0],delete n.updated[r]):n.removed[r]=i}}var yv={exports:{}};yv.exports;var $2;function QX(){return $2||($2=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,c="[object Arguments]",d="[object Array]",h="[object AsyncFunction]",g="[object Boolean]",y="[object Date]",v="[object Error]",w="[object Function]",C="[object GeneratorFunction]",E="[object Map]",P="[object Number]",I="[object Null]",k="[object Object]",L="[object Promise]",O="[object Proxy]",z="[object RegExp]",F="[object Set]",H="[object String]",V="[object Symbol]",re="[object Undefined]",q="[object WeakMap]",J="[object ArrayBuffer]",ie="[object DataView]",W="[object Float32Array]",Y="[object Float64Array]",oe="[object Int8Array]",le="[object Int16Array]",ce="[object Int32Array]",Q="[object Uint8Array]",he="[object Uint8ClampedArray]",ke="[object Uint16Array]",te="[object Uint32Array]",me=/[\\^$.*+?()[\]{}|]/g,Oe=/^\[object .+?Constructor\]$/,Ze=/^(?:0|[1-9]\d*)$/,De={};De[W]=De[Y]=De[oe]=De[le]=De[ce]=De[Q]=De[he]=De[ke]=De[te]=!0,De[c]=De[d]=De[J]=De[g]=De[ie]=De[y]=De[v]=De[w]=De[E]=De[P]=De[k]=De[z]=De[F]=De[H]=De[q]=!1;var yt=typeof $i=="object"&&$i&&$i.Object===Object&&$i,ot=typeof self=="object"&&self&&self.Object===Object&&self,We=yt||ot||Function("return this")(),Qe=e&&!e.nodeType&&e,gt=Qe&&!0&&n&&!n.nodeType&&n,Pt=gt&&gt.exports===Qe,yn=Pt&&yt.process,Zt=function(){try{return yn&&yn.binding&&yn.binding("util")}catch{}}(),an=Zt&&Zt.isTypedArray;function ln(Z,pe){for(var ze=-1,ct=Z==null?0:Z.length,Fn=0,Lt=[];++ze<ct;){var rr=Z[ze];pe(rr,ze,Z)&&(Lt[Fn++]=rr)}return Lt}function Yt(Z,pe){for(var ze=-1,ct=pe.length,Fn=Z.length;++ze<ct;)Z[Fn+ze]=pe[ze];return Z}function Yn(Z,pe){for(var ze=-1,ct=Z==null?0:Z.length;++ze<ct;)if(pe(Z[ze],ze,Z))return!0;return!1}function br(Z,pe){for(var ze=-1,ct=Array(Z);++ze<Z;)ct[ze]=pe(ze);return ct}function Wr(Z){return function(pe){return Z(pe)}}function kr(Z,pe){return Z.has(pe)}function Cr(Z,pe){return Z==null?void 0:Z[pe]}function Gr(Z){var pe=-1,ze=Array(Z.size);return Z.forEach(function(ct,Fn){ze[++pe]=[Fn,ct]}),ze}function qr(Z,pe){return function(ze){return Z(pe(ze))}}function li(Z){var pe=-1,ze=Array(Z.size);return Z.forEach(function(ct){ze[++pe]=ct}),ze}var ko=Array.prototype,Rr=Function.prototype,Mr=Object.prototype,Jr=We["__core-js_shared__"],ss=Rr.toString,Ee=Mr.hasOwnProperty,ve=function(){var Z=/[^.]+$/.exec(Jr&&Jr.keys&&Jr.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),$e=Mr.toString,mt=RegExp("^"+ss.call(Ee).replace(me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cn=Pt?We.Buffer:void 0,vn=We.Symbol,Xn=We.Uint8Array,Dn=Mr.propertyIsEnumerable,ar=ko.splice,bn=vn?vn.toStringTag:void 0,Sn=Object.getOwnPropertySymbols,hn=cn?cn.isBuffer:void 0,Ii=qr(Object.keys,Object),lo=pa(We,"DataView"),ki=pa(We,"Map"),As=pa(We,"Promise"),Ka=pa(We,"Set"),Wa=pa(We,"WeakMap"),Ro=pa(Object,"create"),sc=$r(lo),ha=$r(ki),Mo=$r(As),Ci=$r(Ka),Ao=$r(Wa),Vi=vn?vn.prototype:void 0,as=Vi?Vi.valueOf:void 0;function Ri(Z){var pe=-1,ze=Z==null?0:Z.length;for(this.clear();++pe<ze;){var ct=Z[pe];this.set(ct[0],ct[1])}}function Ga(){this.__data__=Ro?Ro(null):{},this.size=0}function se(Z){var pe=this.has(Z)&&delete this.__data__[Z];return this.size-=pe?1:0,pe}function Ue(Z){var pe=this.__data__;if(Ro){var ze=pe[Z];return ze===r?void 0:ze}return Ee.call(pe,Z)?pe[Z]:void 0}function tt(Z){var pe=this.__data__;return Ro?pe[Z]!==void 0:Ee.call(pe,Z)}function rt(Z,pe){var ze=this.__data__;return this.size+=this.has(Z)?0:1,ze[Z]=Ro&&pe===void 0?r:pe,this}Ri.prototype.clear=Ga,Ri.prototype.delete=se,Ri.prototype.get=Ue,Ri.prototype.has=tt,Ri.prototype.set=rt;function $t(Z){var pe=-1,ze=Z==null?0:Z.length;for(this.clear();++pe<ze;){var ct=Z[pe];this.set(ct[0],ct[1])}}function Vt(){this.__data__=[],this.size=0}function un(Z){var pe=this.__data__,ze=ac(pe,Z);if(ze<0)return!1;var ct=pe.length-1;return ze==ct?pe.pop():ar.call(pe,ze,1),--this.size,!0}function en(Z){var pe=this.__data__,ze=ac(pe,Z);return ze<0?void 0:pe[ze][1]}function Ur(Z){return ac(this.__data__,Z)>-1}function lr(Z,pe){var ze=this.__data__,ct=ac(ze,Z);return ct<0?(++this.size,ze.push([Z,pe])):ze[ct][1]=pe,this}$t.prototype.clear=Vt,$t.prototype.delete=un,$t.prototype.get=en,$t.prototype.has=Ur,$t.prototype.set=lr;function zn(Z){var pe=-1,ze=Z==null?0:Z.length;for(this.clear();++pe<ze;){var ct=Z[pe];this.set(ct[0],ct[1])}}function Mi(){this.size=0,this.__data__={hash:new Ri,map:new(ki||$t),string:new Ri}}function Ds(Z){var pe=dn(this,Z).delete(Z);return this.size-=pe?1:0,pe}function Un(Z){return dn(this,Z).get(Z)}function Sr(Z){return dn(this,Z).has(Z)}function Gt(Z,pe){var ze=dn(this,Z),ct=ze.size;return ze.set(Z,pe),this.size+=ze.size==ct?0:1,this}zn.prototype.clear=Mi,zn.prototype.delete=Ds,zn.prototype.get=Un,zn.prototype.has=Sr,zn.prototype.set=Gt;function Do(Z){var pe=-1,ze=Z==null?0:Z.length;for(this.__data__=new zn;++pe<ze;)this.add(Z[pe])}function qa(Z){return this.__data__.set(Z,r),this}function jf(Z){return this.__data__.has(Z)}Do.prototype.add=Do.prototype.push=qa,Do.prototype.has=jf;function Ai(Z){var pe=this.__data__=new $t(Z);this.size=pe.size}function Cl(){this.__data__=new $t,this.size=0}function co(Z){var pe=this.__data__,ze=pe.delete(Z);return this.size=pe.size,ze}function fd(Z){return this.__data__.get(Z)}function Ki(Z){return this.__data__.has(Z)}function hd(Z,pe){var ze=this.__data__;if(ze instanceof $t){var ct=ze.__data__;if(!ki||ct.length<t-1)return ct.push([Z,pe]),this.size=++ze.size,this;ze=this.__data__=new zn(ct)}return ze.set(Z,pe),this.size=ze.size,this}Ai.prototype.clear=Cl,Ai.prototype.delete=co,Ai.prototype.get=fd,Ai.prototype.has=Ki,Ai.prototype.set=hd;function Lf(Z,pe){var ze=$n(Z),ct=!ze&&Ar(Z),Fn=!ze&&!ct&&fo(Z),Lt=!ze&&!ct&&!Fn&&dc(Z),rr=ze||ct||Fn||Lt,Dr=rr?br(Z.length,String):[],Qn=Dr.length;for(var Jn in Z)Ee.call(Z,Jn)&&!(rr&&(Jn=="length"||Fn&&(Jn=="offset"||Jn=="parent")||Lt&&(Jn=="buffer"||Jn=="byteLength"||Jn=="byteOffset")||ga(Jn,Qn)))&&Dr.push(Jn);return Dr}function ac(Z,pe){for(var ze=Z.length;ze--;)if(Ls(Z[ze][0],pe))return ze;return-1}function Ya(Z,pe,ze){var ct=pe(Z);return $n(Z)?ct:Yt(ct,ze(Z))}function ls(Z){return Z==null?Z===void 0?re:I:bn&&bn in Object(Z)?au(Z):uo(Z)}function Wi(Z){return Fs(Z)&&ls(Z)==c}function Os(Z,pe,ze,ct,Fn){return Z===pe?!0:Z==null||pe==null||!Fs(Z)&&!Fs(pe)?Z!==Z&&pe!==pe:El(Z,pe,ze,ct,Os,Fn)}function El(Z,pe,ze,ct,Fn,Lt){var rr=$n(Z),Dr=$n(pe),Qn=rr?d:js(Z),Jn=Dr?d:js(pe);Qn=Qn==c?k:Qn,Jn=Jn==c?k:Jn;var B=Qn==k,ne=Jn==k,ge=Qn==Jn;if(ge&&fo(Z)){if(!fo(pe))return!1;rr=!0,B=!1}if(ge&&!B)return Lt||(Lt=new Ai),rr||dc(Z)?_l(Z,pe,ze,ct,Fn,Lt):Pl(Z,pe,Qn,ze,ct,Fn,Lt);if(!(ze&i)){var Re=B&&Ee.call(Z,"__wrapped__"),Ve=ne&&Ee.call(pe,"__wrapped__");if(Re||Ve){var st=Re?Z.value():Z,Je=Ve?pe.value():pe;return Lt||(Lt=new Ai),Fn(st,Je,ze,ct,Lt)}}return ge?(Lt||(Lt=new Ai),pd(Z,pe,ze,ct,Fn,Lt)):!1}function ou(Z){if(!uc(Z)||cc(Z))return!1;var pe=Oi(Z)?mt:Oe;return pe.test($r(Z))}function Xa(Z){return Fs(Z)&&Nf(Z.length)&&!!De[ls(Z)]}function lc(Z){if(!ci(Z))return Ii(Z);var pe=[];for(var ze in Object(Z))Ee.call(Z,ze)&&ze!="constructor"&&pe.push(ze);return pe}function _l(Z,pe,ze,ct,Fn,Lt){var rr=ze&i,Dr=Z.length,Qn=pe.length;if(Dr!=Qn&&!(rr&&Qn>Dr))return!1;var Jn=Lt.get(Z);if(Jn&&Lt.get(pe))return Jn==pe;var B=-1,ne=!0,ge=ze&s?new Do:void 0;for(Lt.set(Z,pe),Lt.set(pe,Z);++B<Dr;){var Re=Z[B],Ve=pe[B];if(ct)var st=rr?ct(Ve,Re,B,pe,Z,Lt):ct(Re,Ve,B,Z,pe,Lt);if(st!==void 0){if(st)continue;ne=!1;break}if(ge){if(!Yn(pe,function(Je,kt){if(!kr(ge,kt)&&(Re===Je||Fn(Re,Je,ze,ct,Lt)))return ge.push(kt)})){ne=!1;break}}else if(!(Re===Ve||Fn(Re,Ve,ze,ct,Lt))){ne=!1;break}}return Lt.delete(Z),Lt.delete(pe),ne}function Pl(Z,pe,ze,ct,Fn,Lt,rr){switch(ze){case ie:if(Z.byteLength!=pe.byteLength||Z.byteOffset!=pe.byteOffset)return!1;Z=Z.buffer,pe=pe.buffer;case J:return!(Z.byteLength!=pe.byteLength||!Lt(new Xn(Z),new Xn(pe)));case g:case y:case P:return Ls(+Z,+pe);case v:return Z.name==pe.name&&Z.message==pe.message;case z:case H:return Z==pe+"";case E:var Dr=Gr;case F:var Qn=ct&i;if(Dr||(Dr=li),Z.size!=pe.size&&!Qn)return!1;var Jn=rr.get(Z);if(Jn)return Jn==pe;ct|=s,rr.set(Z,pe);var B=_l(Dr(Z),Dr(pe),ct,Fn,Lt,rr);return rr.delete(Z),B;case V:if(as)return as.call(Z)==as.call(pe)}return!1}function pd(Z,pe,ze,ct,Fn,Lt){var rr=ze&i,Dr=su(Z),Qn=Dr.length,Jn=su(pe),B=Jn.length;if(Qn!=B&&!rr)return!1;for(var ne=Qn;ne--;){var ge=Dr[ne];if(!(rr?ge in pe:Ee.call(pe,ge)))return!1}var Re=Lt.get(Z);if(Re&&Lt.get(pe))return Re==pe;var Ve=!0;Lt.set(Z,pe),Lt.set(pe,Z);for(var st=rr;++ne<Qn;){ge=Dr[ne];var Je=Z[ge],kt=pe[ge];if(ct)var Qt=rr?ct(kt,Je,ge,pe,Z,Lt):ct(Je,kt,ge,Z,pe,Lt);if(!(Qt===void 0?Je===kt||Fn(Je,kt,ze,ct,Lt):Qt)){Ve=!1;break}st||(st=ge=="constructor")}if(Ve&&!st){var On=Z.constructor,Bn=pe.constructor;On!=Bn&&"constructor"in Z&&"constructor"in pe&&!(typeof On=="function"&&On instanceof On&&typeof Bn=="function"&&Bn instanceof Bn)&&(Ve=!1)}return Lt.delete(Z),Lt.delete(pe),Ve}function su(Z){return Ya(Z,lu,Cn)}function dn(Z,pe){var ze=Z.__data__;return Bt(pe)?ze[typeof pe=="string"?"string":"hash"]:ze.map}function pa(Z,pe){var ze=Cr(Z,pe);return ou(ze)?ze:void 0}function au(Z){var pe=Ee.call(Z,bn),ze=Z[bn];try{Z[bn]=void 0;var ct=!0}catch{}var Fn=$e.call(Z);return ct&&(pe?Z[bn]=ze:delete Z[bn]),Fn}var Cn=Sn?function(Z){return Z==null?[]:(Z=Object(Z),ln(Sn(Z),function(pe){return Dn.call(Z,pe)}))}:fc,js=ls;(lo&&js(new lo(new ArrayBuffer(1)))!=ie||ki&&js(new ki)!=E||As&&js(As.resolve())!=L||Ka&&js(new Ka)!=F||Wa&&js(new Wa)!=q)&&(js=function(Z){var pe=ls(Z),ze=pe==k?Z.constructor:void 0,ct=ze?$r(ze):"";if(ct)switch(ct){case sc:return ie;case ha:return E;case Mo:return L;case Ci:return F;case Ao:return q}return pe});function ga(Z,pe){return pe=pe??l,!!pe&&(typeof Z=="number"||Ze.test(Z))&&Z>-1&&Z%1==0&&Z<pe}function Bt(Z){var pe=typeof Z;return pe=="string"||pe=="number"||pe=="symbol"||pe=="boolean"?Z!=="__proto__":Z===null}function cc(Z){return!!ve&&ve in Z}function ci(Z){var pe=Z&&Z.constructor,ze=typeof pe=="function"&&pe.prototype||Mr;return Z===ze}function uo(Z){return $e.call(Z)}function $r(Z){if(Z!=null){try{return ss.call(Z)}catch{}try{return Z+""}catch{}}return""}function Ls(Z,pe){return Z===pe||Z!==Z&&pe!==pe}var Ar=Wi(function(){return arguments}())?Wi:function(Z){return Fs(Z)&&Ee.call(Z,"callee")&&!Dn.call(Z,"callee")},$n=Array.isArray;function Ns(Z){return Z!=null&&Nf(Z.length)&&!Oi(Z)}var fo=hn||cs;function Di(Z,pe){return Os(Z,pe)}function Oi(Z){if(!uc(Z))return!1;var pe=ls(Z);return pe==w||pe==C||pe==h||pe==O}function Nf(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=l}function uc(Z){var pe=typeof Z;return Z!=null&&(pe=="object"||pe=="function")}function Fs(Z){return Z!=null&&typeof Z=="object"}var dc=an?Wr(an):Xa;function lu(Z){return Ns(Z)?Lf(Z):lc(Z)}function fc(){return[]}function cs(){return!1}n.exports=Di}(yv,yv.exports)),yv.exports}var JX=QX();const sf=ef(JX);function eZ(n){if(n.length===0)return new Set;const e=n[0],t=n.slice(1),r=new Set;for(const i of e)t.every(s=>s.has(i))&&r.add(i);return r}function tZ(n,e){const t={};for(const r of e)n.has(r)||(t.added??(t.added=new Set),t.added.add(r));for(const r of n)e.has(r)||(t.removed??(t.removed=new Set),t.removed.add(r));return t.added||t.removed?t:void 0}function B2(n,e){for(const[t,r]of Object.entries(n)){const i=r,s=e[t];if("eq"in i&&s!==i.eq||"neq"in i&&s===i.neq||"gt"in i&&(typeof s!="number"||s<=i.gt))return!1}return!0}function H2(n,e,t){const r=Object.fromEntries(Object.keys(t).map(i=>[i,new Set]));for(const[i,s]of Object.entries(t))if("eq"in s){const c=n.index(e,i).get().get(s.eq);if(c)for(const d of c)r[i].add(d)}else if("neq"in s){const l=n.index(e,i);for(const[c,d]of l.get())if(c!==s.neq)for(const h of d)r[i].add(h)}else if("gt"in s){const l=n.index(e,i);for(const[c,d]of l.get())if(c>s.gt)for(const h of d)r[i].add(h)}return eZ(Object.values(r))}class nZ{constructor(e,t){U(this,"indexCache",new Map);U(this,"historyCache",new Map);this.atoms=e,this.history=t}filterHistory(e){if(this.historyCache.has(e))return this.historyCache.get(e);const t=Le("filterHistory:"+e,(r,i)=>{if(Nh(r))return this.history.get();const s=this.history.getDiffSince(i);if(s===Ma)return this.history.get();const l={added:{},removed:{},updated:{}};let c=0,d=0,h=0;for(const g of s){for(const y of Hr(g.added))if(y.typeName===e)if(l.removed[y.id]){const v=l.removed[y.id];delete l.removed[y.id],d--,v!==y&&(l.updated[y.id]=[v,y],h++)}else l.added[y.id]=y,c++;for(const[y,v]of Hr(g.updated))v.typeName===e&&(l.added[v.id]?l.added[v.id]=v:l.updated[v.id]?l.updated[v.id]=[l.updated[v.id][0],v]:(l.updated[v.id]=[y,v],h++));for(const y of Hr(g.removed))y.typeName===e&&(l.added[y.id]?(delete l.added[y.id],c--):l.updated[y.id]?(l.removed[y.id]=l.updated[y.id][0],delete l.updated[y.id],h--,d++):(l.removed[y.id]=y,d++))}return c||d||h?hv(this.history.get(),l):r},{historyLength:100});return this.historyCache.set(e,t),t}index(e,t){const r=e+":"+t;if(this.indexCache.has(r))return this.indexCache.get(r);const i=this.__uncached_createIndex(e,t);return this.indexCache.set(r,i),i}__uncached_createIndex(e,t){const r=this.filterHistory(e),i=()=>{r.get();const s=new Map;for(const l of Hr(this.atoms.get())){const c=l.get();if(c.typeName===e){const d=c[t];s.has(d)||s.set(d,new Set),s.get(d).add(c.id)}}return s};return Le("index:"+e+":"+t,(s,l)=>{if(Nh(s))return i();const c=r.getDiffSince(l);if(c===Ma)return i();const d=new Map,h=(w,C)=>{let E=d.get(w);E||(E=new rb(s.get(w)??new Set)),E.add(C),d.set(w,E)},g=(w,C)=>{let E=d.get(w);E||(E=new rb(s.get(w)??new Set)),E.remove(C),d.set(w,E)};for(const w of c){for(const C of Hr(w.added))if(C.typeName===e){const E=C[t];h(E,C.id)}for(const[C,E]of Hr(w.updated))if(E.typeName===e){const P=C[t],I=E[t];P!==I&&(g(P,E.id),h(I,E.id))}for(const C of Hr(w.removed))if(C.typeName===e){const E=C[t];g(E,C.id)}}let y,v;for(const[w,C]of d){const E=C.get();E&&(y||(y=new Map(s)),v||(v=new Map),E.value.size===0?y.delete(w):y.set(w,E.value),v.set(w,E.diff))}return y&&v?hv(y,v):s},{historyLength:100})}record(e,t=()=>({}),r="record:"+e+(t?":"+t.toString():"")){const i=this.ids(e,t,r);return Le(r,()=>{var s;for(const l of i.get())return(s=this.atoms.get()[l])==null?void 0:s.get()})}records(e,t=()=>({}),r="records:"+e+(t?":"+t.toString():"")){const i=this.ids(e,t,"ids:"+r);return Le(r,()=>{const s=this.atoms.get();return[...i.get()].map(l=>{const c=s[l];if(!c)throw new Error("no atom found for record id: "+l);return c.get()})},{isEqual:VL})}ids(e,t=()=>({}),r="ids:"+e+(t?":"+t.toString():"")){const i=this.filterHistory(e),s=()=>{i.get();const d=t();return Object.keys(d).length===0?new Set(Hr(this.atoms.get()).flatMap(h=>{const g=h.get();return g.typeName===e?g.id:[]})):H2(this,e,d)},l=d=>{const h=s(),g=tZ(d,h);return g?hv(h,g):d},c=Le("ids_query:"+r,t,{isEqual:sf});return Le("query:"+r,(d,h)=>{const g=c.get();if(Nh(d))return s();if(h<c.lastChangedEpoch)return l(d);const y=i.getDiffSince(h);if(y===Ma)return l(d);const v=new rb(d);for(const C of y){for(const E of Hr(C.added))E.typeName===e&&B2(g,E)&&v.add(E.id);for(const[E,P]of Hr(C.updated))P.typeName===e&&(B2(g,P)?v.add(P.id):v.remove(P.id));for(const E of Hr(C.removed))E.typeName===e&&v.remove(E.id)}const w=v.get();return w?hv(w.value,w.diff):d},{historyLength:50})}exec(e,t){const r=H2(this,e,t);if(r.size===0)return Bu;const i=this.atoms.get();return[...r].map(s=>i[s].get())}}class rZ{constructor(e){U(this,"_beforeCreateHandlers",{});U(this,"_afterCreateHandlers",{});U(this,"_beforeChangeHandlers",{});U(this,"_afterChangeHandlers",{});U(this,"_beforeDeleteHandlers",{});U(this,"_afterDeleteHandlers",{});U(this,"_operationCompleteHandlers",[]);U(this,"_isEnabled",!0);this.store=e}isEnabled(){return this._isEnabled}setIsEnabled(e){this._isEnabled=e}handleBeforeCreate(e,t){if(!this._isEnabled)return e;const r=this._beforeCreateHandlers[e.typeName];if(r){let i=e;for(const s of r)i=s(i,t);return i}return e}handleAfterCreate(e,t){if(!this._isEnabled)return;const r=this._afterCreateHandlers[e.typeName];if(r)for(const i of r)i(e,t)}handleBeforeChange(e,t,r){if(!this._isEnabled)return t;const i=this._beforeChangeHandlers[t.typeName];if(i){let s=t;for(const l of i)s=l(e,s,r);return s}return t}handleAfterChange(e,t,r){if(!this._isEnabled)return;const i=this._afterChangeHandlers[t.typeName];if(i)for(const s of i)s(e,t,r)}handleBeforeDelete(e,t){if(!this._isEnabled)return!0;const r=this._beforeDeleteHandlers[e.typeName];if(r){for(const i of r)if(i(e,t)===!1)return!1}return!0}handleAfterDelete(e,t){if(!this._isEnabled)return;const r=this._afterDeleteHandlers[e.typeName];if(r)for(const i of r)i(e,t)}handleOperationComplete(e){if(this._isEnabled)for(const t of this._operationCompleteHandlers)t(e)}register(e){const t=[];for(const[r,i]of Object.entries(e))i!=null&&i.beforeCreate&&t.push(this.registerBeforeCreateHandler(r,i.beforeCreate)),i!=null&&i.afterCreate&&t.push(this.registerAfterCreateHandler(r,i.afterCreate)),i!=null&&i.beforeChange&&t.push(this.registerBeforeChangeHandler(r,i.beforeChange)),i!=null&&i.afterChange&&t.push(this.registerAfterChangeHandler(r,i.afterChange)),i!=null&&i.beforeDelete&&t.push(this.registerBeforeDeleteHandler(r,i.beforeDelete)),i!=null&&i.afterDelete&&t.push(this.registerAfterDeleteHandler(r,i.afterDelete));return()=>{for(const r of t)r()}}registerBeforeCreateHandler(e,t){return this._beforeCreateHandlers[e]||(this._beforeCreateHandlers[e]=[]),this._beforeCreateHandlers[e].push(t),()=>Fh(this._beforeCreateHandlers[e],t)}registerAfterCreateHandler(e,t){return this._afterCreateHandlers[e]||(this._afterCreateHandlers[e]=[]),this._afterCreateHandlers[e].push(t),()=>Fh(this._afterCreateHandlers[e],t)}registerBeforeChangeHandler(e,t){return this._beforeChangeHandlers[e]||(this._beforeChangeHandlers[e]=[]),this._beforeChangeHandlers[e].push(t),()=>Fh(this._beforeChangeHandlers[e],t)}registerAfterChangeHandler(e,t){return this._afterChangeHandlers[e]||(this._afterChangeHandlers[e]=[]),this._afterChangeHandlers[e].push(t),()=>Fh(this._afterChangeHandlers[e],t)}registerBeforeDeleteHandler(e,t){return this._beforeDeleteHandlers[e]||(this._beforeDeleteHandlers[e]=[]),this._beforeDeleteHandlers[e].push(t),()=>Fh(this._beforeDeleteHandlers[e],t)}registerAfterDeleteHandler(e,t){return this._afterDeleteHandlers[e]||(this._afterDeleteHandlers[e]=[]),this._afterDeleteHandlers[e].push(t),()=>Fh(this._afterDeleteHandlers[e],t)}registerOperationCompleteHandler(e){return this._operationCompleteHandlers.push(e),()=>Fh(this._operationCompleteHandlers,e)}}function Fh(n,e){const t=n.indexOf(e);t>=0&&n.splice(t,1)}var iZ={};function ab(n){if(iZ.NODE_ENV==="production")return n;const e=Object.getPrototypeOf(n);if(e&&!(Array.isArray(n)||e===Object.prototype||e===null||e===E2))throw console.error("cannot include non-js data in a record",n),new Error("cannot include non-js data in a record");const t=Object.getOwnPropertyNames(n);for(const r of t){const i=n[r];i&&typeof i=="object"&&ab(i)}return Object.freeze(n)}class _P{constructor(e){U(this,"id");U(this,"atoms",si("store_atoms",{}));U(this,"history",si("history",0,{historyLength:1e3}));U(this,"query",new nZ(this.atoms,this.history));U(this,"listeners",new Set);U(this,"historyAccumulator",new sZ);U(this,"historyReactor");U(this,"schema");U(this,"props");U(this,"scopedTypes");U(this,"sideEffects",new rZ(this));U(this,"isMergingRemoteChanges",!1);U(this,"_integrityChecker");U(this,"_isPossiblyCorrupted",!1);U(this,"pendingAfterEvents",null);U(this,"_isInAtomicOp",!1);const{initialData:t,schema:r,id:i}=e;this.id=i??nr(),this.schema=r,this.props=e.props,t&&this.atoms.set(cP(vo(t).map(([s,l])=>[s,si("atom:"+s,ab(this.schema.validateRecord(this,l,"initialize",null)))]))),this.historyReactor=LX("Store.historyReactor",()=>{this.history.get(),this._flushHistory()},{scheduleEffect:s=>this.cancelHistoryReactor=b2(s)}),this.scopedTypes={document:new Set(Hr(this.schema.types).filter(s=>s.scope==="document").map(s=>s.typeName)),session:new Set(Hr(this.schema.types).filter(s=>s.scope==="session").map(s=>s.typeName)),presence:new Set(Hr(this.schema.types).filter(s=>s.scope==="presence").map(s=>s.typeName))}}cancelHistoryReactor(){}_flushHistory(){if(this.historyAccumulator.hasChanges()){const e=this.historyAccumulator.flush();for(const{changes:t,source:r}of e){let i=null,s=null,l=null;for(const{onHistory:c,filters:d}of this.listeners)if(!(d.source!=="all"&&d.source!==r))if(d.scope!=="all")if(d.scope==="document"){if(s??(s=this.filterChangesByScope(t,"document")),!s)continue;c({changes:s,source:r})}else if(d.scope==="session"){if(i??(i=this.filterChangesByScope(t,"session")),!i)continue;c({changes:i,source:r})}else{if(l??(l=this.filterChangesByScope(t,"presence")),!l)continue;c({changes:l,source:r})}else c({changes:t,source:r})}}}dispose(){this.cancelHistoryReactor()}filterChangesByScope(e,t){const r={added:av(e.added,(i,s)=>this.scopedTypes[t].has(s.typeName)),updated:av(e.updated,(i,s)=>this.scopedTypes[t].has(s[1].typeName)),removed:av(e.removed,(i,s)=>this.scopedTypes[t].has(s.typeName))};return Object.keys(r.added).length===0&&Object.keys(r.updated).length===0&&Object.keys(r.removed).length===0?null:r}updateHistory(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),this.listeners.size===0&&this.historyAccumulator.clear(),this.history.set(this.history.get()+1,e)}validate(e){this.allRecords().forEach(t=>this.schema.validateRecord(this,t,e,null))}put(e,t){this.atomic(()=>{const r={},i={},s=this.atoms.__unsafe__getWithoutCapture();let l=null,c,d=!1;const h=this.isMergingRemoteChanges?"remote":"user";for(let g=0,y=e.length;g<y;g++){c=e[g];const v=(l??s)[c.id];if(v){const w=v.__unsafe__getWithoutCapture();if(c=this.sideEffects.handleBeforeChange(w,c,h),this.schema.validateRecord(this,c,t??"updateRecord",w)===w)continue;v.set(ab(c)),d=!0;const E=v.__unsafe__getWithoutCapture();r[c.id]=[w,E],this.addDiffForAfterEvent(w,E)}else c=this.sideEffects.handleBeforeCreate(c,h),d=!0,c=this.schema.validateRecord(this,c,t??"createRecord",null),i[c.id]=c,this.addDiffForAfterEvent(null,c),l||(l={...s}),l[c.id]=si("atom:"+c.id,c)}l&&this.atoms.set(l),d&&this.updateHistory({added:i,updated:r,removed:{}})})}remove(e){this.atomic(()=>{const t=new Set,r=this.isMergingRemoteChanges?"remote":"user";if(this.sideEffects.isEnabled())for(const s of e){const l=this.atoms.__unsafe__getWithoutCapture()[s];l&&this.sideEffects.handleBeforeDelete(l.get(),r)===!1&&t.add(s)}let i;this.atoms.update(s=>{let l;for(const c of e){if(t.has(c)||!(c in s))continue;l||(l={...s}),i||(i={}),delete l[c];const d=s[c].get();i[c]=d,this.addDiffForAfterEvent(d,null)}return l??s}),i&&this.updateHistory({added:{},updated:{},removed:i})})}get(e){var t;return(t=this.atoms.get()[e])==null?void 0:t.get()}unsafeGetWithoutCapture(e){var t;return(t=this.atoms.__unsafe__getWithoutCapture()[e])==null?void 0:t.__unsafe__getWithoutCapture()}serialize(e="document"){const t={};for(const[r,i]of vo(this.atoms.get())){const s=i.get();(e==="all"||this.scopedTypes[e].has(s.typeName))&&(t[r]=s)}return t}getStoreSnapshot(e="document"){return{store:this.serialize(e),schema:this.schema.serialize()}}getSnapshot(e="document"){return console.warn("[tldraw] `Store.getSnapshot` is deprecated and will be removed in a future release. Use `getSnapshot` from the `tldraw` package instead."),this.getStoreSnapshot(e)}migrateSnapshot(e){const t=this.schema.migrateStoreSnapshot(e);if(t.type==="error")throw new Error(`Failed to migrate snapshot: ${t.reason}`);return{store:t.value,schema:this.schema.serialize()}}loadStoreSnapshot(e){const t=this.schema.migrateStoreSnapshot(e);if(t.type==="error")throw new Error(`Failed to migrate snapshot: ${t.reason}`);const r=this.sideEffects.isEnabled();try{this.sideEffects.setIsEnabled(!1),this.atomic(()=>{this.clear(),this.put(Object.values(t.value)),this.ensureStoreIsUsable()})}finally{this.sideEffects.setIsEnabled(r)}}loadSnapshot(e){console.warn("[tldraw] `Store.loadSnapshot` is deprecated and will be removed in a future release. Use `loadSnapshot` from the 'tldraw' package instead."),this.loadStoreSnapshot(e)}allRecords(){return Hr(this.atoms.get()).map(e=>e.get())}clear(){this.remove(e2(this.atoms.get()))}update(e,t){const r=this.atoms.get()[e];if(!r){console.error(`Record ${e} not found. This is probably an error`);return}this.put([t(r.__unsafe__getWithoutCapture())])}has(e){return!!this.atoms.get()[e]}listen(e,t){this._flushHistory();const r={onHistory:e,filters:{source:(t==null?void 0:t.source)??"all",scope:(t==null?void 0:t.scope)??"all"}};return this.historyReactor.scheduler.isActivelyListening||(this.historyReactor.start(),this.historyReactor.scheduler.execute()),this.listeners.add(r),()=>{this.listeners.delete(r),this.listeners.size===0&&this.historyReactor.stop()}}mergeRemoteChanges(e){if(this.isMergingRemoteChanges)return e();if(this._isInAtomicOp)throw new Error("Cannot merge remote changes while in atomic operation");try{this.isMergingRemoteChanges=!0,cl(e)}finally{this.isMergingRemoteChanges=!1,this.ensureStoreIsUsable()}}extractingChanges(e){const t=[],r=this.historyAccumulator.addInterceptor(i=>t.push(i.changes));try{return cl(e),sb(t)}finally{r()}}applyDiff(e,{runCallbacks:t=!0,ignoreEphemeralKeys:r=!1}={}){this.atomic(()=>{const i=Hr(e.added);for(const[l,c]of Hr(e.updated)){const d=this.schema.getType(c.typeName);if(r&&d.ephemeralKeySet.size){const h=this.get(c.id);if(!h){i.push(c);continue}let g=null;for(const[y,v]of Object.entries(c))d.ephemeralKeySet.has(y)||Object.is(v,Wo(h,y))||(g||(g={...h}),g[y]=v);g&&i.push(g)}else i.push(c)}const s=e2(e.removed);i.length&&this.put(i),s.length&&this.remove(s)},t)}createComputedCache(e,t,r){const i=new jc;return{get:s=>{const l=this.atoms.get()[s];if(l)return i.get(l,()=>{const c=r?Le(l.name+":equals",()=>l.get(),{isEqual:r}):l;return Le(e+":"+s,()=>t(c.get()))}).get()}}}createSelectedComputedCache(e,t,r){const i=new jc;return{get:s=>{const l=this.atoms.get()[s];if(l)return i.get(l,()=>{const c=Le(e+":"+s+":selector",()=>t(l.get()));return Le(e+":"+s,()=>r(c.get()))}).get()}}}ensureStoreIsUsable(){this.atomic(()=>{var e;this._integrityChecker??(this._integrityChecker=this.schema.createIntegrityChecker(this)),(e=this._integrityChecker)==null||e.call(this)})}markAsPossiblyCorrupted(){this._isPossiblyCorrupted=!0}isPossiblyCorrupted(){return this._isPossiblyCorrupted}addDiffForAfterEvent(e,t){if(rn(this.pendingAfterEvents,"must be in event operation"),e===t||(e&&t&&rn(e.id===t.id),!e&&!t))return;const r=(e||t).id,i=this.pendingAfterEvents.get(r);i?i.after=t:this.pendingAfterEvents.set(r,{before:e,after:t})}flushAtomicCallbacks(){let e=0;const t=this.isMergingRemoteChanges?"remote":"user";for(;this.pendingAfterEvents;){const r=this.pendingAfterEvents;if(this.pendingAfterEvents=null,!!this.sideEffects.isEnabled()){if(e++,e>100)throw new Error("Maximum store update depth exceeded, bailing out");for(const{before:i,after:s}of r.values())i&&s?this.sideEffects.handleAfterChange(i,s,t):i&&!s?this.sideEffects.handleAfterDelete(i,t):!i&&s&&this.sideEffects.handleAfterCreate(s,t);this.pendingAfterEvents||this.sideEffects.handleOperationComplete(t)}}}atomic(e,t=!0){return cl(()=>{if(this._isInAtomicOp)return this.pendingAfterEvents||(this.pendingAfterEvents=new Map),e();this.pendingAfterEvents=new Map;const r=this.sideEffects.isEnabled();this.sideEffects.setIsEnabled(t??r),this._isInAtomicOp=!0;try{const i=e();return this.flushAtomicCallbacks(),i}finally{this.pendingAfterEvents=null,this.sideEffects.setIsEnabled(r),this._isInAtomicOp=!1}})}addHistoryInterceptor(e){return this.historyAccumulator.addInterceptor(t=>e(t,this.isMergingRemoteChanges?"remote":"user"))}}function oZ(n){if(n.length===0)return[];const e=[];let t=[n[0]],r;for(let i=1,s=n.length;i<s;i++)r=n[i],t[0].source!==r.source&&(e.push(t),t=[]),t.push(r);return e.push(t),ab(e.map(i=>({source:i[0].source,changes:sb(i.map(s=>s.changes))})))}class sZ{constructor(){U(this,"_history",[]);U(this,"_interceptors",new Set)}addInterceptor(e){return this._interceptors.add(e),()=>{this._interceptors.delete(e)}}add(e){this._history.push(e);for(const t of this._interceptors)t(e)}flush(){const e=oZ(this._history);return this._history=[],e}clear(){this._history=[]}hasChanges(){return this._history.length>0}}function aZ(n,e,t){const r=new jc;return{get(i,s){return r.get(i,()=>(i instanceof _P?i:i.store).createComputedCache(n,d=>e(i,d),t)).get(s)}}}function lZ(n){const e=[];for(let t=n.length-1;t>=0;t--){const r=n[t];if("id"in r)e.unshift(r);else{const i=r.dependsOn,s=e[0];s&&(e[0]={...s,dependsOn:i.concat(s.dependsOn??[])})}}return e}function Eg({sequence:n,sequenceId:e,retroactive:t=!0}){const r={sequenceId:e,retroactive:t,sequence:lZ(n)};return K2(r),r}function na(n,e){return Object.fromEntries(vo(e).map(([t,r])=>[t,`${n}/${r}`]))}function Aa(n){const e=n.sequenceId;return Eg({sequenceId:e,retroactive:n.retroactive??!0,sequence:n.sequence.map(t=>"id"in t?{...t,scope:"record",filter:r=>{var i,s;return r.typeName===n.recordType&&(((i=t.filter)==null?void 0:i.call(t,r))??!0)&&(((s=n.filter)==null?void 0:s.call(n,r))??!0)}}:t)})}function cZ(n){const e=new Map(n.map(s=>[s.id,s])),t=new Set,r=[];function i(s){rn(!t.has(s.id),`Circular dependency in migrations: ${s.id}`),t.add(s.id);const{version:l,sequenceId:c}=lb(s.id),d=e.get(`${c}/${l-1}`);if(d&&i(d),s.dependsOn)for(const h of s.dependsOn){const g=e.get(h);g&&i(g)}e.delete(s.id),r.push(s)}for(const s of e.values())i(s);return r}function lb(n){const[e,t]=n.split("/");return{sequenceId:e,version:parseInt(t)}}function V2(n,e){e&&rn(n.startsWith(e+"/"),`Every migration in sequence '${e}' must have an id starting with '${e}/'. Got invalid id: '${n}'`),rn(n.match(/^(.*?)\/(0|[1-9]\d*)$/),`Invalid migration id: '${n}'`)}function K2(n){if(rn(!n.sequenceId.includes("/"),`sequenceId cannot contain a '/', got ${n.sequenceId}`),rn(n.sequenceId.length,"sequenceId must be a non-empty string"),n.sequence.length===0)return;V2(n.sequence[0].id,n.sequenceId);let e=lb(n.sequence[0].id).version;rn(e===1,`Expected the first migrationId to be '${n.sequenceId}/1' but got '${n.sequence[0].id}'`);for(let t=1;t<n.sequence.length;t++){const r=n.sequence[t].id;V2(r,n.sequenceId);const i=lb(r).version;rn(i===e+1,`Migration id numbers must increase in increments of 1, expected ${n.sequenceId}/${e+1} but got '${n.sequence[t].id}'`),e=i}}var af=(n=>(n.IncompatibleSubtype="incompatible-subtype",n.UnknownType="unknown-type",n.TargetVersionTooNew="target-version-too-new",n.TargetVersionTooOld="target-version-too-old",n.MigrationError="migration-error",n.UnrecognizedSubtype="unrecognized-subtype",n))(af||{});function uZ(n){if(n.schemaVersion>2||n.schemaVersion<1)return tf.err("Bad schema version");if(n.schemaVersion===2)return tf.ok(n);const e={schemaVersion:2,sequences:{"com.tldraw.store":n.storeVersion}};for(const[t,r]of Object.entries(n.recordVersions))if(e.sequences[`com.tldraw.${t}`]=r.version,"subTypeKey"in r)for(const[i,s]of Object.entries(r.subTypeVersions))e.sequences[`com.tldraw.${t}.${i}`]=s;return tf.ok(e)}class PP{constructor(e,t){U(this,"migrations",{});U(this,"sortedMigrations");var i;this.types=e,this.options=t;for(const s of t.migrations??[])rn(!this.migrations[s.sequenceId],`Duplicate migration sequenceId ${s.sequenceId}`),K2(s),this.migrations[s.sequenceId]=s;const r=Object.values(this.migrations).flatMap(s=>s.sequence);this.sortedMigrations=cZ(r);for(const s of this.sortedMigrations)if((i=s.dependsOn)!=null&&i.length)for(const l of s.dependsOn){const c=r.find(d=>d.id===l);rn(c,`Migration '${s.id}' depends on missing migration '${l}'`)}}static create(e,t){return new PP(e,t??{})}validateRecord(e,t,r,i){try{const s=Wo(this.types,t.typeName);if(!s)throw new Error(`Missing definition for record type ${t.typeName}`);return s.validate(t,i??void 0)}catch(s){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:e,record:t,phase:r,recordBefore:i,error:s});throw s}}getMigrationsSince(e){const t=uZ(e);if(!t.ok)return t;const r=t.value,i=new Set(Object.keys(r.sequences).filter(l=>this.migrations[l]));for(const l in this.migrations)r.sequences[l]===void 0&&this.migrations[l].retroactive&&i.add(l);if(i.size===0)return tf.ok([]);const s=new Set;for(const l of i){const c=r.sequences[l];if(typeof c!="number"&&this.migrations[l].retroactive||c===0){for(const g of this.migrations[l].sequence)s.add(g.id);continue}const d=`${l}/${c}`,h=this.migrations[l].sequence.findIndex(g=>g.id===d);if(h===-1)return tf.err("Incompatible schema?");for(const g of this.migrations[l].sequence.slice(h+1))s.add(g.id)}return tf.ok(this.sortedMigrations.filter(({id:l})=>s.has(l)))}migratePersistedRecord(e,t,r="up"){const i=this.getMigrationsSince(t);if(!i.ok)return console.error("Error migrating record",i.error),{type:"error",reason:af.MigrationError};let s=i.value;if(s.length===0)return{type:"success",value:e};if(s.some(l=>l.scope==="store"))return{type:"error",reason:r==="down"?af.TargetVersionTooOld:af.TargetVersionTooNew};if(r==="down"){if(!s.every(l=>l.down))return{type:"error",reason:af.TargetVersionTooOld};s=s.slice().reverse()}e=Lr(e);try{for(const l of s){if(l.scope==="store")throw new Error;if(!(l.filter?l.filter(e):!0))continue;const d=l[r](e);d&&(e=Lr(d))}}catch(l){return console.error("Error migrating record",l),{type:"error",reason:af.MigrationError}}return{type:"success",value:e}}migrateStoreSnapshot(e){let{store:t}=e;const r=this.getMigrationsSince(e.schema);if(!r.ok)return console.error("Error migrating store",r.error),{type:"error",reason:af.MigrationError};const i=r.value;if(i.length===0)return{type:"success",value:t};t=Lr(t);try{for(const s of i)if(s.scope==="record")for(const[l,c]of Object.entries(t)){if(!(s.filter?s.filter(c):!0))continue;const h=s.up(c);h&&(t[l]=Lr(h))}else if(s.scope==="store"){const l=s.up(t);l&&(t=Lr(l))}else Bi(s)}catch(s){return console.error("Error migrating store",s),{type:"error",reason:af.MigrationError}}return{type:"success",value:t}}createIntegrityChecker(e){var t,r;return((r=(t=this.options).createIntegrityChecker)==null?void 0:r.call(t,e))??void 0}serialize(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map(({sequenceId:e,sequence:t})=>[e,t.length?lb(t.at(-1).id).version:0]))}}serializeEarliestVersion(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map(({sequenceId:e})=>[e,0]))}}getType(e){const t=Wo(this.types,e);return rn(t,"record type does not exists"),t}}Oc("@tldraw/store","3.7.0","esm");const Hu={Put:"put",Patch:"patch",Remove:"remove"};function dZ(n){let e=null;for(const[t,r]of vo(n.added))e||(e={}),e[t]=[Hu.Put,r];for(const[t,r]of Hr(n.updated)){const i=W2(t,r);i&&(e||(e={}),e[r.id]=[Hu.Patch,i])}for(const t of Object.keys(n.removed))e||(e={}),e[t]=[Hu.Remove];return e}const qo={Put:"put",Delete:"delete",Append:"append",Patch:"patch"};function W2(n,e){return TP(n,e,new Set(["props"]))}function TP(n,e,t){if(n===e)return null;let r=null;for(const i of Object.keys(n)){if(!(i in e)){r||(r={}),r[i]=[qo.Delete];continue}const s=n[i],l=e[i];if(!sf(s,l))if(t!=null&&t.has(i)&&s&&l){const c=TP(s,l);c&&(r||(r={}),r[i]=[qo.Patch,c])}else if(Array.isArray(l)&&Array.isArray(s)){const c=G2(s,l);c&&(r||(r={}),r[i]=c)}else r||(r={}),r[i]=[qo.Put,l]}for(const i of Object.keys(e))i in n||(r||(r={}),r[i]=[qo.Put,e[i]]);return r}function fZ(n,e){if(Object.is(n,e))return null;if(Array.isArray(n)&&Array.isArray(e))return G2(n,e);if(!n||!e||typeof n!="object"||typeof e!="object")return sf(n,e)?null:[qo.Put,e];{const t=TP(n,e);return t?[qo.Patch,t]:null}}function G2(n,e){if(Object.is(n,e))return null;if(n.length===e.length){const t=Math.max(n.length/5,1),r=[];for(let s=0;s<n.length;s++)if(!sf(n[s],e[s])&&(r.push(s),r.length>t))return[qo.Put,e];if(r.length===0)return null;const i={};for(const s of r){const l=n[s],c=e[s];if(!l||!c)i[s]=[qo.Put,c];else if(typeof l=="object"&&typeof c=="object"){const d=fZ(l,c);d&&(i[s]=d)}else i[s]=[qo.Put,c]}return[qo.Patch,i]}for(let t=0;t<n.length;t++)if(!sf(n[t],e[t]))return[qo.Put,e];return[qo.Append,e.slice(n.length),n.length]}function q2(n,e){if(!n||typeof n!="object")return n;const t=Array.isArray(n);let r;const i=(s,l)=>{r||(t?r=[...n]:r={...n}),t?r[Number(s)]=l:r[s]=l};for(const[s,l]of Object.entries(e))switch(l[0]){case qo.Put:{const c=l[1];sf(n[s],c)||i(s,c);break}case qo.Append:{const c=l[1],d=l[2],h=n[s];Array.isArray(h)&&h.length===d&&i(s,[...h,...c]);break}case qo.Patch:{if(n[s]&&typeof n[s]=="object"){const c=l[1],d=q2(n[s],c);d!==n[s]&&i(s,d)}break}case qo.Delete:s in n&&(r||(t?(console.error("Can't delete array item yet (this should never happen)"),r=[...n]):r={...n}),delete r[s])}return r??n}function Y2(n,e){const t=setInterval(n,e);return()=>clearInterval(t)}const hZ=7;function pZ(){return hZ}const gZ=4099,vv={NOT_FOUND:"NOT_FOUND",FORBIDDEN:"FORBIDDEN",NOT_AUTHENTICATED:"NOT_AUTHENTICATED",UNKNOWN_ERROR:"UNKNOWN_ERROR",CLIENT_TOO_OLD:"CLIENT_TOO_OLD",SERVER_TOO_OLD:"SERVER_TOO_OLD",INVALID_RECORD:"INVALID_RECORD",RATE_LIMITED:"RATE_LIMITED",ROOM_FULL:"ROOM_FULL"},IP=5e3,mZ=IP*2;class yZ{constructor(e){U(this,"lastServerClock",0);U(this,"lastServerInteractionTimestamp",Date.now());U(this,"pendingPushRequests",[]);U(this,"speculativeChanges",{added:{},updated:{},removed:{}});U(this,"disposables",[]);U(this,"store");U(this,"socket");U(this,"presenceState");U(this,"isConnectedToRoom",!1);U(this,"clientClock",0);U(this,"onAfterConnect");U(this,"isDebugging",!1);U(this,"presenceType");U(this,"didCancel");U(this,"latestConnectRequestId",null);U(this,"incomingDiffBuffer",[]);U(this,"lastPushedPresenceState",null);U(this,"flushPendingPushRequests",w2(()=>{if(this.debug("flushing pending push requests",{isConnectedToRoom:this.isConnectedToRoom,pendingPushRequests:this.pendingPushRequests}),!(!this.isConnectedToRoom||this.store.isPossiblyCorrupted())){for(const e of this.pendingPushRequests)if(!e.sent){if(this.socket.connectionStatus!=="online")return;this.socket.sendMessage(e.request),e.sent=!0}}}));U(this,"rebase",()=>{var t;if(this.store._flushHistory(),this.incomingDiffBuffer.length===0)return;const e=this.incomingDiffBuffer;this.incomingDiffBuffer=[];try{this.store.mergeRemoteChanges(()=>{this.store.applyDiff(gv(this.speculativeChanges),{runCallbacks:!1});for(const r of e){if(r.type==="patch"){this.applyNetworkDiff(r.diff,!0);continue}if(this.pendingPushRequests.length===0)throw new Error("Received push_result but there are no pending push requests");if(this.pendingPushRequests[0].request.clientClock!==r.clientClock)throw new Error("Received push_result for a push request that is not at the front of the queue");if(r.action==="discard")this.pendingPushRequests.shift();else if(r.action==="commit"){const{request:i}=this.pendingPushRequests.shift();"diff"in i&&i.diff&&this.applyNetworkDiff(i.diff,!0)}else this.applyNetworkDiff(r.action.rebaseWithDiff,!0),this.pendingPushRequests.shift()}try{this.speculativeChanges=this.store.extractingChanges(()=>{for(const{request:r}of this.pendingPushRequests)!("diff"in r)||!r.diff||this.applyNetworkDiff(r.diff,!0)})}catch(r){console.error(r),this.speculativeChanges={added:{},updated:{},removed:{}},this.resetConnection()}}),this.lastServerClock=((t=e.at(-1))==null?void 0:t.serverClock)??this.lastServerClock}catch(r){console.error(r),this.store.ensureStoreIsUsable(),this.resetConnection()}});U(this,"scheduleRebase",w2(this.rebase));this.didCancel=e.didCancel,this.presenceType=e.store.scopedTypes.presence.values().next().value??null,typeof window<"u"&&(window.tlsync=this),this.store=e.store,this.socket=e.socket,this.onAfterConnect=e.onAfterConnect;let t=!1;this.presenceState=e.presence,this.disposables.push(this.store.listen(({changes:r})=>{var i;if((i=this.didCancel)!=null&&i.call(this))return this.close();this.debug("received store changes",{changes:r}),this.push(r)},{source:"user",scope:"document"}),this.socket.onReceiveMessage(r=>{var i;if((i=this.didCancel)!=null&&i.call(this))return this.close();this.debug("received message from server",r),this.handleServerEvent(r),t||(t=!0,e.onLoad(this))}),this.socket.onStatusChange(r=>{var i;if((i=this.didCancel)!=null&&i.call(this))return this.close();this.debug("socket status changed",r.status),r.status==="online"?this.sendConnectMessage():(this.resetConnection(),r.status==="error"&&(t=!0,e.onSyncError(r.reason),this.close()))}),Y2(()=>{var r;if((r=this.didCancel)!=null&&r.call(this))return this.close();if(this.debug("ping loop",{isConnectedToRoom:this.isConnectedToRoom}),!!this.isConnectedToRoom)try{this.socket.sendMessage({type:"ping"})}catch(i){console.warn("ping failed, resetting",i),this.resetConnection()}},IP),Y2(()=>{var i;if((i=this.didCancel)!=null&&i.call(this))return this.close();if(this.debug("health check loop",{isConnectedToRoom:this.isConnectedToRoom}),!this.isConnectedToRoom)return;const r=Date.now()-this.lastServerInteractionTimestamp;if(r<mZ){this.debug("health check passed",{timeSinceLastServerInteraction:r});return}console.warn("Haven't heard from the server in a while, resetting connection..."),this.resetConnection()},IP*2)),this.presenceState&&this.disposables.push(Kl("pushPresence",()=>{var r;if((r=this.didCancel)!=null&&r.call(this))return this.close();this.pushPresence(this.presenceState.get())})),this.socket.connectionStatus==="online"&&this.sendConnectMessage()}debug(...e){this.isDebugging&&console.debug(...e)}sendConnectMessage(){if(this.isConnectedToRoom){console.error("sendConnectMessage called while already connected");return}this.debug("sending connect message"),this.latestConnectRequestId=nr(),this.socket.sendMessage({type:"connect",connectRequestId:this.latestConnectRequestId,schema:this.store.schema.serialize(),protocolVersion:pZ(),lastServerClock:this.lastServerClock})}resetConnection(e=!1){this.debug("resetting connection"),e&&(this.lastServerClock=0),this.store.mergeRemoteChanges(()=>{this.store.remove(Object.keys(this.store.serialize("presence")))}),this.lastPushedPresenceState=null,this.isConnectedToRoom=!1,this.pendingPushRequests=[],this.incomingDiffBuffer=[],this.socket.connectionStatus==="online"&&this.socket.restart()}didReconnect(e){if(this.debug("did reconnect",e),e.connectRequestId===this.latestConnectRequestId){if(this.latestConnectRequestId=null,this.isConnectedToRoom){console.error("didReconnect called while already connected"),this.resetConnection(!0);return}if(this.pendingPushRequests.length>0){console.error("pendingPushRequests should already be empty when we reconnect"),this.resetConnection(!0);return}cl(()=>{var r;const t=this.speculativeChanges;this.speculativeChanges={added:{},updated:{},removed:{}},this.store.mergeRemoteChanges(()=>{const i={},s=e.hydrationType==="wipe_all";s||this.store.applyDiff(gv(t),{runCallbacks:!1});for(const[c,d]of vo(this.store.serialize("all")))(s&&this.store.scopedTypes.document.has(d.typeName)||d.typeName===this.presenceType)&&(i[c]=[Hu.Remove]);this.applyNetworkDiff({...i,...e.diff},!0),this.isConnectedToRoom=!0;const l=this.store.filterChangesByScope(this.store.extractingChanges(()=>{this.store.applyDiff(t)}),"document");l&&this.push(l)}),(r=this.onAfterConnect)==null||r.call(this,this,{isReadonly:e.isReadonly})}),this.lastServerClock=e.serverClock}}handleServerEvent(e){switch(this.debug("received server event",e),this.lastServerInteractionTimestamp=Date.now(),e.type){case"connect":this.didReconnect(e);break;case"patch":case"push_result":if(!this.isConnectedToRoom)break;this.incomingDiffBuffer.push(e),this.scheduleRebase();break;case"data":if(!this.isConnectedToRoom)break;this.incomingDiffBuffer.push(...e.data),this.scheduleRebase();break;case"incompatibility_error":console.error("incompatibility error is legacy and should no longer be sent by the server");break;case"pong":break;default:Bi(e)}}close(){var e,t,r,i;this.debug("closing"),this.disposables.forEach(s=>s()),(t=(e=this.flushPendingPushRequests).cancel)==null||t.call(e),(i=(r=this.scheduleRebase).cancel)==null||i.call(r)}pushPresence(e){if(this.store._flushHistory(),!this.isConnectedToRoom)return;let t;if(!this.lastPushedPresenceState&&e)t=[Hu.Put,e];else if(this.lastPushedPresenceState&&e){const s=W2(this.lastPushedPresenceState,e);s&&(t=[Hu.Patch,s])}if(!t)return;this.lastPushedPresenceState=e;const r=this.pendingPushRequests.at(-1);if(r&&!r.sent&&!r.request.presence){r.request.presence=t;return}const i={type:"push",clientClock:this.clientClock++,presence:t};this.pendingPushRequests.push({request:i,sent:!1}),this.flushPendingPushRequests()}push(e){this.debug("push",e);const t=dZ(e);if(!t||(this.speculativeChanges=sb([this.speculativeChanges,e]),!this.isConnectedToRoom))return;const r={type:"push",diff:t,clientClock:this.clientClock++};this.pendingPushRequests.push({request:r,sent:!1}),this.flushPendingPushRequests()}applyNetworkDiff(e,t){this.debug("applyNetworkDiff",e);const r={added:{},updated:{},removed:{}};let i=!1;for(const[s,l]of vo(e))if(l[0]===Hu.Put){const c=this.store.get(s);c&&!sf(c,l[1])?(i=!0,r.updated[s]=[c,l[1]]):(i=!0,r.added[s]=l[1])}else if(l[0]===Hu.Patch){const c=this.store.get(s);if(!c)continue;const d=q2(c,l[1]);i=!0,r.updated[s]=[c,d]}else l[0]===Hu.Remove&&this.store.has(s)&&(i=!0,r.removed[s]=this.store.get(s));i&&this.store.applyDiff(r,{runCallbacks:t})}}function cb(n,e,t){return n.addEventListener(e,t),()=>{n.removeEventListener(e,t)}}function Nr(...n){if(typeof window<"u"&&window.__tldraw_socket_debug){const e=new Date;console.log(`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}.${e.getMilliseconds()}`,...n)}}class vZ{constructor(e){U(this,"_ws",null);U(this,"isDisposed",!1);U(this,"_reconnectManager");U(this,"_connectionStatus",si("websocket connection status","initial"));U(this,"messageListeners",new Set);U(this,"statusListeners",new Set);this._reconnectManager=new CZ(this,e)}close(){var e;this.isDisposed=!0,this._reconnectManager.close(),(e=this._ws)==null||e.close()}_handleConnect(){Nr("handleConnect"),this._connectionStatus.set("online"),this.statusListeners.forEach(e=>e({status:"online"})),this._reconnectManager.connected()}_handleDisconnect(e,t,r,i){i=i||vv.UNKNOWN_ERROR,Nr("handleDisconnect",{currentStatus:this.connectionStatus,closeCode:t,reason:e});let s;switch(e){case"closed":t===gZ?s="error":s="offline";break;case"manual":s="offline";break}t===1006&&!r&&DX("Could not open WebSocket connection. This might be because you're trying to load a URL that doesn't support websockets. Check the URL you're trying to connect to."),this.connectionStatus!==s&&!(s==="error"&&this.connectionStatus==="offline")&&(this._connectionStatus.set(s),this.statusListeners.forEach(l=>l(s==="error"?{status:"error",reason:i}:{status:s}))),this._reconnectManager.disconnected()}_setNewSocket(e){var r;rn(!this.isDisposed,"Tried to set a new websocket on a disposed socket"),rn(this._ws===null||this._ws.readyState===WebSocket.CLOSED||this._ws.readyState===WebSocket.CLOSING,`Tried to set a new websocket in when the existing one was ${(r=this._ws)==null?void 0:r.readyState}`);let t=!1;e.onopen=()=>{Nr("ws.onopen"),rn(this._ws===e,"sockets must only be orphaned when they are CLOSING or CLOSED, so they can't open"),t=!0,this._handleConnect()},e.onclose=i=>{Nr("ws.onclose",i),this._ws===e?this._handleDisconnect("closed",i.code,t,i.reason):Nr("ignoring onclose for an orphaned socket")},e.onerror=i=>{Nr("ws.onerror",i),this._ws===e?this._handleDisconnect("closed"):Nr("ignoring onerror for an orphaned socket")},e.onmessage=i=>{rn(this._ws===e,"sockets must only be orphaned when they are CLOSING or CLOSED, so they can't receive messages");const s=JSON.parse(i.data.toString());this.messageListeners.forEach(l=>l(s))},this._ws=e}_closeSocket(){this._ws!==null&&(this._ws.close(),this._ws=null,this._handleDisconnect("manual"))}get connectionStatus(){const e=this._connectionStatus.get();return e==="initial"?"offline":e}sendMessage(e){if(rn(!this.isDisposed,"Tried to send message on a disposed socket"),!!this._ws)if(this.connectionStatus==="online"){const t=ZX(JSON.stringify(e));for(const r of t)this._ws.send(r)}else console.warn("Tried to send message while "+this.connectionStatus)}onReceiveMessage(e){return rn(!this.isDisposed,"Tried to add message listener on a disposed socket"),this.messageListeners.add(e),()=>{this.messageListeners.delete(e)}}onStatusChange(e){return rn(!this.isDisposed,"Tried to add status listener on a disposed socket"),this.statusListeners.add(e),()=>{this.statusListeners.delete(e)}}restart(){rn(!this.isDisposed,"Tried to restart a disposed socket"),Nr("restarting"),this._closeSocket(),this._reconnectManager.maybeReconnected()}}const Sv=500,SZ=2e3,xZ=1e3,wZ=1e3*60*5,bZ=1.5,X2=1e3;class CZ{constructor(e,t){U(this,"isDisposed",!1);U(this,"disposables",[()=>{this.reconnectTimeout&&clearTimeout(this.reconnectTimeout),this.recheckConnectingTimeout&&clearTimeout(this.recheckConnectingTimeout)}]);U(this,"reconnectTimeout",null);U(this,"recheckConnectingTimeout",null);U(this,"lastAttemptStart",null);U(this,"intendedDelay",Sv);U(this,"state");this.socketAdapter=e,this.getUri=t,this.subscribeToReconnectHints(),this.disposables.push(cb(window,"offline",()=>{Nr("window went offline"),this.socketAdapter._closeSocket()})),this.state="pendingAttempt",this.intendedDelay=Sv,this.scheduleAttempt()}subscribeToReconnectHints(){if(this.disposables.push(cb(window,"online",()=>{Nr("window went online"),this.maybeReconnected()}),cb(document,"visibilitychange",()=>{document.hidden||(Nr("document became visible"),this.maybeReconnected())})),Object.prototype.hasOwnProperty.call(navigator,"connection")){const e=navigator.connection;this.disposables.push(cb(e,"change",()=>{Nr("navigator.connection change"),this.maybeReconnected()}))}}scheduleAttempt(){rn(this.state==="pendingAttempt"),Nr("scheduling a connection attempt"),Promise.resolve(this.getUri()).then(e=>{var t;this.state!=="pendingAttempt"||this.isDisposed||(rn(((t=this.socketAdapter._ws)==null?void 0:t.readyState)!==WebSocket.OPEN,"There should be no connection attempts while already connected"),this.lastAttemptStart=Date.now(),this.socketAdapter._setNewSocket(new WebSocket(EZ(e))),this.state="pendingAttemptResult")})}getMaxDelay(){return document.hidden?wZ:SZ}getMinDelay(){return document.hidden?xZ:Sv}clearReconnectTimeout(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)}clearRecheckConnectingTimeout(){this.recheckConnectingTimeout&&(clearTimeout(this.recheckConnectingTimeout),this.recheckConnectingTimeout=null)}maybeReconnected(){var e,t;if(Nr("ReconnectManager.maybeReconnected"),this.clearRecheckConnectingTimeout(),((e=this.socketAdapter._ws)==null?void 0:e.readyState)===WebSocket.OPEN){Nr("ReconnectManager.maybeReconnected: already connected");return}if(((t=this.socketAdapter._ws)==null?void 0:t.readyState)===WebSocket.CONNECTING){Nr("ReconnectManager.maybeReconnected: connecting"),rn(this.lastAttemptStart,"ReadyState=CONNECTING without lastAttemptStart should be impossible");const r=Date.now()-this.lastAttemptStart;r<X2?(Nr("ReconnectManager.maybeReconnected: connecting, rechecking later"),this.recheckConnectingTimeout=setTimeout(()=>this.maybeReconnected(),X2-r)):(Nr("ReconnectManager.maybeReconnected: connecting, but for too long, retry now"),this.clearRecheckConnectingTimeout(),this.socketAdapter._closeSocket());return}Nr("ReconnectManager.maybeReconnected: closing/closed/null, retry now"),this.intendedDelay=Sv,this.disconnected()}disconnected(){var e,t;if(Nr("ReconnectManager.disconnected"),((e=this.socketAdapter._ws)==null?void 0:e.readyState)!==WebSocket.OPEN&&((t=this.socketAdapter._ws)==null?void 0:t.readyState)!==WebSocket.CONNECTING){Nr("ReconnectManager.disconnected: websocket is not OPEN or CONNECTING"),this.clearReconnectTimeout();let r;this.state==="connected"?(this.intendedDelay=this.getMinDelay(),r=this.intendedDelay):r=this.lastAttemptStart!==null?this.lastAttemptStart+this.intendedDelay-Date.now():0,r>0?(Nr("ReconnectManager.disconnected: delaying, delayLeft",r),this.state="delay",this.reconnectTimeout=setTimeout(()=>this.disconnected(),r)):(this.state="pendingAttempt",this.intendedDelay=Math.min(this.getMaxDelay(),Math.max(this.getMinDelay(),this.intendedDelay)*bZ),Nr("ReconnectManager.disconnected: attempting a connection, next delay",this.intendedDelay),this.scheduleAttempt())}}connected(){var e;Nr("ReconnectManager.connected"),((e=this.socketAdapter._ws)==null?void 0:e.readyState)===WebSocket.OPEN&&(Nr("ReconnectManager.connected: websocket is OPEN"),this.state="connected",this.clearReconnectTimeout(),this.intendedDelay=Sv)}close(){this.disposables.forEach(e=>e()),this.isDisposed=!0}}function EZ(n){return n.replace(/^http(s)?:/,"ws$1:")}class _Z extends Error{constructor(t){super(`sync error: ${t}`);U(this,"name","RemoteSyncError");this.reason=t}}var PZ={};function TZ(n){if(!n.length)return null;let e="";for(const t of n)typeof t=="number"?e+=`.${t}`:t.startsWith("(")?e.endsWith(")")?e=`${e.slice(0,-1)}, ${t.slice(1)}`:e+=t:e+=`.${t}`;return e=e.replace(/id = [^,]+, /,"").replace(/id = [^)]+/,""),e.startsWith(".")?e.slice(1):e}class Nn extends Error{constructor(t,r=[]){const i=TZ(r),s=t.split(`
`).map((l,c)=>c===0?l:`  ${l}`).join(`
`);super(r?`At ${i}: ${s}`:s);U(this,"name","ValidationError");this.rawMessage=t,this.path=r}}function ra(n,e){try{return e()}catch(t){throw t instanceof Nn?new Nn(t.rawMessage,[n,...t.path]):new Nn(t.toString(),[n])}}function lf(n){if(n===null)return"null";if(Array.isArray(n))return"an array";const e=typeof n;switch(e){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return`a ${e}`;case"object":return`an ${e}`;case"undefined":return"undefined";default:Bi(e)}}class Es{constructor(e,t){this.validationFn=e,this.validateUsingKnownGoodVersionFn=t}validate(e){const t=this.validationFn(e);if(PZ.NODE_ENV!=="production"&&!Object.is(e,t))throw new Nn("Validator functions must return the same value they were passed");return t}validateUsingKnownGoodVersion(e,t){return Object.is(e,t)?e:this.validateUsingKnownGoodVersionFn?this.validateUsingKnownGoodVersionFn(e,t):this.validate(t)}isValid(e){try{return this.validate(e),!0}catch{return!1}}nullable(){return DZ(this)}optional(){return J2(this)}refine(e){return new Es(t=>e(this.validate(t)),(t,r)=>{const i=this.validateUsingKnownGoodVersion(t,r);return Object.is(t,i)?t:e(i)})}check(e,t){return typeof e=="string"?this.refine(r=>(ra(`(check ${e})`,()=>t(r)),r)):this.refine(r=>(e(r),r))}}class IZ extends Es{constructor(e){super(t=>{const r=Q2.validate(t);for(let i=0;i<r.length;i++)ra(i,()=>e.validate(r[i]));return r},(t,r)=>{if(!e.validateUsingKnownGoodVersion)return this.validate(r);const i=Q2.validate(r);let s=t.length!==i.length;for(let l=0;l<i.length;l++){const c=i[l];if(l>=t.length){s=!0,ra(l,()=>e.validate(c));continue}if(Object.is(t[l],c))continue;const d=ra(l,()=>e.validateUsingKnownGoodVersion(t[l],c));Object.is(d,t[l])||(s=!0)}return s?r:t}),this.itemValidator=e}nonEmpty(){return this.check(e=>{if(e.length===0)throw new Nn("Expected a non-empty array")})}lengthGreaterThan1(){return this.check(e=>{if(e.length<=1)throw new Nn("Expected an array with length greater than 1")})}}class ub extends Es{constructor(e,t=!1){super(r=>{if(typeof r!="object"||r===null)throw new Nn(`Expected object, got ${lf(r)}`);for(const[i,s]of Object.entries(e))ra(i,()=>{s.validate(Wo(r,i))});if(!t){for(const i of Object.keys(r))if(!Vl(e,i))throw new Nn("Unexpected property",[i])}return r},(r,i)=>{if(typeof i!="object"||i===null)throw new Nn(`Expected object, got ${lf(i)}`);let s=!1;for(const[l,c]of Object.entries(e)){const d=Wo(r,l),h=Wo(i,l);if(Object.is(d,h))continue;const g=ra(l,()=>{const y=c;return y.validateUsingKnownGoodVersion?y.validateUsingKnownGoodVersion(d,h):y.validate(h)});Object.is(g,d)||(s=!0)}if(!t){for(const l of Object.keys(i))if(!Vl(e,l))throw new Nn("Unexpected property",[l])}for(const l of Object.keys(r))if(!Vl(i,l)){s=!0;break}return s?i:r}),this.config=e,this.shouldAllowUnknownProperties=t}allowUnknownProperties(){return new ub(this.config,!0)}extend(e){return new ub({...this.config,...e})}}class db extends Es{constructor(e,t,r,i){super(s=>{this.expectObject(s);const{matchingSchema:l,variant:c}=this.getMatchingSchemaAndVariant(s);return l===void 0?this.unknownValueValidation(s,c):ra(`(${e} = ${c})`,()=>l.validate(s))},(s,l)=>{this.expectObject(l),this.expectObject(s);const{matchingSchema:c,variant:d}=this.getMatchingSchemaAndVariant(l);return c===void 0?this.unknownValueValidation(l,d):Wo(s,e)!==Wo(l,e)?ra(`(${e} = ${d})`,()=>c.validate(l)):ra(`(${e} = ${d})`,()=>c.validateUsingKnownGoodVersion?c.validateUsingKnownGoodVersion(s,l):c.validate(l))}),this.key=e,this.config=t,this.unknownValueValidation=r,this.useNumberKeys=i}expectObject(e){if(typeof e!="object"||e===null)throw new Nn(`Expected an object, got ${lf(e)}`,[])}getMatchingSchemaAndVariant(e){const t=Wo(e,this.key);if(!this.useNumberKeys&&typeof t!="string")throw new Nn(`Expected a string for key "${this.key}", got ${lf(t)}`);if(this.useNumberKeys&&!Number.isFinite(Number(t)))throw new Nn(`Expected a number for key "${this.key}", got "${t}"`);return{matchingSchema:Vl(this.config,t)?this.config[t]:void 0,variant:t}}validateUnknownVariants(e){return new db(this.key,this.config,e,this.useNumberKeys)}}class kZ extends Es{constructor(e,t){super(r=>{if(typeof r!="object"||r===null)throw new Nn(`Expected object, got ${lf(r)}`);for(const[i,s]of Object.entries(r))ra(i,()=>{e.validate(i),t.validate(s)});return r},(r,i)=>{if(typeof i!="object"||i===null)throw new Nn(`Expected object, got ${lf(i)}`);let s=!1;for(const[l,c]of Object.entries(i)){if(!Vl(r,l)){s=!0,ra(l,()=>{e.validate(l),t.validate(c)});continue}const d=Wo(r,l),h=c;if(Object.is(d,h))continue;const g=ra(l,()=>t.validateUsingKnownGoodVersion?t.validateUsingKnownGoodVersion(d,h):t.validate(h));Object.is(g,d)||(s=!0)}for(const l of Object.keys(r))if(!Vl(i,l)){s=!0;break}return s?i:r}),this.keyValidator=e,this.valueValidator=t}}function kP(n){return new Es(e=>{if(typeof e!==n)throw new Nn(`Expected ${n}, got ${lf(e)}`);return e})}const RZ=new Es(n=>n),sn=kP("string"),Ut=kP("number").check(n=>{if(Number.isNaN(n))throw new Nn("Expected a number, got NaN");if(!Number.isFinite(n))throw new Nn(`Expected a finite number, got ${n}`)}),fb=Ut.check(n=>{if(n<0)throw new Nn(`Expected a positive number, got ${n}`)}),vi=Ut.check(n=>{if(n<=0)throw new Nn(`Expected a non-zero positive number, got ${n}`)}),Z2=Ut.check(n=>{if(!Number.isInteger(n))throw new Nn(`Expected an integer, got ${n}`)}),hb=Z2.check(n=>{if(n<0)throw new Nn(`Expected a positive integer, got ${n}`)}),MZ=Z2.check(n=>{if(n<=0)throw new Nn(`Expected a non-zero positive integer, got ${n}`)}),Pn=kP("boolean");function Yo(n){return new Es(e=>{if(e!==n)throw new Nn(`Expected ${n}, got ${JSON.stringify(e)}`);return n})}const Q2=new Es(n=>{if(!Array.isArray(n))throw new Nn(`Expected an array, got ${lf(n)}`);return n});function So(n){return new IZ(n)}function Tn(n){return new ub(n)}function RP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null||Object.getPrototypeOf(n)===E2)}function MP(n){return n===null||typeof n=="number"||typeof n=="string"||typeof n=="boolean"?!0:Array.isArray(n)?n.every(MP):RP(n)?Object.values(n).every(MP):!1}const xo=new Es(n=>{if(MP(n))return n;throw new Nn(`Expected json serializable value, got ${typeof n}`)},(n,e)=>{if(Array.isArray(n)&&Array.isArray(e)){let t=n.length!==e.length;for(let r=0;r<e.length;r++){if(r>=n.length){t=!0,xo.validate(e[r]);continue}const i=n[r],s=e[r];if(Object.is(i,s))continue;const l=xo.validateUsingKnownGoodVersion(i,s);Object.is(l,i)||(t=!0)}return t?e:n}else if(RP(n)&&RP(e)){let t=!1;for(const r of Object.keys(e)){if(!Vl(n,r)){t=!0,xo.validate(e[r]);continue}const i=n[r],s=e[r];if(Object.is(i,s))continue;const l=xo.validateUsingKnownGoodVersion(i,s);Object.is(l,i)||(t=!0)}for(const r of Object.keys(n))if(!Vl(e,r)){t=!0;break}return t?e:n}else return xo.validate(e)});function pb(n,e){return new kZ(n,e)}function AP(n,e){return new db(n,e,(t,r)=>{throw new Nn(`Expected one of ${Object.keys(e).map(i=>JSON.stringify(i)).join(" or ")}, got ${JSON.stringify(r)}`,[n])},!1)}function AZ(n,e){return new db(n,e,(t,r)=>{throw new Nn(`Expected one of ${Object.keys(e).map(i=>JSON.stringify(i)).join(" or ")}, got ${JSON.stringify(r)}`,[n])},!0)}function $c(n,e){return new Es(t=>ra(n,()=>e.validate(t)),(t,r)=>ra(n,()=>e.validateUsingKnownGoodVersion?e.validateUsingKnownGoodVersion(t,r):e.validate(r)))}function gb(n){return new Es(e=>{if(!n.has(e)){const t=Array.from(n,r=>JSON.stringify(r)).join(" or ");throw new Nn(`Expected ${t}, got ${e}`)}return e})}function J2(n){return new Es(e=>{if(e!==void 0)return n.validate(e)},(e,t)=>{if(!(e===void 0&&t===void 0)&&t!==void 0)return n.validateUsingKnownGoodVersion&&e!==void 0?n.validateUsingKnownGoodVersion(e,t):n.validate(t)})}function DZ(n){return new Es(e=>e===null?null:n.validate(e),(e,t)=>t===null?null:n.validateUsingKnownGoodVersion&&e!==null?n.validateUsingKnownGoodVersion(e,t):n.validate(t))}function mb(...n){return gb(new Set(n))}function DP(n){try{return new URL(n)}catch{if(n.startsWith("/")||n.startsWith("./"))try{return new URL(n,"http://example.com")}catch{throw new Nn(`Expected a valid url, got ${JSON.stringify(n)}`)}throw new Nn(`Expected a valid url, got ${JSON.stringify(n)}`)}}const OZ=new Set(["http:","https:","mailto:"]),Da=sn.check(n=>{if(n==="")return;const e=DP(n);if(!OZ.has(e.protocol.toLowerCase()))throw new Nn(`Expected a valid url, got ${JSON.stringify(n)} (invalid protocol)`)}),jZ=new Set(["http:","https:","data:","asset:"]),zh=sn.check(n=>{if(n==="")return;const e=DP(n);if(!jZ.has(e.protocol.toLowerCase()))throw new Nn(`Expected a valid url, got ${JSON.stringify(n)} (invalid protocol)`)});sn.check(n=>{if(n==="")return;if(!DP(n).protocol.toLowerCase().match(/^https?:$/))throw new Nn(`Expected a valid url, got ${JSON.stringify(n)} (invalid protocol)`)});const OP=sn.refine(n=>{try{return CX(n),n}catch{throw new Nn(`Expected an index key, got ${JSON.stringify(n)}`)}});Oc("@tldraw/validate","3.7.0","esm");function Oa(n){return sn.refine(e=>{if(!e.startsWith(`${n}:`))throw new Error(`${n} ID must start with "${n}:"`);return e})}const yb=Oa("asset");function jP(n,e){return Tn({id:yb,typeName:Yo("asset"),type:Yo(n),props:e,meta:xo})}const Uh=Tn({x:Ut,y:Ut,z:Ut.optional()}),xv=Tn({x:Ut,y:Ut,w:Ut,h:Ut}),eN=Ut.check(n=>{if(n<0||n>1)throw new Nn("Opacity must be between 0 and 1")}),LZ=sn.refine(n=>{if(!n.startsWith("page:")&&!n.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return n}),ul=Oa("shape");function NZ(n,e,t){return Tn({id:ul,typeName:Yo("shape"),x:Ut,y:Ut,rotation:Ut,index:OP,parentId:LZ,type:Yo(n),isLocked:Pn,opacity:eN,props:e?Tn(e):xo,meta:t?Tn(t):xo})}const FZ=Oa("binding");function zZ(n,e,t){return Tn({id:FZ,typeName:Yo("binding"),type:Yo(n),fromId:ul,toId:ul,props:e?Tn(e):xo,meta:t?Tn(t):xo})}na("com.tldraw.binding",{}),Aa({sequenceId:"com.tldraw.binding",recordType:"binding",sequence:[]});function $h(n){return`binding:${nr()}`}function rEe(n){return n}function UZ(n){return Uc("binding",{scope:"document",validator:$c("binding",AP("type",lv(n,(e,{props:t,meta:r})=>zZ(e,t,r))))}).withDefaultProperties(()=>({meta:{}}))}class wo{constructor(e,t,r){this.id=e,this.defaultValue=t,this.type=r}static define(e,t){const{defaultValue:r,type:i=RZ}=t;return new wo(e,r,i)}static defineEnum(e,t){const{defaultValue:r,values:i}=t;return new $Z(e,r,i)}setDefaultValue(e){this.defaultValue=e}validate(e){return this.type.validate(e)}validateUsingKnownGoodVersion(e,t){return this.type.validateUsingKnownGoodVersion?this.type.validateUsingKnownGoodVersion(e,t):this.validate(t)}}class $Z extends wo{constructor(e,t,r){super(e,t,mb(...r)),this.values=r}}const vb=na("com.tldraw.shape",{AddIsLocked:1,HoistOpacity:2,AddMeta:3,AddWhite:4}),BZ=Aa({sequenceId:"com.tldraw.shape",recordType:"shape",sequence:[{id:vb.AddIsLocked,up:n=>{n.isLocked=!1},down:n=>{delete n.isLocked}},{id:vb.HoistOpacity,up:n=>{n.opacity=Number(n.props.opacity??"1"),delete n.props.opacity},down:n=>{const e=n.opacity;delete n.opacity,n.props.opacity=e<.175?"0.1":e<.375?"0.25":e<.625?"0.5":e<.875?"0.75":"1"}},{id:vb.AddMeta,up:n=>{n.meta={}}},{id:vb.AddWhite,up:n=>{},down:n=>{n.props.color==="white"&&(n.props.color="black")}}]});function _g(n){return n?n.typeName==="shape":!1}function ia(n){return n?n.startsWith("shape:"):!1}function yr(n){return`shape:${n??nr()}`}function tN(n){const e=new Map;for(const[t,r]of Object.entries(n))if(r instanceof wo){if(e.has(r))throw new Error(`Duplicate style prop ${r.id}. Each style prop can only be used once within a shape.`);e.set(r,t)}return e}function iEe(n){return n}function Wl(n,e){return lv(e,(t,r)=>`com.tldraw.shape.${n}/${r}`)}function HZ(n){return Uc("shape",{scope:"document",validator:$c("shape",AP("type",lv(n,(e,{props:t,meta:r})=>NZ(e,t,r))))}).withDefaultProperties(()=>({x:0,y:0,rotation:0,isLocked:!1,opacity:1,meta:{}}))}function nN(n,e){const t=[];for(const[r,{migrations:i}]of Object.entries(e)){const s=`com.tldraw.${n}.${r}`;i?"sequenceId"in i?(rn(s===i.sequenceId,`sequenceId mismatch for ${r} ${ib} migrations. Expected '${s}', got '${i.sequenceId}'`),t.push(i)):"sequence"in i?t.push(Eg({sequenceId:s,retroactive:!1,sequence:i.sequence.map(l=>"id"in l?rN(n,r,l):l)})):t.push(Eg({sequenceId:s,retroactive:!1,sequence:Object.keys(i.migrators).map(l=>Number(l)).sort((l,c)=>l-c).map(l=>({id:`${s}/${l}`,scope:"record",filter:c=>c.typeName===n&&c.type===r,up:c=>{const d=i.migrators[l].up(c);if(d)return d},down:c=>{const d=i.migrators[l].down(c);if(d)return d}}))})):t.push(Eg({sequenceId:s,retroactive:!1,sequence:[]}))}return t}function rN(n,e,t){return{id:t.id,dependsOn:t.dependsOn,scope:"record",filter:r=>r.typeName===n&&r.type===e,up:r=>{const i=t.up(r.props);i&&(r.props=i)},down:typeof t.down=="function"?r=>{const i=t.down(r.props);i&&(r.props=i)}:void 0}}const iN=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red","white"],Sb={lightMode:{id:"light",text:"#000000",background:"rgb(249, 250, 251)",solid:"#fcfffe",black:{solid:"#1d1d1d",fill:"#1d1d1d",note:{fill:"#FCE19C",text:"#000000"},semi:"#e8e8e8",pattern:"#494949",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},blue:{solid:"#4465e9",fill:"#4465e9",note:{fill:"#8AA3FF",text:"#000000"},semi:"#dce1f8",pattern:"#6681ee",highlight:{srgb:"#10acff",p3:"color(display-p3 0.308 0.6632 0.9996)"}},green:{solid:"#099268",fill:"#099268",note:{fill:"#6FC896",text:"#000000"},semi:"#d3e9e3",pattern:"#39a785",highlight:{srgb:"#00ffc8",p3:"color(display-p3 0.2536 0.984 0.7981)"}},grey:{solid:"#9fa8b2",fill:"#9fa8b2",note:{fill:"#C0CAD3",text:"#000000"},semi:"#eceef0",pattern:"#bcc3c9",highlight:{srgb:"#cbe7f1",p3:"color(display-p3 0.8163 0.9023 0.9416)"}},"light-blue":{solid:"#4ba1f1",fill:"#4ba1f1",note:{fill:"#9BC4FD",text:"#000000"},semi:"#ddedfa",pattern:"#6fbbf8",highlight:{srgb:"#00f4ff",p3:"color(display-p3 0.1512 0.9414 0.9996)"}},"light-green":{solid:"#4cb05e",fill:"#4cb05e",note:{fill:"#98D08A",text:"#000000"},semi:"#dbf0e0",pattern:"#65cb78",highlight:{srgb:"#65f641",p3:"color(display-p3 0.563 0.9495 0.3857)"}},"light-red":{solid:"#f87777",fill:"#f87777",note:{fill:"#F7A5A1",text:"#000000"},semi:"#f4dadb",pattern:"#fe9e9e",highlight:{srgb:"#ff7fa3",p3:"color(display-p3 0.9988 0.5301 0.6397)"}},"light-violet":{solid:"#e085f4",fill:"#e085f4",note:{fill:"#DFB0F9",text:"#000000"},semi:"#f5eafa",pattern:"#e9acf8",highlight:{srgb:"#ff88ff",p3:"color(display-p3 0.9676 0.5652 0.9999)"}},orange:{solid:"#e16919",fill:"#e16919",note:{fill:"#FAA475",text:"#000000"},semi:"#f8e2d4",pattern:"#f78438",highlight:{srgb:"#ffa500",p3:"color(display-p3 0.9988 0.6905 0.266)"}},red:{solid:"#e03131",fill:"#e03131",note:{fill:"#FC8282",text:"#000000"},semi:"#f4dadb",pattern:"#e55959",highlight:{srgb:"#ff636e",p3:"color(display-p3 0.9992 0.4376 0.45)"}},violet:{solid:"#ae3ec9",fill:"#ae3ec9",note:{fill:"#DB91FD",text:"#000000"},semi:"#ecdcf2",pattern:"#bd63d3",highlight:{srgb:"#c77cff",p3:"color(display-p3 0.7469 0.5089 0.9995)"}},yellow:{solid:"#f1ac4b",fill:"#f1ac4b",note:{fill:"#FED49A",text:"#000000"},semi:"#f9f0e6",pattern:"#fecb92",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},white:{solid:"#FFFFFF",fill:"#FFFFFF",semi:"#f5f5f5",pattern:"#f9f9f9",note:{fill:"#FFFFFF",text:"#000000"},highlight:{srgb:"#ffffff",p3:"color(display-p3 1 1 1)"}}},darkMode:{id:"dark",text:"hsl(210, 17%, 98%)",background:"hsl(240, 5%, 6.5%)",solid:"#010403",black:{solid:"#f2f2f2",fill:"#f2f2f2",note:{fill:"#2c2c2c",text:"#f2f2f2"},semi:"#2c3036",pattern:"#989898",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},blue:{solid:"#4f72fc",fill:"#4f72fc",note:{fill:"#2A3F98",text:"#f2f2f2"},semi:"#262d40",pattern:"#3a4b9e",highlight:{srgb:"#0079d2",p3:"color(display-p3 0.0032 0.4655 0.7991)"}},green:{solid:"#099268",fill:"#099268",note:{fill:"#014429",text:"#f2f2f2"},semi:"#253231",pattern:"#366a53",highlight:{srgb:"#009774",p3:"color(display-p3 0.0085 0.582 0.4604)"}},grey:{solid:"#9398b0",fill:"#9398b0",note:{fill:"#56595F",text:"#f2f2f2"},semi:"#33373c",pattern:"#7c8187",highlight:{srgb:"#9cb4cb",p3:"color(display-p3 0.6299 0.7012 0.7856)"}},"light-blue":{solid:"#4dabf7",fill:"#4dabf7",note:{fill:"#1F5495",text:"#f2f2f2"},semi:"#2a3642",pattern:"#4d7aa9",highlight:{srgb:"#00bdc8",p3:"color(display-p3 0.0023 0.7259 0.7735)"}},"light-green":{solid:"#40c057",fill:"#40c057",note:{fill:"#21581D",text:"#f2f2f2"},semi:"#2a3830",pattern:"#4e874e",highlight:{srgb:"#00a000",p3:"color(display-p3 0.2711 0.6172 0.0195)"}},"light-red":{solid:"#ff8787",fill:"#ff8787",note:{fill:"#923632",text:"#f2f2f2"},semi:"#3b3235",pattern:"#a56767",highlight:{srgb:"#db005b",p3:"color(display-p3 0.7849 0.0585 0.3589)"}},"light-violet":{solid:"#e599f7",fill:"#e599f7",note:{fill:"#762F8E",text:"#f2f2f2"},semi:"#383442",pattern:"#9770a9",highlight:{srgb:"#c400c7",p3:"color(display-p3 0.7024 0.0403 0.753)"}},orange:{solid:"#f76707",fill:"#f76707",note:{fill:"#843906",text:"#f2f2f2"},semi:"#3a2e2a",pattern:"#9f552d",highlight:{srgb:"#d07a00",p3:"color(display-p3 0.7699 0.4937 0.0085)"}},red:{solid:"#e03131",fill:"#e03131",note:{fill:"#89231A",text:"#f2f2f2"},semi:"#36292b",pattern:"#8f3734",highlight:{srgb:"#de002c",p3:"color(display-p3 0.7978 0.0509 0.2035)"}},violet:{solid:"#ae3ec9",fill:"#ae3ec9",note:{fill:"#681683",text:"#f2f2f2"},semi:"#31293c",pattern:"#763a8b",highlight:{srgb:"#9e00ee",p3:"color(display-p3 0.5651 0.0079 0.8986)"}},yellow:{solid:"#ffc034",fill:"#ffc034",note:{fill:"#98571B",text:"#f2f2f2"},semi:"#3c3934",pattern:"#fecb92",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},white:{solid:"#f3f3f3",fill:"#f3f3f3",semi:"#f5f5f5",pattern:"#f9f9f9",note:{fill:"#eaeaea",text:"#1d1d1d"},highlight:{srgb:"#ffffff",p3:"color(display-p3 1 1 1)"}}}};function Vu(n){return n.isDarkMode?Sb.darkMode:Sb.lightMode}const ja=wo.defineEnum("tldraw:color",{defaultValue:"black",values:iN}),LP=wo.defineEnum("tldraw:labelColor",{defaultValue:"black",values:iN}),Bh=wo.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),Hh=wo.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern","fill"]}),Bc=wo.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),oN={draw:"'tldraw_draw', sans-serif",sans:"'tldraw_sans', sans-serif",serif:"'tldraw_serif', serif",mono:"'tldraw_mono', monospace"},Hc=wo.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),sN=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],xb=wo.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:sN}),wb=wo.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:sN}),aN={labelColor:LP,color:ja,fill:Hh,dash:Bh,size:Hc,arrowheadStart:xb,arrowheadEnd:wb,font:Bc,start:Uh,end:Uh,bend:Ut,text:sn,labelPosition:Ut,scale:vi},Pg=Wl("arrow",{AddLabelColor:1,AddIsPrecise:2,AddLabelPosition:3,ExtractBindings:4,AddScale:5});function bb(n){return rN("shape","arrow",n)}const lN=Eg({sequenceId:"com.tldraw.shape.arrow",retroactive:!1,sequence:[bb({id:Pg.AddLabelColor,up:n=>{n.labelColor="black"},down:"retired"}),bb({id:Pg.AddIsPrecise,up:({start:n,end:e})=>{n.type==="binding"&&(n.isPrecise=!(n.normalizedAnchor.x===.5&&n.normalizedAnchor.y===.5)),e.type==="binding"&&(e.isPrecise=!(e.normalizedAnchor.x===.5&&e.normalizedAnchor.y===.5))},down:({start:n,end:e})=>{n.type==="binding"&&(n.isPrecise||(n.normalizedAnchor={x:.5,y:.5}),delete n.isPrecise),e.type==="binding"&&(e.isPrecise||(e.normalizedAnchor={x:.5,y:.5}),delete e.isPrecise)}}),bb({id:Pg.AddLabelPosition,up:n=>{n.labelPosition=.5},down:n=>{delete n.labelPosition}}),{id:Pg.ExtractBindings,scope:"store",up:n=>{const e=Object.values(n).filter(t=>t.typeName==="shape"&&t.type==="arrow");for(const t of e){const{start:r,end:i}=t.props;if(r.type==="binding"){const s=$h(),l={typeName:"binding",id:s,type:"arrow",fromId:t.id,toId:r.boundShapeId,meta:{},props:{terminal:"start",normalizedAnchor:r.normalizedAnchor,isExact:r.isExact,isPrecise:r.isPrecise}};n[s]=l,t.props.start={x:0,y:0}}else delete t.props.start.type;if(i.type==="binding"){const s=$h(),l={typeName:"binding",id:s,type:"arrow",fromId:t.id,toId:i.boundShapeId,meta:{},props:{terminal:"end",normalizedAnchor:i.normalizedAnchor,isExact:i.isExact,isPrecise:i.isPrecise}};n[s]=l,t.props.end={x:0,y:0}}else delete t.props.end.type}}},bb({id:Pg.AddScale,up:n=>{n.scale=1},down:n=>{delete n.scale}})]}),cN={terminal:mb("start","end"),normalizedAnchor:Uh,isExact:Pn,isPrecise:Pn},uN={sequence:[{dependsOn:[Pg.ExtractBindings]}]},VZ=$c("camera",Tn({typeName:Yo("camera"),id:Oa("camera"),x:Ut,y:Ut,z:Ut,meta:xo})),KZ=na("com.tldraw.camera",{AddMeta:1}),WZ=Aa({sequenceId:"com.tldraw.camera",recordType:"camera",sequence:[{id:KZ.AddMeta,up:n=>{n.meta={}}}]}),Gl=Uc("camera",{validator:VZ,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,z:1,meta:{}})),dN=gb(new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"])),GZ=Tn({type:dN,rotation:Ut}),qZ=gb(new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"])),YZ=new Set(["starting","paused","active","stopping"]),fN=Tn({id:sn,points:So(Uh),size:fb,color:qZ,opacity:Ut,state:gb(YZ),delay:Ut,shrink:Ut,taper:Pn}),wv=Oa("page"),XZ=$c("page",Tn({typeName:Yo("page"),id:wv,name:sn,index:OP,meta:xo})),ZZ=na("com.tldraw.page",{AddMeta:1}),QZ=Aa({sequenceId:"com.tldraw.page",recordType:"page",sequence:[{id:ZZ.AddMeta,up:n=>{n.meta={}}}]}),La=Uc("page",{validator:XZ,scope:"document"}).withDefaultProperties(()=>({meta:{}}));function oa(n){return La.isId(n)}const JZ={id:!1,typeName:!1,currentPageId:!1,opacityForNextShape:!1,stylesForNextShape:!1,followingUserId:!1,highlightedUserIds:!1,brush:!1,cursor:!1,scribbles:!1,isFocusMode:!0,isDebugMode:!0,isToolLocked:!0,exportBackground:!0,screenBounds:!0,insets:!0,zoomBrush:!1,chatMessage:!1,isChatting:!1,isPenMode:!1,isGridMode:!0,isFocused:!0,devicePixelRatio:!0,isCoarsePointer:!0,isHoveringCanvas:!1,openMenus:!1,isChangingStyle:!1,isReadonly:!0,meta:!1,duplicateProps:!1};function hN(n){return n?av(n,e=>JZ[e]):null}Oa("instance");function eQ(n){const e={};for(const[r,i]of n)e[r]=J2(i);const t=$c("instance",Tn({typeName:Yo("instance"),id:Oa("instance"),currentPageId:wv,followingUserId:sn.nullable(),brush:xv.nullable(),opacityForNextShape:eN,stylesForNextShape:Tn(e),cursor:GZ,scribbles:So(fN),isFocusMode:Pn,isDebugMode:Pn,isToolLocked:Pn,exportBackground:Pn,screenBounds:xv,insets:So(Pn),zoomBrush:xv.nullable(),isPenMode:Pn,isGridMode:Pn,chatMessage:sn,isChatting:Pn,highlightedUserIds:So(sn),isFocused:Pn,devicePixelRatio:Ut,isCoarsePointer:Pn,isHoveringCanvas:Pn.nullable(),openMenus:So(sn),isChangingStyle:Pn,isReadonly:Pn,meta:xo,duplicateProps:Tn({shapeIds:So(Oa("shape")),offset:Tn({x:Ut,y:Ut})}).nullable()}));return Uc("instance",{validator:t,scope:"session",ephemeralKeys:{currentPageId:!1,meta:!1,followingUserId:!0,opacityForNextShape:!0,stylesForNextShape:!0,brush:!0,cursor:!0,scribbles:!0,isFocusMode:!0,isDebugMode:!0,isToolLocked:!0,exportBackground:!0,screenBounds:!0,insets:!0,zoomBrush:!0,isPenMode:!0,isGridMode:!0,chatMessage:!0,isChatting:!0,highlightedUserIds:!0,isFocused:!0,devicePixelRatio:!0,isCoarsePointer:!0,isHoveringCanvas:!0,openMenus:!0,isChangingStyle:!0,isReadonly:!0,duplicateProps:!0}}).withDefaultProperties(()=>({followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribbles:[],cursor:{type:"default",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},insets:[!1,!1,!1,!1],zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[],isFocused:!1,devicePixelRatio:typeof window>"u"?1:window.devicePixelRatio,isCoarsePointer:!1,isHoveringCanvas:null,openMenus:[],isChangingStyle:!1,isReadonly:!1,meta:{},duplicateProps:null}))}const Fr=na("com.tldraw.instance",{AddTransparentExportBgs:1,RemoveDialog:2,AddToolLockMode:3,RemoveExtraPropsForNextShape:4,AddLabelColor:5,AddFollowingUserId:6,RemoveAlignJustify:7,AddZoom:8,AddVerticalAlign:9,AddScribbleDelay:10,RemoveUserId:11,AddIsPenModeAndIsGridMode:12,HoistOpacity:13,AddChat:14,AddHighlightedUserIds:15,ReplacePropsForNextShapeWithStylesForNextShape:16,AddMeta:17,RemoveCursorColor:18,AddLonelyProperties:19,ReadOnlyReadonly:20,AddHoveringCanvas:21,AddScribbles:22,AddInset:23,AddDuplicateProps:24,RemoveCanMoveCamera:25}),tQ=Aa({sequenceId:"com.tldraw.instance",recordType:"instance",sequence:[{id:Fr.AddTransparentExportBgs,up:n=>({...n,exportBackground:!0})},{id:Fr.RemoveDialog,up:({dialog:n,...e})=>e},{id:Fr.AddToolLockMode,up:n=>({...n,isToolLocked:!1})},{id:Fr.RemoveExtraPropsForNextShape,up:({propsForNextShape:n,...e})=>({...e,propsForNextShape:Object.fromEntries(Object.entries(n).filter(([t])=>["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(t)))})},{id:Fr.AddLabelColor,up:({propsForNextShape:n,...e})=>({...e,propsForNextShape:{...n,labelColor:"black"}})},{id:Fr.AddFollowingUserId,up:n=>({...n,followingUserId:null})},{id:Fr.RemoveAlignJustify,up:n=>{let e=n.propsForNextShape.align;return e==="justify"&&(e="start"),{...n,propsForNextShape:{...n.propsForNextShape,align:e}}}},{id:Fr.AddZoom,up:n=>({...n,zoomBrush:null})},{id:Fr.AddVerticalAlign,up:n=>({...n,propsForNextShape:{...n.propsForNextShape,verticalAlign:"middle"}})},{id:Fr.AddScribbleDelay,up:n=>n.scribble!==null?{...n,scribble:{...n.scribble,delay:0}}:{...n}},{id:Fr.RemoveUserId,up:({userId:n,...e})=>e},{id:Fr.AddIsPenModeAndIsGridMode,up:n=>({...n,isPenMode:!1,isGridMode:!1})},{id:Fr.HoistOpacity,up:({propsForNextShape:{opacity:n,...e},...t})=>({...t,opacityForNextShape:Number(n??"1"),propsForNextShape:e})},{id:Fr.AddChat,up:n=>({...n,chatMessage:"",isChatting:!1})},{id:Fr.AddHighlightedUserIds,up:n=>({...n,highlightedUserIds:[]})},{id:Fr.ReplacePropsForNextShapeWithStylesForNextShape,up:({propsForNextShape:n,...e})=>({...e,stylesForNextShape:{}})},{id:Fr.AddMeta,up:n=>({...n,meta:{}})},{id:Fr.RemoveCursorColor,up:n=>{const{color:e,...t}=n.cursor;return{...n,cursor:t}}},{id:Fr.AddLonelyProperties,up:n=>({...n,canMoveCamera:!0,isFocused:!1,devicePixelRatio:1,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadOnly:!1})},{id:Fr.ReadOnlyReadonly,up:({isReadOnly:n,...e})=>({...e,isReadonly:n})},{id:Fr.AddHoveringCanvas,up:n=>({...n,isHoveringCanvas:null})},{id:Fr.AddScribbles,up:({scribble:n,...e})=>({...e,scribbles:[]})},{id:Fr.AddInset,up:n=>({...n,insets:[!1,!1,!1,!1]}),down:({insets:n,...e})=>({...e})},{id:Fr.AddDuplicateProps,up:n=>({...n,duplicateProps:null}),down:({duplicateProps:n,...e})=>({...e})},{id:Fr.RemoveCanMoveCamera,up:({canMoveCamera:n,...e})=>({...e}),down:n=>({...n,canMoveCamera:!0})}]}),Xo="instance:instance",nQ=$c("instance_page_state",Tn({typeName:Yo("instance_page_state"),id:Oa("instance_page_state"),pageId:wv,selectedShapeIds:So(ul),hintingShapeIds:So(ul),erasingShapeIds:So(ul),hoveredShapeId:ul.nullable(),editingShapeId:ul.nullable(),croppingShapeId:ul.nullable(),focusedGroupId:ul.nullable(),meta:xo})),bv=na("com.tldraw.instance_page_state",{AddCroppingId:1,RemoveInstanceIdAndCameraId:2,AddMeta:3,RenameProperties:4,RenamePropertiesAgain:5}),rQ=Aa({sequenceId:"com.tldraw.instance_page_state",recordType:"instance_page_state",sequence:[{id:bv.AddCroppingId,up(n){n.croppingShapeId=null}},{id:bv.RemoveInstanceIdAndCameraId,up(n){delete n.instanceId,delete n.cameraId}},{id:bv.AddMeta,up:n=>{n.meta={}}},{id:bv.RenameProperties,up:n=>{},down:n=>{}},{id:bv.RenamePropertiesAgain,up:n=>{n.selectedShapeIds=n.selectedIds,delete n.selectedIds,n.hintingShapeIds=n.hintingIds,delete n.hintingIds,n.erasingShapeIds=n.erasingIds,delete n.erasingIds,n.hoveredShapeId=n.hoveredId,delete n.hoveredId,n.editingShapeId=n.editingId,delete n.editingId,n.croppingShapeId=n.croppingShapeId??n.croppingId??null,delete n.croppingId,n.focusedGroupId=n.focusLayerId,delete n.focusLayerId},down:n=>{n.selectedIds=n.selectedShapeIds,delete n.selectedShapeIds,n.hintingIds=n.hintingShapeIds,delete n.hintingShapeIds,n.erasingIds=n.erasingShapeIds,delete n.erasingShapeIds,n.hoveredId=n.hoveredShapeId,delete n.hoveredShapeId,n.editingId=n.editingShapeId,delete n.editingShapeId,n.croppingId=n.croppingShapeId,delete n.croppingShapeId,n.focusLayerId=n.focusedGroupId,delete n.focusedGroupId}}]}),dl=Uc("instance_page_state",{validator:nQ,scope:"session",ephemeralKeys:{pageId:!1,selectedShapeIds:!1,editingShapeId:!1,croppingShapeId:!1,meta:!1,hintingShapeIds:!0,erasingShapeIds:!0,hoveredShapeId:!0,focusedGroupId:!0}}).withDefaultProperties(()=>({editingShapeId:null,croppingShapeId:null,selectedShapeIds:[],hoveredShapeId:null,erasingShapeIds:[],hintingShapeIds:[],focusedGroupId:null,meta:{}})),iQ=$c("pointer",Tn({typeName:Yo("pointer"),id:Oa("pointer"),x:Ut,y:Ut,lastActivityTimestamp:Ut,meta:xo})),oQ=na("com.tldraw.pointer",{AddMeta:1}),sQ=Aa({sequenceId:"com.tldraw.pointer",recordType:"pointer",sequence:[{id:oQ.AddMeta,up:n=>{n.meta={}}}]}),NP=Uc("pointer",{validator:iQ,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,lastActivityTimestamp:0,meta:{}})),Cv=NP.createId("pointer"),aQ=$c("instance_presence",Tn({typeName:Yo("instance_presence"),id:Oa("instance_presence"),userId:sn,userName:sn,lastActivityTimestamp:Ut.nullable(),followingUserId:sn.nullable(),cursor:Tn({x:Ut,y:Ut,type:dN,rotation:Ut}).nullable(),color:sn,camera:Tn({x:Ut,y:Ut,z:Ut}).nullable(),screenBounds:xv.nullable(),selectedShapeIds:So(Oa("shape")),currentPageId:Oa("page"),brush:xv.nullable(),scribbles:So(fN),chatMessage:sn,meta:xo})),Tg=na("com.tldraw.instance_presence",{AddScribbleDelay:1,RemoveInstanceId:2,AddChatMessage:3,AddMeta:4,RenameSelectedShapeIds:5,NullableCameraCursor:6}),lQ=Aa({sequenceId:"com.tldraw.instance_presence",recordType:"instance_presence",sequence:[{id:Tg.AddScribbleDelay,up:n=>{n.scribble!==null&&(n.scribble.delay=0)}},{id:Tg.RemoveInstanceId,up:n=>{delete n.instanceId}},{id:Tg.AddChatMessage,up:n=>{n.chatMessage=""}},{id:Tg.AddMeta,up:n=>{n.meta={}}},{id:Tg.RenameSelectedShapeIds,up:n=>{}},{id:Tg.NullableCameraCursor,up:n=>{},down:n=>{n.camera===null&&(n.camera={x:0,y:0,z:1}),n.lastActivityTimestamp===null&&(n.lastActivityTimestamp=0),n.cursor===null&&(n.cursor={type:"default",x:0,y:0,rotation:0}),n.screenBounds===null&&(n.screenBounds={x:0,y:0,w:1,h:1})}}]}),FP=Uc("instance_presence",{validator:aQ,scope:"presence"}).withDefaultProperties(()=>({lastActivityTimestamp:null,followingUserId:null,color:"#FF0000",camera:null,cursor:null,screenBounds:null,selectedShapeIds:[],brush:null,scribbles:[],chatMessage:"",meta:{}}));function cQ(n,e){const t=n.get(Xo),r=n.get(dl.createId(t==null?void 0:t.currentPageId)),i=n.get(Gl.createId(t==null?void 0:t.currentPageId)),s=n.get(Cv);return!r||!t||!i||!s?null:{selectedShapeIds:r.selectedShapeIds,brush:t.brush,scribbles:t.scribbles,userId:e.id,userName:e.name??"",followingUserId:t.followingUserId,camera:{x:i.x,y:i.y,z:i.z},color:e.color??"#FF0000",currentPageId:t.currentPageId,cursor:{x:s.x,y:s.y,rotation:t.cursor.rotation,type:t.cursor.type},lastActivityTimestamp:s.lastActivityTimestamp,screenBounds:t.screenBounds,chatMessage:t.chatMessage,meta:{}}}const uQ=$c("document",Tn({typeName:Yo("document"),id:Yo("document:document"),gridSize:Ut,name:sn,meta:xo})),pN=na("com.tldraw.document",{AddName:1,AddMeta:2}),dQ=Aa({sequenceId:"com.tldraw.document",recordType:"document",sequence:[{id:pN.AddName,up:n=>{n.name=""},down:n=>{delete n.name}},{id:pN.AddMeta,up:n=>{n.meta={}}}]}),zP=Uc("document",{validator:uQ,scope:"document"}).withDefaultProperties(()=>({gridSize:10,name:"",meta:{}})),UP=zP.createId("document");function fQ(n,e){return n.index<e.index?-1:n.index>e.index?1:0}function gN(n){n.typeName==="asset"&&("src"in n&&(n.src="<redacted>"),"src"in n.props&&(n.props.src="<redacted>"))}function hQ({error:n,phase:e,record:t,recordBefore:r}){throw oP(n,{tags:{origin:"store.validateRecord",storePhase:e,isExistingValidationIssue:e==="initialize"},extras:{recordBefore:r?gN(Lr(r)):void 0,recordAfter:gN(Lr(t))}}),n}function pQ(){return[La.create({id:"page:page",name:"Page 1",index:"a1",meta:{}})]}function gQ(n){const e=n.query.ids("page"),t=n.query.records("instance_page_state"),r=()=>{if(!n.has(UP))return n.put([zP.create({id:UP,name:n.props.defaultName})]),r();if(!n.has(Cv))return n.put([NP.create({id:Cv})]),r();const i=e.get();if(i.size===0)return n.put(pQ()),r();const s=()=>[...i].map(g=>n.get(g)).sort(fQ)[0].id,l=n.get(Xo);if(l){if(!i.has(l.currentPageId))return n.put([{...l,currentPageId:s()}]),r()}else return n.put([n.schema.types.instance.create({id:Xo,currentPageId:s(),exportBackground:!0})]),r();const c=new Set,d=new Set;for(const g of i){const y=dl.createId(g);n.get(y)||c.add(y);const w=Gl.createId(g);n.has(w)||d.add(w)}c.size>0&&n.put([...c].map(g=>dl.create({id:g,pageId:dl.parseId(g)}))),d.size>0&&n.put([...d].map(g=>Gl.create({id:g})));const h=t.get();for(const g of h){if(!i.has(g.pageId)){n.remove([g.id]);continue}if(g.croppingShapeId&&!n.has(g.croppingShapeId))return n.put([{...g,croppingShapeId:null}]),r();if(g.focusedGroupId&&!n.has(g.focusedGroupId))return n.put([{...g,focusedGroupId:null}]),r();if(g.hoveredShapeId&&!n.has(g.hoveredShapeId))return n.put([{...g,hoveredShapeId:null}]),r();const y=g.selectedShapeIds.filter(C=>n.has(C));if(y.length!==g.selectedShapeIds.length)return n.put([{...g,selectedShapeIds:y}]),r();const v=g.hintingShapeIds.filter(C=>n.has(C));if(v.length!==g.hintingShapeIds.length)return n.put([{...g,hintingShapeIds:v}]),r();const w=g.erasingShapeIds.filter(C=>n.has(C));if(w.length!==g.erasingShapeIds.length)return n.put([{...g,erasingShapeIds:w}]),r()}};return r}const mQ=jP("bookmark",Tn({title:sn,description:sn,image:sn,favicon:sn,src:zh.nullable()})),mN=na("com.tldraw.asset.bookmark",{MakeUrlsValid:1,AddFavicon:2}),yQ=Aa({sequenceId:"com.tldraw.asset.bookmark",recordType:"asset",filter:n=>n.type==="bookmark",sequence:[{id:mN.MakeUrlsValid,up:n=>{zh.isValid(n.props.src)||(n.props.src="")},down:n=>{}},{id:mN.AddFavicon,up:n=>{zh.isValid(n.props.favicon)||(n.props.favicon="")},down:n=>{delete n.props.favicon}}]}),vQ=jP("image",Tn({w:Ut,h:Ut,name:sn,isAnimated:Pn,mimeType:sn.nullable(),src:zh.nullable(),fileSize:vi.optional()})),Ev=na("com.tldraw.asset.image",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3,AddFileSize:4,MakeFileSizeOptional:5}),SQ=Aa({sequenceId:"com.tldraw.asset.image",recordType:"asset",filter:n=>n.type==="image",sequence:[{id:Ev.AddIsAnimated,up:n=>{n.props.isAnimated=!1},down:n=>{delete n.props.isAnimated}},{id:Ev.RenameWidthHeight,up:n=>{n.props.w=n.props.width,n.props.h=n.props.height,delete n.props.width,delete n.props.height},down:n=>{n.props.width=n.props.w,n.props.height=n.props.h,delete n.props.w,delete n.props.h}},{id:Ev.MakeUrlsValid,up:n=>{zh.isValid(n.props.src)||(n.props.src="")},down:n=>{}},{id:Ev.AddFileSize,up:n=>{n.props.fileSize=-1},down:n=>{delete n.props.fileSize}},{id:Ev.MakeFileSizeOptional,up:n=>{n.props.fileSize===-1&&(n.props.fileSize=void 0)},down:n=>{n.props.fileSize===void 0&&(n.props.fileSize=-1)}}]}),xQ=jP("video",Tn({w:Ut,h:Ut,name:sn,isAnimated:Pn,mimeType:sn.nullable(),src:zh.nullable(),fileSize:Ut.optional()})),_v=na("com.tldraw.asset.video",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3,AddFileSize:4,MakeFileSizeOptional:5}),wQ=Aa({sequenceId:"com.tldraw.asset.video",recordType:"asset",filter:n=>n.type==="video",sequence:[{id:_v.AddIsAnimated,up:n=>{n.props.isAnimated=!1},down:n=>{delete n.props.isAnimated}},{id:_v.RenameWidthHeight,up:n=>{n.props.w=n.props.width,n.props.h=n.props.height,delete n.props.width,delete n.props.height},down:n=>{n.props.width=n.props.w,n.props.height=n.props.h,delete n.props.w,delete n.props.h}},{id:_v.MakeUrlsValid,up:n=>{zh.isValid(n.props.src)||(n.props.src="")},down:n=>{}},{id:_v.AddFileSize,up:n=>{n.props.fileSize=-1},down:n=>{delete n.props.fileSize}},{id:_v.MakeFileSizeOptional,up:n=>{n.props.fileSize===-1&&(n.props.fileSize=void 0)},down:n=>{n.props.fileSize===void 0&&(n.props.fileSize=-1)}}]}),bQ=$c("asset",AP("type",{image:vQ,video:xQ,bookmark:mQ})),CQ=na("com.tldraw.asset",{AddMeta:1}),EQ=Aa({sequenceId:"com.tldraw.asset",recordType:"asset",sequence:[{id:CQ.AddMeta,up:n=>{n.meta={}}}]}),cf=Uc("asset",{validator:bQ,scope:"document"}).withDefaultProperties(()=>({meta:{}})),yN={w:vi,h:vi,assetId:yb.nullable(),url:Da},vN=Wl("bookmark",{NullAssetId:1,MakeUrlsValid:2}),SN={sequence:[{id:vN.NullAssetId,up:n=>{n.assetId===void 0&&(n.assetId=null)},down:"retired"},{id:vN.MakeUrlsValid,up:n=>{Da.isValid(n.url)||(n.url="")},down:n=>{}}]},xN=Tn({type:mb("free","straight"),points:So(Uh)}),wN={color:ja,fill:Hh,dash:Bh,size:Hc,segments:So(xN),isComplete:Pn,isClosed:Pn,isPen:Pn,scale:vi},bN=Wl("draw",{AddInPen:1,AddScale:2}),CN={sequence:[{id:bN.AddInPen,up:n=>{const{points:e}=n.segments[0];if(e.length===0){n.isPen=!1;return}let t=!(e[0].z===0||e[0].z===.5);e[1]&&(t=t&&!(e[1].z===0||e[1].z===.5)),n.isPen=t},down:"retired"},{id:bN.AddScale,up:n=>{n.scale=1},down:n=>{delete n.scale}}]},_Q=/(^\/r\/[^/]+\/?$)/,PQ=[{hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(_Q))return n}},{hostnames:["figma.com"],fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/embed\/?$/)){const t=e.searchParams.get("url");if(t)return t}}},{hostnames:["google.*"],fromEmbedUrl:n=>{const e=Wt(n);if(!e)return;if(e.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&e.searchParams.has("center")&&e.searchParams.get("zoom")){const r=e.searchParams.get("zoom"),[i,s]=e.searchParams.get("center").split(",");return`https://www.google.com/maps/@${i},${s},${r}z`}}},{hostnames:["val.town"],fromEmbedUrl:n=>{const e=Wt(n),t=e&&e.pathname.match(/\/embed\/(.+)\/?/);if(t)return`https://www.val.town/v/${t[1]}`}},{hostnames:["codesandbox.io"],fromEmbedUrl:n=>{const e=Wt(n),t=e&&e.pathname.match(/\/embed\/([^/]+)\/?/);if(t)return`https://codesandbox.io/s/${t[1]}`}},{hostnames:["codepen.io"],fromEmbedUrl:n=>{const e=/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/,t=n.match(e);if(t){const[r,i,s]=t;return`https://codepen.io/${i}/pen/${s}`}}},{hostnames:["scratch.mit.edu"],fromEmbedUrl:n=>{const e=/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/,t=n.match(e);if(t){const[r,i]=t;return`https://scratch.mit.edu/projects/${i}`}}},{hostnames:["*.youtube.com","youtube.com","youtu.be"],fromEmbedUrl:n=>{const e=Wt(n);if(!e)return;if(e.hostname.replace(/^www./,"")==="youtube.com"){const r=e.pathname.match(/^\/embed\/([^/]+)\/?/);if(r)return`https://www.youtube.com/watch?v=${r[1]}`}}},{hostnames:["calendar.google.*"],fromEmbedUrl:n=>{const e=Wt(n),t=e==null?void 0:e.searchParams.get("src");if(e!=null&&e.pathname.match(/\/calendar\/embed/)&&t){e.pathname="/calendar/u/0";const r=Array.from(e.searchParams.keys());for(const i of r)e.searchParams.delete(i);return e.searchParams.set("cid",t),e.href}}},{hostnames:["docs.google.*"],fromEmbedUrl:n=>{const e=Wt(n);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/embed\/?$/))){e.pathname=e.pathname.replace(/\/embed$/,"/pub");const t=Array.from(e.searchParams.keys());for(const r of t)e.searchParams.delete(r);return e.href}}},{hostnames:["gist.github.com"],fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/\/([^/]+)\/([^/]+)/))return n.split("/").pop()?n:void 0}},{hostnames:["replit.com"],fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/)&&e.searchParams.has("embed"))return e.searchParams.delete("embed"),e.href}},{hostnames:["felt.com"],fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/embed\/map\//))return e.pathname=e.pathname.replace(/^\/embed/,""),e.href}},{hostnames:["open.spotify.com"],fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/embed\/(artist|album)\//))return e.origin+e.pathname.replace(/^\/embed/,"")}},{hostnames:["vimeo.com","player.vimeo.com"],fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.hostname==="player.vimeo.com"){const t=e.pathname.match(/^\/video\/([^/]+)\/?$/);if(t)return"https://vimeo.com/"+t[1]}}},{hostnames:["excalidraw.com"],fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.hash.match(/#room=/))return n}},{hostnames:["observablehq.com"],fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","")}#cell-*`;if(e&&e.pathname.match(/^\/embed\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","/d")}#cell-*`}},{hostnames:["desmos.com"],fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.hostname==="www.desmos.com"&&e.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&e.search==="?embed"&&e.hash==="")return n.replace("?embed","")}}],EN={w:vi,h:vi,url:sn},Cb=Wl("embed",{GenOriginalUrlInEmbed:1,RemoveDoesResize:2,RemoveTmpOldUrl:3,RemovePermissionOverrides:4}),_N={sequence:[{id:Cb.GenOriginalUrlInEmbed,up:n=>{try{const e=n.url,t=new URL(e).host.replace("www.","");let r;for(const i of PQ)if(i.hostnames.includes(t))try{r=i.fromEmbedUrl(e)}catch(s){console.warn(s)}n.tmpOldUrl=n.url,n.url=r??""}catch{n.url="",n.tmpOldUrl=n.url}},down:"retired"},{id:Cb.RemoveDoesResize,up:n=>{delete n.doesResize},down:"retired"},{id:Cb.RemoveTmpOldUrl,up:n=>{delete n.tmpOldUrl},down:"retired"},{id:Cb.RemovePermissionOverrides,up:n=>{delete n.overridePermissions},down:"retired"}]},PN={w:vi,h:vi,name:sn},TN={sequence:[]},Eb=wo.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),_b=wo.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),ql=wo.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["cloud","rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box","heart"]}),IN={geo:ql,labelColor:LP,color:ja,fill:Hh,dash:Bh,size:Hc,font:Bc,align:Eb,verticalAlign:_b,url:Da,w:vi,h:vi,growY:fb,text:sn,scale:vi},Ku=Wl("geo",{AddUrlProp:1,AddLabelColor:2,RemoveJustify:3,AddCheckBox:4,AddVerticalAlign:5,MigrateLegacyAlign:6,AddCloud:7,MakeUrlsValid:8,AddScale:9}),kN={sequence:[{id:Ku.AddUrlProp,up:n=>{n.url=""},down:"retired"},{id:Ku.AddLabelColor,up:n=>{n.labelColor="black"},down:"retired"},{id:Ku.RemoveJustify,up:n=>{n.align==="justify"&&(n.align="start")},down:"retired"},{id:Ku.AddCheckBox,up:n=>{},down:"retired"},{id:Ku.AddVerticalAlign,up:n=>{n.verticalAlign="middle"},down:"retired"},{id:Ku.MigrateLegacyAlign,up:n=>{let e;switch(n.align){case"start":e="start-legacy";break;case"end":e="end-legacy";break;default:e="middle-legacy";break}n.align=e},down:"retired"},{id:Ku.AddCloud,up:n=>{},down:"retired"},{id:Ku.MakeUrlsValid,up:n=>{Da.isValid(n.url)||(n.url="")},down:n=>{}},{id:Ku.AddScale,up:n=>{n.scale=1},down:n=>{delete n.scale}}]},RN={},MN={sequence:[]},AN={color:ja,size:Hc,segments:So(xN),isComplete:Pn,isPen:Pn,scale:vi},TQ=Wl("highlight",{AddScale:1}),DN={sequence:[{id:TQ.AddScale,up:n=>{n.scale=1},down:n=>{delete n.scale}}]},IQ=Tn({topLeft:Uh,bottomRight:Uh}),ON={w:vi,h:vi,playing:Pn,url:Da,assetId:yb.nullable(),crop:IQ.nullable(),flipX:Pn,flipY:Pn},Pb=Wl("image",{AddUrlProp:1,AddCropProp:2,MakeUrlsValid:3,AddFlipProps:4}),jN={sequence:[{id:Pb.AddUrlProp,up:n=>{n.url=""},down:"retired"},{id:Pb.AddCropProp,up:n=>{n.crop=null},down:n=>{delete n.crop}},{id:Pb.MakeUrlsValid,up:n=>{Da.isValid(n.url)||(n.url="")},down:n=>{}},{id:Pb.AddFlipProps,up:n=>{n.flipX=!1,n.flipY=!1},down:n=>{delete n.flipX,delete n.flipY}}]},Tb=wo.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),kQ=Tn({id:sn,index:OP,x:Ut,y:Ut}),LN={color:ja,dash:Bh,size:Hc,spline:Tb,points:pb(sn,kQ),scale:vi},Pv=Wl("line",{AddSnapHandles:1,RemoveExtraHandleProps:2,HandlesToPoints:3,PointIndexIds:4,AddScale:5}),NN={sequence:[{id:Pv.AddSnapHandles,up:n=>{for(const e of Object.values(n.handles))e.canSnap=!0},down:"retired"},{id:Pv.RemoveExtraHandleProps,up:n=>{n.handles=cP(Object.values(n.handles).map(e=>[e.index,{x:e.x,y:e.y}]))},down:n=>{const e=Object.entries(n.handles).map(([t,r])=>({index:t,...r})).sort(Go);n.handles=Object.fromEntries(e.map((t,r)=>{const i=r===0?"start":r===e.length-1?"end":`handle:${t.index}`;return[i,{id:i,type:"vertex",canBind:!1,canSnap:!0,index:t.index,x:t.x,y:t.y}]}))}},{id:Pv.HandlesToPoints,up:n=>{const e=Object.entries(n.handles).map(([t,{x:r,y:i}])=>({x:r,y:i,index:t})).sort(Go);n.points=e.map(({x:t,y:r})=>({x:t,y:r})),delete n.handles},down:n=>{const e=uv(n.points.length);n.handles=Object.fromEntries(n.points.map((t,r)=>[e[r],{x:t.x,y:t.y}])),delete n.points}},{id:Pv.PointIndexIds,up:n=>{const e=uv(n.points.length);n.points=Object.fromEntries(n.points.map((t,r)=>{const i=e[r];return[i,{id:i,index:i,x:t.x,y:t.y}]}))},down:n=>{const e=Object.values(n.points).sort(Go);n.points=e.map(({x:t,y:r})=>({x:t,y:r}))}},{id:Pv.AddScale,up:n=>{n.scale=1},down:n=>{delete n.scale}}]},FN={color:ja,labelColor:LP,size:Hc,font:Bc,fontSizeAdjustment:fb,align:Eb,verticalAlign:_b,growY:fb,url:Da,text:sn,scale:vi},uf=Wl("note",{AddUrlProp:1,RemoveJustify:2,MigrateLegacyAlign:3,AddVerticalAlign:4,MakeUrlsValid:5,AddFontSizeAdjustment:6,AddScale:7,AddLabelColor:8}),zN={sequence:[{id:uf.AddUrlProp,up:n=>{n.url=""},down:"retired"},{id:uf.RemoveJustify,up:n=>{n.align==="justify"&&(n.align="start")},down:"retired"},{id:uf.MigrateLegacyAlign,up:n=>{switch(n.align){case"start":n.align="start-legacy";return;case"end":n.align="end-legacy";return;default:n.align="middle-legacy";return}},down:"retired"},{id:uf.AddVerticalAlign,up:n=>{n.verticalAlign="middle"},down:"retired"},{id:uf.MakeUrlsValid,up:n=>{Da.isValid(n.url)||(n.url="")},down:n=>{}},{id:uf.AddFontSizeAdjustment,up:n=>{n.fontSizeAdjustment=0},down:n=>{delete n.fontSizeAdjustment}},{id:uf.AddScale,up:n=>{n.scale=1},down:n=>{delete n.scale}},{id:uf.AddLabelColor,up:n=>{n.labelColor="black"},down:n=>{delete n.labelColor}}]},$P=wo.defineEnum("tldraw:textAlign",{defaultValue:"start",values:["start","middle","end"]}),UN={color:ja,size:Hc,font:Bc,textAlign:$P,w:vi,text:sn,scale:vi,autoSize:Pn},$N=Wl("text",{RemoveJustify:1,AddTextAlign:2}),BN={sequence:[{id:$N.RemoveJustify,up:n=>{n.align==="justify"&&(n.align="start")},down:"retired"},{id:$N.AddTextAlign,up:n=>{n.textAlign=n.align,delete n.align},down:n=>{n.align=n.textAlign,delete n.textAlign}}]},HN={w:vi,h:vi,time:Ut,playing:Pn,url:Da,assetId:yb.nullable()},VN=Wl("video",{AddUrlProp:1,MakeUrlsValid:2}),KN={sequence:[{id:VN.AddUrlProp,up:n=>{n.url=""},down:"retired"},{id:VN.MakeUrlsValid,up:n=>{Da.isValid(n.url)||(n.url="")},down:n=>{}}]},Ib=na("com.tldraw.store",{RemoveCodeAndIconShapeTypes:1,AddInstancePresenceType:2,RemoveTLUserAndPresenceAndAddPointer:3,RemoveUserDocument:4}),RQ=Eg({sequenceId:"com.tldraw.store",retroactive:!1,sequence:[{id:Ib.RemoveCodeAndIconShapeTypes,scope:"store",up:n=>{for(const[e,t]of vo(n))t.typeName==="shape"&&(t.type==="icon"||t.type==="code")&&delete n[e]}},{id:Ib.AddInstancePresenceType,scope:"store",up(n){}},{id:Ib.RemoveTLUserAndPresenceAndAddPointer,scope:"store",up:n=>{for(const[e,t]of vo(n))t.typeName.match(/^(user|user_presence)$/)&&delete n[e]}},{id:Ib.RemoveUserDocument,scope:"store",up:n=>{for(const[e,t]of vo(n))t.typeName.match("user_document")&&delete n[e]}}]}),MQ={arrow:{migrations:lN,props:aN},bookmark:{migrations:SN,props:yN},draw:{migrations:CN,props:wN},embed:{migrations:_N,props:EN},frame:{migrations:TN,props:PN},geo:{migrations:kN,props:IN},group:{migrations:MN,props:RN},highlight:{migrations:DN,props:AN},image:{migrations:jN,props:ON},line:{migrations:NN,props:LN},note:{migrations:zN,props:FN},text:{migrations:BN,props:UN},video:{migrations:KN,props:HN}},AQ={arrow:{migrations:uN,props:cN}};function DQ({shapes:n=MQ,bindings:e=AQ,migrations:t}={}){const r=new Map;for(const c of Hr(n))for(const d of tN(c.props??{}).keys()){if(r.has(d.id)&&r.get(d.id)!==d)throw new Error(`Multiple StyleProp instances with the same id: ${d.id}`);r.set(d.id,d)}const i=HZ(n),s=UZ(e),l=eQ(r);return PP.create({asset:cf,binding:s,camera:Gl,document:zP,instance:l,instance_page_state:dl,page:La,instance_presence:FP,pointer:NP,shape:i},{migrations:[RQ,EQ,WZ,dQ,tQ,rQ,QZ,lQ,sQ,BZ,yQ,SQ,wQ,...nN("shape",n),...nN("binding",e),...t??[]],onValidationFailure:hQ,createIntegrityChecker:gQ})}const Tv=[{locale:"id",label:"Bahasa Indonesia"},{locale:"ca",label:"Catal"},{locale:"cs",label:"etina"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espaol"},{locale:"fr",label:"Franais"},{locale:"gl",label:"Galego"},{locale:"hr",label:"Hrvatski"},{locale:"it",label:"Italiano"},{locale:"hu",label:"Magyar"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugus - Brasil"},{locale:"pt-pt",label:"Portugus - Europeu"},{locale:"ro",label:"Romn"},{locale:"ru",label:"Russian"},{locale:"sl",label:"Slovenina"},{locale:"so",label:"Somali"},{locale:"fi",label:"Suomi"},{locale:"sv",label:"Svenska"},{locale:"vi",label:"Ting Vit"},{locale:"tr",label:"Trke"},{locale:"uk",label:"Ukrainian"},{locale:"he",label:""},{locale:"ar",label:""},{locale:"fa",label:""},{locale:"ku",label:""},{locale:"ne",label:""},{locale:"hi-in",label:""},{locale:"te",label:""},{locale:"th",label:""},{locale:"my",label:""},{locale:"ko-kr",label:""},{locale:"ja",label:""},{locale:"zh-cn",label:""},{locale:"zh-tw",label:" ()"}];function OQ(){const n=typeof window<"u"?window.navigator.languages??["en"]:["en"];return jQ(n)}function jQ(n){for(const e of n){const t=LQ(e);if(t)return t}return"en"}const WN={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function LQ(n){const e=Tv.find(i=>i.locale===n.toLowerCase());if(e)return e.locale;const[t,r]=n.split(/[-_]/).map(i=>i.toLowerCase());if(r){const i=Tv.find(s=>s.locale===t);if(i)return i.locale}return t in WN?WN[t]:null}Oc("@tldraw/tlschema","3.7.0","esm"),Oc("@tldraw/sync-core","3.7.0","esm");function kb(n,e,t=[]){const r=zt.useRef(e);r.current=e;const[i,s,l]=zt.useMemo(()=>{let c=null;const d=y=>(c=y,()=>{c=null}),h=new Cg(`useStateTracking(${n})`,()=>{var y;return(y=r.current)==null?void 0:y.call(r)},{scheduleEffect(){c==null||c()}});return[h,d,()=>h.scheduleCount]},[n,...t]);return zt.useSyncExternalStore(s,l,l),zt.useEffect(()=>(i.attach(),i.maybeScheduleEffect(),()=>{i.detach()}),[i]),i.execute()}const GN={apply(n,e,t){return kb(n.displayName??n.name??"tracked(???)",()=>n.apply(e,t))}},NQ=Symbol.for("react.memo"),FQ=Symbol.for("react.forward_ref");function bo(n){let e=null;const t=n.$$typeof;return t===NQ&&(n=n.type,e=n.compare),t===FQ?M.memo(M.forwardRef(new Proxy(n.render,GN))):M.memo(new Proxy(n,GN),e)}function Iv(n,e,t){return M.useState(()=>{const r=typeof e=="function"?e():e;return si(`useAtom(${n})`,r,t)})[0]}function zQ(){const n=arguments[0],e=arguments[1],t=arguments.length===3?void 0:arguments[2],r=arguments.length===3?arguments[2]:arguments[3];return M.useMemo(()=>Le(`useComputed(${n})`,e,t),r)}function df(n,e,t=Bu){M.useEffect(()=>{const r=new Cg(n,e);return r.attach(),r.execute(),()=>{r.detach()}},t)}function Pe(){const n=arguments,e=n.length===3?n[2]:[n[0]],t=n.length===3?n[0]:`useValue(${n[0].name})`,r=M.useRef(!0);r.current=!0;const i=M.useMemo(()=>n.length===1?n[0]:Le(t,()=>{if(r.current)return n[1]();try{return n[1]()}catch{return{}}}),e);try{const{subscribe:s,getSnapshot:l}=M.useMemo(()=>({subscribe:c=>Kl(`useValue(${t})`,()=>{i.get(),c()}),getSnapshot:()=>i.get()}),[i]);return M.useSyncExternalStore(s,l,l)}finally{r.current=!1}}Oc("@tldraw/state-react","3.7.0","esm");var qN={},kv,YN;function _s(){if(YN)return kv;YN=1;var n=function(e){return e&&e.Math===Math&&e};return kv=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof $i=="object"&&$i)||n(typeof kv=="object"&&kv)||function(){return this}()||Function("return this")(),kv}var BP={},HP,XN;function Ps(){return XN||(XN=1,HP=function(n){try{return!!n()}catch{return!0}}),HP}var VP,ZN;function ff(){if(ZN)return VP;ZN=1;var n=Ps();return VP=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),VP}var KP,QN;function Rb(){if(QN)return KP;QN=1;var n=Ps();return KP=!n(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),KP}var WP,JN;function Wu(){if(JN)return WP;JN=1;var n=Rb(),e=Function.prototype.call;return WP=n?e.bind(e):function(){return e.apply(e,arguments)},WP}var GP={},e3;function UQ(){if(e3)return GP;e3=1;var n={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,t=e&&!n.call({1:2},1);return GP.f=t?function(i){var s=e(this,i);return!!s&&s.enumerable}:n,GP}var qP,t3;function n3(){return t3||(t3=1,qP=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}}),qP}var YP,r3;function so(){if(r3)return YP;r3=1;var n=Rb(),e=Function.prototype,t=e.call,r=n&&e.bind.bind(t,t);return YP=n?r:function(i){return function(){return t.apply(i,arguments)}},YP}var XP,i3;function Ig(){if(i3)return XP;i3=1;var n=so(),e=n({}.toString),t=n("".slice);return XP=function(r){return t(e(r),8,-1)},XP}var ZP,o3;function $Q(){if(o3)return ZP;o3=1;var n=so(),e=Ps(),t=Ig(),r=Object,i=n("".split);return ZP=e(function(){return!r("z").propertyIsEnumerable(0)})?function(s){return t(s)==="String"?i(s,""):r(s)}:r,ZP}var QP,s3;function Mb(){return s3||(s3=1,QP=function(n){return n==null}),QP}var JP,a3;function kg(){if(a3)return JP;a3=1;var n=Mb(),e=TypeError;return JP=function(t){if(n(t))throw new e("Can't call method on "+t);return t},JP}var eT,l3;function Ab(){if(l3)return eT;l3=1;var n=$Q(),e=kg();return eT=function(t){return n(e(t))},eT}var tT,c3;function Ts(){if(c3)return tT;c3=1;var n=typeof document=="object"&&document.all;return tT=typeof n>"u"&&n!==void 0?function(e){return typeof e=="function"||e===n}:function(e){return typeof e=="function"},tT}var nT,u3;function Vh(){if(u3)return nT;u3=1;var n=Ts();return nT=function(e){return typeof e=="object"?e!==null:n(e)},nT}var rT,d3;function Db(){if(d3)return rT;d3=1;var n=_s(),e=Ts(),t=function(r){return e(r)?r:void 0};return rT=function(r,i){return arguments.length<2?t(n[r]):n[r]&&n[r][i]},rT}var iT,f3;function h3(){if(f3)return iT;f3=1;var n=so();return iT=n({}.isPrototypeOf),iT}var oT,p3;function BQ(){if(p3)return oT;p3=1;var n=_s(),e=n.navigator,t=e&&e.userAgent;return oT=t?String(t):"",oT}var sT,g3;function HQ(){if(g3)return sT;g3=1;var n=_s(),e=BQ(),t=n.process,r=n.Deno,i=t&&t.versions||r&&r.version,s=i&&i.v8,l,c;return s&&(l=s.split("."),c=l[0]>0&&l[0]<4?1:+(l[0]+l[1])),!c&&e&&(l=e.match(/Edge\/(\d+)/),(!l||l[1]>=74)&&(l=e.match(/Chrome\/(\d+)/),l&&(c=+l[1]))),sT=c,sT}var aT,m3;function y3(){if(m3)return aT;m3=1;var n=HQ(),e=Ps(),t=_s(),r=t.String;return aT=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!r(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&n&&n<41}),aT}var lT,v3;function S3(){if(v3)return lT;v3=1;var n=y3();return lT=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol",lT}var cT,x3;function w3(){if(x3)return cT;x3=1;var n=Db(),e=Ts(),t=h3(),r=S3(),i=Object;return cT=r?function(s){return typeof s=="symbol"}:function(s){var l=n("Symbol");return e(l)&&t(l.prototype,i(s))},cT}var uT,b3;function VQ(){if(b3)return uT;b3=1;var n=String;return uT=function(e){try{return n(e)}catch{return"Object"}},uT}var dT,C3;function fT(){if(C3)return dT;C3=1;var n=Ts(),e=VQ(),t=TypeError;return dT=function(r){if(n(r))return r;throw new t(e(r)+" is not a function")},dT}var hT,E3;function pT(){if(E3)return hT;E3=1;var n=fT(),e=Mb();return hT=function(t,r){var i=t[r];return e(i)?void 0:n(i)},hT}var gT,_3;function KQ(){if(_3)return gT;_3=1;var n=Wu(),e=Ts(),t=Vh(),r=TypeError;return gT=function(i,s){var l,c;if(s==="string"&&e(l=i.toString)&&!t(c=n(l,i))||e(l=i.valueOf)&&!t(c=n(l,i))||s!=="string"&&e(l=i.toString)&&!t(c=n(l,i)))return c;throw new r("Can't convert object to primitive value")},gT}var mT={exports:{}},yT,P3;function T3(){return P3||(P3=1,yT=!1),yT}var vT,I3;function ST(){if(I3)return vT;I3=1;var n=_s(),e=Object.defineProperty;return vT=function(t,r){try{e(n,t,{value:r,configurable:!0,writable:!0})}catch{n[t]=r}return r},vT}var k3;function xT(){if(k3)return mT.exports;k3=1;var n=T3(),e=_s(),t=ST(),r="__core-js_shared__",i=mT.exports=e[r]||t(r,{});return(i.versions||(i.versions=[])).push({version:"3.40.0",mode:n?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.40.0/LICENSE",source:"https://github.com/zloirock/core-js"}),mT.exports}var wT,R3;function bT(){if(R3)return wT;R3=1;var n=xT();return wT=function(e,t){return n[e]||(n[e]=t||{})},wT}var CT,M3;function Rv(){if(M3)return CT;M3=1;var n=kg(),e=Object;return CT=function(t){return e(n(t))},CT}var ET,A3;function hf(){if(A3)return ET;A3=1;var n=so(),e=Rv(),t=n({}.hasOwnProperty);return ET=Object.hasOwn||function(i,s){return t(e(i),s)},ET}var _T,D3;function O3(){if(D3)return _T;D3=1;var n=so(),e=0,t=Math.random(),r=n(1 .toString);return _T=function(i){return"Symbol("+(i===void 0?"":i)+")_"+r(++e+t,36)},_T}var PT,j3;function Gu(){if(j3)return PT;j3=1;var n=_s(),e=bT(),t=hf(),r=O3(),i=y3(),s=S3(),l=n.Symbol,c=e("wks"),d=s?l.for||l:l&&l.withoutSetter||r;return PT=function(h){return t(c,h)||(c[h]=i&&t(l,h)?l[h]:d("Symbol."+h)),c[h]},PT}var TT,L3;function WQ(){if(L3)return TT;L3=1;var n=Wu(),e=Vh(),t=w3(),r=pT(),i=KQ(),s=Gu(),l=TypeError,c=s("toPrimitive");return TT=function(d,h){if(!e(d)||t(d))return d;var g=r(d,c),y;if(g){if(h===void 0&&(h="default"),y=n(g,d,h),!e(y)||t(y))return y;throw new l("Can't convert object to primitive value")}return h===void 0&&(h="number"),i(d,h)},TT}var IT,N3;function F3(){if(N3)return IT;N3=1;var n=WQ(),e=w3();return IT=function(t){var r=n(t,"string");return e(r)?r:r+""},IT}var kT,z3;function U3(){if(z3)return kT;z3=1;var n=_s(),e=Vh(),t=n.document,r=e(t)&&e(t.createElement);return kT=function(i){return r?t.createElement(i):{}},kT}var RT,$3;function B3(){if($3)return RT;$3=1;var n=ff(),e=Ps(),t=U3();return RT=!n&&!e(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!==7}),RT}var H3;function V3(){if(H3)return BP;H3=1;var n=ff(),e=Wu(),t=UQ(),r=n3(),i=Ab(),s=F3(),l=hf(),c=B3(),d=Object.getOwnPropertyDescriptor;return BP.f=n?d:function(g,y){if(g=i(g),y=s(y),c)try{return d(g,y)}catch{}if(l(g,y))return r(!e(t.f,g,y),g[y])},BP}var MT={},AT,K3;function W3(){if(K3)return AT;K3=1;var n=ff(),e=Ps();return AT=n&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),AT}var DT,G3;function Kh(){if(G3)return DT;G3=1;var n=Vh(),e=String,t=TypeError;return DT=function(r){if(n(r))return r;throw new t(e(r)+" is not an object")},DT}var q3;function Mv(){if(q3)return MT;q3=1;var n=ff(),e=B3(),t=W3(),r=Kh(),i=F3(),s=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",g="writable";return MT.f=n?t?function(v,w,C){if(r(v),w=i(w),r(C),typeof v=="function"&&w==="prototype"&&"value"in C&&g in C&&!C[g]){var E=c(v,w);E&&E[g]&&(v[w]=C.value,C={configurable:h in C?C[h]:E[h],enumerable:d in C?C[d]:E[d],writable:!1})}return l(v,w,C)}:l:function(v,w,C){if(r(v),w=i(w),r(C),e)try{return l(v,w,C)}catch{}if("get"in C||"set"in C)throw new s("Accessors not supported");return"value"in C&&(v[w]=C.value),v},MT}var OT,Y3;function jT(){if(Y3)return OT;Y3=1;var n=ff(),e=Mv(),t=n3();return OT=n?function(r,i,s){return e.f(r,i,t(1,s))}:function(r,i,s){return r[i]=s,r},OT}var LT={exports:{}},NT,X3;function GQ(){if(X3)return NT;X3=1;var n=ff(),e=hf(),t=Function.prototype,r=n&&Object.getOwnPropertyDescriptor,i=e(t,"name"),s=i&&(function(){}).name==="something",l=i&&(!n||n&&r(t,"name").configurable);return NT={EXISTS:i,PROPER:s,CONFIGURABLE:l},NT}var FT,Z3;function Q3(){if(Z3)return FT;Z3=1;var n=so(),e=Ts(),t=xT(),r=n(Function.toString);return e(t.inspectSource)||(t.inspectSource=function(i){return r(i)}),FT=t.inspectSource,FT}var zT,J3;function qQ(){if(J3)return zT;J3=1;var n=_s(),e=Ts(),t=n.WeakMap;return zT=e(t)&&/native code/.test(String(t)),zT}var UT,eF;function tF(){if(eF)return UT;eF=1;var n=bT(),e=O3(),t=n("keys");return UT=function(r){return t[r]||(t[r]=e(r))},UT}var $T,nF;function BT(){return nF||(nF=1,$T={}),$T}var HT,rF;function iF(){if(rF)return HT;rF=1;var n=qQ(),e=_s(),t=Vh(),r=jT(),i=hf(),s=xT(),l=tF(),c=BT(),d="Object already initialized",h=e.TypeError,g=e.WeakMap,y,v,w,C=function(k){return w(k)?v(k):y(k,{})},E=function(k){return function(L){var O;if(!t(L)||(O=v(L)).type!==k)throw new h("Incompatible receiver, "+k+" required");return O}};if(n||s.state){var P=s.state||(s.state=new g);P.get=P.get,P.has=P.has,P.set=P.set,y=function(k,L){if(P.has(k))throw new h(d);return L.facade=k,P.set(k,L),L},v=function(k){return P.get(k)||{}},w=function(k){return P.has(k)}}else{var I=l("state");c[I]=!0,y=function(k,L){if(i(k,I))throw new h(d);return L.facade=k,r(k,I,L),L},v=function(k){return i(k,I)?k[I]:{}},w=function(k){return i(k,I)}}return HT={set:y,get:v,has:w,enforce:C,getterFor:E},HT}var oF;function YQ(){if(oF)return LT.exports;oF=1;var n=so(),e=Ps(),t=Ts(),r=hf(),i=ff(),s=GQ().CONFIGURABLE,l=Q3(),c=iF(),d=c.enforce,h=c.get,g=String,y=Object.defineProperty,v=n("".slice),w=n("".replace),C=n([].join),E=i&&!e(function(){return y(function(){},"length",{value:8}).length!==8}),P=String(String).split("String"),I=LT.exports=function(k,L,O){v(g(L),0,7)==="Symbol("&&(L="["+w(g(L),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),O&&O.getter&&(L="get "+L),O&&O.setter&&(L="set "+L),(!r(k,"name")||s&&k.name!==L)&&(i?y(k,"name",{value:L,configurable:!0}):k.name=L),E&&O&&r(O,"arity")&&k.length!==O.arity&&y(k,"length",{value:O.arity});try{O&&r(O,"constructor")&&O.constructor?i&&y(k,"prototype",{writable:!1}):k.prototype&&(k.prototype=void 0)}catch{}var z=d(k);return r(z,"source")||(z.source=C(P,typeof L=="string"?L:"")),k};return Function.prototype.toString=I(function(){return t(this)&&h(this).source||l(this)},"toString"),LT.exports}var VT,sF;function aF(){if(sF)return VT;sF=1;var n=Ts(),e=Mv(),t=YQ(),r=ST();return VT=function(i,s,l,c){c||(c={});var d=c.enumerable,h=c.name!==void 0?c.name:s;if(n(l)&&t(l,h,c),c.global)d?i[s]=l:r(s,l);else{try{c.unsafe?i[s]&&(d=!0):delete i[s]}catch{}d?i[s]=l:e.f(i,s,{value:l,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return i},VT}var KT={},WT,lF;function XQ(){if(lF)return WT;lF=1;var n=Math.ceil,e=Math.floor;return WT=Math.trunc||function(r){var i=+r;return(i>0?e:n)(i)},WT}var GT,cF;function Wh(){if(cF)return GT;cF=1;var n=XQ();return GT=function(e){var t=+e;return t!==t||t===0?0:n(t)},GT}var qT,uF;function ZQ(){if(uF)return qT;uF=1;var n=Wh(),e=Math.max,t=Math.min;return qT=function(r,i){var s=n(r);return s<0?e(s+i,0):t(s,i)},qT}var YT,dF;function fF(){if(dF)return YT;dF=1;var n=Wh(),e=Math.min;return YT=function(t){var r=n(t);return r>0?e(r,9007199254740991):0},YT}var XT,hF;function Av(){if(hF)return XT;hF=1;var n=fF();return XT=function(e){return n(e.length)},XT}var ZT,pF;function QQ(){if(pF)return ZT;pF=1;var n=Ab(),e=ZQ(),t=Av(),r=function(i){return function(s,l,c){var d=n(s),h=t(d);if(h===0)return!i&&-1;var g=e(c,h),y;if(i&&l!==l){for(;h>g;)if(y=d[g++],y!==y)return!0}else for(;h>g;g++)if((i||g in d)&&d[g]===l)return i||g||0;return!i&&-1}};return ZT={includes:r(!0),indexOf:r(!1)},ZT}var QT,gF;function mF(){if(gF)return QT;gF=1;var n=so(),e=hf(),t=Ab(),r=QQ().indexOf,i=BT(),s=n([].push);return QT=function(l,c){var d=t(l),h=0,g=[],y;for(y in d)!e(i,y)&&e(d,y)&&s(g,y);for(;c.length>h;)e(d,y=c[h++])&&(~r(g,y)||s(g,y));return g},QT}var JT,yF;function eI(){return yF||(yF=1,JT=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),JT}var vF;function JQ(){if(vF)return KT;vF=1;var n=mF(),e=eI(),t=e.concat("length","prototype");return KT.f=Object.getOwnPropertyNames||function(i){return n(i,t)},KT}var tI={},SF;function eJ(){return SF||(SF=1,tI.f=Object.getOwnPropertySymbols),tI}var nI,xF;function tJ(){if(xF)return nI;xF=1;var n=Db(),e=so(),t=JQ(),r=eJ(),i=Kh(),s=e([].concat);return nI=n("Reflect","ownKeys")||function(c){var d=t.f(i(c)),h=r.f;return h?s(d,h(c)):d},nI}var rI,wF;function nJ(){if(wF)return rI;wF=1;var n=hf(),e=tJ(),t=V3(),r=Mv();return rI=function(i,s,l){for(var c=e(s),d=r.f,h=t.f,g=0;g<c.length;g++){var y=c[g];!n(i,y)&&!(l&&n(l,y))&&d(i,y,h(s,y))}},rI}var iI,bF;function rJ(){if(bF)return iI;bF=1;var n=Ps(),e=Ts(),t=/#|\.prototype\./,r=function(d,h){var g=s[i(d)];return g===c?!0:g===l?!1:e(h)?n(h):!!h},i=r.normalize=function(d){return String(d).replace(t,".").toLowerCase()},s=r.data={},l=r.NATIVE="N",c=r.POLYFILL="P";return iI=r,iI}var oI,CF;function Rg(){if(CF)return oI;CF=1;var n=_s(),e=V3().f,t=jT(),r=aF(),i=ST(),s=nJ(),l=rJ();return oI=function(c,d){var h=c.target,g=c.global,y=c.stat,v,w,C,E,P,I;if(g?w=n:y?w=n[h]||i(h,{}):w=n[h]&&n[h].prototype,w)for(C in d){if(P=d[C],c.dontCallGetSet?(I=e(w,C),E=I&&I.value):E=w[C],v=l(g?C:h+(y?".":"#")+C,c.forced),!v&&E!==void 0){if(typeof P==typeof E)continue;s(P,E)}(c.sham||E&&E.sham)&&t(P,"sham",!0),r(w,C,P,c)}},oI}var sI={},aI,EF;function iJ(){if(EF)return aI;EF=1;var n=mF(),e=eI();return aI=Object.keys||function(r){return n(r,e)},aI}var _F;function oJ(){if(_F)return sI;_F=1;var n=ff(),e=W3(),t=Mv(),r=Kh(),i=Ab(),s=iJ();return sI.f=n&&!e?Object.defineProperties:function(c,d){r(c);for(var h=i(d),g=s(d),y=g.length,v=0,w;y>v;)t.f(c,w=g[v++],h[w]);return c},sI}var lI,PF;function sJ(){if(PF)return lI;PF=1;var n=Db();return lI=n("document","documentElement"),lI}var cI,TF;function IF(){if(TF)return cI;TF=1;var n=Kh(),e=oJ(),t=eI(),r=BT(),i=sJ(),s=U3(),l=tF(),c=">",d="<",h="prototype",g="script",y=l("IE_PROTO"),v=function(){},w=function(k){return d+g+c+k+d+"/"+g+c},C=function(k){k.write(w("")),k.close();var L=k.parentWindow.Object;return k=null,L},E=function(){var k=s("iframe"),L="java"+g+":",O;return k.style.display="none",i.appendChild(k),k.src=String(L),O=k.contentWindow.document,O.open(),O.write(w("document.F=Object")),O.close(),O.F},P,I=function(){try{P=new ActiveXObject("htmlfile")}catch{}I=typeof document<"u"?document.domain&&P?C(P):E():C(P);for(var k=t.length;k--;)delete I[h][t[k]];return I()};return r[y]=!0,cI=Object.create||function(L,O){var z;return L!==null?(v[h]=n(L),z=new v,v[h]=null,z[y]=L):z=I(),O===void 0?z:e.f(z,O)},cI}var uI,kF;function dI(){if(kF)return uI;kF=1;var n=Gu(),e=IF(),t=Mv().f,r=n("unscopables"),i=Array.prototype;return i[r]===void 0&&t(i,r,{configurable:!0,value:e(null)}),uI=function(s){i[r][s]=!0},uI}var RF;function aJ(){if(RF)return qN;RF=1;var n=Rg(),e=Rv(),t=Av(),r=Wh(),i=dI();return n({target:"Array",proto:!0},{at:function(l){var c=e(this),d=t(c),h=r(l),g=h>=0?h:d+h;return g<0||g>=d?void 0:c[g]}}),i("at"),qN}var fI,MF;function Dv(){if(MF)return fI;MF=1;var n=_s(),e=so();return fI=function(t,r){return e(n[t].prototype[r])},fI}var hI,AF;function lJ(){if(AF)return hI;AF=1,aJ();var n=Dv();return hI=n("Array","at"),hI}var pI,DF;function cJ(){if(DF)return pI;DF=1;var n=lJ();return pI=n,pI}cJ();var OF={},gI,jF;function LF(){if(jF)return gI;jF=1;var n=Ig();return gI=Array.isArray||function(t){return n(t)==="Array"},gI}var mI,NF;function uJ(){if(NF)return mI;NF=1;var n=TypeError,e=9007199254740991;return mI=function(t){if(t>e)throw n("Maximum allowed index exceeded");return t},mI}var yI,FF;function dJ(){if(FF)return yI;FF=1;var n=Ig(),e=so();return yI=function(t){if(n(t)==="Function")return e(t)},yI}var vI,zF;function fJ(){if(zF)return vI;zF=1;var n=dJ(),e=fT(),t=Rb(),r=n(n.bind);return vI=function(i,s){return e(i),s===void 0?i:t?r(i,s):function(){return i.apply(s,arguments)}},vI}var SI,UF;function $F(){if(UF)return SI;UF=1;var n=LF(),e=Av(),t=uJ(),r=fJ(),i=function(s,l,c,d,h,g,y,v){for(var w=h,C=0,E=y?r(y,v):!1,P,I;C<d;)C in c&&(P=E?E(c[C],C,l):c[C],g>0&&n(P)?(I=e(P),w=i(s,l,P,I,w,g-1)-1):(t(w+1),s[w]=P),w++),C++;return w};return SI=i,SI}var xI,BF;function hJ(){if(BF)return xI;BF=1;var n=Gu(),e=n("toStringTag"),t={};return t[e]="z",xI=String(t)==="[object z]",xI}var wI,HF;function VF(){if(HF)return wI;HF=1;var n=hJ(),e=Ts(),t=Ig(),r=Gu(),i=r("toStringTag"),s=Object,l=t(function(){return arguments}())==="Arguments",c=function(d,h){try{return d[h]}catch{}};return wI=n?t:function(d){var h,g,y;return d===void 0?"Undefined":d===null?"Null":typeof(g=c(h=s(d),i))=="string"?g:l?t(h):(y=t(h))==="Object"&&e(h.callee)?"Arguments":y},wI}var bI,KF;function pJ(){if(KF)return bI;KF=1;var n=so(),e=Ps(),t=Ts(),r=VF(),i=Db(),s=Q3(),l=function(){},c=i("Reflect","construct"),d=/^\s*(?:class|function)\b/,h=n(d.exec),g=!d.test(l),y=function(C){if(!t(C))return!1;try{return c(l,[],C),!0}catch{return!1}},v=function(C){if(!t(C))return!1;switch(r(C)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!h(d,s(C))}catch{return!0}};return v.sham=!0,bI=!c||e(function(){var w;return y(y.call)||!y(Object)||!y(function(){w=!0})||w})?v:y,bI}var CI,WF;function gJ(){if(WF)return CI;WF=1;var n=LF(),e=pJ(),t=Vh(),r=Gu(),i=r("species"),s=Array;return CI=function(l){var c;return n(l)&&(c=l.constructor,e(c)&&(c===s||n(c.prototype))?c=void 0:t(c)&&(c=c[i],c===null&&(c=void 0))),c===void 0?s:c},CI}var EI,GF;function qF(){if(GF)return EI;GF=1;var n=gJ();return EI=function(e,t){return new(n(e))(t===0?0:t)},EI}var YF;function mJ(){if(YF)return OF;YF=1;var n=Rg(),e=$F(),t=fT(),r=Rv(),i=Av(),s=qF();return n({target:"Array",proto:!0},{flatMap:function(c){var d=r(this),h=i(d),g;return t(c),g=s(d,0),g.length=e(g,d,d,h,0,1,c,arguments.length>1?arguments[1]:void 0),g}}),OF}var XF={},ZF;function yJ(){if(ZF)return XF;ZF=1;var n=dI();return n("flatMap"),XF}var _I,QF;function vJ(){if(QF)return _I;QF=1,mJ(),yJ();var n=Dv();return _I=n("Array","flatMap"),_I}var PI,JF;function SJ(){if(JF)return PI;JF=1;var n=vJ();return PI=n,PI}SJ();var e5={},t5;function xJ(){if(t5)return e5;t5=1;var n=Rg(),e=$F(),t=Rv(),r=Av(),i=Wh(),s=qF();return n({target:"Array",proto:!0},{flat:function(){var c=arguments.length?arguments[0]:void 0,d=t(this),h=r(d),g=s(d,0);return g.length=e(g,d,d,h,0,c===void 0?1:i(c)),g}}),e5}var n5={},r5;function wJ(){if(r5)return n5;r5=1;var n=dI();return n("flat"),n5}var TI,i5;function bJ(){if(i5)return TI;i5=1,xJ(),wJ();var n=Dv();return TI=n("Array","flat"),TI}var II,o5;function CJ(){if(o5)return II;o5=1;var n=bJ();return II=n,II}CJ();var s5={},kI,a5;function Ov(){if(a5)return kI;a5=1;var n=VF(),e=String;return kI=function(t){if(n(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(t)},kI}var l5;function EJ(){if(l5)return s5;l5=1;var n=Rg(),e=so(),t=kg(),r=Wh(),i=Ov(),s=Ps(),l=e("".charAt),c=s(function(){return"".at(-2)!=="\uD842"});return n({target:"String",proto:!0,forced:c},{at:function(h){var g=i(t(this)),y=g.length,v=r(h),w=v>=0?v:y+v;return w<0||w>=y?void 0:l(g,w)}}),s5}var RI,c5;function _J(){if(c5)return RI;c5=1,EJ();var n=Dv();return RI=n("String","at"),RI}var MI,u5;function PJ(){if(u5)return MI;u5=1;var n=_J();return MI=n,MI}PJ();var d5={},AI,f5;function h5(){if(f5)return AI;f5=1;var n=Kh();return AI=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},AI}var DI,p5;function TJ(){if(p5)return DI;p5=1;var n=Ps(),e=_s(),t=e.RegExp,r=n(function(){var l=t("a","y");return l.lastIndex=2,l.exec("abcd")!==null}),i=r||n(function(){return!t("a","y").sticky}),s=r||n(function(){var l=t("^r","gy");return l.lastIndex=2,l.exec("str")!==null});return DI={BROKEN_CARET:s,MISSED_STICKY:i,UNSUPPORTED_Y:r},DI}var OI,g5;function IJ(){if(g5)return OI;g5=1;var n=Ps(),e=_s(),t=e.RegExp;return OI=n(function(){var r=t(".","s");return!(r.dotAll&&r.test(`
`)&&r.flags==="s")}),OI}var jI,m5;function kJ(){if(m5)return jI;m5=1;var n=Ps(),e=_s(),t=e.RegExp;return jI=n(function(){var r=t("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),jI}var LI,y5;function NI(){if(y5)return LI;y5=1;var n=Wu(),e=so(),t=Ov(),r=h5(),i=TJ(),s=bT(),l=IF(),c=iF().get,d=IJ(),h=kJ(),g=s("native-string-replace",String.prototype.replace),y=RegExp.prototype.exec,v=y,w=e("".charAt),C=e("".indexOf),E=e("".replace),P=e("".slice),I=function(){var z=/a/,F=/b*/g;return n(y,z,"a"),n(y,F,"a"),z.lastIndex!==0||F.lastIndex!==0}(),k=i.BROKEN_CARET,L=/()??/.exec("")[1]!==void 0,O=I||L||k||d||h;return O&&(v=function(F){var H=this,V=c(H),re=t(F),q=V.raw,J,ie,W,Y,oe,le,ce;if(q)return q.lastIndex=H.lastIndex,J=n(v,q,re),H.lastIndex=q.lastIndex,J;var Q=V.groups,he=k&&H.sticky,ke=n(r,H),te=H.source,me=0,Oe=re;if(he&&(ke=E(ke,"y",""),C(ke,"g")===-1&&(ke+="g"),Oe=P(re,H.lastIndex),H.lastIndex>0&&(!H.multiline||H.multiline&&w(re,H.lastIndex-1)!==`
`)&&(te="(?: "+te+")",Oe=" "+Oe,me++),ie=new RegExp("^(?:"+te+")",ke)),L&&(ie=new RegExp("^"+te+"$(?!\\s)",ke)),I&&(W=H.lastIndex),Y=n(y,he?ie:H,Oe),he?Y?(Y.input=P(Y.input,me),Y[0]=P(Y[0],me),Y.index=H.lastIndex,H.lastIndex+=Y[0].length):H.lastIndex=0:I&&Y&&(H.lastIndex=H.global?Y.index+Y[0].length:W),L&&Y&&Y.length>1&&n(g,Y[0],ie,function(){for(oe=1;oe<arguments.length-2;oe++)arguments[oe]===void 0&&(Y[oe]=void 0)}),Y&&Q)for(Y.groups=le=l(null),oe=0;oe<Q.length;oe++)ce=Q[oe],le[ce[0]]=Y[ce[1]];return Y}),LI=v,LI}var v5;function S5(){if(v5)return d5;v5=1;var n=Rg(),e=NI();return n({target:"RegExp",proto:!0,forced:/./.exec!==e},{exec:e}),d5}var x5={},FI,w5;function RJ(){if(w5)return FI;w5=1;var n=Rb(),e=Function.prototype,t=e.apply,r=e.call;return FI=typeof Reflect=="object"&&Reflect.apply||(n?r.bind(t):function(){return r.apply(t,arguments)}),FI}var zI,b5;function MJ(){if(b5)return zI;b5=1,S5();var n=Wu(),e=aF(),t=NI(),r=Ps(),i=Gu(),s=jT(),l=i("species"),c=RegExp.prototype;return zI=function(d,h,g,y){var v=i(d),w=!r(function(){var I={};return I[v]=function(){return 7},""[d](I)!==7}),C=w&&!r(function(){var I=!1,k=/a/;return d==="split"&&(k={},k.constructor={},k.constructor[l]=function(){return k},k.flags="",k[v]=/./[v]),k.exec=function(){return I=!0,null},k[v](""),!I});if(!w||!C||g){var E=/./[v],P=h(v,""[d],function(I,k,L,O,z){var F=k.exec;return F===t||F===c.exec?w&&!z?{done:!0,value:n(E,k,L,O)}:{done:!0,value:n(I,L,k,O)}:{done:!1}});e(String.prototype,d,P[0]),e(c,v,P[1])}y&&s(c[v],"sham",!0)},zI}var UI,C5;function AJ(){if(C5)return UI;C5=1;var n=so(),e=Wh(),t=Ov(),r=kg(),i=n("".charAt),s=n("".charCodeAt),l=n("".slice),c=function(d){return function(h,g){var y=t(r(h)),v=e(g),w=y.length,C,E;return v<0||v>=w?d?"":void 0:(C=s(y,v),C<55296||C>56319||v+1===w||(E=s(y,v+1))<56320||E>57343?d?i(y,v):C:d?l(y,v,v+2):(C-55296<<10)+(E-56320)+65536)}};return UI={codeAt:c(!1),charAt:c(!0)},UI}var $I,E5;function DJ(){if(E5)return $I;E5=1;var n=AJ().charAt;return $I=function(e,t,r){return t+(r?n(e,t).length:1)},$I}var BI,_5;function P5(){if(_5)return BI;_5=1;var n=so(),e=Rv(),t=Math.floor,r=n("".charAt),i=n("".replace),s=n("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;return BI=function(d,h,g,y,v,w){var C=g+d.length,E=y.length,P=c;return v!==void 0&&(v=e(v),P=l),i(w,P,function(I,k){var L;switch(r(k,0)){case"$":return"$";case"&":return d;case"`":return s(h,0,g);case"'":return s(h,C);case"<":L=v[s(k,1,-1)];break;default:var O=+k;if(O===0)return I;if(O>E){var z=t(O/10);return z===0?I:z<=E?y[z-1]===void 0?r(k,1):y[z-1]+r(k,1):I}L=y[O-1]}return L===void 0?"":L})},BI}var HI,T5;function OJ(){if(T5)return HI;T5=1;var n=Wu(),e=Kh(),t=Ts(),r=Ig(),i=NI(),s=TypeError;return HI=function(l,c){var d=l.exec;if(t(d)){var h=n(d,l,c);return h!==null&&e(h),h}if(r(l)==="RegExp")return n(i,l,c);throw new s("RegExp#exec called on incompatible receiver")},HI}var I5;function jJ(){if(I5)return x5;I5=1;var n=RJ(),e=Wu(),t=so(),r=MJ(),i=Ps(),s=Kh(),l=Ts(),c=Mb(),d=Wh(),h=fF(),g=Ov(),y=kg(),v=DJ(),w=pT(),C=P5(),E=OJ(),P=Gu(),I=P("replace"),k=Math.max,L=Math.min,O=t([].concat),z=t([].push),F=t("".indexOf),H=t("".slice),V=function(ie){return ie===void 0?ie:String(ie)},re=function(){return"a".replace(/./,"$0")==="$0"}(),q=function(){return/./[I]?/./[I]("a","$0")==="":!1}(),J=!i(function(){var ie=/./;return ie.exec=function(){var W=[];return W.groups={a:"7"},W},"".replace(ie,"$<a>")!=="7"});return r("replace",function(ie,W,Y){var oe=q?"$":"$0";return[function(ce,Q){var he=y(this),ke=c(ce)?void 0:w(ce,I);return ke?e(ke,ce,he,Q):e(W,g(he),ce,Q)},function(le,ce){var Q=s(this),he=g(le);if(typeof ce=="string"&&F(ce,oe)===-1&&F(ce,"$<")===-1){var ke=Y(W,Q,he,ce);if(ke.done)return ke.value}var te=l(ce);te||(ce=g(ce));var me=Q.global,Oe;me&&(Oe=Q.unicode,Q.lastIndex=0);for(var Ze=[],De;De=E(Q,he),!(De===null||(z(Ze,De),!me));){var yt=g(De[0]);yt===""&&(Q.lastIndex=v(he,h(Q.lastIndex),Oe))}for(var ot="",We=0,Qe=0;Qe<Ze.length;Qe++){De=Ze[Qe];for(var gt=g(De[0]),Pt=k(L(d(De.index),he.length),0),yn=[],Zt,an=1;an<De.length;an++)z(yn,V(De[an]));var ln=De.groups;if(te){var Yt=O([gt],yn,Pt,he);ln!==void 0&&z(Yt,ln),Zt=g(n(ce,void 0,Yt))}else Zt=C(gt,he,Pt,yn,ln,ce);Pt>=We&&(ot+=H(he,We,Pt)+Zt,We=Pt+gt.length)}return ot+H(he,We)}]},!J||!re||q),x5}var k5={},VI,R5;function LJ(){if(R5)return VI;R5=1;var n=Vh(),e=Ig(),t=Gu(),r=t("match");return VI=function(i){var s;return n(i)&&((s=i[r])!==void 0?!!s:e(i)==="RegExp")},VI}var KI,M5;function NJ(){if(M5)return KI;M5=1;var n=Wu(),e=hf(),t=h3(),r=h5(),i=RegExp.prototype;return KI=function(s){var l=s.flags;return l===void 0&&!("flags"in i)&&!e(s,"flags")&&t(i,s)?n(r,s):l},KI}var A5;function FJ(){if(A5)return k5;A5=1;var n=Rg(),e=Wu(),t=so(),r=kg(),i=Ts(),s=Mb(),l=LJ(),c=Ov(),d=pT(),h=NJ(),g=P5(),y=Gu(),v=T3(),w=y("replace"),C=TypeError,E=t("".indexOf),P=t("".replace),I=t("".slice),k=Math.max;return n({target:"String",proto:!0},{replaceAll:function(O,z){var F=r(this),H,V,re,q,J,ie,W,Y,oe,le,ce=0,Q="";if(!s(O)){if(H=l(O),H&&(V=c(r(h(O))),!~E(V,"g")))throw new C("`.replaceAll` does not allow non-global regexes");if(re=d(O,w),re)return e(re,O,F,z);if(v&&H)return P(c(F),O,z)}for(q=c(F),J=c(O),ie=i(z),ie||(z=c(z)),W=J.length,Y=k(1,W),oe=E(q,J);oe!==-1;)le=ie?c(z(J,oe,q)):g(J,q,oe,[],void 0,z),Q+=I(q,ce,oe)+le,ce=oe+W,oe=oe+Y>q.length?-1:E(q,J,oe+Y);return ce<q.length&&(Q+=I(q,ce)),Q}}),k5}var WI,D5;function zJ(){if(D5)return WI;D5=1,S5(),jJ(),FJ();var n=Dv();return WI=n("String","replaceAll"),WI}var GI,O5;function UJ(){if(O5)return GI;O5=1;var n=zJ();return GI=n,GI}UJ();const $J=(n,e)=>e.some(t=>n instanceof t);let j5,L5;function BJ(){return j5||(j5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HJ(){return L5||(L5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N5=new WeakMap,qI=new WeakMap,F5=new WeakMap,YI=new WeakMap,XI=new WeakMap;function VJ(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",l)},s=()=>{t(qu(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&N5.set(t,n)}).catch(()=>{}),XI.set(e,n),e}function KJ(n){if(qI.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",l),n.removeEventListener("abort",l)},s=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",l),n.addEventListener("abort",l)});qI.set(n,e)}let ZI={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qI.get(n);if(e==="objectStoreNames")return n.objectStoreNames||F5.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qu(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function WJ(n){ZI=n(ZI)}function GJ(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(QI(this),e,...t);return F5.set(r,e.sort?e.sort():[e]),qu(r)}:HJ().includes(n)?function(...e){return n.apply(QI(this),e),qu(N5.get(this))}:function(...e){return qu(n.apply(QI(this),e))}}function qJ(n){return typeof n=="function"?GJ(n):(n instanceof IDBTransaction&&KJ(n),$J(n,BJ())?new Proxy(n,ZI):n)}function qu(n){if(n instanceof IDBRequest)return VJ(n);if(YI.has(n))return YI.get(n);const e=qJ(n);return e!==n&&(YI.set(n,e),XI.set(e,n)),e}const QI=n=>XI.get(n);function z5(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const l=indexedDB.open(n,e),c=qu(l);return r&&l.addEventListener("upgradeneeded",d=>{r(qu(l.result),d.oldVersion,d.newVersion,qu(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}function U5(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),qu(t).then(()=>{})}const YJ=["get","getKey","getAll","getAllKeys","count"],XJ=["put","add","delete","clear"],JI=new Map;function $5(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(JI.get(e))return JI.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=XJ.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YJ.includes(t)))return;const s=async function(l,...c){const d=this.transaction(l,i?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),i&&d.done]))[0]};return JI.set(e,s),s}WJ(n=>({...n,get:(e,t,r)=>$5(e,t)||n.get(e,t,r),has:(e,t)=>!!$5(e,t)||n.has(e,t)}));const ZJ="TLDRAW_DOCUMENT_v2",QJ="TLDRAW_ASSET_STORE_v1",B5="TLDRAW_DB_NAME_INDEX_v2",Mn={Records:"records",Schema:"schema",SessionState:"session_state",Assets:"assets"};async function H5(n){const e=ZJ+n;return eee(e),await z5(e,4,{upgrade(t){t.objectStoreNames.contains(Mn.Records)||t.createObjectStore(Mn.Records),t.objectStoreNames.contains(Mn.Schema)||t.createObjectStore(Mn.Schema),t.objectStoreNames.contains(Mn.SessionState)||t.createObjectStore(Mn.SessionState),t.objectStoreNames.contains(Mn.Assets)||t.createObjectStore(Mn.Assets)}})}async function JJ(n){const e=window.indexedDB.databases?(await window.indexedDB.databases()).map(v=>v.name):ek(),t=QJ+n;if(!e.find(v=>v===t))return;const i=await z5(t,1,{upgrade(v){v.objectStoreNames.contains("assets")||v.createObjectStore("assets")}});if(!i.objectStoreNames.contains("assets"))return;const s=i.transaction(["assets"],"readonly"),l=s.objectStore("assets"),c=await l.getAllKeys(),d=await Promise.all(c.map(async v=>[v,await l.get(v)]));await s.done;const h=await H5(n),g=h.transaction([Mn.Assets],"readwrite"),y=g.objectStore(Mn.Assets);for(const[v,w]of d)y.put(w,v);await g.done,i.close(),h.close(),await U5(t)}const FS=class FS{constructor(e){U(this,"getDbPromise");U(this,"isClosed",!1);U(this,"pendingTransactionSet",new Set);FS.connectedInstances.add(this),this.getDbPromise=(async()=>(await JJ(e),await H5(e)))()}getDb(){return this.getDbPromise}pending(){return Promise.allSettled([this.getDbPromise,...this.pendingTransactionSet]).then(iv)}async close(){this.isClosed||(this.isClosed=!0,await this.pending(),(await this.getDb()).close(),FS.connectedInstances.delete(this))}tx(e,t,r){const i=(async()=>{rn(!this.isClosed,"db is closed");const l=(await this.getDb()).transaction(t,e),c=l.done.catch(d=>{if(!this.isClosed)throw d});try{return await r(l)}finally{this.isClosed?l.abort():await c}})();return this.pendingTransactionSet.add(i),i.finally(()=>this.pendingTransactionSet.delete(i)),i}async load({sessionId:e}={}){return await this.tx("readonly",[Mn.Records,Mn.Schema,Mn.SessionState],async t=>{var d,h;const r=t.objectStore(Mn.Records),i=t.objectStore(Mn.Schema),s=t.objectStore(Mn.SessionState);let l=e?(d=await s.get(e))==null?void 0:d.snapshot:null;return l||(l=(h=(await s.getAll()).sort((y,v)=>y.updatedAt-v.updatedAt).pop())==null?void 0:h.snapshot),{records:await r.getAll(),schema:await i.get(Mn.Schema),sessionStateSnapshot:l}})}async storeChanges({schema:e,changes:t,sessionId:r,sessionStateSnapshot:i}){await this.tx("readwrite",[Mn.Records,Mn.Schema,Mn.SessionState],async s=>{const l=s.objectStore(Mn.Records),c=s.objectStore(Mn.Schema),d=s.objectStore(Mn.SessionState);for(const[h,g]of Object.entries(t.added))await l.put(g,h);for(const[h,g]of Object.values(t.updated))await l.put(g,g.id);for(const h of Object.keys(t.removed))await l.delete(h);c.put(e.serialize(),Mn.Schema),i&&r?d.put({snapshot:i,updatedAt:Date.now(),id:r},r):(i||r)&&console.error("sessionStateSnapshot and instanceId must be provided together")})}async storeSnapshot({schema:e,snapshot:t,sessionId:r,sessionStateSnapshot:i}){await this.tx("readwrite",[Mn.Records,Mn.Schema,Mn.SessionState],async s=>{const l=s.objectStore(Mn.Records),c=s.objectStore(Mn.Schema),d=s.objectStore(Mn.SessionState);await l.clear();for(const[h,g]of Object.entries(t))await l.put(g,h);c.put(e.serialize(),Mn.Schema),i&&r?d.put({snapshot:i,updatedAt:Date.now(),id:r},r):(i||r)&&console.error("sessionStateSnapshot and instanceId must be provided together")})}async pruneSessions(){await this.tx("readwrite",[Mn.SessionState],async e=>{const t=e.objectStore(Mn.SessionState),r=(await t.getAll()).sort((s,l)=>s.updatedAt-l.updatedAt);if(r.length<10){await e.done;return}const i=r.slice(0,r.length-10);for(const{id:s}of i)await t.delete(s)})}async getAsset(e){return await this.tx("readonly",[Mn.Assets],async t=>await t.objectStore(Mn.Assets).get(e))}async storeAsset(e,t){await this.tx("readwrite",[Mn.Assets],async r=>{await r.objectStore(Mn.Assets).put(t,e)})}};U(FS,"connectedInstances",new Set);let Ob=FS;function ek(){const n=JSON.parse(yP(B5)||"[]")??[];return Array.isArray(n)?n:[]}function eee(n){const e=new Set(ek());e.add(n),vP(B5,JSON.stringify([...e]))}var jb={exports:{}},jv={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V5;function tee(){if(V5)return jv;V5=1;var n=rv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,h){var g,y={},v=null,w=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(w=d.ref);for(g in d)r.call(d,g)&&!s.hasOwnProperty(g)&&(y[g]=d[g]);if(c&&c.defaultProps)for(g in d=c.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:c,key:v,ref:w,props:y,_owner:i.current}}return jv.Fragment=t,jv.jsx=l,jv.jsxs=l,jv}var Lv={},K5;function nee(){if(K5)return Lv;K5=1;var n={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return n.NODE_ENV!=="production"&&function(){var e=rv(),t=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),E=Symbol.iterator,P="@@iterator";function I(se){if(se===null||typeof se!="object")return null;var Ue=E&&se[E]||se[P];return typeof Ue=="function"?Ue:null}var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function L(se){{for(var Ue=arguments.length,tt=new Array(Ue>1?Ue-1:0),rt=1;rt<Ue;rt++)tt[rt-1]=arguments[rt];O("error",se,tt)}}function O(se,Ue,tt){{var rt=k.ReactDebugCurrentFrame,$t=rt.getStackAddendum();$t!==""&&(Ue+="%s",tt=tt.concat([$t]));var Vt=tt.map(function(un){return String(un)});Vt.unshift("Warning: "+Ue),Function.prototype.apply.call(console[se],console,Vt)}}var z=!1,F=!1,H=!1,V=!1,re=!1,q;q=Symbol.for("react.module.reference");function J(se){return!!(typeof se=="string"||typeof se=="function"||se===i||se===l||re||se===s||se===g||se===y||V||se===C||z||F||H||typeof se=="object"&&se!==null&&(se.$$typeof===w||se.$$typeof===v||se.$$typeof===c||se.$$typeof===d||se.$$typeof===h||se.$$typeof===q||se.getModuleId!==void 0))}function ie(se,Ue,tt){var rt=se.displayName;if(rt)return rt;var $t=Ue.displayName||Ue.name||"";return $t!==""?tt+"("+$t+")":tt}function W(se){return se.displayName||"Context"}function Y(se){if(se==null)return null;if(typeof se.tag=="number"&&L("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof se=="function")return se.displayName||se.name||null;if(typeof se=="string")return se;switch(se){case i:return"Fragment";case r:return"Portal";case l:return"Profiler";case s:return"StrictMode";case g:return"Suspense";case y:return"SuspenseList"}if(typeof se=="object")switch(se.$$typeof){case d:var Ue=se;return W(Ue)+".Consumer";case c:var tt=se;return W(tt._context)+".Provider";case h:return ie(se,se.render,"ForwardRef");case v:var rt=se.displayName||null;return rt!==null?rt:Y(se.type)||"Memo";case w:{var $t=se,Vt=$t._payload,un=$t._init;try{return Y(un(Vt))}catch{return null}}}return null}var oe=Object.assign,le=0,ce,Q,he,ke,te,me,Oe;function Ze(){}Ze.__reactDisabledLog=!0;function De(){{if(le===0){ce=console.log,Q=console.info,he=console.warn,ke=console.error,te=console.group,me=console.groupCollapsed,Oe=console.groupEnd;var se={configurable:!0,enumerable:!0,value:Ze,writable:!0};Object.defineProperties(console,{info:se,log:se,warn:se,error:se,group:se,groupCollapsed:se,groupEnd:se})}le++}}function yt(){{if(le--,le===0){var se={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:oe({},se,{value:ce}),info:oe({},se,{value:Q}),warn:oe({},se,{value:he}),error:oe({},se,{value:ke}),group:oe({},se,{value:te}),groupCollapsed:oe({},se,{value:me}),groupEnd:oe({},se,{value:Oe})})}le<0&&L("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ot=k.ReactCurrentDispatcher,We;function Qe(se,Ue,tt){{if(We===void 0)try{throw Error()}catch($t){var rt=$t.stack.trim().match(/\n( *(at )?)/);We=rt&&rt[1]||""}return`
`+We+se}}var gt=!1,Pt;{var yn=typeof WeakMap=="function"?WeakMap:Map;Pt=new yn}function Zt(se,Ue){if(!se||gt)return"";{var tt=Pt.get(se);if(tt!==void 0)return tt}var rt;gt=!0;var $t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Vt;Vt=ot.current,ot.current=null,De();try{if(Ue){var un=function(){throw Error()};if(Object.defineProperty(un.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(un,[])}catch(Sr){rt=Sr}Reflect.construct(se,[],un)}else{try{un.call()}catch(Sr){rt=Sr}se.call(un.prototype)}}else{try{throw Error()}catch(Sr){rt=Sr}se()}}catch(Sr){if(Sr&&rt&&typeof Sr.stack=="string"){for(var en=Sr.stack.split(`
`),Ur=rt.stack.split(`
`),lr=en.length-1,zn=Ur.length-1;lr>=1&&zn>=0&&en[lr]!==Ur[zn];)zn--;for(;lr>=1&&zn>=0;lr--,zn--)if(en[lr]!==Ur[zn]){if(lr!==1||zn!==1)do if(lr--,zn--,zn<0||en[lr]!==Ur[zn]){var Mi=`
`+en[lr].replace(" at new "," at ");return se.displayName&&Mi.includes("<anonymous>")&&(Mi=Mi.replace("<anonymous>",se.displayName)),typeof se=="function"&&Pt.set(se,Mi),Mi}while(lr>=1&&zn>=0);break}}}finally{gt=!1,ot.current=Vt,yt(),Error.prepareStackTrace=$t}var Ds=se?se.displayName||se.name:"",Un=Ds?Qe(Ds):"";return typeof se=="function"&&Pt.set(se,Un),Un}function an(se,Ue,tt){return Zt(se,!1)}function ln(se){var Ue=se.prototype;return!!(Ue&&Ue.isReactComponent)}function Yt(se,Ue,tt){if(se==null)return"";if(typeof se=="function")return Zt(se,ln(se));if(typeof se=="string")return Qe(se);switch(se){case g:return Qe("Suspense");case y:return Qe("SuspenseList")}if(typeof se=="object")switch(se.$$typeof){case h:return an(se.render);case v:return Yt(se.type,Ue,tt);case w:{var rt=se,$t=rt._payload,Vt=rt._init;try{return Yt(Vt($t),Ue,tt)}catch{}}}return""}var Yn=Object.prototype.hasOwnProperty,br={},Wr=k.ReactDebugCurrentFrame;function kr(se){if(se){var Ue=se._owner,tt=Yt(se.type,se._source,Ue?Ue.type:null);Wr.setExtraStackFrame(tt)}else Wr.setExtraStackFrame(null)}function Cr(se,Ue,tt,rt,$t){{var Vt=Function.call.bind(Yn);for(var un in se)if(Vt(se,un)){var en=void 0;try{if(typeof se[un]!="function"){var Ur=Error((rt||"React class")+": "+tt+" type `"+un+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof se[un]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ur.name="Invariant Violation",Ur}en=se[un](Ue,un,rt,tt,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(lr){en=lr}en&&!(en instanceof Error)&&(kr($t),L("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",rt||"React class",tt,un,typeof en),kr(null)),en instanceof Error&&!(en.message in br)&&(br[en.message]=!0,kr($t),L("Failed %s type: %s",tt,en.message),kr(null))}}}var Gr=Array.isArray;function qr(se){return Gr(se)}function li(se){{var Ue=typeof Symbol=="function"&&Symbol.toStringTag,tt=Ue&&se[Symbol.toStringTag]||se.constructor.name||"Object";return tt}}function ko(se){try{return Rr(se),!1}catch{return!0}}function Rr(se){return""+se}function Mr(se){if(ko(se))return L("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",li(se)),Rr(se)}var Jr=k.ReactCurrentOwner,ss={key:!0,ref:!0,__self:!0,__source:!0},Ee,ve;function $e(se){if(Yn.call(se,"ref")){var Ue=Object.getOwnPropertyDescriptor(se,"ref").get;if(Ue&&Ue.isReactWarning)return!1}return se.ref!==void 0}function mt(se){if(Yn.call(se,"key")){var Ue=Object.getOwnPropertyDescriptor(se,"key").get;if(Ue&&Ue.isReactWarning)return!1}return se.key!==void 0}function cn(se,Ue){typeof se.ref=="string"&&Jr.current}function vn(se,Ue){{var tt=function(){Ee||(Ee=!0,L("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ue))};tt.isReactWarning=!0,Object.defineProperty(se,"key",{get:tt,configurable:!0})}}function Xn(se,Ue){{var tt=function(){ve||(ve=!0,L("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ue))};tt.isReactWarning=!0,Object.defineProperty(se,"ref",{get:tt,configurable:!0})}}var Dn=function(se,Ue,tt,rt,$t,Vt,un){var en={$$typeof:t,type:se,key:Ue,ref:tt,props:un,_owner:Vt};return en._store={},Object.defineProperty(en._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(en,"_self",{configurable:!1,enumerable:!1,writable:!1,value:rt}),Object.defineProperty(en,"_source",{configurable:!1,enumerable:!1,writable:!1,value:$t}),Object.freeze&&(Object.freeze(en.props),Object.freeze(en)),en};function ar(se,Ue,tt,rt,$t){{var Vt,un={},en=null,Ur=null;tt!==void 0&&(Mr(tt),en=""+tt),mt(Ue)&&(Mr(Ue.key),en=""+Ue.key),$e(Ue)&&(Ur=Ue.ref,cn(Ue,$t));for(Vt in Ue)Yn.call(Ue,Vt)&&!ss.hasOwnProperty(Vt)&&(un[Vt]=Ue[Vt]);if(se&&se.defaultProps){var lr=se.defaultProps;for(Vt in lr)un[Vt]===void 0&&(un[Vt]=lr[Vt])}if(en||Ur){var zn=typeof se=="function"?se.displayName||se.name||"Unknown":se;en&&vn(un,zn),Ur&&Xn(un,zn)}return Dn(se,en,Ur,$t,rt,Jr.current,un)}}var bn=k.ReactCurrentOwner,Sn=k.ReactDebugCurrentFrame;function hn(se){if(se){var Ue=se._owner,tt=Yt(se.type,se._source,Ue?Ue.type:null);Sn.setExtraStackFrame(tt)}else Sn.setExtraStackFrame(null)}var Ii;Ii=!1;function lo(se){return typeof se=="object"&&se!==null&&se.$$typeof===t}function ki(){{if(bn.current){var se=Y(bn.current.type);if(se)return`

Check the render method of \``+se+"`."}return""}}function As(se){return""}var Ka={};function Wa(se){{var Ue=ki();if(!Ue){var tt=typeof se=="string"?se:se.displayName||se.name;tt&&(Ue=`

Check the top-level render call using <`+tt+">.")}return Ue}}function Ro(se,Ue){{if(!se._store||se._store.validated||se.key!=null)return;se._store.validated=!0;var tt=Wa(Ue);if(Ka[tt])return;Ka[tt]=!0;var rt="";se&&se._owner&&se._owner!==bn.current&&(rt=" It was passed a child from "+Y(se._owner.type)+"."),hn(se),L('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',tt,rt),hn(null)}}function sc(se,Ue){{if(typeof se!="object")return;if(qr(se))for(var tt=0;tt<se.length;tt++){var rt=se[tt];lo(rt)&&Ro(rt,Ue)}else if(lo(se))se._store&&(se._store.validated=!0);else if(se){var $t=I(se);if(typeof $t=="function"&&$t!==se.entries)for(var Vt=$t.call(se),un;!(un=Vt.next()).done;)lo(un.value)&&Ro(un.value,Ue)}}}function ha(se){{var Ue=se.type;if(Ue==null||typeof Ue=="string")return;var tt;if(typeof Ue=="function")tt=Ue.propTypes;else if(typeof Ue=="object"&&(Ue.$$typeof===h||Ue.$$typeof===v))tt=Ue.propTypes;else return;if(tt){var rt=Y(Ue);Cr(tt,se.props,"prop",rt,se)}else if(Ue.PropTypes!==void 0&&!Ii){Ii=!0;var $t=Y(Ue);L("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",$t||"Unknown")}typeof Ue.getDefaultProps=="function"&&!Ue.getDefaultProps.isReactClassApproved&&L("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Mo(se){{for(var Ue=Object.keys(se.props),tt=0;tt<Ue.length;tt++){var rt=Ue[tt];if(rt!=="children"&&rt!=="key"){hn(se),L("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",rt),hn(null);break}}se.ref!==null&&(hn(se),L("Invalid attribute `ref` supplied to `React.Fragment`."),hn(null))}}var Ci={};function Ao(se,Ue,tt,rt,$t,Vt){{var un=J(se);if(!un){var en="";(se===void 0||typeof se=="object"&&se!==null&&Object.keys(se).length===0)&&(en+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ur=As();Ur?en+=Ur:en+=ki();var lr;se===null?lr="null":qr(se)?lr="array":se!==void 0&&se.$$typeof===t?(lr="<"+(Y(se.type)||"Unknown")+" />",en=" Did you accidentally export a JSX literal instead of a component?"):lr=typeof se,L("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",lr,en)}var zn=ar(se,Ue,tt,$t,Vt);if(zn==null)return zn;if(un){var Mi=Ue.children;if(Mi!==void 0)if(rt)if(qr(Mi)){for(var Ds=0;Ds<Mi.length;Ds++)sc(Mi[Ds],se);Object.freeze&&Object.freeze(Mi)}else L("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else sc(Mi,se)}if(Yn.call(Ue,"key")){var Un=Y(se),Sr=Object.keys(Ue).filter(function(qa){return qa!=="key"}),Gt=Sr.length>0?"{key: someKey, "+Sr.join(": ..., ")+": ...}":"{key: someKey}";if(!Ci[Un+Gt]){var Do=Sr.length>0?"{"+Sr.join(": ..., ")+": ...}":"{}";L(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Gt,Un,Do,Un),Ci[Un+Gt]=!0}}return se===i?Mo(zn):ha(zn),zn}}function Vi(se,Ue,tt){return Ao(se,Ue,tt,!0)}function as(se,Ue,tt){return Ao(se,Ue,tt,!1)}var Ri=as,Ga=Vi;Lv.Fragment=i,Lv.jsx=Ri,Lv.jsxs=Ga}(),Lv}var W5;function ree(){if(W5)return jb.exports;W5=1;var n={};return n.NODE_ENV==="production"?jb.exports=tee():jb.exports=nee(),jb.exports}var m=ree(),tk={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var G5;function iee(){return G5||(G5=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(s=i(s,r(c)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var l="";for(var c in s)e.call(s,c)&&s[c]&&(l=i(l,c));return l}function i(s,l){return l?s?s+" "+l:s+l:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(tk)),tk.exports}var oee=iee();const It=ef(oee),q5="3.7.0",Y5={major:"2024-09-13T14:36:29.063Z",minor:"2025-01-07T15:59:09.453Z",patch:"2025-01-07T15:59:09.453Z"},see={error:null};class nk extends M.Component{constructor(){super(...arguments);U(this,"state",see)}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t){var r,i;(i=(r=this.props).onError)==null||i.call(r,t)}render(){const{error:t}=this.state;if(t!==null){const{fallback:r}=this.props;return m.jsx(r,{error:t})}return this.props.children}}function Nv({children:n,fallback:e,...t}){return e===null?n:m.jsx(nk,{fallback:e,...t,children:n})}function rk(n,e){return Lb(`${n}_${e}`)}function Mg(n){return Lb(`${M.useId()}${n??""}`)}function Yl(n){const e=Js(M.useContext(X5));return Lb(`${e}_${n}`)}function Lb(n){return n.replace(/:/g,"_")}const X5=M.createContext(null);function aee({children:n}){const e=Mg();return m.jsx(X5.Provider,{value:e,children:n})}const ik=M.createContext(null);function xe(){const n=zt.useContext(ik);if(!n)throw new Error("useEditor must be used inside of the <Tldraw /> or <TldrawEditor /> components");return n}function pf(){return zt.useContext(ik)}function ok({editor:n,children:e}){return m.jsx(ik.Provider,{value:n,children:m.jsx(aee,{children:e})})}function lee(){return m.jsx("div",{className:"tl-background"})}function Ag(n,e,t,r,i,s){M.useLayoutEffect(()=>{const l=n.current;if(!l||e===void 0)return;let c=`translate(${e}px, ${t}px)`;r!==void 0&&(c+=` scale(${r})`),i!==void 0&&(c+=` rotate(${i}rad)`),s&&(c+=` translate(${s.x}px, ${s.y}px)`),l.style.transform=c})}const ao={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>n*(2-n),easeInOutQuad:n=>n<.5?2*n*n:-1+(4-2*n)*n,easeInCubic:n=>n*n*n,easeOutCubic:n=>--n*n*n+1,easeInOutCubic:n=>n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1- --n*n*n*n,easeInOutQuart:n=>n<.5?8*n*n*n*n:1-8*--n*n*n*n,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1+--n*n*n*n*n,easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n<=0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n>=1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n<=0?0:n>=1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2};class R{constructor(e=0,t=0,r=1){this.x=e,this.y=t,this.z=r}get pressure(){return this.z}set(e=this.x,t=this.y,r=this.z){return this.x=e,this.y=t,this.z=r,this}setTo({x:e=0,y:t=0,z:r=1}){return this.x=e,this.y=t,this.z=r,this}rot(e){if(e===0)return this;const{x:t,y:r}=this,i=Math.sin(e),s=Math.cos(e);return this.x=t*s-r*i,this.y=t*i+r*s,this}rotWith(e,t){if(t===0)return this;const r=this.x-e.x,i=this.y-e.y,s=Math.sin(t),l=Math.cos(t);return this.x=e.x+(r*l-i*s),this.y=e.y+(r*s+i*l),this}clone(){const{x:e,y:t,z:r}=this;return new R(e,t,r)}sub(e){return this.x-=e.x,this.y-=e.y,this}subXY(e,t){return this.x-=e,this.y-=t,this}subScalar(e){return this.x-=e,this.y-=e,this}add(e){return this.x+=e.x,this.y+=e.y,this}addXY(e,t){return this.x+=e,this.y+=t,this}addScalar(e){return this.x+=e,this.y+=e,this}clamp(e,t){return this.x=Math.max(this.x,e),this.y=Math.max(this.y,e),t!==void 0&&(this.x=Math.min(this.x,t),this.y=Math.min(this.y,t)),this}div(e){return this.x/=e,this.y/=e,this}divV(e){return this.x/=e.x,this.y/=e.y,this}mul(e){return this.x*=e,this.y*=e,this}mulV(e){return this.x*=e.x,this.y*=e.y,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}nudge(e,t){const r=R.Tan(e,this);return this.add(r.mul(t))}neg(){return this.x*=-1,this.y*=-1,this}cross(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}dpr(e){return R.Dpr(this,e)}cpr(e){return R.Cpr(this,e)}len2(){return R.Len2(this)}len(){return R.Len(this)}pry(e){return R.Pry(this,e)}per(){const{x:e,y:t}=this;return this.x=t,this.y=-e,this}uni(){return R.Uni(this)}tan(e){return R.Tan(this,e)}dist(e){return R.Dist(this,e)}distanceToLineSegment(e,t){return R.DistanceToLineSegment(e,t,this)}slope(e){return R.Slope(this,e)}snapToGrid(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}angle(e){return R.Angle(this,e)}toAngle(){return R.ToAngle(this)}lrp(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this}equals(e){return R.Equals(this,e)}equalsXY(e,t){return R.EqualsXY(this,e,t)}norm(){const e=this.len();return this.x=e===0?0:this.x/e,this.y=e===0?0:this.y/e,this}toFixed(){return R.ToFixed(this)}toString(){return R.ToString(R.ToFixed(this))}toJson(){return R.ToJson(this)}toArray(){return R.ToArray(this)}static Add(e,t){return new R(e.x+t.x,e.y+t.y)}static AddXY(e,t,r){return new R(e.x+t,e.y+r)}static Sub(e,t){return new R(e.x-t.x,e.y-t.y)}static SubXY(e,t,r){return new R(e.x-t,e.y-r)}static AddScalar(e,t){return new R(e.x+t,e.y+t)}static SubScalar(e,t){return new R(e.x-t,e.y-t)}static Div(e,t){return new R(e.x/t,e.y/t)}static Mul(e,t){return new R(e.x*t,e.y*t)}static DivV(e,t){return new R(e.x/t.x,e.y/t.y)}static MulV(e,t){return new R(e.x*t.x,e.y*t.y)}static Neg(e){return new R(-e.x,-e.y)}static Per(e){return new R(e.y,-e.x)}static Abs(e){return new R(Math.abs(e.x),Math.abs(e.y))}static Dist(e,t){return((e.y-t.y)**2+(e.x-t.x)**2)**.5}static DistMin(e,t,r){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)<r**2}static Dist2(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)}static Dpr(e,t){return e.x*t.x+e.y*t.y}static Cross(e,t){return new R(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z)}static Cpr(e,t){return e.x*t.y-t.x*e.y}static Len2(e){return e.x*e.x+e.y*e.y}static Len(e){return(e.x*e.x+e.y*e.y)**.5}static Pry(e,t){return R.Dpr(e,t)/R.Len(t)}static Uni(e){return R.Div(e,R.Len(e))}static Tan(e,t){return R.Uni(R.Sub(e,t))}static Min(e,t){return new R(Math.min(e.x,t.x),Math.min(e.y,t.y))}static Max(e,t){return new R(Math.max(e.x,t.x),Math.max(e.y,t.y))}static From({x:e,y:t,z:r=1}){return new R(e,t,r)}static FromArray(e){return new R(e[0],e[1])}static Rot(e,t=0){const r=Math.sin(t),i=Math.cos(t);return new R(e.x*i-e.y*r,e.x*r+e.y*i)}static RotWith(e,t,r){const i=e.x-t.x,s=e.y-t.y,l=Math.sin(r),c=Math.cos(r);return new R(t.x+(i*c-s*l),t.y+(i*l+s*c))}static NearestPointOnLineThroughPoint(e,t,r){return R.Mul(t,R.Sub(r,e).pry(t)).add(e)}static NearestPointOnLineSegment(e,t,r,i=!0){if(R.Equals(e,r)||R.Equals(t,r))return R.From(r);const s=R.Tan(t,e),l=R.Add(e,R.Mul(s,R.Sub(r,e).pry(s)));if(i){if(l.x<Math.min(e.x,t.x))return R.Cast(e.x<t.x?e:t);if(l.x>Math.max(e.x,t.x))return R.Cast(e.x>t.x?e:t);if(l.y<Math.min(e.y,t.y))return R.Cast(e.y<t.y?e:t);if(l.y>Math.max(e.y,t.y))return R.Cast(e.y>t.y?e:t)}return l}static DistanceToLineThroughPoint(e,t,r){return R.Dist(r,R.NearestPointOnLineThroughPoint(e,t,r))}static DistanceToLineSegment(e,t,r,i=!0){return R.Dist(r,R.NearestPointOnLineSegment(e,t,r,i))}static Snap(e,t=1){return new R(Math.round(e.x/t)*t,Math.round(e.y/t)*t)}static Cast(e){return e instanceof R?e:R.From(e)}static Slope(e,t){return e.x===t.y?NaN:(e.y-t.y)/(e.x-t.x)}static IsNaN(e){return isNaN(e.x)||isNaN(e.y)}static Angle(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}static Lrp(e,t,r){return R.Sub(t,e).mul(r).add(e)}static Med(e,t){return new R((e.x+t.x)/2,(e.y+t.y)/2)}static Equals(e,t){return Math.abs(e.x-t.x)<1e-4&&Math.abs(e.y-t.y)<1e-4}static EqualsXY(e,t,r){return e.x===t&&e.y===r}static Clockwise(e,t,r){return(r.x-e.x)*(t.y-e.y)-(t.x-e.x)*(r.y-e.y)<0}static Rescale(e,t){const r=R.Len(e);return new R(t*e.x/r,t*e.y/r)}static ScaleWithOrigin(e,t,r){return R.Sub(e,r).mul(t).add(r)}static ToFixed(e){return new R(Yu(e.x),Yu(e.y))}static ToInt(e){return new R(parseInt(e.x.toFixed(0)),parseInt(e.y.toFixed(0)),parseInt((e.z??0).toFixed(0)))}static ToCss(e){return`${e.x},${e.y}`}static Nudge(e,t,r){return R.Add(e,R.Tan(t,e).mul(r))}static ToString(e){return`${e.x}, ${e.y}`}static ToAngle(e){let t=Math.atan2(e.y,e.x);return t<0&&(t+=Math.PI*2),t}static FromAngle(e,t=1){return new R(Math.cos(e)*t,Math.sin(e)*t)}static ToArray(e){return[e.x,e.y,e.z]}static ToJson(e){const{x:t,y:r,z:i}=e;return{x:t,y:r,z:i}}static Average(e){const t=e.length,r=new R(0,0);if(t===0)return r;for(let i=0;i<t;i++)r.add(e[i]);return r.div(t)}static Clamp(e,t,r){return r===void 0?new R(Math.min(Math.max(e.x,t)),Math.min(Math.max(e.y,t))):new R(Math.min(Math.max(e.x,t),r),Math.min(Math.max(e.y,t),r))}static PointsBetween(e,t,r=6){const i=[];for(let s=0;s<r;s++){const l=ao.easeInQuad(s/(r-1)),c=R.Lrp(e,t,l);c.z=Math.min(1,.5+Math.abs(.5-cee(l))*.65),i.push(c)}return i}static SnapToGrid(e,t=8){return new R(Math.round(e.x/t)*t,Math.round(e.y/t)*t)}}const cee=n=>n<.5?2*n*n:-1+(4-2*n)*n;function Gn(n){return`${Se(n.x)},${Se(n.y)} `}function sa(n,e){return`${Se((n.x+e.x)/2)},${Se((n.y+e.y)/2)} `}const qn=Math.PI,Pr=qn/2,sr=qn*2,uee=Math.sin;function Co(n,e,t){return Math.max(e,typeof t<"u"?Math.min(n,t):n)}function Nb(n,e=1e10){return n?Math.round(n*e)/e:0}function gf(n,e,t=1e-6){return Math.abs(n-e)<=t}function Z5(n,e){const t=Math.pow(n-e,2)/Math.pow(n+e,2);return qn*(n+e)*(1+3*t/(10+Math.sqrt(4-3*t)))}function Gh(n){return n=n%sr,n<0?n=n+sr:n===0&&(n=0),n}function Fv(n,e){return n=Gh(n),e=Gh(e),n>e&&(e+=sr),e-n}function Q5(n,e){return sr-Fv(n,e)}function Fb(n,e){const t=(e-n)%sr;return 2*t%sr-t}function sk(n){return(sr+n)%sr}function zb(n,e){const t=sr/e;let r=Math.floor((sk(n)+t/2)/t)*t%sr;return r<qn&&(r+=sr),r>qn&&(r-=sr),r}function J5(n,e){return n===e||gf(n%(Math.PI/2)-e%(Math.PI/2),0)}function dee(n){return n*qn/180}function fee(n){return n*180/qn}function qh(n,e,t){return new R(n.x,n.y).add(R.FromAngle(t,e))}function ak(n,e,t){const r=n/2,i=e/2,s=[];let l=1/0,c=-1/0,d=1/0,h=-1/0;for(let C=0;C<t;C++){const E=sr/t,P=-Pr+C*E,I=r+r*Math.cos(P),k=i+i*Math.sin(P);I<l&&(l=I),k<d&&(d=k),I>c&&(c=I),k>h&&(h=k),s.push(new R(I,k))}const g=c-l,y=h-d,v=n-g,w=e-y;if(v!==0||w!==0)for(let C=0;C<s.length;C++){const E=s[C];E.x=(E.x-l)/g*n,E.y=(E.y-d)/y*e}return s}function zv(n,e,t,r){return n<r&&t<e}function Xl(n,e,t,r){const i=Math.max(n,t),s=Math.min(e,r);return i<=s?[i,s]:null}function ez(n,e,t){return(e.x-n.x)*(t.y-n.y)-(t.x-n.x)*(e.y-n.y)}function Na(n,e){let t=0,r,i;for(let s=0;s<e.length;s++){if(r=e[s],r.x===n.x&&r.y===n.y||(i=e[(s+1)%e.length],R.Dist(n,r)+R.Dist(n,i)===R.Dist(r,i)))return!0;r.y<=n.y?i.y>n.y&&ez(r,i,n)>0&&(t+=1):i.y<=n.y&&ez(r,i,n)<0&&(t-=1)}return t!==0}function Se(n){return Math.round(n*1e4)/1e4}function Yu(n){return Math.round(n*100)/100}const tz=n=>Math.abs(n)<Number.MAX_SAFE_INTEGER;function mf(n,e,t){return t<0?Fv(n,e):Q5(n,e)}function lk(n,e,t,r){let i;if(Math.abs(n)>qn){i=Fb(e,r);const s=Fb(r,t);return Math.abs(i)<Math.abs(s)?i/n:(n-s)/n}else{i=Fb(e,r);const s=i/n;return Math.sign(i)!==Math.sign(n)?Math.abs(s)>.5?1:0:s}}function hee(n,e,t,r){const i=2*((e-n)%sr)%sr-(e-n)%sr;return r?(sr-Math.abs(i))*(t?1:-1):i}function ck(n,e,t){const r=-2*(n.x*(e.y-t.y)-n.y*(e.x-t.x)+e.x*t.y-t.x*e.y),i=((n.x*n.x+n.y*n.y)*(t.y-e.y)+(e.x*e.x+e.y*e.y)*(n.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-n.y))/r,s=((n.x*n.x+n.y*n.y)*(e.x-t.x)+(e.x*e.x+e.y*e.y)*(t.x-n.x)+(t.x*t.x+t.y*t.y)*(n.x-e.x))/r;return!Number.isFinite(i)||!Number.isFinite(s)?null:new R(i,s)}function pee(n,e,t,r,i){if(t===null)return[R.From(n),R.From(e)];const s=[],l=R.Angle(t,n),c=R.Angle(t,e),d=Fv(l,c);for(let h=0;h<i;h++){const g=h/(i-1),y=l+d*g,v=qh(t,r,y);s.push(v)}return s}const uk=({brush:n,color:e,opacity:t,className:r})=>{const i=M.useRef(null);Ag(i,n.x,n.y);const s=Se(Math.max(1,n.w)),l=Se(Math.max(1,n.h));return m.jsx("svg",{className:"tl-overlays__item",ref:i,children:e?m.jsxs("g",{className:"tl-brush",opacity:t,children:[m.jsx("rect",{width:s,height:l,fill:e,opacity:.75}),m.jsx("rect",{width:s,height:l,fill:"none",stroke:e,opacity:.1})]}):m.jsx("rect",{className:`tl-brush tl-brush__default ${r}`,width:s,height:l})})},xr={isSafari:!1,isIos:!1,isChromeForIos:!1,isFirefox:!1,isAndroid:!1,isWebview:!1,isDarwin:!1};typeof window<"u"&&"navigator"in window&&(xr.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),xr.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),xr.isChromeForIos=/crios.*safari/i.test(navigator.userAgent),xr.isFirefox=/firefox/i.test(navigator.userAgent),xr.isAndroid=/android/i.test(navigator.userAgent),xr.isDarwin=window.navigator.userAgent.toLowerCase().indexOf("mac")>-1);const nz={isLocked:!1,wheelBehavior:"pan",panSpeed:1,zoomSpeed:1,zoomSteps:[.1,.25,.5,1,2,4,8]},dk={duration:0,easing:ao.easeInOutCubic},rz={CAMERA_MOVE:-10},gee=["top","right","bottom","left"],iz=0,fk=2,Ub=1,oz=5,mee=128;var hk={};const yee={},sz=aa("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),Si={logPreventDefaults:aa("logPreventDefaults",{defaults:{all:!1}}),logPointerCaptures:aa("logPointerCaptures",{defaults:{all:!1}}),logElementRemoves:aa("logElementRemoves",{defaults:{all:!1}}),debugSvg:aa("debugSvg",{defaults:{all:!1}}),showFps:aa("showFps",{defaults:{all:!1}}),measurePerformance:aa("measurePerformance",{defaults:{all:!1}}),throwToBlob:aa("throwToBlob",{defaults:{all:!1}}),reconnectOnPing:aa("reconnectOnPing",{defaults:{all:!1}}),debugCursors:aa("debugCursors",{defaults:{all:!1}}),forceSrgb:aa("forceSrgbColors",{defaults:{all:!1}}),debugGeometry:aa("debugGeometry",{defaults:{all:!1}}),hideShapes:aa("hideShapes",{defaults:{all:!1}}),editOnType:aa("editOnType",{defaults:{all:!1}})};if(typeof Element<"u"){const n=Element.prototype.removeChild;Kl("element removal logging",()=>{Si.logElementRemoves.get()?Element.prototype.removeChild=function(e){return console.warn("[tldraw] removing child:",e),n.call(this,e)}:Element.prototype.removeChild=n})}function aa(n,{defaults:e,shouldStoreForSession:t=!0}){return vee({name:n,defaults:e,shouldStoreForSession:t})}function vee(n){const e=xee(n),t=n.shouldStoreForSession?See(n.name):null,r=si(`debug:${n.name}`,t??e);return typeof window<"u"&&(n.shouldStoreForSession&&Kl(`debug:${n.name}`,()=>{const i=r.get();i===e?S2(`tldraw_debug:${n.name}`):SP(`tldraw_debug:${n.name}`,JSON.stringify(i))}),Object.defineProperty(window,`tldraw${n.name.replace(/^[a-z]/,i=>i.toUpperCase())}`,{get(){return r.get()},set(i){r.set(i)},configurable:!0})),Object.assign(r,n)}function See(n){try{return JSON.parse(v2(`tldraw_debug:${n}`)??"null")}catch{return null}}function pk(n){try{return n()}catch{return null}}function xee(n){switch(pk(()=>hk.TLDRAW_ENV)??pk(()=>hk.VERCEL_PUBLIC_TLDRAW_ENV)??pk(()=>hk.NEXT_PUBLIC_TLDRAW_ENV)??"production"){case"production":return n.defaults.production??n.defaults.all;case"preview":case"staging":return n.defaults.staging??n.defaults.all;default:return n.defaults.development??n.defaults.all}}function $b(n){if(n instanceof HTMLElement)return n;if(n.parentElement)return $b(n.parentElement);throw Error("Could not find a parent element of an HTML type!")}function mn(n){n.preventDefault(),Si.logPreventDefaults.get()&&console.warn("preventDefault called on event:",n)}function Uv(n,e){if(n.setPointerCapture(e.pointerId),Si.logPointerCaptures.get()){const t=sz.get();t.set(n,(t.get(n)??0)+1),console.warn("setPointerCapture called on element:",n,e)}}function $v(n,e){if(n.hasPointerCapture(e.pointerId)&&(n.releasePointerCapture(e.pointerId),Si.logPointerCaptures.get())){const t=sz.get();t.get(n)===1?t.delete(n):t.has(n)?t.set(n,t.get(n)-1):console.warn("Release without capture"),console.warn("releasePointerCapture called on element:",n,e)}}const xi=n=>n.stopPropagation(),Zo=(n,e,t)=>{n&&n.style.setProperty(e,t)},Qo=n=>xr.isDarwin?n.metaKey:n.ctrlKey||n.metaKey;function Fa(n){return n.isKilled=!0,{point:{x:n.clientX,y:n.clientY,z:n.pressure},shiftKey:n.shiftKey,altKey:n.altKey,ctrlKey:n.metaKey||n.ctrlKey,metaKey:n.metaKey,accelKey:Qo(n),pointerId:n.pointerId,button:n.button,isPen:n.pointerType==="pen"}}function gk(){const n=xe();return M.useMemo(function(){let r,i;function s(E){if(!E.isKilled){if(E.button===fk){n.dispatch({type:"pointer",target:"canvas",name:"right_click",...Fa(E)});return}E.button!==0&&E.button!==1&&E.button!==5||(Uv(E.currentTarget,E),n.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...Fa(E)}))}}function l(E){E.isKilled||E.clientX===r&&E.clientY===i||(r=E.clientX,i=E.clientY,n.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...Fa(E)}))}function c(E){E.isKilled||E.button!==0&&E.button!==1&&E.button!==2&&E.button!==5||(r=E.clientX,i=E.clientY,$v(E.currentTarget,E),n.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...Fa(E)}))}function d(E){if(E.isKilled||n.getInstanceState().isPenMode&&E.pointerType!=="pen")return;const P=E.pointerType==="mouse"||E.pointerType==="pen";n.updateInstanceState({isHoveringCanvas:P?!0:null})}function h(E){if(E.isKilled||n.getInstanceState().isPenMode&&E.pointerType!=="pen")return;const P=E.pointerType==="mouse"||E.pointerType==="pen";n.updateInstanceState({isHoveringCanvas:P?!1:null})}function g(E){E.isKilled=!0,mn(E)}function y(E){E.isKilled=!0,E.target instanceof HTMLElement&&E.target.tagName!=="A"&&E.target.tagName!=="TEXTAREA"&&!(n.getEditingShape()&&E.target.className.includes("tl-text-content"))&&mn(E)}function v(E){mn(E)}async function w(E){var I,k;if(mn(E),xi(E),!((k=(I=E.dataTransfer)==null?void 0:I.files)!=null&&k.length))return;const P=Array.from(E.dataTransfer.files);await n.putExternalContent({type:"files",files:P,point:n.screenToPage({x:E.clientX,y:E.clientY}),ignoreParent:!1})}function C(E){xi(E)}return{onPointerDown:s,onPointerMove:l,onPointerUp:c,onPointerEnter:d,onPointerLeave:h,onDragOver:v,onDrop:w,onTouchStart:g,onTouchEnd:y,onClick:C}},[n])}function wee(){const n=xe();M.useEffect(()=>{let e=n.getInstanceState().isCoarsePointer;const t=l=>{const c=l.pointerType!=="mouse";e!==c&&(e=c,n.updateInstanceState({isCoarsePointer:c}))};window.addEventListener("pointerdown",t,{capture:!0});const r=window.matchMedia&&window.matchMedia("(any-pointer: coarse)"),i=xr.isFirefox&&!xr.isAndroid&&!xr.isIos,s=()=>{const l=i?!1:r.matches;e===l&&(e=l,n.updateInstanceState({isCoarsePointer:l}))};return r&&(r.addEventListener("change",s),s()),()=>{window.removeEventListener("pointerdown",t,{capture:!0}),r&&r.removeEventListener("change",s)}},[n])}const az=M.createContext(null);function lz({container:n,children:e}){return m.jsx(az.Provider,{value:n,children:e})}function Hi(){return Js(M.useContext(az),"useContainer used outside of <Tldraw />")}function bee(){const n=xe(),e=Hi(),t=Pe("isFocused",()=>n.getIsFocused(),[n]);M.useEffect(()=>{if(!e)return;function r(i){if(i.isSpecialRedispatchedEvent)return;mn(i),xi(i);const s=e.querySelector(".tl-canvas");if(!s)return;const l=new DragEvent(i.type,i);l.isSpecialRedispatchedEvent=!0,s.dispatchEvent(l)}return e.addEventListener("dragover",r),e.addEventListener("drop",r),()=>{e.removeEventListener("dragover",r),e.removeEventListener("drop",r)}},[e]),M.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;let r=null;const i=()=>{r!=null&&r();const s=`(resolution: ${window.devicePixelRatio}dppx)`,l=matchMedia(s),c=d=>{d.type==="change"&&i()};l.addEventListener?l.addEventListener("change",i):l.addListener&&l.addListener(c),r=()=>{l.removeEventListener?l.removeEventListener("change",i):l.removeListener&&l.removeListener(c)},n.updateInstanceState({devicePixelRatio:window.devicePixelRatio})};return i(),()=>{r==null||r()}},[n]),M.useEffect(()=>{if(!t)return;const r=c=>{if(c.altKey&&(n.isIn("zoom")||!n.getPath().endsWith(".idle"))&&!Bb(n)&&mn(c),c.isKilled)return;switch(c.isKilled=!0,c.key){case"=":case"-":case"0":{if(c.metaKey||c.ctrlKey){mn(c);return}break}case"Tab":{if(Bb(n))return;break}case",":return;case"Escape":{if((n.getEditingShape()||n.getSelectedShapeIds().length>0)&&mn(c),n.menus.getOpenMenus().length>0)return;n.inputs.keys.has("Escape")||(n.inputs.keys.add("Escape"),n.cancel(),e.focus());return}default:if(Bb(n))return}const d={type:"keyboard",name:c.repeat?"key_repeat":"key_down",key:c.key,code:c.code,shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.metaKey||c.ctrlKey,metaKey:c.metaKey,accelKey:Qo(c)};n.dispatch(d)},i=c=>{if(c.isKilled||(c.isKilled=!0,Bb(n))||c.key===",")return;const d={type:"keyboard",name:"key_up",key:c.key,code:c.code,shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.metaKey||c.ctrlKey,metaKey:c.metaKey,accelKey:Qo(c)};n.dispatch(d)};function s(c){var d,h;if(e.contains(c.target)){const g=c.touches[0].pageX,y=c.touches[0].radiusX||0;(g-y<10||g+y>n.getViewportScreenBounds().width-10)&&(((d=c.target)==null?void 0:d.tagName)==="BUTTON"&&((h=c.target)==null||h.click()),mn(c))}}const l=c=>{e.contains(c.target)&&(c.ctrlKey||c.metaKey)&&mn(c)};return e.addEventListener("touchstart",s,{passive:!1}),e.addEventListener("wheel",l,{passive:!1}),document.addEventListener("gesturestart",mn),document.addEventListener("gesturechange",mn),document.addEventListener("gestureend",mn),e.addEventListener("keydown",r),e.addEventListener("keyup",i),()=>{e.removeEventListener("touchstart",s),e.removeEventListener("wheel",l),document.removeEventListener("gesturestart",mn),document.removeEventListener("gesturechange",mn),document.removeEventListener("gestureend",mn),e.removeEventListener("keydown",r),e.removeEventListener("keyup",i)}},[n,e,t])}const Cee=["input","select","button","textarea"];function Bb(n){const{activeElement:e}=document;return n.menus.hasOpenMenus()||e&&(e.getAttribute("contenteditable")||Cee.indexOf(e.tagName.toLowerCase())>-1)}const Eee=["textarea","input"];function _ee(n){const e=xe();M.useEffect(()=>{const t=n.current;if(!t)return;const r=i=>{var s;if(i instanceof PointerEvent&&i.pointerType==="pen"){i.isKilled=!0;const{target:l}=i;if(Eee.includes((s=l.tagName)==null?void 0:s.toLocaleLowerCase())||e.isIn("select.editing_shape"))return;mn(i)}};return t.addEventListener("touchstart",r),t.addEventListener("touchend",r),()=>{t.removeEventListener("touchstart",r),t.removeEventListener("touchend",r)}},[e,n])}function Pee(n,e,t){return Math.max(e,Math.min(n,t))}const Eo={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function cz(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function uz(n,e,t,r=.15){return r===0?Pee(n,e,t):n<e?-cz(e-n,t-e,r)+e:n>t?+cz(n-t,t-e,r)+t:n}function Tee(n,[e,t],[r,i]){const[[s,l],[c,d]]=n;return[uz(e,s,l,r),uz(t,c,d,i)]}var Hb={};function Iee(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function kee(n){var e=Iee(n,"string");return typeof e=="symbol"?e:String(e)}function Jo(n,e,t){return e=kee(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dz(Object(t),!0).forEach(function(r){Jo(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const fz={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function hz(n){return n?n[0].toUpperCase()+n.slice(1):""}const Ree=["enter","leave"];function Mee(n=!1,e){return n&&!Ree.includes(e)}function Aee(n,e="",t=!1){const r=fz[n],i=r&&r[e]||e;return"on"+hz(n)+hz(i)+(Mee(t,i)?"Capture":"")}const Dee=["gotpointercapture","lostpointercapture"];function Oee(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=Dee.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function jee(n,e=""){const t=fz[n],r=t&&t[e]||e;return n+r}function pz(n){return"touches"in n}function Lee(n){return pz(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Nee(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function mk(n,e){try{const t=e.clientX-n.clientX,r=e.clientY-n.clientY,i=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,l=Math.hypot(t,r);return{angle:-(Math.atan2(t,r)*180)/Math.PI,distance:l,origin:[i,s]}}catch{}return null}function Fee(n){return Nee(n).map(e=>e.identifier)}function gz(n,e){const[t,r]=Array.from(n.touches).filter(i=>e.includes(i.identifier));return mk(t,r)}const mz=40,yz=800;function vz(n){let{deltaX:e,deltaY:t,deltaMode:r}=n;return r===1?(e*=mz,t*=mz):r===2&&(e*=yz,t*=yz),[e,t]}function zee(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function Vb(n,...e){return typeof n=="function"?n(...e):n}function Uee(){}function $ee(...n){return n.length===0?Uee:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function Sz(n,e){return Object.assign({},e,n||{})}const Bee=32;class xz{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?Vb(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,zee(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const F=t._delta.map(Math.abs);Eo.addTo(t._distance,F)}this.axisIntent&&this.axisIntent(e);const[l,c]=t._movement,[d,h]=r.threshold,{_step:g,values:y}=t;if(r.hasCustomTransform?(g[0]===!1&&(g[0]=Math.abs(l)>=d&&y[0]),g[1]===!1&&(g[1]=Math.abs(c)>=h&&y[1])):(g[0]===!1&&(g[0]=Math.abs(l)>=d&&Math.sign(l)*d),g[1]===!1&&(g[1]=Math.abs(c)>=h&&Math.sign(c)*h)),t.intentional=g[0]!==!1||g[1]!==!1,!t.intentional)return;const v=[0,0];if(r.hasCustomTransform){const[F,H]=y;v[0]=g[0]!==!1?F-g[0]:0,v[1]=g[1]!==!1?H-g[1]:0}else v[0]=g[0]!==!1?l-g[0]:0,v[1]=g[1]!==!1?c-g[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(v);const w=t.offset,C=t._active&&!t._blocked||t.active;C&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=Vb(r.bounds,t)),this.setup&&this.setup()),t.movement=v,this.computeOffset()));const[E,P]=t.offset,[[I,k],[L,O]]=t._bounds;t.overflow=[E<I?-1:E>k?1:0,P<L?-1:P>O?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const z=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=Tee(t._bounds,t.offset,z),t.delta=Eo.sub(t.offset,w),this.computeMovement(),C&&(!t.last||s>Bee)){t.delta=Eo.sub(t.offset,w);const F=t.delta.map(Math.abs);Eo.addTo(t.distance,F),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[F[0]/s,F[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Zr(Zr(Zr({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Hee([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class Vee extends xz{constructor(...e){super(...e),Jo(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Eo.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Eo.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[Lee(e)]:r.axisThreshold;t.axis=Hee(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const wz=n=>n,bz=.15,yk={enabled(n=!0){return n},eventOptions(n,e,t){return Zr(Zr({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[bz,bz];case!1:return[0,0];default:return Eo.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Eo.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;if(this.hasCustomTransform=!!r,Hb.NODE_ENV==="development"){const i=r||wz;return s=>{const l=i(s);return(!isFinite(l[0])||!isFinite(l[1]))&&console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${l[0]},${[1]}]`),l}}return r||wz},threshold(n){return Eo.toVector(n,0)}};Hb.NODE_ENV==="development"&&Object.assign(yk,{domTarget(n){if(n!==void 0)throw Error("[@use-gesture]: `domTarget` option has been renamed to `target`.");return NaN},lockDirection(n){if(n!==void 0)throw Error("[@use-gesture]: `lockDirection` option has been merged with `axis`. Use it as in `{ axis: 'lock' }`");return NaN},initial(n){if(n!==void 0)throw Error("[@use-gesture]: `initial` option has been renamed to `from`.");return NaN}});const Kee=0,Bv=Zr(Zr({},yk),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=Kee){return n},bounds(n={}){if(typeof n=="function")return s=>Bv.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),Hv=typeof window<"u"&&window.document&&window.document.createElement;function Cz(){return Hv&&"ontouchstart"in window}function Wee(){return Cz()||Hv&&window.navigator.maxTouchPoints>1}function Gee(){return Hv&&"onpointerdown"in window}function qee(){return Hv&&"exitPointerLock"in window.document}function Yee(){try{return"constructor"in GestureEvent}catch{return!1}}const fl={isBrowser:Hv,gesture:Yee(),touch:Cz(),touchscreen:Wee(),pointer:Gee(),pointerLock:qee()},Xee=250,Zee=180,Qee=.5,Jee=50,ete=250,tte=10,Ez={mouse:0,touch:0,pen:8},nte=Zr(Zr({},Bv),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&fl.pointerLock,fl.touch&&t?"touch":this.pointerLock?"mouse":fl.pointer&&!i?"pointer":fl.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?Xee:void 0,!(!fl.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Eo.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=Qee,distance:e=Jee,duration:t=ete}={}){return{velocity:this.transform(Eo.toVector(n)),distance:this.transform(Eo.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return Zee;case!1:return 0;default:return n}},axisThreshold(n){return n?Zr(Zr({},Ez),n):Ez},keyboardDisplacement(n=tte){return n}});Hb.NODE_ENV==="development"&&Object.assign(nte,{useTouch(n){if(n!==void 0)throw Error("[@use-gesture]: `useTouch` option has been renamed to `pointer.touch`. Use it as in `{ pointer: { touch: true } }`.");return NaN},experimental_preventWindowScrollY(n){if(n!==void 0)throw Error("[@use-gesture]: `experimental_preventWindowScrollY` option has been renamed to `preventScroll`.");return NaN},swipeVelocity(n){if(n!==void 0)throw Error("[@use-gesture]: `swipeVelocity` option has been renamed to `swipe.velocity`. Use it as in `{ swipe: { velocity: 0.5 } }`.");return NaN},swipeDistance(n){if(n!==void 0)throw Error("[@use-gesture]: `swipeDistance` option has been renamed to `swipe.distance`. Use it as in `{ swipe: { distance: 50 } }`.");return NaN},swipeDuration(n){if(n!==void 0)throw Error("[@use-gesture]: `swipeDuration` option has been renamed to `swipe.duration`. Use it as in `{ swipe: { duration: 250 } }`.");return NaN}});function _z(n){const[e,t]=n.overflow,[r,i]=n._delta,[s,l]=n._direction;(e<0&&r>0&&s<0||e>0&&r<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&i>0&&l<0||t>0&&i<0&&l>0)&&(n._movement[1]=n._movementBound[1])}const rte=30,ite=100;class ote extends xz{constructor(...e){super(...e),Jo(this,"ingKey","pinching"),Jo(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:r}=this.state;e==="wheel"?this.state.offset=Eo.add(t,r):this.state.offset=[(1+t[0])*r[0],t[1]+r[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,r]=e._movement;if(!e.axis){const i=Math.abs(t)*rte-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,r=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>r.has(s))||r.size<2)return;this.start(e),t._touchIds=Array.from(r).slice(0,2);const i=gz(e,t._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,r=t._pointerEvents,i=this.ctrl.pointerIds;if(t._active&&Array.from(r.keys()).every(l=>i.has(l))||(r.size<2&&r.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=mk(...Array.from(r.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const r=this.state;r.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=gz(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const r=mk(...Array.from(t.values()));r&&this.pinchMove(e,r)}pinchMove(e,t){const r=this.state,i=r._values[1],s=t.angle-i;let l=0;Math.abs(s)>270&&(l+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*l]),r.origin=t.origin,r.turns=l,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const r=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Eo.sub(t._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(r=>e[r]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||(e.cancelable&&e.preventDefault(),Hb.NODE_ENV==="development"&&!e.defaultPrevented&&console.warn("[@use-gesture]: To properly support zoom on trackpads, try using the `target` option.\n\nThis message will only appear in development mode."));const r=this.state;r._delta=[-vz(e)[1]/ite*r.offset[0],0],Eo.addTo(r._movement,r._delta),_z(r),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const ste=Zr(Zr({},yk),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!fl.touch&&fl.gesture)return"gesture";if(fl.touch&&r)return"touch";if(fl.touchscreen){if(fl.pointer)return"pointer";if(fl.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=l=>{const c=Sz(Vb(t,l),{min:-1/0,max:1/0});return[c.min,c.max]},s=l=>{const c=Sz(Vb(r,l),{min:-1/0,max:1/0});return[c.min,c.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:l=>[i(l),s(l)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Eo.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Zr(Zr({},Bv),{},{mouseOnly:(n=!0)=>n});class ate extends Vee{constructor(...e){super(...e),Jo(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=vz(e),Eo.addTo(t._movement,t._delta),_z(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const lte=Bv;Zr(Zr({},Bv),{},{mouseOnly:(n=!0)=>n});const vk=new Map,Sk=new Map;function cte(n){vk.set(n.key,n.engine),Sk.set(n.key,n.resolver)}const ute={key:"pinch",engine:ote,resolver:ste},dte={key:"wheel",engine:ate,resolver:lte};var xk={};function fte(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function hte(n,e){if(n==null)return{};var t=fte(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const pte={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=fl.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},gte=["target","eventOptions","window","enabled","transform"];function Kb(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":if(xk.NODE_ENV==="development"){const s=i.call(t,n[r],r,n);Number.isNaN(s)||(t[r]=s)}else t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=Kb(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function mte(n,e,t={}){const r=n,{target:i,eventOptions:s,window:l,enabled:c,transform:d}=r,h=hte(r,gte);if(t.shared=Kb({target:i,eventOptions:s,window:l,enabled:c,transform:d},pte),e){const g=Sk.get(e);t[e]=Kb(Zr({shared:t.shared},h),g)}else for(const g in h){const y=Sk.get(g);if(y)t[g]=Kb(Zr({shared:t.shared},h[g]),y);else if(xk.NODE_ENV==="development"&&!["drag","pinch","scroll","wheel","move","hover"].includes(g)){if(g==="domTarget")throw Error("[@use-gesture]: `domTarget` option has been renamed to `target`.");console.warn(`[@use-gesture]: Unknown config key \`${g}\` was used. Please read the documentation for further information.`)}}return t}class Pz{constructor(e,t){Jo(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const l=this._listeners,c=jee(t,r),d=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},h=Zr(Zr({},d),s);e.addEventListener(c,i,h);const g=()=>{e.removeEventListener(c,i,h),l.delete(g)};return l.add(g),g}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class yte{constructor(){Jo(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class vte{constructor(e){Jo(this,"gestures",new Set),Jo(this,"_targetEventStore",new Pz(this)),Jo(this,"gestureEventStores",{}),Jo(this,"gestureTimeoutStores",{}),Jo(this,"handlers",{}),Jo(this,"config",{}),Jo(this,"pointerIds",new Set),Jo(this,"touchIds",new Set),Jo(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Ste(this,e)}setEventIds(e){if(pz(e))return this.touchIds=new Set(Fee(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=mte(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const l of this.gestures){const c=this.config[l],d=Tz(r,c.eventOptions,!!i);if(c.enabled){const h=vk.get(l);new h(this,e,l).bind(d)}}const s=Tz(r,t.eventOptions,!!i);for(const l in this.nativeHandlers)s(l,"",c=>this.nativeHandlers[l](Zr(Zr({},this.state.shared),{},{event:c,args:e})),void 0,!0)}for(const s in r)r[s]=$ee(...r[s]);if(!i)return r;for(const s in r){const{device:l,capture:c,passive:d}=Oee(s);this._targetEventStore.add(i,l,"",r[s],{capture:c,passive:d})}}}}function Dg(n,e){n.gestures.add(e),n.gestureEventStores[e]=new Pz(n,e),n.gestureTimeoutStores[e]=new yte}function Ste(n,e){e.drag&&Dg(n,"drag"),e.wheel&&Dg(n,"wheel"),e.scroll&&Dg(n,"scroll"),e.move&&Dg(n,"move"),e.pinch&&Dg(n,"pinch"),e.hover&&Dg(n,"hover")}const Tz=(n,e,t)=>(r,i,s,l={},c=!1)=>{var d,h;const g=(d=l.capture)!==null&&d!==void 0?d:e.capture,y=(h=l.passive)!==null&&h!==void 0?h:e.passive;let v=c?r:Aee(r,i,g);t&&y&&(v+="Passive"),n[v]=n[v]||[],n[v].push(s)},xte=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function wte(n){const e={},t={},r=new Set;for(let i in n)xte.test(i)?(r.add(RegExp.lastMatch),t[i]=n[i]):e[i]=n[i];return[t,e,r]}function Og(n,e,t,r,i,s){if(!n.has(t))return;if(!vk.has(r)){xk.NODE_ENV==="development"&&console.warn(`[@use-gesture]: You've created a custom handler that that uses the \`${r}\` gesture but isn't properly configured.

Please add \`${r}Action\` when creating your handler.`);return}const l=t+"Start",c=t+"End",d=h=>{let g;return h.first&&l in e&&e[l](h),t in e&&(g=e[t](h)),h.last&&c in e&&e[c](h),g};i[r]=d,s[r]=s[r]||{}}function bte(n,e){const[t,r,i]=wte(n),s={};return Og(i,t,"onDrag","drag",s,e),Og(i,t,"onWheel","wheel",s,e),Og(i,t,"onScroll","scroll",s,e),Og(i,t,"onPinch","pinch",s,e),Og(i,t,"onMove","move",s,e),Og(i,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:r}}function Cte(n,e={},t,r){const i=zt.useMemo(()=>new vte(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),zt.useEffect(i.effect.bind(i)),zt.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function Ete(n){return n.forEach(cte),function(t,r){const{handlers:i,nativeHandlers:s,config:l}=bte(t,r||{});return Cte(i,l,void 0,s)}}const Iz=10,_te=/Mac|iPod|iPhone|iPad/.test(typeof window>"u"?"node":window.navigator.platform);function kz(n){let{deltaY:e,deltaX:t}=n,r=0;return n.ctrlKey||n.altKey||n.metaKey?r=(Math.abs(e)>Iz?Iz*Math.sign(e):e)/100:n.shiftKey&&!_te&&(t=e,e=0),{x:-t,y:-e,z:-r}}const Pte=Ete([dte,ute]);let jg;const Tte=n=>jg===void 0?(jg=n,!1):n-jg>120&&n-jg<160?(jg=n,!0):(jg=n,!1);function Ite(n){const e=xe(),t=M.useMemo(()=>{let r="not sure";const i=({event:E})=>{if(!e.getInstanceState().isFocused||(r="not sure",Tte(Date.now())))return;const P=e.getEditingShapeId();if(P){const L=e.getShape(P);if(L&&e.getShapeUtil(L).canScroll(L)){const z=e.getShapePageBounds(P);if(z!=null&&z.containsPoint(e.inputs.currentPagePoint))return}}mn(E),xi(E);const I=kz(E);if(I.x===0&&I.y===0)return;const k={type:"wheel",name:"wheel",delta:I,point:new R(E.clientX,E.clientY),shiftKey:E.shiftKey,altKey:E.altKey,ctrlKey:E.metaKey||E.ctrlKey,metaKey:E.metaKey,accelKey:Qo(E)};e.dispatch(k)};let s=1,l=1,c=1,d=0;const h=new R,g=new R,y=E=>{const P=n.current;r="not sure";const{event:I,origin:k,da:L}=E;I instanceof WheelEvent||(I.target===P||P!=null&&P.contains(I.target))&&(g.x=k[0],g.y=k[1],h.x=k[0],h.y=k[1],s=L[0],l=e.getZoomLevel(),e.dispatch({type:"pinch",name:"pinch_start",point:{x:k[0],y:k[1],z:e.getZoomLevel()},delta:{x:0,y:0},shiftKey:I.shiftKey,altKey:I.altKey,ctrlKey:I.metaKey||I.ctrlKey,metaKey:I.metaKey,accelKey:Qo(I)}))},v=E=>{if(E&&(r="zooming"),r==="zooming")return;const P=Math.abs(d-s),I=R.Dist(h,g);switch(r){case"not sure":{P>24?r="zooming":I>16&&(r="panning");break}case"panning":{P>64&&(r="zooming");break}}};return{onWheel:i,onPinchStart:y,onPinchEnd:E=>{const P=n.current,{event:I,origin:k,offset:L}=E;if(I instanceof WheelEvent||!(I.target===P||P!=null&&P.contains(I.target)))return;const O=L[0];r="not sure",e.timers.requestAnimationFrame(()=>{e.dispatch({type:"pinch",name:"pinch_end",point:{x:k[0],y:k[1],z:O},delta:{x:k[0],y:k[1]},shiftKey:I.shiftKey,altKey:I.altKey,ctrlKey:I.metaKey||I.ctrlKey,metaKey:I.metaKey,accelKey:Qo(I)})})},onPinch:E=>{const P=n.current,{event:I,origin:k,offset:L,da:O}=E;if(I instanceof WheelEvent||!(I.target===P||P!=null&&P.contains(I.target)))return;const z=E.type==="gesturechange"||E.type==="gestureend";d=O[0];const F=k[0]-g.x,H=k[1]-g.y;switch(g.x=k[0],g.y=k[1],v(z),r){case"zooming":{c=L[0],e.dispatch({type:"pinch",name:"pinch",point:{x:k[0],y:k[1],z:c},delta:{x:F,y:H},shiftKey:I.shiftKey,altKey:I.altKey,ctrlKey:I.metaKey||I.ctrlKey,metaKey:I.metaKey,accelKey:Qo(I)});break}case"panning":{e.dispatch({type:"pinch",name:"pinch",point:{x:k[0],y:k[1],z:l},delta:{x:F,y:H},shiftKey:I.shiftKey,altKey:I.altKey,ctrlKey:I.metaKey||I.ctrlKey,metaKey:I.metaKey,accelKey:Qo(I)});break}}}}},[e,n]);Pte(t,{target:n,eventOptions:{passive:!1},pinch:{from:()=>[e.getZoomLevel(),0],scaleBounds:()=>{const r=e.getBaseZoom(),i=e.getCameraOptions().zoomSteps,s=i[0]*r,l=i[i.length-1]*r;return{from:e.getZoomLevel(),max:l,min:s}}}})}function wk(n,e,t){const r=n.getShape(e),i=n.getShapeHandles(r);return{shape:r,handle:i.find(s=>s.id===t)}}function kte(n,e){const t=xe();return M.useMemo(()=>{const r=d=>{if(d.isKilled)return;const h=$b(d.currentTarget);Uv(h,d);const{shape:g,handle:y}=wk(t,n,e);y&&t.dispatch({type:"pointer",target:"handle",handle:y,shape:g,name:"pointer_down",...Fa(d)})};let i,s;return{onPointerDown:r,onPointerMove:d=>{if(d.isKilled||d.clientX===i&&d.clientY===s)return;i=d.clientX,s=d.clientY;const{shape:h,handle:g}=wk(t,n,e);g&&t.dispatch({type:"pointer",target:"handle",handle:g,shape:h,name:"pointer_move",...Fa(d)})},onPointerUp:d=>{if(d.isKilled)return;const h=$b(d.currentTarget);$v(h,d);const{shape:g,handle:y}=wk(t,n,e);y&&t.dispatch({type:"pointer",target:"handle",handle:y,shape:g,name:"pointer_up",...Fa(d)})}}},[t,n,e])}function Rte(n){const e=xe();M.useLayoutEffect(()=>{const t=UL(()=>{n.current&&e.updateViewportScreenBounds(n.current)},200,{trailing:!0}),r=e.timers.setInterval(t,1e3);window.addEventListener("resize",t);const i=new ResizeObserver(c=>{c[0].contentRect&&t()}),s=n.current;let l=null;return s&&(i.observe(s),l=Mte(s),l.addEventListener("scroll",t)),()=>{clearInterval(r),window.removeEventListener("resize",t),i.disconnect(),l==null||l.removeEventListener("scroll",t),t.cancel()}},[e,n])}/*!
 * Author: excalidraw
 * MIT License: https://github.com/excalidraw/excalidraw/blob/master/LICENSE
 * https://github.com/excalidraw/excalidraw/blob/48c3465b19f10ec755b3eb84e21a01a468e96e43/packages/excalidraw/utils.ts#L600
 */const Mte=n=>{let e=n.parentElement;for(;e;){if(e===document.body)return document;const{overflowY:t}=window.getComputedStyle(e);if(e.scrollHeight>e.clientHeight&&(t==="auto"||t==="scroll"||t==="overlay"))return e;e=e.parentElement}return document};class Xe{constructor(e=0,t=0,r=0,i=0){U(this,"x",0);U(this,"y",0);U(this,"w",0);U(this,"h",0);this.x=e,this.y=t,this.w=r,this.h=i}get point(){return new R(this.x,this.y)}set point(e){this.x=e.x,this.y=e.y}get minX(){return this.x}set minX(e){this.x=e}get midX(){return this.x+this.w/2}get maxX(){return this.x+this.w}get minY(){return this.y}set minY(e){this.y=e}get midY(){return this.y+this.h/2}get maxY(){return this.y+this.h}get width(){return this.w}set width(e){this.w=e}get height(){return this.h}set height(e){this.h=e}get aspectRatio(){return this.width/this.height}get center(){return new R(this.midX,this.midY)}set center(e){this.minX=e.x-this.width/2,this.minY=e.y-this.height/2}get corners(){return[new R(this.minX,this.minY),new R(this.maxX,this.minY),new R(this.maxX,this.maxY),new R(this.minX,this.maxY)]}get cornersAndCenter(){return[new R(this.minX,this.minY),new R(this.maxX,this.minY),new R(this.maxX,this.maxY),new R(this.minX,this.maxY),this.center]}get sides(){const{corners:e}=this;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}get size(){return new R(this.w,this.h)}toFixed(){return this.x=Nb(this.x),this.y=Nb(this.y),this.w=Nb(this.w),this.h=Nb(this.h),this}setTo(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}set(e=0,t=0,r=0,i=0){return this.x=e,this.y=t,this.w=r,this.h=i,this}expand(e){const t=Math.min(this.minX,e.minX),r=Math.min(this.minY,e.minY),i=Math.max(this.maxX,e.maxX),s=Math.max(this.maxY,e.maxY);return this.x=t,this.y=r,this.w=i-t,this.h=s-r,this}expandBy(e){return this.x-=e,this.y-=e,this.w+=e*2,this.h+=e*2,this}scale(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}clone(){const{x:e,y:t,w:r,h:i}=this;return new Xe(e,t,r,i)}translate(e){return this.x+=e.x,this.y+=e.y,this}snapToGrid(e){const t=Math.round(this.minX/e)*e,r=Math.round(this.minY/e)*e,i=Math.round(this.maxX/e)*e,s=Math.round(this.maxY/e)*e;this.minX=t,this.minY=r,this.width=Math.max(1,i-t),this.height=Math.max(1,s-r)}collides(e){return Xe.Collides(this,e)}contains(e){return Xe.Contains(this,e)}includes(e){return Xe.Includes(this,e)}containsPoint(e,t=0){return Xe.ContainsPoint(this,e,t)}getHandlePoint(e){switch(e){case"top_left":return new R(this.minX,this.minY);case"top_right":return new R(this.maxX,this.minY);case"bottom_left":return new R(this.minX,this.maxY);case"bottom_right":return new R(this.maxX,this.maxY);case"top":return new R(this.midX,this.minY);case"right":return new R(this.maxX,this.midY);case"bottom":return new R(this.midX,this.maxY);case"left":return new R(this.minX,this.midY)}}toJson(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}resize(e,t,r){const{minX:i,minY:s,maxX:l,maxY:c}=this;let{minX:d,minY:h,maxX:g,maxY:y}=this;switch(e){case"left":case"top_left":case"bottom_left":{d+=t;break}case"right":case"top_right":case"bottom_right":{g+=t;break}}switch(e){case"top":case"top_left":case"top_right":{h+=r;break}case"bottom":case"bottom_left":case"bottom_right":{y+=r;break}}const v=(g-d)/(l-i),w=(y-h)/(c-s),C=v<0,E=w<0;if(C){const P=g;g=d,d=P}if(E){const P=y;y=h,h=P}this.minX=d,this.minY=h,this.width=Math.abs(g-d),this.height=Math.abs(y-h)}union(e){const t=Math.min(this.minX,e.x),r=Math.min(this.minY,e.y),i=Math.max(this.maxX,e.w+e.x),s=Math.max(this.maxY,e.h+e.y);return this.x=t,this.y=r,this.width=i-t,this.height=s-r,this}static From(e){return new Xe(e.x,e.y,e.w,e.h)}static FromCenter(e,t){return new Xe(e.x-t.x/2,e.y-t.y/2,t.x,t.y)}static FromPoints(e){if(e.length===0)return new Xe;let t=1/0,r=1/0,i=-1/0,s=-1/0,l;for(let c=0,d=e.length;c<d;c++)l=e[c],t=Math.min(l.x,t),r=Math.min(l.y,r),i=Math.max(l.x,i),s=Math.max(l.y,s);return new Xe(t,r,i-t,s-r)}static Expand(e,t){const r=Math.min(t.minX,e.minX),i=Math.min(t.minY,e.minY),s=Math.max(t.maxX,e.maxX),l=Math.max(t.maxY,e.maxY);return new Xe(r,i,s-r,l-i)}static ExpandBy(e,t){return new Xe(e.minX-t,e.minY-t,e.width+t*2,e.height+t*2)}static Collides(e,t){return!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY)}static Contains(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX}static Includes(e,t){return Xe.Collides(e,t)||Xe.Contains(e,t)}static ContainsPoint(e,t,r=0){return!(t.x<e.minX-r||t.y<e.minY-r||t.x>e.maxX+r||t.y>e.maxY+r)}static Common(e){let t=1/0,r=1/0,i=-1/0,s=-1/0;for(let l=0;l<e.length;l++){const c=e[l];t=Math.min(t,c.minX),r=Math.min(r,c.minY),i=Math.max(i,c.maxX),s=Math.max(s,c.maxY)}return new Xe(t,r,i-t,s-r)}static Sides(e,t=0){const{corners:r}=e;return[[r[0],r[1]],[r[1],r[2]],[r[2],r[3]],[r[3],r[0]]]}static Resize(e,t,r,i,s=!1){const{minX:l,minY:c,maxX:d,maxY:h}=e;let{minX:g,minY:y,maxX:v,maxY:w}=e;switch(t){case"left":case"top_left":case"bottom_left":{g+=r;break}case"right":case"top_right":case"bottom_right":{v+=r;break}}switch(t){case"top":case"top_left":case"top_right":{y+=i;break}case"bottom":case"bottom_left":case"bottom_right":{w+=i;break}}const C=(v-g)/(d-l),E=(w-y)/(h-c),P=C<0,I=E<0;if(s){const L=(d-l)/(h-c),O=Math.abs(v-g),z=Math.abs(w-y),F=O*(E<0?1:-1)*(1/L),H=z*(C<0?1:-1)*L,V=L<O/z;switch(t){case"top_left":{V?y=w+F:g=v+H;break}case"top_right":{V?y=w+F:v=g-H;break}case"bottom_right":{V?w=y-F:v=g-H;break}case"bottom_left":{V?w=y-F:g=v+H;break}case"bottom":case"top":{const re=(g+v)/2,q=z*L;g=re-q/2,v=re+q/2;break}case"left":case"right":{const re=(y+w)/2,q=O/L;y=re-q/2,w=re+q/2;break}}}if(P){const L=v;v=g,g=L}if(I){const L=w;w=y,y=L}const k=new Xe(g,y,Math.abs(v-g),Math.abs(w-y));return{box:k,scaleX:+(k.width/e.width*(C>0?1:-1)).toFixed(5),scaleY:+(k.height/e.height*(E>0?1:-1)).toFixed(5)}}equals(e){return Xe.Equals(this,e)}static Equals(e,t){return t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h}zeroFix(){return this.w=Math.max(1,this.w),this.h=Math.max(1,this.h),this}static ZeroFix(e){return new Xe(e.x,e.y,Math.max(1,e.w),Math.max(1,e.h))}}function Ate(n){switch(n){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return n}}function Dte(n){switch(n){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return n}}function Ote(n){return n==="top_left"||n==="top_right"||n==="bottom_right"||n==="bottom_left"}class qe{constructor(e,t,r,i,s,l){U(this,"a",1);U(this,"b",0);U(this,"c",0);U(this,"d",1);U(this,"e",0);U(this,"f",0);this.a=e,this.b=t,this.c=r,this.d=i,this.e=s,this.f=l}equals(e){return this===e||this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}multiply(e){const t=e,{a:r,b:i,c:s,d:l,e:c,f:d}=this;return this.a=r*t.a+s*t.b,this.c=r*t.c+s*t.d,this.e=r*t.e+s*t.f+c,this.b=i*t.a+l*t.b,this.d=i*t.c+l*t.d,this.f=i*t.e+l*t.f+d,this}rotate(e,t,r){return e===0?this:t===void 0?this.multiply(qe.Rotate(e)):this.translate(t,r).multiply(qe.Rotate(e)).translate(-t,-r)}translate(e,t){return this.multiply(qe.Translate(e,t))}scale(e,t){return this.multiply(qe.Scale(e,t))}invert(){const{a:e,b:t,c:r,d:i,e:s,f:l}=this,c=e*i-t*r;return this.a=i/c,this.b=t/-c,this.c=r/-c,this.d=e/c,this.e=(i*s-r*l)/-c,this.f=(t*s-e*l)/c,this}applyToPoint(e){return qe.applyToPoint(this,e)}applyToPoints(e){return qe.applyToPoints(this,e)}rotation(){return qe.Rotation(this)}point(){return qe.Point(this)}decomposed(){return qe.Decompose(this)}toCssString(){return qe.toCssString(this)}setTo(e){return Object.assign(this,e),this}decompose(){return qe.Decompose(this)}clone(){return new qe(this.a,this.b,this.c,this.d,this.e,this.f)}static Identity(){return new qe(1,0,0,1,0,0)}static Translate(e,t){return new qe(1,0,0,1,e,t)}static Rotate(e,t,r){if(e===0)return qe.Identity();const i=Math.cos(e),s=Math.sin(e),l=new qe(i,s,-s,i,0,0);return t===void 0?l:qe.Compose(qe.Translate(t,r),l,qe.Translate(-t,-r))}static Scale(e,t,r,i){const s=new qe(e,0,0,t,0,0);return r===void 0?s:qe.Compose(qe.Translate(r,i),s,qe.Translate(-r,-i))}static Multiply(e,t){return{a:e.a*t.a+e.c*t.b,c:e.a*t.c+e.c*t.d,e:e.a*t.e+e.c*t.f+e.e,b:e.b*t.a+e.d*t.b,d:e.b*t.c+e.d*t.d,f:e.b*t.e+e.d*t.f+e.f}}static Inverse(e){const t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/-t,f:(e.b*e.e-e.a*e.f)/t}}static Absolute(e){const t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/t,f:(e.b*e.e-e.a*e.f)/-t}}static Compose(...e){const t=qe.Identity();for(let r=0,i=e.length;r<i;r++)t.multiply(e[r]);return t}static Point(e){return new R(e.e,e.f)}static Rotation(e){let t;if(e.a!==0||e.c!==0){const r=(e.a*e.a+e.c*e.c)**.5;t=Math.acos(e.a/r)*(e.c>0?-1:1)}else if(e.b!==0||e.d!==0){const r=(e.b*e.b+e.d*e.d)**.5;t=Pr+Math.acos(e.b/r)*(e.d>0?-1:1)}else t=0;return sk(t)}static Decompose(e){let t,r,i;if(e.a!==0||e.c!==0){const s=(e.a*e.a+e.c*e.c)**.5;t=s,r=(e.a*e.d-e.b*e.c)/s,i=Math.acos(e.a/s)*(e.c>0?-1:1)}else if(e.b!==0||e.d!==0){const s=(e.b*e.b+e.d*e.d)**.5;t=(e.a*e.d-e.b*e.c)/s,r=s,i=Pr+Math.acos(e.b/s)*(e.d>0?-1:1)}else t=0,r=0,i=0;return{x:e.e,y:e.f,scaleX:t,scaleY:r,rotation:sk(i)}}static Smooth(e,t=1e10){return e.a=Math.round(e.a*t)/t,e.b=Math.round(e.b*t)/t,e.c=Math.round(e.c*t)/t,e.d=Math.round(e.d*t)/t,e.e=Math.round(e.e*t)/t,e.f=Math.round(e.f*t)/t,e}static toCssString(e){return`matrix(${Se(e.a)}, ${Se(e.b)}, ${Se(e.c)}, ${Se(e.d)}, ${Se(e.e)}, ${Se(e.f)})`}static applyToPoint(e,t){return new R(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}static applyToXY(e,t,r){return[e.a*t+e.c*r+e.e,e.b*t+e.d*r+e.f]}static applyToPoints(e,t){return t.map(r=>new R(e.a*r.x+e.c*r.y+e.e,e.b*r.x+e.d*r.y+e.f,r.z))}static applyToBounds(e,t){return new Xe(e.e+t.minX,e.f+t.minY,t.width,t.height)}static From(e){return new qe(e.a,e.b,e.c,e.d,e.e,e.f)}static Cast(e){return e instanceof qe?e:qe.From(e)}}class yf{constructor(e){U(this,"isFilled",!1);U(this,"isClosed",!0);U(this,"isLabel",!1);U(this,"debugColor");U(this,"ignore");U(this,"_vertices");U(this,"_bounds");U(this,"_area");U(this,"_length");this.isFilled=e.isFilled,this.isClosed=e.isClosed,this.isLabel=e.isLabel??!1,this.debugColor=e.debugColor,this.ignore=e.ignore}hitTestPoint(e,t=0,r=!1){return this.isClosed&&(this.isFilled||r)&&Na(e,this.vertices)?!0:R.Dist2(e,this.nearestPoint(e))<=t*t}distanceToPoint(e,t=!1){return e.dist(this.nearestPoint(e))*(this.isClosed&&(this.isFilled||t)&&Na(e,this.vertices)?-1:1)}distanceToLineSegment(e,t){if(e.equals(t))return this.distanceToPoint(e);const{vertices:r}=this;let i,s=1/0,l,c,d;for(let h=0;h<r.length;h++)c=r[h],d=R.NearestPointOnLineSegment(e,t,c,!0),l=R.Dist2(c,d),l<s&&(s=l,i=d);if(!i)throw Error("nearest point not found");return this.isClosed&&this.isFilled&&Na(i,this.vertices)?-s:s}hitTestLineSegment(e,t,r=0){return this.distanceToLineSegment(e,t)<=r}nearestPointOnLineSegment(e,t){const{vertices:r}=this;let i,s=1/0,l,c,d;for(let h=0;h<r.length;h++)c=r[h],d=R.NearestPointOnLineSegment(e,t,c,!0),l=R.Dist2(c,d),l<s&&(s=l,i=d);if(!i)throw Error("nearest point not found");return i}isPointInBounds(e,t=0){const{bounds:r}=this;return!(e.x<r.minX-t||e.y<r.minY-t||e.x>r.maxX+t||e.y>r.maxY+t)}get vertices(){return this._vertices||(this._vertices=this.getVertices()),this._vertices}getBounds(){return Xe.FromPoints(this.vertices)}get bounds(){return this._bounds||(this._bounds=this.getBounds()),this._bounds}get center(){return this.bounds.center}get area(){return this._area||(this._area=this.getArea()),this._area}getArea(){if(!this.isClosed)return 0;const{vertices:e}=this;let t=0;for(let r=0,i=e.length;r<i;r++){const s=e[r],l=e[(r+1)%i];t+=s.x*l.y-l.x*s.y}return t/2}toSimpleSvgPath(){let e="";const{vertices:t}=this,r=t.length;if(r===0)return e;e+=`M${t[0].x},${t[0].y}`;for(let i=1;i<r;i++)e+=`L${t[i].x},${t[i].y}`;return this.isClosed&&(e+="Z"),e}get length(){return this._length?this._length:(this._length=this.getLength(),this._length)}getLength(){const{vertices:e}=this;let t,r=e[0],i=0;for(let s=1;s<e.length;s++)t=e[s],i+=R.Dist2(r,t),r=t;return Math.sqrt(i)}}class hl extends yf{constructor(t){super({...t,isClosed:!0,isFilled:!1});U(this,"children",[]);U(this,"ignoredChildren",[]);for(const r of t.children)r.ignore?this.ignoredChildren.push(r):this.children.push(r);if(this.children.length===0)throw Error("Group2d must have at least one child")}getVertices(){return this.children.filter(t=>!t.isLabel).flatMap(t=>t.vertices)}nearestPoint(t){let r=1/0,i;const{children:s}=this;if(s.length===0)throw Error("no children");let l,c;for(const d of s)l=d.nearestPoint(t),c=R.Dist2(l,t),c<r&&(r=c,i=l);if(!i)throw Error("nearest point not found");return i}distanceToPoint(t,r=!1){return Math.min(...this.children.map((i,s)=>i.distanceToPoint(t,r||s>0)))}hitTestPoint(t,r,i){return!!this.children.filter(s=>!s.isLabel).find(s=>s.hitTestPoint(t,r,i))}hitTestLineSegment(t,r,i){return!!this.children.filter(s=>!s.isLabel).find(s=>s.hitTestLineSegment(t,r,i))}getArea(){return this.children[0].area}toSimpleSvgPath(){let t="";for(const i of this.children)t+=i.toSimpleSvgPath();const r=Xe.FromPoints(this.vertices).corners;for(let i=0,s=r.length;i<s;i++){const l=r[i],c=r[(i-1+s)%s],d=l.dist(c),h=r[(i+1)%s],g=l.dist(h),y=l.clone().lrp(c,4/d),v=l,w=l.clone().lrp(h,4/g);t+=`M${y.x},${y.y} L${v.x},${v.y} L${w.x},${w.y} `}return t}getLength(){return this.children.reduce((t,r)=>r.isLabel?t:t+r.length,0)}getSvgPathData(){return this.children.map((t,r)=>t.isLabel?"":t.getSvgPathData(r===0)).join(" ")}}function jte(n=!0){const[e,t]=M.useState(0),r=xe();M.useEffect(()=>{if(!n)return;const i=()=>t(s=>s+1);return r.on("tick",i),()=>{r.off("tick",i)}},[r,n])}const Lte=bo(function({showStroke:e=!0,showVertices:t=!0,showClosestPointOnOutline:r=!0}){const i=xe();jte(r);const s=i.getZoomLevel(),l=i.getRenderingShapes(),{inputs:{currentPagePoint:c}}=i;return m.jsx("svg",{style:{position:"absolute",pointerEvents:"none",zIndex:999999999,top:0,left:0,overflow:"visible"},children:l.map(d=>{const h=i.getShape(d.id);if(h.type==="group")return null;const g=i.getShapeGeometry(h),y=i.getShapePageTransform(h),v=i.getPointInShapeSpace(h,c),w=g.nearestPoint(v),C=g.distanceToPoint(v,!0),E=Math.abs(C)*s,P=C<0,{vertices:I}=g;return m.jsxs("g",{transform:y.toCssString(),strokeLinecap:"round",strokeLinejoin:"round",children:[e&&m.jsx("g",{stroke:g.debugColor??"red",opacity:"1",strokeWidth:2/s,fill:"none",children:m.jsx(Rz,{geometry:g})}),t&&I.map((k,L)=>m.jsx("circle",{cx:k.x,cy:k.y,r:2/s,fill:`hsl(${xg(L,[0,I.length-1],[120,200])}, 100%, 50%)`,stroke:"black",strokeWidth:1/s},`v${L}`)),r&&E<150&&m.jsx("line",{x1:w.x,y1:w.y,x2:v.x,y2:v.y,opacity:1-E/150,stroke:P?"goldenrod":"dodgerblue",strokeWidth:2/s})]},d.id+"_outline")})})});function Rz({geometry:n}){return n instanceof hl?m.jsx(m.Fragment,{children:[...n.children,...n.ignoredChildren].map((e,t)=>m.jsx(Rz,{geometry:e},t))}):m.jsx("path",{d:n.toSimpleSvgPath()})}function Mz(n){return WY(n)}function Az(){const n=xe(),e=zQ("userIds",()=>Mz(n.getCollaborators().map(t=>t.userId)).sort(),{isEqual:(t,r)=>{var i;return t.join(",")===((i=r.join)==null?void 0:i.call(r,","))}},[n]);return Pe(e)}function Wb(n){const e=xe();return Pe(`latestPresence:${n}`,()=>e.getCollaborators().find(r=>r.userId===n),[e,n])??null}const Nte=bo(function(){return Az().map(t=>m.jsx(Fte,{collaboratorId:t},t))}),Fte=bo(function({collaboratorId:e}){const t=xe(),r=Wb(e),i=Ute(t,r);if(!(r&&r.currentPageId===t.getCurrentPageId()))return null;switch(i){case"inactive":{const{followingUserId:s,highlightedUserIds:l}=t.getInstanceState();if(!(s===r.userId||l.includes(r.userId)))return null;break}case"idle":{const{highlightedUserIds:s}=t.getInstanceState();if(r.followingUserId===t.user.getId()&&!(r.chatMessage||s.includes(r.userId)))return null;break}}return m.jsx(zte,{latestPresence:r})}),zte=bo(function({latestPresence:e}){const t=xe(),{CollaboratorBrush:r,CollaboratorScribble:i,CollaboratorCursor:s,CollaboratorHint:l,CollaboratorShapeIndicator:c}=zr(),d=t.getZoomLevel(),h=t.getViewportPageBounds(),{userId:g,chatMessage:y,brush:v,scribbles:w,selectedShapeIds:C,userName:E,cursor:P,color:I}=e;if(!P)return null;const k=!(P.x<h.minX-12/d||P.y<h.minY-16/d||P.x>h.maxX-12/d||P.y>h.maxY-16/d);return m.jsxs(m.Fragment,{children:[v&&r?m.jsx(r,{className:"tl-collaborator__brush",brush:v,color:I,opacity:.1},g+"_brush"):null,k&&s?m.jsx(s,{className:"tl-collaborator__cursor",point:P,color:I,zoom:d,name:E!=="New User"?E:null,chatMessage:y??""},g+"_cursor"):l?m.jsx(l,{className:"tl-collaborator__cursor-hint",point:P,color:I,zoom:d,viewport:h},g+"_cursor_hint"):null,i&&w.length?m.jsx(m.Fragment,{children:w.map(L=>m.jsx(i,{className:"tl-collaborator__scribble",scribble:L,color:I,zoom:d,opacity:L.color==="laser"?.5:.1},g+"_scribble_"+L.id))}):null,c&&C.filter(L=>!t.isShapeHidden(L)).map(L=>m.jsx(c,{className:"tl-collaborator__shape-indicator",shapeId:L,color:I,opacity:.5},g+"_"+L))]})});function Dz(n,e){return e>n.options.collaboratorInactiveTimeoutMs?"inactive":e>n.options.collaboratorIdleTimeoutMs?"idle":"active"}function Ute(n,e){const t=M.useRef((e==null?void 0:e.lastActivityTimestamp)??-1),[r,i]=M.useState(()=>Dz(n,Date.now()-t.current));return M.useEffect(()=>{const s=n.timers.setInterval(()=>{i(Dz(n,Date.now()-t.current))},n.options.collaboratorCheckIntervalMs);return()=>clearInterval(s)},[n]),e&&(t.current=e.lastActivityTimestamp??1/0),r}function $te(){const n=xe(),e=Pe("is menu open",()=>n.menus.hasAnyOpenMenus(),[n]),[t,r]=M.useState(!1),i=e||t,s=gk(),l=M.useRef({isDown:!1,isDragging:!1,start:new R}),c=M.useCallback(g=>{g.button===0&&(r(!0),l.current={isDown:!0,isDragging:!1,start:new R(g.clientX,g.clientY)}),n.menus.clearOpenMenus()},[n]),d=M.useCallback(g=>{var y,v,w;if(l.current.isDown){if(l.current.isDragging){(y=s.onPointerMove)==null||y.call(s,g);return}if(R.Dist2(l.current.start,new R(g.clientX,g.clientY))>n.options.dragDistanceSquared){l.current={...l.current,isDown:!0,isDragging:!0};const{x:C,y:E}=l.current.start;(v=s.onPointerDown)==null||v.call(s,{...g,clientX:C,clientY:E,button:0}),(w=s.onPointerMove)==null||w.call(s,g)}}},[s,n]),h=M.useCallback(g=>{var y;(y=s.onPointerUp)==null||y.call(s,g),r(!1),l.current={isDown:!1,isDragging:!1,start:new R(g.clientX,g.clientY)}},[s]);return i&&m.jsx("div",{className:"tlui-menu-click-capture","data-testid":"menu-click-capture.content",...s,onPointerDown:c,onPointerMove:d,onPointerUp:h})}const Oz=M.memo(function({id:e,shape:t,util:r,index:i,backgroundIndex:s,opacity:l}){const c=xe(),{ShapeErrorFallback:d}=zr(),h=M.useRef(null),g=M.useRef(null),y=M.useRef({transform:"",clipPath:"none",width:0,height:0,x:0,y:0,isCulled:!1});df("set shape stuff",()=>{const C=c.getShape(e);if(!C)return;const E=y.current,P=c.getShapeClipPath(e)??"none";P!==E.clipPath&&(Zo(h.current,"clip-path",P),Zo(g.current,"clip-path",P),E.clipPath=P);const I=c.getShapePageTransform(e),k=qe.toCssString(I),L=c.getShapeGeometry(C).bounds;k!==E.transform&&(Zo(h.current,"transform",k),Zo(g.current,"transform",k),E.transform=k);const O=Math.max(L.width,1),z=Math.max(L.height,1);(O!==E.width||z!==E.height)&&(Zo(h.current,"width",O+"px"),Zo(h.current,"height",z+"px"),Zo(g.current,"width",O+"px"),Zo(g.current,"height",z+"px"),E.width=O,E.height=z)},[c]),df("set opacity and z-index",()=>{const C=h.current,E=g.current;Zo(C,"opacity",l),Zo(E,"opacity",l),Zo(C,"z-index",i),Zo(E,"z-index",s)},[l,i,s]),df("set display",()=>{if(!c.getShape(e))return;const P=c.getCulledShapes().has(e);P!==y.current.isCulled&&(Zo(h.current,"display",P?"none":"block"),Zo(g.current,"display",P?"none":"block"),y.current.isCulled=P)},[c]);const v=M.useCallback(C=>c.annotateError(C,{origin:"shape",willCrashApp:!1}),[c]);if(!t)return null;const w="fill"in t.props&&t.props.fill!=="none";return m.jsxs(m.Fragment,{children:[r.backgroundComponent&&m.jsx("div",{ref:g,className:"tl-shape tl-shape-background","data-shape-type":t.type,"data-shape-id":t.id,draggable:!1,children:m.jsx(Nv,{fallback:d,onError:v,children:m.jsx(Lz,{shape:t,util:r})})}),m.jsx("div",{ref:h,className:"tl-shape","data-shape-type":t.type,"data-shape-is-filled":w,"data-shape-id":t.id,draggable:!1,children:m.jsx(Nv,{fallback:d,onError:v,children:m.jsx(jz,{shape:t,util:r})})})]})}),jz=M.memo(function({shape:e,util:t}){return kb("InnerShape:"+e.type,()=>t.component(t.editor.store.unsafeGetWithoutCapture(e.id)),[t,e.id])},(n,e)=>n.shape.props===e.shape.props&&n.shape.meta===e.shape.meta&&n.util===e.util),Lz=M.memo(function({shape:e,util:t}){return kb("InnerShape:"+e.type,()=>{var r;return(r=t.backgroundComponent)==null?void 0:r.call(t,t.editor.store.unsafeGetWithoutCapture(e.id))},[t,e.id])},(n,e)=>n.shape.props===e.shape.props&&n.shape.meta===e.shape.meta&&n.util===e.util);function Bte({className:n}){const e=xe(),{Background:t,SvgDefs:r,ShapeIndicators:i}=zr(),s=M.useRef(null),l=M.useRef(null),c=M.useRef(null),d=Hi();Rte(s),bee(),wee(),Ite(s),_ee(s);const h=M.useRef({lodDisableTextOutline:!1,allowTextOutline:!0});df("position layers",function(){const{x:k,y:L,z:O}=e.getCamera();if(h.current.allowTextOutline&&xr.isSafari&&(d.style.setProperty("--tl-text-outline","none"),h.current.allowTextOutline=!1),h.current.allowTextOutline&&O<e.options.textShadowLod!==h.current.lodDisableTextOutline){const H=O<e.options.textShadowLod;d.style.setProperty("--tl-text-outline",H?"none":"var(--tl-text-outline-reference)"),h.current.lodDisableTextOutline=H}const z=O>=1?xg(O,[1,8],[.125,.5],!0):xg(O,[.1,1],[-2,.125],!0),F=`scale(${Se(O)}) translate(${Se(k+z)}px,${Se(L+z)}px)`;Zo(l.current,"transform",F),Zo(c.current,"transform",F)},[e,d]);const g=gk(),y=Pe("shapeSvgDefs",()=>{const I=new Map;for(const k of Hr(e.shapeUtils)){if(!k)return;const L=k.getCanvasSvgDefs();for(const{key:O,component:z}of L)I.has(O)||I.set(O,m.jsx(z,{},O))}return[...I.values()]},[e]),v=Pe("debug_shapes",()=>Si.hideShapes.get(),[Si]),w=Pe("debug_svg",()=>Si.debugSvg.get(),[Si]),C=Pe("debug_geometry",()=>Si.debugGeometry.get(),[Si]),E=Pe("isEditingAnything",()=>e.getEditingShapeId()!==null,[e]),P=Pe("isSelectingAnything",()=>!!e.getSelectedShapeIds().length,[e]);return m.jsxs(m.Fragment,{children:[m.jsxs("div",{ref:s,draggable:!1,"data-iseditinganything":E,"data-isselectinganything":P,className:It("tl-canvas",n),"data-testid":"canvas",...g,children:[m.jsx("svg",{className:"tl-svg-context",children:m.jsxs("defs",{children:[y,m.jsx(nne,{}),m.jsx(rne,{}),r&&m.jsx(r,{})]})}),t&&m.jsx("div",{className:"tl-background__wrapper",children:m.jsx(t,{})}),m.jsx(Vte,{}),m.jsxs("div",{ref:l,className:"tl-html-layer tl-shapes",draggable:!1,children:[m.jsx(ane,{}),m.jsx(sne,{}),v?null:w?m.jsx(Qte,{}):m.jsx(ene,{})]}),m.jsx("div",{className:"tl-overlays",children:m.jsxs("div",{ref:c,className:"tl-html-layer",children:[C?m.jsx(Lte,{}):null,m.jsx(Yte,{}),m.jsx(Wte,{}),m.jsx(Kte,{}),m.jsx(Gte,{}),i&&m.jsx(i,{}),m.jsx(tne,{}),m.jsx(qte,{}),m.jsx(one,{}),m.jsx(Nte,{})]})}),m.jsx(lne,{})]}),m.jsx($te,{}),m.jsx(Hte,{})]})}function Hte(){const{InFrontOfTheCanvas:n}=zr();return n?m.jsx(n,{}):null}function Vte(){const n=xe(),e=Pe("gridSize",()=>n.getDocumentSettings().gridSize,[n]),{x:t,y:r,z:i}=Pe("camera",()=>n.getCamera(),[n]),s=Pe("isGridMode",()=>n.getInstanceState().isGridMode,[n]),{Grid:l}=zr();return l&&s?m.jsx(l,{x:t,y:r,z:i,size:e}):null}function Kte(){const n=xe(),e=Pe("scribbles",()=>n.getInstanceState().scribbles,[n]),t=Pe("zoomLevel",()=>n.getZoomLevel(),[n]),{Scribble:r}=zr();return r&&e.length?e.map(i=>m.jsx(r,{className:"tl-user-scribble",scribble:i,zoom:t},i.id)):null}function Wte(){const n=xe(),e=Pe("brush",()=>n.getInstanceState().brush,[n]),{Brush:t}=zr();return t&&e?m.jsx(t,{className:"tl-user-brush",brush:e}):null}function Gte(){const n=xe(),e=Pe("zoomBrush",()=>n.getInstanceState().zoomBrush,[n]),{ZoomBrush:t}=zr();return t&&e?m.jsx(t,{className:"tl-user-brush tl-zoom-brush",brush:e}):null}function qte(){const n=xe(),e=Pe("snapLines",()=>n.snaps.getIndicators(),[n]),t=Pe("zoomLevel",()=>n.getZoomLevel(),[n]),{SnapIndicator:r}=zr();return r&&e.length>0?e.map(i=>m.jsx(r,{className:"tl-user-snapline",line:i,zoom:t},i.id)):null}function Yte(){const n=xe(),e=Pe("handles shapeIdWithHandles",()=>{const{isReadonly:t,isChangingStyle:r}=n.getInstanceState();if(t||r)return!1;const i=n.getOnlySelectedShape();return!i||!n.getShapeHandles(i)?!1:i.id},[n]);return e?m.jsx(Xte,{shapeId:e}):null}function Xte({shapeId:n}){const e=xe(),{Handles:t}=zr(),r=Pe("zoomLevel",()=>e.getZoomLevel(),[e]),i=Pe("coarse pointer",()=>e.getInstanceState().isCoarsePointer,[e]),s=Pe("handles transform",()=>e.getShapePageTransform(n),[e,n]),l=Pe("handles",()=>{const d=e.getShapeHandles(n);if(!d)return null;const h=(i?e.options.coarseHandleRadius:e.options.handleRadius)/r*2;return d.filter(g=>g.type!=="virtual"||!d.some(y=>y!==g&&y.type==="vertex"&&R.Dist(g,y)<h)).sort(g=>g.type==="vertex"?1:-1)},[e,r,i,n]),c=Pe("isHidden",()=>e.isShapeHidden(n),[e,n]);return!t||!l||!s||c?null:m.jsx(t,{children:m.jsx("g",{transform:qe.toCssString(s),children:l.map(d=>m.jsx(Zte,{shapeId:n,handle:d,zoom:r,isCoarse:i},d.id))})})}function Zte({shapeId:n,handle:e,zoom:t,isCoarse:r}){const i=kte(n,e.id),{Handle:s}=zr();return s?m.jsx("g",{"aria-label":"handle",transform:`translate(${e.x}, ${e.y})`,...i,children:m.jsx(s,{shapeId:n,handle:e,zoom:t,isCoarse:r})}):null}function Qte(){const n=xe();return Pe("rendering shapes",()=>n.getRenderingShapes(),[n]).map(t=>m.jsxs(M.Fragment,{children:[m.jsx(Oz,{...t}),m.jsx(ine,{id:t.id,mode:"iframe"})]},t.id+"_fragment"))}function Jte(){const n=xe(),e=M.useRef(new Set);return df("reflow for culled shapes",()=>{const t=n.getCulledShapes();if(e.current.size===t.size&&[...t].every(i=>e.current.has(i)))return;e.current=t;const r=document.getElementsByClassName("tl-canvas");r.length!==0&&r[0].offsetHeight},[n]),null}function ene(){const n=xe(),e=Pe("rendering shapes",()=>n.getRenderingShapes(),[n]);return m.jsxs(m.Fragment,{children:[e.map(t=>m.jsx(Oz,{...t},t.id+"_shape")),xr.isSafari&&m.jsx(Jte,{})]})}function tne(){const n=xe(),{ShapeIndicator:e}=zr(),t=Pe("hinting shape ids",()=>iP(n.getHintingShapeIds()),[n]);return!t.length||!e?null:t.map(r=>m.jsx(e,{className:"tl-user-indicator__hint",shapeId:r},r+"_hinting"))}function nne(){return m.jsxs("g",{id:Yl("cursor"),children:[m.jsxs("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[m.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),m.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),m.jsxs("g",{fill:"white",transform:"translate(-12,-12)",children:[m.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),m.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),m.jsxs("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[m.jsx("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),m.jsx("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function rne(){const n=Yl("cursor_hint");return m.jsx("path",{id:n,fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function ine({id:n,mode:e}){const t=xe(),[r,i]=M.useState(null),s=Pe("is in root",()=>{const l=t.getShape(n);return(l==null?void 0:l.parentId)===t.getCurrentPageId()},[t,n]);return M.useEffect(()=>{if(!s)return;let l=null;const c=Kl("shape to svg",async()=>{const d=Math.random();l=d;const g=t.isShapeOfType(n,"frame")?0:10;let y=t.getShapePageBounds(n);if(!y)return;y=y.clone().expandBy(g);const v=await t.getSvgString([n],{padding:g,background:t.getInstanceState().exportBackground});if(l!==d||!v)return;const w=`data:image/svg+xml;utf8,${encodeURIComponent(v.svg)}`;i({src:w,bounds:y})});return()=>{l=null,c()}},[t,n,s]),!s||!r?null:e==="iframe"?m.jsx("iframe",{src:r.src,width:r.bounds.width,height:r.bounds.height,referrerPolicy:"no-referrer",style:{position:"absolute",top:0,left:0,border:"none",transform:`translate(${r.bounds.x}px, ${r.bounds.maxY+12}px)`,outline:"1px solid black",maxWidth:"none"}}):m.jsx("img",{src:r.src,width:r.bounds.width,height:r.bounds.height,referrerPolicy:"no-referrer",style:{position:"absolute",top:0,left:0,transform:`translate(${r.bounds.x}px, ${r.bounds.maxY+12}px)`,outline:"1px solid black",maxWidth:"none"}})}function one(){const n=xe(),e=Pe("selection rotation",()=>n.getSelectionRotation(),[n]),t=Pe("selection bounds",()=>n.getSelectionRotatedPageBounds(),[n]),{SelectionForeground:r}=zr();return!t||!r?null:m.jsx(r,{bounds:t,rotation:e})}function sne(){const n=xe(),e=Pe("selection rotation",()=>n.getSelectionRotation(),[n]),t=Pe("selection bounds",()=>n.getSelectionRotatedPageBounds(),[n]),{SelectionBackground:r}=zr();return!t||!r?null:m.jsx(r,{bounds:t,rotation:e})}function ane(){const{OnTheCanvas:n}=zr();return n?m.jsx(n,{}):null}function lne(){const n=xe(),e=Pe("camera state",()=>n.getCameraState(),[n]);return m.jsx("div",{className:It("tl-hit-test-blocker",{"tl-hit-test-blocker__hidden":e==="idle"})})}function cne({className:n,zoom:e,point:t,color:r,viewport:i,opacity:s=1}){const l=M.useRef(null);Ag(l,Co(t.x,i.minX+5/e,i.maxX-5/e),Co(t.y,i.minY+5/e,i.maxY-5/e),1/e,R.Angle(i.center,t));const c=Yl("cursor_hint");return m.jsxs("svg",{ref:l,className:It("tl-overlays__item",n),children:[m.jsx("use",{href:`#${c}`,color:r,strokeWidth:3,stroke:"var(--color-background)"}),m.jsx("use",{href:`#${c}`,color:r,opacity:s})]})}const Nz=M.memo(function({className:e,zoom:t,point:r,color:i,name:s,chatMessage:l}){const c=M.useRef(null);Ag(c,r==null?void 0:r.x,r==null?void 0:r.y,1/t);const d=Yl("cursor");return r?m.jsxs("div",{ref:c,className:It("tl-overlays__item",e),children:[m.jsx("svg",{className:"tl-cursor",children:m.jsx("use",{href:`#${d}`,color:i})}),l?m.jsxs(m.Fragment,{children:[s&&m.jsx("div",{className:"tl-nametag-title",style:{color:i},children:s}),m.jsx("div",{className:"tl-nametag-chat",style:{backgroundColor:i},children:l})]}):s&&m.jsx("div",{className:"tl-nametag",style:{backgroundColor:i},children:s})]}):null});function une({x:n,y:e,z:t,size:r}){const i=Mg("grid"),s=xe(),{gridSteps:l}=s.options;return m.jsxs("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("defs",{children:l.map(({min:c,mid:d,step:h},g)=>{const y=h*r*t,v=.5+n*t,w=.5+e*t,C=v>0?v%y:y+v%y,E=w>0?w%y:y+w%y,P=t<d?xg(t,[c,d],[0,1]):1;return m.jsx("pattern",{id:rk(i,`${h}`),width:y,height:y,patternUnits:"userSpaceOnUse",children:m.jsx("circle",{className:"tl-grid-dot",cx:C,cy:E,r:1,opacity:P})},g)})}),l.map(({step:c},d)=>m.jsx("rect",{width:"100%",height:"100%",fill:`url(#${i}_${c})`},d))]})}function dne({handle:n,isCoarse:e,className:t,zoom:r}){const i=xe(),s=(e?i.options.coarseHandleRadius:i.options.handleRadius)/r;if(n.type==="clone"){const c=3/r,d=`M0,${-c} A${c},${c} 0 0,1 0,${c}`,h=gee.indexOf(n.id);return m.jsxs("g",{className:It(`tl-handle tl-handle__${n.type}`,t),children:[m.jsx("circle",{className:"tl-handle__bg",r:s}),m.jsx("path",{className:"tl-handle__fg",d,transform:`rotate(${-90+90*h})`})]})}const l=(n.type==="create"&&e?3:4)/Math.max(r,.25);return m.jsxs("g",{className:It(`tl-handle tl-handle__${n.type}`,t),children:[m.jsx("circle",{className:"tl-handle__bg",r:s}),m.jsx("circle",{className:"tl-handle__fg",r:l})]})}const fne=({children:n})=>m.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:n}),hne=()=>{const{Spinner:n}=zr();return m.jsx(sR,{children:n?m.jsx(n,{}):null})};function bk(n,e=!0){const t=n.length;if(t<2)return"";let r=n[0],i=n[1];if(t===2)return`M${Gn(r)}L${Gn(i)}`;let s="";for(let l=2,c=t-1;l<c;l++)r=n[l],i=n[l+1],s+=sa(r,i);return e?`M${sa(n[0],n[1])}Q${Gn(n[1])}${sa(n[1],n[2])}T${s}${sa(n[t-1],n[0])}${sa(n[0],n[1])}Z`:`M${Gn(n[0])}Q${Gn(n[1])}${sa(n[1],n[2])}${n.length>3?"T":""}${s}L${Gn(n[t-1])}`}function Fz({scribble:n,zoom:e,color:t,opacity:r,className:i}){return n.points.length?m.jsx("svg",{className:i&&It("tl-overlays__item",i),children:m.jsx("path",{className:"tl-scribble",d:bk(n.points,!1),stroke:t??`var(--color-${n.color})`,fill:"none",strokeWidth:8/e,opacity:r??n.opacity})}):null}function zz({bounds:n,rotation:e}){const t=M.useRef(null);return Ag(t,n.x,n.y,1,e),M.useLayoutEffect(()=>{const r=t.current;r&&(r.style.width=Se(Math.max(1,n.width))+"px",r.style.height=Se(Math.max(1,n.height))+"px")},[n.width,n.height]),m.jsx("div",{ref:t,className:"tl-selection__bg",draggable:!1})}function pne({bounds:n,rotation:e}){const t=xe(),r=M.useRef(null),i=Pe("only selected shape",()=>t.getOnlySelectedShape(),[t]),s=i?t.getShapeUtil(i).expandSelectionOutlinePx(i):0;return Ag(r,n==null?void 0:n.x,n==null?void 0:n.y,1,e,{x:-s,y:-s}),n=s instanceof Xe?n.clone().expand(s).zeroFix():n.clone().expandBy(s).zeroFix(),m.jsx("svg",{ref:r,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:m.jsx("rect",{className:It("tl-selection__fg__outline"),width:Se(n.width),height:Se(n.height)})})}const gne=()=>m.jsx("div",{className:"tl-shape-error-boundary"}),mne=({shape:n,util:e})=>kb("Indicator: "+n.type,()=>e.indicator(e.editor.store.unsafeGetWithoutCapture(n.id))),yne=({editor:n,id:e})=>{const t=Pe("shape for indicator",()=>n.store.get(e),[n,e]),{ShapeIndicatorErrorFallback:r}=zr();return!t||t.isLocked?null:m.jsx(Nv,{fallback:r,onError:i=>n.annotateError(i,{origin:"react.shapeIndicator",willCrashApp:!1}),children:m.jsx(mne,{shape:t,util:n.getShapeUtil(t)},t.id)})},Uz=M.memo(function({shapeId:e,className:t,color:r,hidden:i,opacity:s}){const l=xe(),c=M.useRef(null);return df("indicator transform",()=>{const d=c.current;if(!d)return;const h=l.getShapePageTransform(e);h&&d.style.setProperty("transform",h.toCssString())},[l,e]),M.useLayoutEffect(()=>{const d=c.current;d&&d.style.setProperty("display",i?"none":"block")},[i]),m.jsx("svg",{ref:c,className:It("tl-overlays__item",t),children:m.jsx("g",{className:"tl-shape-indicator",stroke:r??"var(--color-selected)",opacity:s,children:m.jsx(yne,{editor:l,id:e})})})}),vne=()=>m.jsx("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"}),$z=M.memo(function(){const e=xe(),t=M.useRef(new Set),r=Pe("should display selected ids",()=>{const l=t.current,c=new Set;if(e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!e.getInstanceState().isChangingStyle){const d=e.getSelectedShapeIds();for(const h of d)c.add(h);if(e.isInAny("select.idle","select.editing_shape")){const h=e.getInstanceState();if(h.isHoveringCanvas&&!h.isCoarsePointer){const g=e.getHoveredShapeId();g&&c.add(g)}}}if(l.size!==c.size)return t.current=c,c;for(const d of c)if(!l.has(d))return t.current=c,c;return l},[e]),i=Pe("rendering shapes",()=>e.getRenderingShapes(),[e]),{ShapeIndicator:s}=zr();return s?i.map(({id:l})=>m.jsx(s,{shapeId:l,hidden:!r.has(l)},l+"_indicator")):null});function Sne({points:n,zoom:e}){const t=2.5/e,r=n.reduce((v,w)=>Math.min(v,w.x),1/0),i=n.reduce((v,w)=>Math.max(v,w.x),-1/0),s=n.reduce((v,w)=>Math.min(v,w.y),1/0),l=n.reduce((v,w)=>Math.max(v,w.y),-1/0),c=n.some(v=>v.x===r&&v.y===s);let d,h,g,y;return c?(d=r,h=s,g=i,y=l):(d=r,h=l,g=i,y=s),m.jsxs("g",{className:"tl-snap-indicator",stroke:"lime",children:[m.jsx("line",{x1:d,y1:h,x2:g,y2:y}),n.map((v,w)=>m.jsx("g",{transform:`translate(${v.x},${v.y})`,children:m.jsx("path",{className:"tl-snap-point",d:`M ${-t},${-t} L ${t},${t} M ${-t},${t} L ${t},${-t}`})},w))]})}function xne({gaps:n,direction:e,zoom:t}){const r=3.5/t;let i=[-1/0,1/0],s=null;const l=e==="horizontal";for(const d of n){if(s=Xl(i[0],i[1],l?d.startEdge[0].y:d.startEdge[0].x,l?d.startEdge[1].y:d.startEdge[1].x),s)i=s;else continue;if(s=Xl(i[0],i[1],l?d.endEdge[0].y:d.endEdge[0].x,l?d.endEdge[1].y:d.endEdge[1].x),s)i=s;else continue}if(i===null)return null;const c=(i[0]+i[1])/2;return m.jsx("g",{className:"tl-snap-indicator",stroke:"cyan",children:n.map(({startEdge:d,endEdge:h},g)=>m.jsx(M.Fragment,{children:l?m.jsxs(m.Fragment,{children:[m.jsx("line",{x1:d[0].x,y1:c-2*r,x2:d[1].x,y2:c+2*r}),m.jsx("line",{x1:h[0].x,y1:c-2*r,x2:h[1].x,y2:c+2*r}),m.jsx("line",{x1:d[0].x,y1:c,x2:h[0].x,y2:c}),m.jsx("line",{x1:(d[0].x+h[0].x)/2,y1:c-r,x2:(d[0].x+h[0].x)/2,y2:c+r})]}):m.jsxs(m.Fragment,{children:[m.jsx("line",{x1:c-2*r,y1:d[0].y,x2:c+2*r,y2:d[1].y}),m.jsx("line",{x1:c-2*r,y1:h[0].y,x2:c+2*r,y2:h[1].y}),m.jsx("line",{x1:c,y1:d[0].y,x2:c,y2:h[0].y}),m.jsx("line",{x1:c-r,y1:(d[0].y+h[0].y)/2,x2:c+r,y2:(d[0].y+h[0].y)/2})]})},g))})}function wne({className:n,line:e,zoom:t}){return m.jsx("svg",{className:It("tl-overlays__item",n),children:e.type==="points"?m.jsx(Sne,{...e,zoom:t}):e.type==="gaps"?m.jsx(xne,{...e,zoom:t}):null})}function Ck(){return m.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",children:m.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[m.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),m.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:m.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}const bne=()=>null;function Bz(n,e){const t=M.useRef(n);return e(n,t.current)?t.current:(t.current=n,n)}const Cne=(n,e)=>(n??(n=null),e??(e=null),n===e?!0:!n||!e?!1:VL(n,e));function vf(n){return Bz(n,Cne)}const Ene=(n,e)=>(n??(n=null),e??(e=null),n===e?!0:!n||!e?!1:uP(n,e));function Yh(n){return Bz(n,Ene)}const Hz=M.createContext(null);function _ne({overrides:n={},children:e}){const t=Yh(n),r=M.useMemo(()=>({Background:lee,SvgDefs:bne,Brush:uk,ZoomBrush:uk,CollaboratorBrush:uk,Cursor:Nz,CollaboratorCursor:Nz,CollaboratorHint:cne,CollaboratorShapeIndicator:Uz,Grid:une,Scribble:Fz,SnapIndicator:wne,Handles:fne,Handle:dne,CollaboratorScribble:Fz,ErrorFallback:Kz,ShapeErrorFallback:gne,ShapeIndicatorErrorFallback:vne,Spinner:Ck,SelectionBackground:zz,SelectionForeground:pne,ShapeIndicators:$z,ShapeIndicator:Uz,OnTheCanvas:null,InFrontOfTheCanvas:null,Canvas:Bte,LoadingScreen:hne,...t}),[t]);return m.jsx(Hz.Provider,{value:r,children:e})}function zr(){const n=M.useContext(Hz);if(!n)throw new Error("useEditorComponents must be used inside of <EditorComponentsProvider />");return n}const Gb={openWindow(n,e){window.open(n,e,"noopener noreferrer")},refreshPage(){window.location.reload()},async hardReset(){var n;return await((n=window.__tldraw__hardReset)==null?void 0:n.call(window))}};function Vz(){Gb.hardReset()}function Pne(){Gb.refreshPage()}var Tne={};const Ine="https://github.com/tldraw/tldraw/issues/new",Kz=({error:n,editor:e})=>{const t=M.useRef(null),[r,i]=M.useState(Tne.NODE_ENV==="development"),[s,l]=M.useState(!1),[c,d]=M.useState(!1);let h=null;try{h=zr().Canvas??null}catch{}const g=n instanceof Error?n.message:String(n),y=n instanceof Error?n.stack:null,v=Pe("isDarkMode",()=>{try{if(e)return e.user.getIsDarkMode()}catch{}return null},[e]),[w,C]=M.useState(null);M.useLayoutEffect(()=>{var z;v!==null&&C(v);let L=(z=t.current)==null?void 0:z.parentElement,O=!1;for(;L;){if(L.classList.contains("tl-theme__dark")||L.classList.contains("tl-theme__light")){O=!0;break}L=L.parentElement}if(O){C(null);return}typeof window<"u"&&"matchMedia"in window&&C(window.matchMedia("(prefers-color-scheme: dark)").matches)},[v]),M.useEffect(()=>{if(s){const L=e==null?void 0:e.timers.setTimeout(()=>{l(!1)},2e3);return()=>clearTimeout(L)}},[s,e]);const E=()=>{const L=document.createElement("textarea");L.value=y??g,document.body.appendChild(L),L.select(),document.execCommand("copy"),L.remove(),l(!0)},P=()=>{Pne()},I=async()=>{Vz()},k=new URL(Ine);return k.searchParams.set("title",g),k.searchParams.set("labels","bug"),k.searchParams.set("body",`Hey, I ran into an error while using tldraw:

\`\`\`js
${y??g}
\`\`\`

My browser: ${navigator.userAgent}`),m.jsxs("div",{ref:t,className:It("tl-container tl-error-boundary",w===null?"":w?"tl-theme__dark":"tl-theme__light"),children:[m.jsx("div",{className:"tl-error-boundary__overlay"}),e&&m.jsx(nk,{onError:iv,fallback:()=>null,children:m.jsx(ok,{editor:e,children:m.jsx("div",{className:"tl-overlay tl-error-boundary__canvas",children:h?m.jsx(h,{}):null})})}),m.jsx("div",{className:It("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":r&&!c}),children:c?m.jsxs(m.Fragment,{children:[m.jsx("h2",{children:"Are you sure?"}),m.jsx("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),m.jsxs("div",{className:"tl-error-boundary__content__actions",children:[m.jsx("button",{onClick:()=>d(!1),children:"Cancel"}),m.jsx("button",{className:"tl-error-boundary__reset",onClick:I,children:"Reset data"})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("h2",{children:"Something went wrong"}),m.jsx("p",{children:"Please refresh the page to continue."}),m.jsxs("p",{children:["If you keep seeing this screen, you can create a"," ",m.jsx("a",{href:k.toString(),children:"GitHub issue"})," or ask for help on"," ",m.jsx("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"Discord"}),". If you are still stuck, you can reset the tldraw data on your machine. This may erase the project you were working on, so try to get help first."]}),r&&m.jsxs(m.Fragment,{children:["Message:",m.jsx("h4",{children:m.jsx("code",{children:g})}),"Stack trace:",m.jsxs("div",{className:"tl-error-boundary__content__error",children:[m.jsx("pre",{children:m.jsx("code",{children:y??g})}),m.jsx("button",{onClick:E,children:s?"Copied!":"Copy"})]})]}),m.jsxs("div",{className:"tl-error-boundary__content__actions",children:[m.jsx("button",{onClick:()=>i(!r),children:r?"Hide details":"Show details"}),m.jsxs("div",{className:"tl-error-boundary__content__actions__group",children:[m.jsx("button",{className:"tl-error-boundary__reset",onClick:()=>d(!0),children:"Reset data"}),m.jsx("button",{className:"tl-error-boundary__refresh",onClick:P,children:"Refresh Page"})]})]})]})})]})};var kne={};const Wz="TLDRAW_USER_DATA_v3",Gz=Tn({id:sn,name:sn.nullable().optional(),color:sn.nullable().optional(),locale:sn.nullable().optional(),animationSpeed:Ut.nullable().optional(),edgeScrollSpeed:Ut.nullable().optional(),colorScheme:mb("light","dark","system").optional(),isSnapMode:Pn.nullable().optional(),isWrapMode:Pn.nullable().optional(),isDynamicSizeMode:Pn.nullable().optional(),isPasteAtCursorMode:Pn.nullable().optional()}),Xu={AddAnimationSpeed:1,AddIsSnapMode:2,MakeFieldsNullable:3,AddEdgeScrollSpeed:4,AddExcalidrawSelectMode:5,AddDynamicSizeMode:6,AllowSystemColorScheme:7,AddPasteAtCursor:8},Ek=Math.max(...Object.values(Xu));function Rne(n){n.version<Xu.AddAnimationSpeed&&(n.user.animationSpeed=1),n.version<Xu.AddIsSnapMode&&(n.user.isSnapMode=!1),n.version<Xu.MakeFieldsNullable,n.version<Xu.AddEdgeScrollSpeed&&(n.user.edgeScrollSpeed=1),n.version<Xu.AddExcalidrawSelectMode&&(n.user.isWrapMode=!1),n.version<Xu.AllowSystemColorScheme&&(n.user.isDarkMode===!0?n.user.colorScheme="dark":n.user.isDarkMode===!1&&(n.user.colorScheme="light"),delete n.user.isDarkMode),n.version<Xu.AddDynamicSizeMode&&(n.user.isDynamicSizeMode=!1),n.version<Xu.AddPasteAtCursor&&(n.user.isPasteAtCursorMode=!1),n.version=Ek}const _k=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function qz(){return _k[Math.floor(Math.random()*_k.length)]}function Mne(){var n,e;return typeof window<"u"&&"matchMedia"in window?((e=(n=window.matchMedia)==null?void 0:n.call(window,"(prefers-reduced-motion: reduce)"))==null?void 0:e.matches)??!1:!1}const pl=Object.freeze({name:"New User",locale:OQ(),color:qz(),edgeScrollSpeed:1,animationSpeed:Mne()?0:1,isSnapMode:!1,isWrapMode:!1,isDynamicSizeMode:!1,isPasteAtCursorMode:!1,colorScheme:"light"});function Pk(){return{id:nr(),color:qz()}}function Yz(n){if(n===null||typeof n!="object"||!("version"in n)||!("user"in n)||typeof n.version!="number")return Pk();const e=Lr(n);Rne(e);try{return Gz.validate(e.user)}catch{return Pk()}}function Ane(){const n=JSON.parse(yP(Wz)||"null")??null;return Yz(n)}const qb=si("globalUserData",null);function Dne(){vP(Wz,JSON.stringify({version:Ek,user:qb.get()}))}function Xz(n){Gz.validate(n),qb.set(n),Dne(),jne()}const One=typeof process<"u"&&kne.NODE_ENV==="test",Lg=typeof BroadcastChannel<"u"&&!One?new BroadcastChannel("tldraw-user-sync"):null;Lg==null||Lg.addEventListener("message",n=>{const e=n.data;(e==null?void 0:e.type)===Qz&&(e==null?void 0:e.origin)!==Zz()&&qb.set(Yz(e.data))});let Tk=null;function Zz(){return Tk===null&&(Tk=nr()),Tk}const Qz="tldraw-user-preferences-change";function jne(){Lg==null||Lg.postMessage({type:Qz,origin:Zz(),data:{user:Ik(),version:Ek}})}function Ik(){let n=qb.get();return n||(n=Ane(),Xz(n)),n}const Lne=Le("defaultLocalStorageUserPrefs",()=>Ik());function Jz(n={}){return{userPreferences:n.userPreferences??Lne,setUserPreferences:n.setUserPreferences??Xz}}var kk={exports:{}},e4;function Nne(){return e4||(e4=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(d,h,g){this.fn=d,this.context=h,this.once=g||!1}function s(d,h,g,y,v){if(typeof g!="function")throw new TypeError("The listener must be a function");var w=new i(g,y||d,v),C=t?t+h:h;return d._events[C]?d._events[C].fn?d._events[C]=[d._events[C],w]:d._events[C].push(w):(d._events[C]=w,d._eventsCount++),d}function l(d,h){--d._eventsCount===0?d._events=new r:delete d._events[h]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],g,y;if(this._eventsCount===0)return h;for(y in g=this._events)e.call(g,y)&&h.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(g)):h},c.prototype.listeners=function(h){var g=t?t+h:h,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var v=0,w=y.length,C=new Array(w);v<w;v++)C[v]=y[v].fn;return C},c.prototype.listenerCount=function(h){var g=t?t+h:h,y=this._events[g];return y?y.fn?1:y.length:0},c.prototype.emit=function(h,g,y,v,w,C){var E=t?t+h:h;if(!this._events[E])return!1;var P=this._events[E],I=arguments.length,k,L;if(P.fn){switch(P.once&&this.removeListener(h,P.fn,void 0,!0),I){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,g),!0;case 3:return P.fn.call(P.context,g,y),!0;case 4:return P.fn.call(P.context,g,y,v),!0;case 5:return P.fn.call(P.context,g,y,v,w),!0;case 6:return P.fn.call(P.context,g,y,v,w,C),!0}for(L=1,k=new Array(I-1);L<I;L++)k[L-1]=arguments[L];P.fn.apply(P.context,k)}else{var O=P.length,z;for(L=0;L<O;L++)switch(P[L].once&&this.removeListener(h,P[L].fn,void 0,!0),I){case 1:P[L].fn.call(P[L].context);break;case 2:P[L].fn.call(P[L].context,g);break;case 3:P[L].fn.call(P[L].context,g,y);break;case 4:P[L].fn.call(P[L].context,g,y,v);break;default:if(!k)for(z=1,k=new Array(I-1);z<I;z++)k[z-1]=arguments[z];P[L].fn.apply(P[L].context,k)}}return!0},c.prototype.on=function(h,g,y){return s(this,h,g,y,!1)},c.prototype.once=function(h,g,y){return s(this,h,g,y,!0)},c.prototype.removeListener=function(h,g,y,v){var w=t?t+h:h;if(!this._events[w])return this;if(!g)return l(this,w),this;var C=this._events[w];if(C.fn)C.fn===g&&(!v||C.once)&&(!y||C.context===y)&&l(this,w);else{for(var E=0,P=[],I=C.length;E<I;E++)(C[E].fn!==g||v&&!C[E].once||y&&C[E].context!==y)&&P.push(C[E]);P.length?this._events[w]=P.length===1?P[0]:P:l(this,w)}return this},c.prototype.removeAllListeners=function(h){var g;return h?(g=t?t+h:h,this._events[g]&&l(this,g)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c}(kk)),kk.exports}var Fne=Nne();const zne=ef(Fne),Ng="TLDRAW_TAB_ID_v2",Zu=globalThis.window;function Une(){return Zu?["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(Zu.navigator.platform)||xr.isDarwin&&"ontouchend"in document:!1}const Vv=Zu?Zu[Ng]??v2(Ng)??"TLDRAW_INSTANCE_STATE_V1_"+nr():"<error>";Zu&&(Zu[Ng]=Vv,Une()?SP(Ng,Vv):S2(Ng)),Zu==null||Zu.addEventListener("beforeunload",()=>{SP(Ng,Vv)});const t4={Initial:0},Yb=Math.max(...Object.values(t4));function $ne(n){n.version<t4.Initial,n.version=Yb}const n4=Tn({version:Ut,currentPageId:wv.optional(),isFocusMode:Pn.optional(),exportBackground:Pn.optional(),isDebugMode:Pn.optional(),isToolLocked:Pn.optional(),isGridMode:Pn.optional(),pageStates:So(Tn({pageId:wv,camera:Tn({x:Ut,y:Ut,z:Ut}).optional(),selectedShapeIds:So(ul).optional(),focusedGroupId:ul.nullable().optional()})).optional()});function Bne(n){if(!n||typeof n!="object")return console.warn("Invalid instance state"),null;if(!("version"in n)||typeof n.version!="number")return console.warn("No version in instance state"),null;n.version!==Yb&&(n=Lr(n),$ne(n));try{return n4.validate(n)}catch(e){return console.warn(e),null}}function Rk(n){const e=n.query.ids("page");return Le("sessionStateSnapshot",()=>{const t=n.get(Xo);if(!t)return null;const r=[...e.get()];return{version:Yb,currentPageId:t.currentPageId,exportBackground:t.exportBackground,isFocusMode:t.isFocusMode,isDebugMode:t.isDebugMode,isToolLocked:t.isToolLocked,isGridMode:t.isGridMode,pageStates:r.map(i=>{const s=n.get(dl.createId(i)),l=n.get(Gl.createId(i));return{pageId:i,camera:{x:(l==null?void 0:l.x)??0,y:(l==null?void 0:l.y)??0,z:(l==null?void 0:l.z)??1},selectedShapeIds:(s==null?void 0:s.selectedShapeIds)??[],focusedGroupId:(s==null?void 0:s.focusedGroupId)??null}})}},{isEqual:sf})}function Mk(n,e,t){const r=Bne(e);if(!r)return;const i=hN(n.get(Xo)),s=t!=null&&t.forceOverwrite?r:i,l=t!=null&&t.forceOverwrite?i:r,c=n.schema.types.instance.create({id:Xo,...i,currentPageId:r.currentPageId,isDebugMode:(s==null?void 0:s.isDebugMode)??(l==null?void 0:l.isDebugMode),isFocusMode:(s==null?void 0:s.isFocusMode)??(l==null?void 0:l.isFocusMode),isToolLocked:(s==null?void 0:s.isToolLocked)??(l==null?void 0:l.isToolLocked),isGridMode:(s==null?void 0:s.isGridMode)??(l==null?void 0:l.isGridMode),exportBackground:(s==null?void 0:s.exportBackground)??(l==null?void 0:l.exportBackground)});n.atomic(()=>{var d,h,g;for(const y of r.pageStates??[]){if(!n.has(y.pageId))continue;const v=Gl.createId(y.pageId),w=dl.createId(y.pageId),C=n.get(v),E=n.get(w);n.put([Gl.create({id:v,x:((d=y.camera)==null?void 0:d.x)??(C==null?void 0:C.x),y:((h=y.camera)==null?void 0:h.y)??(C==null?void 0:C.y),z:((g=y.camera)==null?void 0:g.z)??(C==null?void 0:C.z)}),dl.create({id:w,pageId:y.pageId,selectedShapeIds:y.selectedShapeIds??(E==null?void 0:E.selectedShapeIds),focusedGroupId:y.focusedGroupId??(E==null?void 0:E.focusedGroupId)})])}n.put([c]),n.ensureStoreIsUsable()})}function Hne(n){var i;const e=[];for(const s of Object.values(n))(i=s.typeName)!=null&&i.match(/^(instance.*|pointer|camera)$/)&&e.push(s);const t=e.filter(s=>s.typeName==="instance"&&s.id!==Xo)[0];if(!t)return null;const r={version:Yb,currentPageId:t.currentPageId,exportBackground:!!t.exportBackground,isFocusMode:!!t.isFocusMode,isDebugMode:!!t.isDebugMode,isToolLocked:!!t.isToolLocked,isGridMode:!1,pageStates:e.filter(s=>s.typeName==="instance_page_state"&&s.instanceId===t.id).map(s=>{const l=n[s.cameraId]??{x:0,y:0,z:1};return{pageId:s.pageId,camera:{x:l.x,y:l.y,z:l.z},selectedShapeIds:s.selectedShapeIds,focusedGroupId:s.focusedGroupId}})};try{return n4.validate(r),r}catch{return null}}function r4(n,e,t){let r={};if("store"in e){const l=n.schema.migrateStoreSnapshot(e);if(l.type!=="success")throw new Error("Failed to migrate store snapshot: "+l.reason);r.document={schema:n.schema.serialize(),store:av(l.value,(c,{typeName:d})=>n.scopedTypes.document.has(d))}}else r=e;const i=hN(n.get(Xo)),s=i4.get(n,Rk).get();n.atomic(()=>{r.document&&n.loadStoreSnapshot(r.document),i&&n.update(Xo,l=>({...l,...i})),s&&Mk(n,s),r.session&&Mk(n,r.session,{forceOverwrite:t==null?void 0:t.forceOverwriteSessionState})})}const i4=new jc;function Vne(n){const t=i4.get(n,Rk).get();if(!t)throw new Error("Session state is not ready yet");return{document:n.getStoreSnapshot(),session:t}}function o4(n){const e=[],t=new Set;for(const r of n){if(t.has(r.type))throw new Error(`Binding type "${r.type}" is defined more than once`);e.push(r),t.add(r.type)}return e}function Sf({children:n,className:e="",...t}){return m.jsx("svg",{...t,className:It("tl-svg-container",e),children:n})}function Ak(n,e,t,r){const i=n.x-t.x,s=n.y-t.y,l=r.x-t.x,c=r.y-t.y,d=e.x-n.x,h=e.y-n.y,g=l*s-c*i,y=d*s-h*i,v=c*d-l*h;if(g===0||y===0||v===0)return null;if(v!==0){const w=g/v,C=y/v;if(0<=w&&w<=1&&0<=C&&C<=1)return R.AddXY(n,w*d,w*h)}return null}function Kv(n,e,t,r){const i=(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y),s=2*((e.x-n.x)*(n.x-t.x)+(e.y-n.y)*(n.y-t.y)),l=t.x*t.x+t.y*t.y+n.x*n.x+n.y*n.y-2*(t.x*n.x+t.y*n.y)-r*r,c=s*s-4*i*l;if(c<0||c===0)return null;const d=Math.sqrt(c),h=(-s+d)/(2*i),g=(-s-d)/(2*i);if((h<0||h>1)&&(g<0||g>1))return null;const y=[];return 0<=h&&h<=1&&y.push(R.Lrp(n,e,h)),0<=g&&g<=1&&y.push(R.Lrp(n,e,g)),y.length===0?null:y}function Kne(n,e,t){const r=[];let i;for(let s=0,l=t.length-1;s<l;s++)i=Ak(n,e,t[s],t[s+1]),i&&r.push(i);return r.length===0?null:r}function Dk(n,e,t){const r=[];let i;for(let s=1,l=t.length;s<l+1;s++)i=Ak(n,e,t[s-1],t[s%t.length]),i&&r.push(i);return r.length===0?null:r}function Wne(n,e,t,r){let i=t.x-n.x,s=t.y-n.y;const l=Math.sqrt(i*i+s*s),c=(l*l-r*r+e*e)/(2*l),d=Math.sqrt(e*e-c*c);return i/=l,s/=l,[new R(n.x+i*c-s*d,n.y+s*c+i*d),new R(n.x+i*c+s*d,n.y+s*c-i*d)]}function Ok(n,e,t){const r=[];let i,s,l;for(let c=0,d=t.length;c<d;c++)i=t[c],s=t[(c+1)%t.length],l=Kv(i,s,n,e),l&&r.push(...l);return r.length===0?null:r}function s4(n,e,t){const r=[];let i,s,l;for(let c=1,d=t.length;c<d;c++)i=t[c-1],s=t[c],l=Kv(i,s,n,e),l&&r.push(...l);return r.length===0?null:r}function Xb(n,e,t){return(t.y-n.y)*(e.x-n.x)>(e.y-n.y)*(t.x-n.x)}function jk(n,e,t,r){return Xb(n,t,r)!==Xb(e,t,r)&&Xb(n,e,t)!==Xb(n,e,r)}function a4(n,e){const t=new Map;let r,i,s,l;for(let c=0,d=n.length;c<d;c++)if(r=n[c],Na(r,e)){const h=Lk(r);t.has(h)||t.set(h,r)}for(let c=0,d=e.length;c<d;c++)if(r=e[c],Na(r,n)){const h=Lk(r);t.has(h)||t.set(h,r)}for(let c=0,d=n.length;c<d;c++){r=n[c],i=n[(c+1)%n.length];for(let h=0,g=e.length;h<g;h++){s=e[h],l=e[(h+1)%e.length];const y=Ak(r,i,s,l);if(y!==null){const v=Lk(y);t.has(v)||t.set(v,y)}}}return t.size===0?null:Gne([...t.values()])}function Lk(n){return`${n.x},${n.y}`}function Gne(n){const e=R.Average(n);return n.sort((t,r)=>R.Angle(e,t)-R.Angle(e,r))}function Nk(n,e){let t,r,i,s;for(let l=0,c=n.length;l<c;l++){t=n[l],r=n[(l+1)%c];for(let d=0,h=e.length;d<h;d++)if(i=e[d],s=e[(d+1)%h],jk(t,r,i,s))return!0}return!1}function qne(n,e){let t,r,i,s;for(let l=0,c=n.length;l<c;l++){t=n[l],r=n[(l+1)%c];for(let d=1,h=e.length;d<h;d++)if(i=e[d-1],s=e[d],jk(t,r,i,s))return!0}return!1}class Qu extends yf{constructor(t){super({...t,isClosed:!1,isFilled:!1});U(this,"start");U(this,"end");U(this,"d");U(this,"u");U(this,"ul");const{start:r,end:i}=t;this.start=r,this.end=i,this.d=r.clone().sub(i),this.u=this.d.clone().uni(),this.ul=this.u.len()}getLength(){return this.d.len()}midPoint(){return this.start.lrp(this.end,.5)}getVertices(){return[this.start,this.end]}nearestPoint(t){const{start:r,end:i,d:s,u:l,ul:c}=this;if(s.len()===0||c===0)return r;const d=R.Sub(t,r).dpr(l)/c,h=r.x+l.x*d;if(h<Math.min(r.x,i.x))return r.x<i.x?r:i;if(h>Math.max(r.x,i.x))return r.x>i.x?r:i;const g=r.y+l.y*d;return g<Math.min(r.y,i.y)?r.y<i.y?r:i:g>Math.max(r.y,i.y)?r.y>i.y?r:i:new R(h,g)}hitTestLineSegment(t,r,i=0){return jk(t,r,this.start,this.end)||this.distanceToLineSegment(t,r)<=i}getSvgPathData(t=!0){const{start:r,end:i}=this;return`${t?`M${r.toFixed()}`:""} L${i.toFixed()}`}}class Fg extends yf{constructor(t){super({isClosed:!1,isFilled:!1,...t});U(this,"points");U(this,"_segments");const{points:r}=t;this.points=r}get segments(){if(!this._segments){this._segments=[];const{vertices:t}=this;for(let r=0,i=t.length-1;r<i;r++){const s=t[r],l=t[r+1];this._segments.push(new Qu({start:s,end:l}))}this.isClosed&&this._segments.push(new Qu({start:t[t.length-1],end:t[0]}))}return this._segments}getLength(){return this.segments.reduce((t,r)=>t+r.length,0)}getVertices(){return this.points}nearestPoint(t){const{segments:r}=this;let i=this.points[0],s=1/0,l,c;for(let d=0;d<r.length;d++)l=r[d].nearestPoint(t),c=R.Dist2(l,t),c<s&&(i=l,s=c);if(!i)throw Error("nearest point not found");return i}hitTestLineSegment(t,r,i=0){const{segments:s}=this;for(let l=0,c=s.length;l<c;l++)if(s[l].hitTestLineSegment(t,r,i))return!0;return!1}getSvgPathData(){const{vertices:t}=this;return t.length<2?"":t.reduce((r,i,s)=>s===0?`M ${i.x} ${i.y}`:`${r} L ${i.x} ${i.y}`,"")}}class wi extends Fg{constructor(e){super({...e}),this.isClosed=!0}}class Vc extends wi{constructor(t){const{x:r=0,y:i=0,width:s,height:l}=t;super({...t,points:[new R(r,i),new R(r+s,i),new R(r+s,i+l),new R(r,i+l)]});U(this,"x");U(this,"y");U(this,"w");U(this,"h");this.x=r,this.y=i,this.w=s,this.h=l}getBounds(){return new Xe(this.x,this.y,this.w,this.h)}getSvgPathData(){const{x:t,y:r,w:i,h:s}=this;return`M${t},${r} h${i} v${s} h-${i}z`}}class Zl{constructor(e){this.editor=e}canSnap(e){return!0}canScroll(e){return!1}canBind(e){return!0}canEdit(e){return!1}canResize(e){return!0}canEditInReadOnly(e){return!1}canCrop(e){return!1}canBeLaidOut(e){return!0}providesBackgroundForChildren(e){return!1}hideResizeHandles(e){return!1}hideRotateHandle(e){return!1}hideSelectionBoundsBg(e){return!1}hideSelectionBoundsFg(e){return!1}isAspectRatioLocked(e){return!1}canReceiveNewChildrenOfType(e,t){return!1}canDropShapes(e,t){return!1}expandSelectionOutlinePx(e){return 0}getCanvasSvgDefs(){return[]}getBoundsSnapGeometry(e){return{}}getHandleSnapGeometry(e){return{}}getText(e){}}U(Zl,"props"),U(Zl,"migrations"),U(Zl,"type");function Ql(n,e,t={}){const{closed:r=!1,snap:i=1,start:s="outset",end:l="outset",lengthRatio:c=2,style:d="dashed",forceSolid:h=!1}=t;let g=0,y=0,v=1,w=0,C=0;if(h)return{strokeDasharray:"none",strokeDashoffset:"none"};switch(d){case"dashed":{v=1,g=Math.min(e*c,n/4);break}case"dotted":{v=100,g=e/v;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return r||(s==="outset"?(n+=g/2,C+=g/2):s==="skip"&&(n-=g,C-=g),l==="outset"?n+=g/2:l==="skip"&&(n-=g)),y=Math.floor(n/g/(2*v)),y-=y%i,y<3&&d==="dashed"?n/e<4?(g=n,y=1,w=0):(g=n*(1/3),w=n*(1/3)):(g=n/y/(2*v),r?(C=g/2,w=(n-y*g)/y):w=(n-y*g)/Math.max(1,y-1)),{strokeDasharray:[g,w].join(" "),strokeDashoffset:C.toString()}}function l4({bounds:n,className:e}){const t=xe(),r=Pe("zoom level",()=>t.getZoomLevel(),[t]);return m.jsx("g",{className:e,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:n.sides.map((i,s)=>{const{strokeDasharray:l,strokeDashoffset:c}=Ql(i[0].dist(i[1]),1/r,{style:"dashed",lengthRatio:4});return m.jsx("line",{x1:i[0].x,y1:i[0].y,x2:i[1].x,y2:i[1].y,strokeDasharray:l,strokeDashoffset:c},s)})})}class Zb extends Zl{hideSelectionBoundsFg(){return!0}canBind(){return!1}getDefaultProps(){return{}}getGeometry(e){const t=this.editor.getSortedChildIdsForParent(e.id);return t.length===0?new Vc({width:1,height:1,isFilled:!1}):new hl({children:t.map(r=>{const i=this.editor.getShape(r),s=this.editor.getShapeGeometry(r),l=this.editor.getShapeLocalTransform(i).applyToPoints(s.vertices);return s.isClosed?new wi({points:l,isFilled:!0}):new Fg({points:l})})})}component(e){const t=this.editor.getErasingShapeIds().includes(e.id),{hintingShapeIds:r}=this.editor.getCurrentPageState(),i=r.length>0&&r.some(c=>c!==e.id&&this.editor.isShapeOfType(this.editor.getShape(c),"group")),s=this.editor.getCurrentPageState().focusedGroupId!==e.id;if(!t&&(s||i))return null;const l=this.editor.getShapeGeometry(e).bounds;return m.jsx(Sf,{children:m.jsx(l4,{className:"tl-group",bounds:l})})}indicator(e){const t=this.editor.getShapeGeometry(e).bounds;return m.jsx(l4,{className:"",bounds:t})}onChildrenChange(e){const t=this.editor.getSortedChildIdsForParent(e.id);if(t.length===0){this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),this.editor.deleteShapes([e.id]);return}else if(t.length===1){this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),this.editor.reparentShapes(t,e.parentId),this.editor.deleteShapes([e.id]);return}}}U(Zb,"type","group"),U(Zb,"props",RN),U(Zb,"migrations",MN);const c4=[Zb],Yne=new Set(c4.map(n=>n.type));function u4(n){const e=[...c4],t=new Set;for(const r of n){if(Yne.has(r.type))throw new Error(`Shape type "${r.type}" is a core shapes type and cannot be overridden`);if(t.has(r.type))throw new Error(`Shape type "${r.type}" is defined more than once`);e.push(r),t.add(r.type)}return e}var zg=OL();const Xne=ef(zg);function d4(n,e){const t=new Map;return async function(i){const s=t.get(i);if(s)return s;const l=(async()=>{try{const c=await Lc(i,e);return rn(c.ok),await n(c)}catch(c){return console.error(c),null}})();return t.set(i,l),l}}const Qb=d4(async n=>await Bl.blobToDataUrl(await n.blob())),Zne=/@import\s+(?:"([^"]+)"|'([^']+)'|url\s*\(\s*(?:"([^"]+)"|'([^']+)'|([^'")]+))\s*\))([^;]+);/gi,Qne=/@font-face\s*{([^}]+)}/gi,f4=/url\s*\(\s*(?:"([^"]+)"|'([^']+)'|([^'")]+))\s*\)/gi,Jne=/(?:^|;)\s*font-family\s*:\s*(?:([^'"][^;\n]+)|"([^"]+)"|'([^']+)')\s*(?:;|$)/gi;function ere(n){return Array.from(n.matchAll(Zne),e=>({url:e[1]||e[2]||e[3]||e[4]||e[5],extras:e[6]}))}function h4(n,e){return Array.from(n.matchAll(Qne),t=>{const r=t[1],i=Array.from(r.matchAll(f4),l=>{var d;const c=l[1]||l[2]||l[3];return{original:c,resolved:((d=Wt(c,e))==null?void 0:d.href)??null}}),s=new Set(Array.from(r.matchAll(Jne),l=>(l[1]||l[2]||l[3]).toLowerCase()));return{fontFace:r,urls:i,fontFamilies:s}})}function tre(n){const e=/\s*(?:([^'"][^;\n\s,]+)|"([^"]+)"|'([^']+)')\s*/gi,t=/\s*,\s*/gi,r=new Set;for(;;){const i=e.exec(n);if(!i)break;const s=i[1]||i[2]||i[3];if(r.add(s.toLowerCase()),t.lastIndex=e.lastIndex,!t.exec(n))break;e.lastIndex=t.lastIndex}return r}function p4(n){return!(n.startsWith("-")||n.startsWith("animation")||n.startsWith("transition")||n==="cursor"||n==="pointer-events"||n==="user-select"||n==="touch-action")}function nre(n,e){return{imports:ere(n),fontFaces:h4(n,e)}}function rre(n){return Array.from(n.matchAll(f4),e=>({original:e[0],url:e[1]||e[2]||e[3]}))}const ire=new Set(["border-collapse","border-spacing","caption-side","color","cursor","direction","empty-cells","font-family","font-size","font-style","font-variant","font-weight","font-size-adjust","font-stretch","font","letter-spacing","line-height","list-style-image","list-style-position","list-style-type","list-style","orphans","quotes","tab-size","text-align","text-align-last","text-decoration-color","text-indent","text-justify","text-shadow","text-transform","visibility","white-space","widows","word-break","word-spacing","word-wrap"]);function g4(n){return ire.has(n)}var ore=Object.create,m4=Object.defineProperty,sre=Object.getOwnPropertyDescriptor,are=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),y4=n=>{throw TypeError(n)},v4=(n,e,t)=>e in n?m4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lre=n=>[,,,ore(null)],S4=["class","method","getter","setter","accessor","field","value","get","set"],x4=n=>n!==void 0&&typeof n!="function"?y4("Function expected"):n,cre=(n,e,t,r,i)=>({kind:S4[n],name:e,metadata:r,addInitializer:s=>t._?y4("Already initialized"):i.push(x4(s||null))}),ure=(n,e)=>v4(e,are("metadata"),n[3]),dre=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},fre=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=S4[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,sre(i,t)),I=r.length-1;I>=0;I--)d=cre(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,x4(l)&&(P[C]=l);return P&&m4(i,t,P),i},Jb=(n,e,t)=>v4(n,typeof e!="symbol"?e+"":e,t),w4,e0;w4=[ea];class Fk{constructor(){dre(e0,5,this),Jb(this,"fontFacesPromise",null),Jb(this,"foundFontNames",new Set),Jb(this,"fontFacesToEmbed",new Set),Jb(this,"pendingPromises",[])}startFindingCurrentDocumentFontFaces(){rn(!this.fontFacesPromise,"FontEmbedder already started"),this.fontFacesPromise=hre()}onFontFamilyValue(e){rn(this.fontFacesPromise,"FontEmbedder not started");const t=tre(e);for(const r of t){if(this.foundFontNames.has(r))return;this.foundFontNames.add(r),this.pendingPromises.push(this.fontFacesPromise.then(i=>{const s=i.filter(l=>l.fontFamilies.has(r));for(const l of s)if(!this.fontFacesToEmbed.has(l)){this.fontFacesToEmbed.add(l);for(const c of l.urls)!c.resolved||c.embedded||(c.embedded=Qb(c.resolved))}}))}}async createCss(){await Promise.all(this.pendingPromises);let e="";for(const t of this.fontFacesToEmbed){let r=`@font-face {${t.fontFace}}`;for(const i of t.urls){if(!i.embedded)continue;const s=await i.embedded;s&&(r=r.replace(i.original,s))}e+=r}return e}}e0=lre(),fre(e0,1,"onFontFamilyValue",w4,Fk),ure(e0,Fk);async function hre(){var e;const n=[];for(const t of document.styleSheets){let r;try{r=t.cssRules}catch{}if(r){for(const i of t.cssRules)if(i instanceof CSSFontFaceRule)n.push(h4(i.cssText,t.href??document.baseURI));else if(i instanceof CSSImportRule){const s=new URL(i.href,((e=i.parentStyleSheet)==null?void 0:e.href)??document.baseURI);n.push(zk(s.href))}}else t.href&&n.push(zk(t.href))}return on(await Promise.all(n)).flat()}const zk=d4(async n=>{const e=nre(await n.text(),n.url),t=await Promise.all(e.imports.map(({url:r})=>zk(new URL(r,n.url).href)));return[...e.fontFaces,...on(t).flat()]});function b4(n){if(n.shadowRoot)return n.shadowRoot.childNodes;if(yre(n)){const e=n.assignedNodes();if(e!=null&&e.length)return e}return n.childNodes}function*Uk(n){for(const e of b4(n))pre(e)&&(yield e)}function t0(n){var e;return((e=n.ownerDocument)==null?void 0:e.defaultView)??globalThis}function pre(n){return n instanceof t0(n).Element}function gre(n){return n instanceof t0(n).ShadowRoot}function mre(n){return"getRootNode"in n&&gre(n.getRootNode())}function yre(n){return mre(n)&&n instanceof t0(n).HTMLSlotElement}function vre(n){return n.style}function $k(n,e){return t0(n).getComputedStyle(n,e)}const Xh={};class Sre{constructor(e){U(this,"styles",new Map);U(this,"fonts",new Fk);this.root=e}readRootElementStyles(e){this.readElementStyles(e,{shouldRespectDefaults:!1,shouldSkipInheritedParentStyles:!1});const t=Array.from(Uk(e));for(;t.length;){const r=t.pop();t.push(...Uk(r)),this.readElementStyles(r,{shouldRespectDefaults:!0,shouldSkipInheritedParentStyles:!0})}}readElementStyles(e,{shouldRespectDefaults:t=!0,shouldSkipInheritedParentStyles:r=!0}){var c;const i=t?Cre(e.tagName.toLowerCase()):Xh,s=r?((c=this.styles.get(e.parentElement))==null?void 0:c.self)??Xh:Xh,l={self:xre(e,{defaultStyles:i,parentStyles:s}),before:C4(e,"::before"),after:C4(e,"::after")};this.styles.set(e,l)}fetchResources(){const e=[];for(const t of this.styles.values())for(const r of Hr(t))if(r)for(const[i,s]of Object.entries(r)){if(!s)continue;i==="font-family"&&this.fonts.onFontFamilyValue(s);const l=rre(s);l.length!==0&&e.push(...l.map(async({url:c,original:d})=>{const h=await Qb(c)??"data:";r[i]=s.replace(d,`url("${h}")`)}))}return Promise.all(e)}unwrapCustomElements(){const e=new Set,t=(r,i)=>{if(e.has(r))return;e.add(r);const s=r.shadowRoot;if(s){const l=document.createElement("div");this.styles.set(l,this.styles.get(r)),l.setAttribute("data-tl-custom-element",r.tagName),(i??r.parentElement).appendChild(l);for(const c of s.childNodes)c instanceof Element?t(c,l):l.appendChild(c.cloneNode(!0));r.remove()}else if(i){if(r.tagName.toLowerCase()==="style")return;const l=r.cloneNode(!1);this.styles.set(l,this.styles.get(r)),i.appendChild(l);for(const c of b4(r))c instanceof Element?t(c,l):l.appendChild(c.cloneNode(!0))}};for(const r of this.styles.keys())t(r,null)}embedStyles(){let e="";for(const[t,r]of this.styles){if(r.after||r.before){const s=`pseudo-${nr()}`;t.classList.add(s),r.before&&(e+=`.${s}::before {${_4(r.before)}}
`),r.after&&(e+=`.${s}::after {${_4(r.after)}}
`)}const i=vre(t);for(const[s,l]of Object.entries(r.self))l&&i.setProperty(s,l);i.fontKerning==="auto"&&(i.fontKerning="normal")}return e}async getFontFaceCss(){return await this.fonts.createCss()}dispose(){bre()}}function xre(n,{defaultStyles:e,parentStyles:t}){return n.computedStyleMap?E4(n.computedStyleMap(),{defaultStyles:e,parentStyles:t}):Bk($k(n),{defaultStyles:e,parentStyles:t})}function C4(n,e){const t=$k(n,e),r=t.getPropertyValue("content");if(!(r===""||r==="none"))return Bk(t,{defaultStyles:Xh,parentStyles:Xh})}function E4(n,{defaultStyles:e,parentStyles:t}){const r={};for(const i of n.keys()){if(!p4(i))continue;const s=n.get(i).toString();e[i]!==s&&(t[i]===s&&g4(i)||(r[i]=s))}return r}function Bk(n,{defaultStyles:e,parentStyles:t}){const r={};for(const i of n){if(!p4(i))continue;const s=n.getPropertyValue(i);e[i]!==s&&(t[i]===s&&g4(i)||(r[i]=s))}return r}function _4(n){let e="";for(const[t,r]of Object.entries(n))e+=`${t}: ${r};`;return e}let Ug;const P4={};function wre(){if(!Ug){const n=document.createElement("iframe");n.style.display="none",document.body.appendChild(n);const e=Js(n.contentDocument,"frame must have a document"),t=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");t.appendChild(r),e.body.appendChild(t),Ug={iframe:n,foreignObject:r,document:e}}return Ug}function bre(){Ug&&(document.body.removeChild(Ug.iframe),Ug=void 0)}const T4={defaultStyles:Xh,parentStyles:Xh};function Cre(n){let e=P4[n];if(!e){const{foreignObject:t,document:r}=wre(),i=r.createElement(n);t.appendChild(i),e=i.computedStyleMap?E4(i.computedStyleMap(),T4):Bk($k(i),T4),t.removeChild(i),P4[n]=e}return e}function Ere(n,e){Array.from(n.attributes).forEach(r=>{e.setAttribute(r.name,r.value)})}function I4(n,e){return n.replaceWith(e),e}async function Wv(n,e){const t=document.createElement("img");e&&Ere(e,t),t.setAttribute("src",n??"data:"),t.setAttribute("decoding","sync"),t.setAttribute("loading","eager");try{await t.decode()}catch{}return t}async function _re(n){try{const e=n.toDataURL();return await Wv(e,n)}catch{return await Wv(null,n)}}async function Pre(n){try{const e=await Ra.getVideoFrameAsDataUrl(n);return Wv(e,n)}catch(e){console.error("Could not get video frame",e)}if(n.poster){const e=await Qb(n.poster);return Wv(e,n)}return Wv(null,n)}async function k4(n){if(n instanceof HTMLCanvasElement)return I4(n,await _re(n));if(n instanceof HTMLVideoElement)return I4(n,await Pre(n));if(n instanceof HTMLImageElement){const e=n.currentSrc||n.src,t=await Qb(e);n.setAttribute("src",t??"data:"),n.setAttribute("decoding","sync"),n.setAttribute("loading","eager");try{await n.decode()}catch{}return n}else n instanceof HTMLInputElement?n.setAttribute("value",n.value):n instanceof HTMLTextAreaElement&&(n.textContent=n.value);await Promise.all(Array.from(Uk(n),e=>k4(e)))}function n0(n){const e=M.useRef();return M.useLayoutEffect(()=>{e.current=n}),M.useDebugValue(n),M.useCallback((...t)=>{const r=e.current;return rn(r,"fn does not exist"),r(...t)},[])}function Tre(n){const e=Iv("useReactiveEvent",()=>n);return M.useLayoutEffect(()=>{e.set(n)}),M.useDebugValue(n),M.useCallback((...t)=>{const r=e.get();return rn(r,"fn does not exist"),r(...t)},[e])}const Hk=M.createContext(null);function Ire({context:n,editor:e,children:t}){const r=e.options.exportProvider;return m.jsx(ok,{editor:e,children:m.jsx(lz,{container:e.getContainer(),children:m.jsx(Hk.Provider,{value:n,children:m.jsx(r,{children:t})})})})}function Gv(){return M.useContext(Hk)}function kre(){const n=M.useContext(Hk),[e]=M.useState(nP);return M.useEffect(()=>(n==null||n.waitUntil(e),()=>{e.resolve()}),[e,n]),n0(()=>{e.resolve()})}var Rre=Object.create,R4=Object.defineProperty,Mre=Object.getOwnPropertyDescriptor,Are=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),M4=n=>{throw TypeError(n)},A4=(n,e,t)=>e in n?R4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dre=n=>[,,,Rre(null)],D4=["class","method","getter","setter","accessor","field","value","get","set"],O4=n=>n!==void 0&&typeof n!="function"?M4("Function expected"):n,Ore=(n,e,t,r,i)=>({kind:D4[n],name:e,metadata:r,addInitializer:s=>t._?M4("Already initialized"):i.push(O4(s||null))}),jre=(n,e)=>A4(e,Are("metadata"),n[3]),Lre=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},Nre=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=D4[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,Mre(i,t)),I=r.length-1;I>=0;I--)d=Ore(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,O4(l)&&(P[C]=l);return P&&R4(i,t,P),i},j4=(n,e,t)=>A4(n,typeof e!="symbol"?e+"":e,t),L4,r0;L4=[ea];class Vk{constructor(e){this.maxDelayTimeMs=e,Lre(r0,5,this),j4(this,"isResolved",!1),j4(this,"promisesToWaitFor",[])}waitUntil(e){if(this.isResolved)throw new Error("Cannot `waitUntil` - the export has already been resolved. Make sure to call `waitUntil` as soon as possible during an export - ie within the first react effect after rendering.");this.promisesToWaitFor.push(e.catch(t=>console.error("Error whilst waiting for export:",t)))}async resolvePromises(){let e=null;for(;this.promisesToWaitFor.length!==e;)e=this.promisesToWaitFor.length,await Promise.allSettled(this.promisesToWaitFor),await rP(0)}async resolve(){const e=rP(this.maxDelayTimeMs).then(()=>"timeout"),t=this.resolvePromises().then(()=>"resolved");await Promise.race([e,t])==="timeout"&&console.warn("[tldraw] Export delay timed out after ${this.maxDelayTimeMs}ms"),this.isResolved=!0}}r0=Dre(),Nre(r0,1,"waitUntil",L4,Vk),jre(r0,Vk);function Fre(n,e,t={}){var I,k;if(!window.document)throw Error("No document");const{scale:r=1,background:i=!1,padding:s=n.options.defaultSvgPadding,preserveAspectRatio:l}=t,c=t.darkMode??n.user.getIsDarkMode(),d=n.getShapeAndDescendantIds(e),h=n.getUnorderedRenderingShapes(!1).filter(({id:L})=>d.has(L));let g=null;if(t.bounds)g=t.bounds;else for(const{id:L}of h){const O=n.getShapeMaskedPageBounds(L);O&&(g?g.union(O):g=O.clone())}if(!g)return;const y=e.length===1&&n.isShapeOfType(n.getShape(e[0]),"frame")?e[0]:null;y||g.expandBy(s);const v=g.width*r,w=g.height*r;try{(k=(I=document.body).focus)==null||k.call(I)}catch{}const C=new Vk(n.options.maxExportDelayMs),E=nP();return C.waitUntil(E),{jsx:m.jsx(zre,{editor:n,preserveAspectRatio:l,scale:r,bbox:g,background:i,singleFrameShapeId:y,isDarkMode:c,renderingShapes:h,onMount:E.resolve,waitUntil:C.waitUntil}),width:v,height:w,exportDelay:C}}function zre({editor:n,preserveAspectRatio:e,scale:t,bbox:r,background:i,singleFrameShapeId:s,isDarkMode:l,renderingShapes:c,onMount:d,waitUntil:h}){const g=Mg(),y=Vu({isDarkMode:l}),v=Iv("export state",{defsById:{},shapeElements:null}),{defsById:w,shapeElements:C}=Pe(v),E=n0(k=>{v.update(L=>{if(Vl(L.defsById,k.key))return L;const O=Promise.resolve(k.getElement());return h(O.then(z=>{v.update(F=>({...F,defsById:{...F.defsById,[k.key]:{pending:!1,element:z}}}))})),{...L,defsById:{...L.defsById,[k.key]:{pending:!0,element:O}}}})}),P=M.useMemo(()=>({isDarkMode:l,waitUntil:h,addExportDef:E}),[l,h,E]),I=M.useRef(!1);return M.useLayoutEffect(()=>{if(I.current)throw new Error("SvgExport should only render once - do not use with react strict mode");I.current=!0,(async()=>{const k={},L=c.map(async({id:z,opacity:F,index:H,backgroundIndex:V})=>{var ie,W;if(z===s)return[];const re=n.getShape(z);if(n.isShapeOfType(re,"group"))return[];const q=[],J=n.getShapeUtil(re);if(J.toSvg||J.toBackgroundSvg){const[Y,oe]=await Promise.all([(ie=J.toSvg)==null?void 0:ie.call(J,re,P),(W=J.toBackgroundSvg)==null?void 0:W.call(J,re,P)]),le=n.getShapePageTransform(re);let ce=le.toCssString(),Q=1;"scale"in re.props&&re.props.scale!==1&&(Q=re.props.scale,ce=`${ce} scale(${re.props.scale}, ${re.props.scale})`);const he=n.getShapeMask(re.id),ke=he?qe.From(qe.Inverse(le)).applyToPoints(he):null,te=rk(g,re.id);ke&&(k[te]={pending:!1,element:m.jsx("clipPath",{id:te,children:m.jsx("path",{d:`M${ke.map(({x:me,y:Oe})=>`${me/Q},${Oe/Q}`).join("L")}Z`})})}),Y&&q.push({zIndex:H,element:m.jsx("g",{transform:ce,opacity:F,clipPath:he?`url(#${te})`:void 0,children:Y},`fg_${re.id}`)}),oe&&q.push({zIndex:V,element:m.jsx("g",{transform:ce,opacity:F,clipPath:he?`url(#${te})`:void 0,children:oe},`bg_${re.id}`)})}else q.push({zIndex:H,element:m.jsx(N4,{shape:re,util:J,component:jz,className:"tl-shape",bbox:r,opacity:F},`fg_${re.id}`)}),J.backgroundComponent&&q.push({zIndex:V,element:m.jsx(N4,{shape:re,util:J,component:Lz,className:"tl-shape tl-shape-background",bbox:r,opacity:F},`bg_${re.id}`)});return q}),O=(await Promise.all(L)).flat();zg.flushSync(()=>{v.update(z=>({...z,shapeElements:O.sort((F,H)=>F.zIndex-H.zIndex).map(({element:F})=>F),defsById:{...z.defsById,...k}}))})})()},[r,n,P,g,c,s,v]),M.useEffect(()=>{C!==null&&d()},[d,C]),m.jsx(Ire,{editor:n,context:P,children:m.jsxs("svg",{preserveAspectRatio:e,direction:"ltr",width:r.width*t,height:r.height*t,viewBox:`${r.minX} ${r.minY} ${r.width} ${r.height}`,strokeLinecap:"round",strokeLinejoin:"round",style:{backgroundColor:i?s?y.solid:y.background:"transparent"},"data-color-mode":l?"dark":"light",className:`tl-container tl-theme__force-sRGB ${l?"tl-theme__dark":"tl-theme__light"}`,children:[m.jsx("defs",{children:Object.entries(w).map(([k,L])=>L.pending?null:m.jsx(M.Fragment,{children:L.element},k))}),C]})})}function N4({shape:n,util:e,className:t,component:r,bbox:i,opacity:s}){const l=xe(),c=qe.Translate(-i.minX,-i.minY).multiply(l.getShapePageTransform(n.id)),d=l.getShapeGeometry(n.id).bounds,h=Math.max(d.width,1),g=Math.max(d.height,1);return m.jsx(nk,{fallback:()=>null,children:m.jsx("foreignObject",{x:i.minX,y:i.minY,width:i.w,height:i.h,className:"tl-shape-foreign-object",children:m.jsx("div",{className:t,"data-shape-type":n.type,style:{clipPath:l.getShapeClipPath(n.id),transform:c.toCssString(),width:h,height:g,opacity:s},children:m.jsx(r,{shape:n,util:e})})})})}let Ure=1;async function $re(n,e,t={}){const r=Fre(n,e,t);if(!r)return;const i=n.getContainer(),s=document.createElement("div");s.className="tldraw-svg-export",s.inert=!0,s.tabIndex=-1,Object.assign(s.style,{position:"absolute",top:"0px",left:"0px",width:r.width+"px",height:r.height+"px",pointerEvents:"none",opacity:0}),i.appendChild(s);const l=LL.createRoot(s,{identifierPrefix:`export_${Ure++}_`});try{await Promise.resolve(),zg.flushSync(()=>{l.render(r.jsx)}),await r.exportDelay.resolve();const c=s.firstElementChild;return rn(c instanceof SVGSVGElement,"Expected an SVG element"),await Bre(c),{svg:c,width:r.width,height:r.height}}finally{setTimeout(()=>{l.unmount(),i.removeChild(s)},0)}}async function Bre(n){const e=[...n.querySelectorAll("foreignObject.tl-shape-foreign-object > *")];if(!e.length)return;const t=new Sre(n);try{t.fonts.startFindingCurrentDocumentFontFaces(),await Promise.all(e.map(s=>k4(s)));for(const s of e)t.readRootElementStyles(s);await t.fetchResources();const r=await t.getFontFaceCss();t.unwrapCustomElements();const i=t.embedStyles();if(r||i){const s=document.createElementNS("http://www.w3.org/2000/svg","style");s.textContent=`${r}
${i}`,n.prepend(s)}}finally{t.dispose()}}const Jl={menus:si("open menus",[]),getOpenMenus(n){return n?this.menus.get().filter(e=>e.endsWith("-"+n)):this.menus.get()},addOpenMenu(n,e=""){const t=e?`${n}-${e}`:n,r=new Set(this.menus.get());r.has(t)||(r.add(t),this.menus.set([...r]))},deleteOpenMenu(n,e=""){const t=e?`${n}-${e}`:n,r=new Set(this.menus.get());r.has(t)&&(r.delete(t),this.menus.set([...r]))},clearOpenMenus(n){this.menus.set(n?this.menus.get().filter(e=>!e.endsWith("-"+n)):[])},_hiddenMenus:[],hideOpenMenus(n){if(this._hiddenMenus=[...this.getOpenMenus(n)],this._hiddenMenus.length!==0)for(const e of this._hiddenMenus)this.deleteOpenMenu(e,n)},showOpenMenus(n){if(this._hiddenMenus.length!==0){for(const e of this._hiddenMenus)this.addOpenMenu(e,n);this._hiddenMenus=[]}},isMenuOpen(n,e){return this.getOpenMenus(e).includes(n)},hasOpenMenus(n){return this.getOpenMenus(n).length>0},hasAnyOpenMenus(){return this.getOpenMenus().length>0},forContext(n){return{getOpenMenus:()=>this.getOpenMenus(n),addOpenMenu:e=>this.addOpenMenu(e,n),deleteOpenMenu:e=>this.deleteOpenMenu(e,n),clearOpenMenus:()=>this.clearOpenMenus(n),isMenuOpen:e=>this.isMenuOpen(e,n),hasOpenMenus:()=>this.hasOpenMenus(n),hasAnyOpenMenus:()=>this.hasAnyOpenMenus()}}},Kk=new RX,Hre={maxShapesPerPage:4e3,maxFilesAtOnce:100,maxPages:40,animationMediumMs:320,followChaseViewportSnap:2,doubleClickDurationMs:450,multiClickDurationMs:200,coarseDragDistanceSquared:36,dragDistanceSquared:16,defaultSvgPadding:32,cameraSlideFriction:.09,maxPointsPerDrawShape:500,gridSteps:[{min:-1,mid:.15,step:64},{min:.05,mid:.375,step:16},{min:.15,mid:1,step:4},{min:.7,mid:2.5,step:1}],collaboratorInactiveTimeoutMs:6e4,collaboratorIdleTimeoutMs:3e3,collaboratorCheckIntervalMs:1200,cameraMovingTimeoutMs:64,hitTestMargin:8,edgeScrollDelay:200,edgeScrollEaseDuration:200,edgeScrollSpeed:25,edgeScrollDistance:8,coarsePointerWidth:12,coarseHandleRadius:20,handleRadius:12,longPressDurationMs:500,textShadowLod:.35,adjacentShapeMargin:10,flattenImageBoundsExpand:64,flattenImageBoundsPadding:16,laserDelayMs:1200,maxExportDelayMs:5e3,temporaryAssetPreviewLifetimeMs:18e4,actionShortcutsLocation:"swap",createTextOnCanvasDoubleClick:!0,exportProvider:M.Fragment};function F4(n,e){if(!e)return!1;switch(n.type){case"mixed":return e.type==="mixed";case"shared":return e.type==="shared"&&n.value===e.value;default:throw Bi(n)}}class Vre{constructor(e){U(this,"map");this.map=new Map(e)}get(e){return this.map.get(e)}getAsKnownValue(e){const t=this.get(e);if(t&&t.type!=="mixed")return t.value}get size(){return this.map.size}equals(e){if(this.size!==e.size)return!1;const t=new Set;for(const[r,i]of this){if(!F4(i,e.get(r)))return!1;t.add(r)}for(const[r,i]of e)if(!t.has(r)&&!F4(i,this.get(r)))return!1;return!0}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[Symbol.iterator](){return this.map[Symbol.iterator]()}}class Wk extends Vre{set(e,t){this.map.set(e,t)}applyValue(e,t){const r=this.get(e);if(!r){this.set(e,{type:"shared",value:t});return}switch(r.type){case"mixed":return;case"shared":r.value!==t&&this.set(e,{type:"mixed"});return;default:Bi(r,"type")}}}function Kre(n,e,t){return Lc(n).then(function(r){return r.arrayBuffer()}).then(function(r){return new File([r],e,{type:t})})}const Wre="https://cdn.tldraw.com";function xf(){return`${Wre}/${q5}`}function Gre(n){switch(n.type){case"shapes":return`s${n.shapeIds.map(t=>Gk(t.slice(6))).join(".")}`;case"page":return"p"+Gk(La.parseId(n.pageId));case"viewport":{const{bounds:e,pageId:t}=n;let r=`v${Math.round(e.x)}.${Math.round(e.y)}.${Math.round(e.w)}.${Math.round(e.h)}`;return t&&(r+="."+Gk(La.parseId(t))),r}default:Bi(n)}}function qre(n){switch(n[0]){case"s":return{type:"shapes",shapeIds:n.slice(1).split(".").filter(Boolean).map(r=>yr(decodeURIComponent(r)))};case"p":return{type:"page",pageId:La.createId(decodeURIComponent(n.slice(1)))};case"v":{const[t,r,i,s,l]=n.slice(1).split(".");return{type:"viewport",bounds:new Xe(Number(t),Number(r),Number(i),Number(s)),pageId:l?La.createId(decodeURIComponent(l)):void 0}}default:throw Error("Invalid deep link string")}}function Gk(n){return encodeURIComponent(n).replace(/\./g,"%2E")}function Yre(n,e){var i;let t=n;const r=new Set(e);for(;r.has(t);)t=(i=/^.*(\d+)$/.exec(t))!=null&&i[1]?t.replace(/(\d+)(?=\D?)$/,s=>(+s+1).toString()):`${t} 1`;return t}function i0(n,e,t,r){if(t.length===0)return[];const i=new Map;for(const l of on(t.map(c=>n.getShape(c)))){const{parentId:c}=l;i.has(c)||i.set(c,{children:on(n.getSortedChildIdsForParent(c).map(d=>n.getShape(d))),moving:new Set}),i.get(c).moving.add(l)}const s=[];switch(e){case"toBack":{i.forEach(({moving:l,children:c})=>Xre(l,c,s));break}case"toFront":{i.forEach(({moving:l,children:c})=>Zre(l,c,s));break}case"forward":{i.forEach(({moving:l,children:c})=>Qre(n,l,c,s,r));break}case"backward":{i.forEach(({moving:l,children:c})=>Jre(n,l,c,s,r));break}}return s}function Xre(n,e,t){const r=e.length;if(n.size===r)return;let i,s;for(let l=0;l<r;l++){const c=e[l];if(n.has(c))i=c.index,n.delete(c);else{s=c.index;break}}if(n.size!==0){const l=bg(i,s,n.size);t.push(...Array.from(n.values()).sort(Go).map((c,d)=>({...c,index:l[d]})))}}function Zre(n,e,t){const r=e.length;if(n.size===r)return;let i,s;for(let l=r-1;l>-1;l--){const c=e[l];if(n.has(c))s=c.index,n.delete(c);else{i=c.index;break}}if(n.size!==0){const l=bg(i,s,n.size);t.push(...Array.from(n.values()).sort(Go).map((c,d)=>({...c,index:l[d]})))}}function z4(n,e){const t=n.getShapeGeometry(e),r=n.getShapePageTransform(e);return!t||!r?null:r.applyToPoints(t.vertices)}function U4(n,e){const t=Array.from(e).map(i=>{const s=z4(n,i);return s?{shape:i,vertices:s}:null}).filter(Boolean);return i=>{const s=z4(n,i);return s?t.some(l=>Nk(l.vertices,s)):!1}}function Qre(n,e,t,r,i){var d;const s=U4(n,e),l=t.length;if(e.size===l)return;let c={name:"skipping"};for(let h=0;h<l;h++){const g=e.has(t[h]);switch(c.name){case"skipping":{if(!g)continue;c={name:"selecting",selectIndex:h};break}case"selecting":{if(g||!(i!=null&&i.considerAllShapes)&&!s(t[h]))continue;const{selectIndex:y}=c;bg(t[h].index,(d=t[h+1])==null?void 0:d.index,h-y).forEach((v,w)=>{const C=t[y+w];e.has(C)&&r.push({...C,index:v})}),c={name:"skipping"};break}}}}function Jre(n,e,t,r,i){var d;const s=U4(n,e),l=t.length;if(e.size===l)return;let c={name:"skipping"};for(let h=l-1;h>-1;h--){const g=e.has(t[h]);switch(c.name){case"skipping":{if(!g)continue;c={name:"selecting",selectIndex:h};break}case"selecting":{if(g||!(i!=null&&i.considerAllShapes)&&!s(t[h]))continue;bg((d=t[h-1])==null?void 0:d.index,t[h].index,c.selectIndex-h).forEach((y,v)=>{const w=t[h+v+1];e.has(w)&&r.push({...w,index:y})}),c={name:"skipping"};break}}}}function $4({editor:n,ids:e}){const t=on(e.map(l=>n.getShape(l))),r=n.getShapesSharedRotation(e),i=n.getShapesRotatedPageBounds(e);if(!i)return null;const s=i.center.clone().rotWith(i.point,r);return{pageCenter:s,initialCursorAngle:s.angle(n.inputs.originPagePoint),initialShapesRotation:r,shapeSnapshots:t.map(l=>({shape:l,initialPagePoint:n.getShapePageTransform(l.id).point()}))}}function o0({delta:n,editor:e,snapshot:t,stage:r,centerOverride:i}){const{pageCenter:s,shapeSnapshots:l}=t;e.updateShapes(l.map(({shape:d,initialPagePoint:h})=>{const g=ia(d.parentId)?e.getShapePageTransform(d.parentId):qe.Identity(),y=R.RotWith(h,i??s,n),v=qe.applyToPoint(qe.Inverse(g),y),w=Gh(d.rotation+n);return{id:d.id,type:d.type,x:v.x,y:v.y,rotation:w}}));const c=[];l.forEach(({shape:d})=>{var v,w,C;const h=e.getShape(d.id);if(!h)return;const g=e.getShapeUtil(d);if(r==="start"||r==="one-off"){const E=(v=g.onRotateStart)==null?void 0:v.call(g,d);E&&c.push(E)}const y=(w=g.onRotate)==null?void 0:w.call(g,d,h);if(y&&c.push(y),r==="end"||r==="one-off"){const E=(C=g.onRotateEnd)==null?void 0:C.call(g,d,h);E&&c.push(E)}}),c.length>0&&e.updateShapes(c)}const eie=n=>{const{store:e}=n,t=e.query.filterHistory("binding"),r=e.query.records("binding");function i(){const s=r.get(),l=new Map;for(const c of s){const{fromId:d,toId:h}=c,g=l.get(d);g?g.push(c):l.set(d,[c]);const y=l.get(h);y?y.push(c):l.set(h,[c])}return l}return Le("arrowBindingsIndex",(s,l)=>{if(Nh(s))return i();const c=s,d=t.getDiffSince(l);if(d===Ma)return i();let h;function g(w){h??(h=new Map(c));const C=h.get(w.fromId),E=C==null?void 0:C.filter(k=>k.id!==w.id);E!=null&&E.length?h.set(w.fromId,E):h.delete(w.fromId);const P=h.get(w.toId),I=P==null?void 0:P.filter(k=>k.id!==w.id);I!=null&&I.length?h.set(w.toId,I):h.delete(w.toId)}function y(w){h??(h=new Map(c));let C=h.get(w);return C?C===c.get(w)&&(C=C.slice(0),h.set(w,C)):(C=[],h.set(w,C)),C}function v(w){y(w.fromId).push(w),y(w.toId).push(w)}for(const w of d){for(const C of Hr(w.added))v(C);for(const[C,E]of Hr(w.updated))g(C),v(E);for(const C of Hr(w.removed))g(C)}return h??c})};function tie(n,e,t){const r=n.getShapeMaskedPageBounds(e);return r===void 0?!0:!t.includes(r)}const nie=n=>{function e(t){const r=t.getCurrentPageShapeIds(),i=t.getViewportPageBounds(),s=new Set;return r.forEach(l=>{tie(t,l,i)&&s.add(l)}),s}return Le("getCulledShapes",t=>{if(Nh(t))return e(n);const r=e(n);if(t.size!==r.size)return r;for(const i of t)if(!r.has(i))return r;return t})},rie=n=>{const e=n.query.ids("shape"),t=n.query.filterHistory("shape");function r(){const i={},s=e.get(),l=Array(s.size);return s.forEach(c=>l.push(n.get(c))),l.sort(Go),l.forEach(c=>{i[c.parentId]||(i[c.parentId]=[]),i[c.parentId].push(c.id)}),i}return Le("parentsToChildrenWithIndexes",(i,s)=>{if(Nh(i))return r();const l=t.getDiffSince(s);if(l===Ma)return r();if(l.length===0)return i;let c=null;const d=y=>{c||(c={...i}),c[y]?c[y]===i[y]&&(c[y]=[...c[y]]):c[y]=[]},h=new Set;let g;for(let y=0,v=l.length;y<v;y++){g=l[y];for(const w of Object.values(g.added))_g(w)&&(d(w.parentId),c[w.parentId].push(w.id),h.add(c[w.parentId]));for(const[w,C]of Object.values(g.updated))if(_g(C)&&_g(w)){if(w.parentId!==C.parentId)d(w.parentId),d(C.parentId),c[w.parentId].splice(c[w.parentId].indexOf(C.id),1),c[C.parentId].push(C.id),h.add(c[C.parentId]);else if(w.index!==C.index){d(C.parentId);const E=c[C.parentId].indexOf(C.id);c[C.parentId][E]=C.id,h.add(c[C.parentId])}}for(const w of Object.values(g.removed))_g(w)&&(d(w.parentId),c[w.parentId].splice(c[w.parentId].indexOf(w.id),1))}for(const y of h){const v=on(y.map(w=>n.get(w)));v.sort(Go),y.splice(0,y.length,...v.map(w=>w.id))}return c??i})},qk=(n,e,t)=>{for(;!oa(t.parentId);){const r=n.get(t.parentId);if(!r)return!1;t=r}return t.parentId===e},iie=(n,e)=>{const t=n.query.ids("shape");let r=null;function i(){const s=e();return r=s,new Set([...t.get()].filter(l=>qk(n,s,n.get(l))))}return Le("_shapeIdsInCurrentPage",(s,l)=>{if(Nh(s))return i();const c=e();if(c!==r)return i();const d=n.history.getDiffSince(l);if(d===Ma)return i();const h=new rb(s);for(const y of d){for(const v of Object.values(y.added))_g(v)&&qk(n,c,v)&&h.add(v.id);for(const[v,w]of Object.values(y.updated))_g(w)&&(qk(n,c,w)?h.add(w.id):h.remove(w.id));for(const v of Object.keys(y.removed))ia(v)&&h.remove(v)}const g=h.get();return g?hv(g.value,g.diff):s})};var oie=Object.create,B4=Object.defineProperty,sie=Object.getOwnPropertyDescriptor,aie=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),H4=n=>{throw TypeError(n)},V4=(n,e,t)=>e in n?B4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lie=n=>[,,,oie(null)],K4=["class","method","getter","setter","accessor","field","value","get","set"],W4=n=>n!==void 0&&typeof n!="function"?H4("Function expected"):n,cie=(n,e,t,r,i)=>({kind:K4[n],name:e,metadata:r,addInitializer:s=>t._?H4("Already initialized"):i.push(W4(s||null))}),uie=(n,e)=>V4(e,aie("metadata"),n[3]),die=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},G4=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=K4[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,sie(i,t)),I=r.length-1;I>=0;I--)d=cie(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,W4(l)&&(P[C]=l);return P&&B4(i,t,P),i},$g=(n,e,t)=>V4(n,typeof e!="symbol"?e+"":e,t),q4,Y4,qv;const fie=40;Y4=[ea],q4=[ea];class s0{constructor(e){this.editor=e,die(qv,5,this),$g(this,"_clickId",""),$g(this,"_clickTimeout"),$g(this,"_clickScreenPoint"),$g(this,"_previousScreenPoint"),$g(this,"_clickState","idle"),$g(this,"lastPointerInfo",{})}_getClickTimeout(e,t=nr()){this._clickId=t,clearTimeout(this._clickTimeout),this._clickTimeout=this.editor.timers.setTimeout(()=>{if(this._clickState===e&&this._clickId===t){switch(this._clickState){case"pendingTriple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"double_click",phase:"settle"});break}case"pendingQuadruple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"triple_click",phase:"settle"});break}case"pendingOverflow":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"settle"});break}}this._clickState="idle"}},e==="idle"||e==="pendingDouble"?this.editor.options.doubleClickDurationMs:this.editor.options.multiClickDurationMs)}get clickState(){return this._clickState}handlePointerEvent(e){switch(e.name){case"pointer_down":{if(!this._clickState)return e;switch(this._clickScreenPoint=R.From(e.point),this._previousScreenPoint&&R.Dist2(this._previousScreenPoint,this._clickScreenPoint)>fie**2&&(this._clickState="idle"),this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=e,this._clickState){case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"double_click",phase:"down"};case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"triple_click",phase:"down"};case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"quadruple_click",phase:"down"};case"idle":{this._clickState="pendingDouble";break}case"pendingOverflow":{this._clickState="overflow";break}}return this._clickTimeout=this._getClickTimeout(this._clickState),e}case"pointer_up":{if(!this._clickState)return e;switch(this._clickScreenPoint=R.From(e.point),this._clickState){case"pendingTriple":return{...this.lastPointerInfo,type:"click",name:"double_click",phase:"up"};case"pendingQuadruple":return{...this.lastPointerInfo,type:"click",name:"triple_click",phase:"up"};case"pendingOverflow":return{...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"up"}}return e}case"pointer_move":return this._clickState!=="idle"&&this._clickScreenPoint&&R.Dist2(this._clickScreenPoint,this.editor.inputs.currentScreenPoint)>(this.editor.getInstanceState().isCoarsePointer?this.editor.options.coarseDragDistanceSquared:this.editor.options.dragDistanceSquared)&&this.cancelDoubleClickTimeout(),e}return e}cancelDoubleClickTimeout(){this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"}}qv=lie(),G4(qv,1,"_getClickTimeout",Y4,s0),G4(qv,1,"cancelDoubleClickTimeout",q4,s0),uie(qv,s0);class hie{constructor(e){U(this,"_isEdgeScrolling",!1);U(this,"_edgeScrollDuration",-1);this.editor=e}updateEdgeScrolling(e){const{editor:t}=this,r=this.getEdgeScroll();if(r.x===0&&r.y===0)this._isEdgeScrolling&&(this._isEdgeScrolling=!1,this._edgeScrollDuration=0);else if(this._isEdgeScrolling||(this._isEdgeScrolling=!0,this._edgeScrollDuration=0),this._edgeScrollDuration+=e,this._edgeScrollDuration>t.options.edgeScrollDelay){const i=t.options.edgeScrollEaseDuration>0?ao.easeInCubic(Math.min(1,this._edgeScrollDuration/(t.options.edgeScrollDelay+t.options.edgeScrollEaseDuration))):1;this.moveCameraWhenCloseToEdge({x:r.x*i,y:r.y*i})}}getEdgeProximityFactors(e,t,r,i,s){const{editor:l}=this,c=l.options.edgeScrollDistance,d=r?l.options.coarsePointerWidth:0,h=e-d,g=e+d,y=i?0:c,v=s?t:t-c;return h<y?Math.min(1,(y-h)/c):g>v?-Math.min(1,(g-v)/c):0}getEdgeScroll(){const{editor:e}=this,{inputs:{currentScreenPoint:{x:t,y:r}}}=e,i=e.getViewportScreenBounds(),{isCoarsePointer:s,insets:[l,c,d,h]}=e.getInstanceState(),g=this.getEdgeProximityFactors(t,i.w,s,h,c),y=this.getEdgeProximityFactors(r,i.h,s,l,d);return{x:g,y}}moveCameraWhenCloseToEdge(e){const{editor:t}=this;if(!t.inputs.isDragging||t.inputs.isPanning||t.getCameraOptions().isLocked||e.x===0&&e.y===0)return;const r=t.getViewportScreenBounds(),i=r.w<1e3?.612:1,s=r.h<1e3?.612:1,l=t.getZoomLevel(),c=t.user.getEdgeScrollSpeed()*t.options.edgeScrollSpeed,d=c*e.x*i/l,h=c*e.y*s/l,{x:g,y,z:v}=t.getCamera();t.setCamera(new R(g+d,y+h,v))}}class pie{constructor(e,t){U(this,"disposeSideEffectListener");this.editor=e,this.disposeSideEffectListener=e.sideEffects.registerAfterChangeHandler("instance",(i,s)=>{i.isFocused!==s.isFocused&&this.updateContainerClass()});const r=e.getInstanceState().isFocused;t!==r&&e.updateInstanceState({isFocused:!!t}),this.updateContainerClass()}updateContainerClass(){const e=this.editor.getContainer();this.editor.getInstanceState().isFocused?e.classList.add("tl-container__focused"):e.classList.remove("tl-container__focused")}focus(){this.editor.getContainer().focus()}blur(){this.editor.complete(),this.editor.getContainer().blur()}dispose(){var e;(e=this.disposeSideEffectListener)==null||e.call(this)}}function Yv(n){return mie}class gie{constructor(){U(this,"length",0);U(this,"head",null);U(this,"tail",this)}push(e){return new Yk(e,this)}toArray(){return Bu}[Symbol.iterator](){return{next(){return{value:void 0,done:!0}}}}}const mie=new gie;class Yk{constructor(e,t){U(this,"length");this.head=e,this.tail=t,this.length=t.length+1}push(e){return new Yk(e,this)}toArray(){return Array.from(this)}[Symbol.iterator](){let e=this;return{next(){if(e.length){const t=e.head;return e=e.tail,{value:t,done:!1}}else return{value:void 0,done:!0}}}}}class yie{constructor(e){U(this,"store");U(this,"dispose");U(this,"state","recording");U(this,"pendingDiff",new Sie);U(this,"stacks",si("HistoryManager.stacks",{undos:Yv(),redos:Yv()},{isEqual:(e,t)=>e.undos===t.undos&&e.redos===t.redos}));U(this,"annotateError");U(this,"_isInBatch",!1);this.store=e.store,this.annotateError=e.annotateError??iv,this.dispose=this.store.addHistoryInterceptor((t,r)=>{if(r==="user")switch(this.state){case"recording":this.pendingDiff.apply(t.changes),this.stacks.update(({undos:i})=>({undos:i,redos:Yv()}));break;case"recordingPreserveRedoStack":this.pendingDiff.apply(t.changes);break;case"paused":break;default:Bi(this.state)}})}flushPendingDiff(){if(this.pendingDiff.isEmpty())return;const e=this.pendingDiff.clear();this.stacks.update(({undos:t,redos:r})=>({undos:t.push({type:"diff",diff:e}),redos:r}))}getNumUndos(){return this.stacks.get().undos.length+(this.pendingDiff.isEmpty()?0:1)}getNumRedos(){return this.stacks.get().redos.length}batch(e,t){const r=this.state;r!=="paused"&&(t!=null&&t.history)&&(this.state=vie[t.history]);try{if(this._isInBatch)return cl(e),this;this._isInBatch=!0;try{cl(e)}catch(i){throw this.annotateError(i),i}finally{this._isInBatch=!1}return this}finally{this.state=r}}_undo({pushToRedoStack:e,toMark:t=void 0}){var i;const r=this.state;this.state="paused";try{let{undos:s,redos:l}=this.stacks.get();const c=this.pendingDiff.clear(),d=U2(c),h=gv(c);e&&!d&&(l=l.push({type:"diff",diff:c}));let g=!1;if(d)for(;((i=s.head)==null?void 0:i.type)==="stop";){const y=s.head;if(s=s.tail,e&&(l=l.push(y)),y.id===t){g=!0;break}}if(!g)e:for(;s.head;){const y=s.head;switch(s=s.tail,e&&(l=l.push(y)),y.type){case"diff":mv(h,[gv(y.diff)]);break;case"stop":if(!t)break e;if(y.id===t){g=!0;break e}break;default:Bi(y)}}if(!g&&t)return this;this.store.applyDiff(h,{ignoreEphemeralKeys:!0}),this.store.ensureStoreIsUsable(),this.stacks.set({undos:s,redos:l})}finally{this.state=r}return this}undo(){return this._undo({pushToRedoStack:!0}),this}redo(){var t;const e=this.state;this.state="paused";try{this.flushPendingDiff();let{undos:r,redos:i}=this.stacks.get();if(i.length===0)return this;for(;((t=i.head)==null?void 0:t.type)==="stop";)r=r.push(i.head),i=i.tail;const s=ob();for(;i.head;){const l=i.head;if(r=r.push(l),i=i.tail,l.type==="diff")mv(s,[l.diff]);else break}this.store.applyDiff(s,{ignoreEphemeralKeys:!0}),this.store.ensureStoreIsUsable(),this.stacks.set({undos:r,redos:i})}finally{this.state=e}return this}bail(){return this._undo({pushToRedoStack:!1}),this}bailToMark(e){return this._undo({pushToRedoStack:!1,toMark:e}),this}squashToMark(e){var s;let t=this.stacks.get().undos;const r=[];for(;t.head&&!(t.head.type==="stop"&&t.head.id===e);)t.head.type==="diff"&&r.push(t.head.diff),t=t.tail;if(!t.head||((s=t.head)==null?void 0:s.id)!==e)return console.error("Could not find mark to squash to: ",e),this;if(r.length===0)return this;const i=ob();return mv(i,r.reverse()),this.stacks.update(({redos:l})=>({undos:t.push({type:"diff",diff:i}),redos:l})),this}_mark(e){cl(()=>{this.flushPendingDiff(),this.stacks.update(({undos:t,redos:r})=>({undos:t.push({type:"stop",id:e}),redos:r}))})}clear(){this.stacks.set({undos:Yv(),redos:Yv()}),this.pendingDiff.clear()}getMarkIdMatching(e){let t=this.stacks.get().undos;for(;t.head;){if(t.head.type==="stop"&&t.head.id.includes(e))return t.head.id;t=t.tail}return null}debug(){const{undos:e,redos:t}=this.stacks.get();return{undos:e.toArray(),redos:t.toArray(),pendingDiff:this.pendingDiff.debug(),state:this.state}}}const vie={record:"recording","record-preserveRedoStack":"recordingPreserveRedoStack",ignore:"paused"};class Sie{constructor(){U(this,"diff",ob());U(this,"isEmptyAtom",si("PendingDiff.isEmpty",!0))}clear(){const e=this.diff;return this.diff=ob(),this.isEmptyAtom.set(!0),e}isEmpty(){return this.isEmptyAtom.get()}apply(e){mv(this.diff,[e]),this.isEmptyAtom.set(U2(this.diff))}debug(){return{diff:this.diff,isEmpty:this.isEmpty()}}}class xie{constructor(e){U(this,"scribbleItems",new Map);U(this,"state","paused");this.editor=e}addScribble(e,t=nr()){const r={id:t,scribble:{id:t,size:20,color:"accent",opacity:.8,delay:0,points:[],shrink:.1,taper:!0,...e,state:"starting"},timeoutMs:0,delayRemaining:e.delay??0,prev:null,next:null};return this.scribbleItems.set(t,r),r}reset(){this.editor.updateInstanceState({scribbles:[]}),this.scribbleItems.clear()}stop(e){const t=this.scribbleItems.get(e);if(!t)throw Error(`Scribble with id ${e} not found`);return t.delayRemaining=Math.min(t.delayRemaining,200),t.scribble.state="stopping",t}addPoint(e,t,r,i=.5){const s=this.scribbleItems.get(e);if(!s)throw Error(`Scribble with id ${e} not found`);const{prev:l}=s,c={x:t,y:r,z:i};return(!l||R.Dist(l,c)>=1)&&(s.next=c),s}tick(e){this.scribbleItems.size!==0&&this.editor.run(()=>{this.scribbleItems.forEach(t=>{if(t.scribble.state==="starting"){const{next:d,prev:h}=t;d&&d!==h&&(t.prev=d,t.scribble.points.push(d)),t.scribble.points.length>8&&(t.scribble.state="active");return}t.delayRemaining>0&&(t.delayRemaining=Math.max(0,t.delayRemaining-e)),t.timeoutMs+=e,t.timeoutMs>=16&&(t.timeoutMs=0);const{delayRemaining:r,timeoutMs:i,prev:s,next:l,scribble:c}=t;switch(c.state){case"active":{l&&l!==s?(t.prev=l,c.points.push(l),r===0&&c.points.length>8&&c.points.shift()):i===0&&(c.points.length>1?c.points.shift():t.delayRemaining=c.delay);break}case"stopping":{if(t.delayRemaining===0&&i===0){if(c.points.length===1){this.scribbleItems.delete(t.id);return}c.shrink&&(c.size=Math.max(1,c.size*(1-c.shrink))),c.points.shift()}break}}}),this.editor.updateInstanceState({scribbles:Array.from(this.scribbleItems.values()).map(({scribble:t})=>({...t,points:[...t.points]})).slice(-5)})})}}var wie=Object.create,X4=Object.defineProperty,bie=Object.getOwnPropertyDescriptor,Cie=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),Z4=n=>{throw TypeError(n)},Q4=(n,e,t)=>e in n?X4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Eie=n=>[,,,wie(null)],J4=["class","method","getter","setter","accessor","field","value","get","set"],eU=n=>n!==void 0&&typeof n!="function"?Z4("Function expected"):n,_ie=(n,e,t,r,i)=>({kind:J4[n],name:e,metadata:r,addInitializer:s=>t._?Z4("Already initialized"):i.push(eU(s||null))}),Pie=(n,e)=>Q4(e,Cie("metadata"),n[3]),Tie=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},a0=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=J4[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,bie(i,t)),I=r.length-1;I>=0;I--)d=_ie(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,eU(l)&&(P[C]=l);return P&&X4(i,t,P),i},Iie=(n,e,t)=>Q4(n,e+"",t),tU,nU,rU,iU,Zh;const Nt=n=>Math.round(n*10**8)/10**8;function Ju(n,e,t,r,i){const s=n.filter(c=>(r==="forward"?c.startNode.id===e:c.endNode.id===e)&&Nt(c.length)===Nt(t)&&Xl(c.breadthIntersection[0],c.breadthIntersection[1],i[0],i[1]));if(s.length===0)return[];const l=new Set;return s.forEach(c=>{const d=r==="forward"?c.endNode.id:c.startNode.id;if(!l.has(d)){l.add(d);const h=Ju(n,d,t,r,Xl(c.breadthIntersection[0],c.breadthIntersection[1],i[0],i[1]));s.push(...h)}}),s}function kie(n){n.sort((e,t)=>t.gaps.length-e.gaps.length);for(let e=n.length-1;e>0;e--){const t=n[e];for(let r=e-1;r>=0;r--){const i=n[r];if(i.direction===t.direction&&t.gaps.every(s=>i.gaps.some(l=>Nt(s.startEdge[0].x)===Nt(l.startEdge[0].x)&&Nt(s.startEdge[0].y)===Nt(l.startEdge[0].y)&&Nt(s.startEdge[1].x)===Nt(l.startEdge[1].x)&&Nt(s.startEdge[1].y)===Nt(l.startEdge[1].y))&&i.gaps.some(l=>Nt(s.endEdge[0].x)===Nt(l.endEdge[0].x)&&Nt(s.endEdge[0].y)===Nt(l.endEdge[0].y)&&Nt(s.endEdge[1].x)===Nt(l.endEdge[1].x)&&Nt(s.endEdge[1].y)===Nt(l.endEdge[1].y)))){n.splice(e,1);break}}}}iU=[Le],rU=[Le],nU=[Le],tU=[Le];class Bg{constructor(e){this.manager=e,Tie(Zh,5,this),Iie(this,"editor"),this.editor=e.editor}getSnapPointsCache(){const{editor:e}=this;return e.store.createComputedCache("snapPoints",t=>{const r=e.getShapePageTransform(t.id);if(!r)return;const s=e.getShapeUtil(t).getBoundsSnapGeometry(t).points??e.getShapeGeometry(t).bounds.cornersAndCenter;if(!(!r||!s))return s.map((l,c)=>{const{x:d,y:h}=qe.applyToPoint(r,l);return{x:d,y:h,id:`${t.id}:${c}`}})})}getSnapPoints(e){return this.getSnapPointsCache().get(e)??[]}getSnappablePoints(){const e=this.getSnapPointsCache(),t=this.manager.getSnappableShapes(),r=[];for(const i of t){const s=e.get(i);s&&r.push(...s)}return r}getSnappableGapNodes(){return Array.from(this.manager.getSnappableShapes(),e=>({id:e,pageBounds:Js(this.editor.getShapePageBounds(e))}))}getVisibleGaps(){const e=[],t=[];let r,i;const s=this.getSnappableGapNodes().sort((c,d)=>c.pageBounds.minX-d.pageBounds.minX);for(let c=0;c<s.length;c++){r=s[c];for(let d=c+1;d<s.length;d++)i=s[d],r.pageBounds.maxX<i.pageBounds.minX&&zv(r.pageBounds.minY,r.pageBounds.maxY,i.pageBounds.minY,i.pageBounds.maxY)&&e.push({startNode:r,endNode:i,startEdge:[new R(r.pageBounds.maxX,r.pageBounds.minY),new R(r.pageBounds.maxX,r.pageBounds.maxY)],endEdge:[new R(i.pageBounds.minX,i.pageBounds.minY),new R(i.pageBounds.minX,i.pageBounds.maxY)],length:i.pageBounds.minX-r.pageBounds.maxX,breadthIntersection:Xl(r.pageBounds.minY,r.pageBounds.maxY,i.pageBounds.minY,i.pageBounds.maxY)})}const l=s.sort((c,d)=>c.pageBounds.minY-d.pageBounds.minY);for(let c=0;c<l.length;c++){r=l[c];for(let d=c+1;d<l.length;d++)i=l[d],r.pageBounds.maxY<i.pageBounds.minY&&zv(r.pageBounds.minX,r.pageBounds.maxX,i.pageBounds.minX,i.pageBounds.maxX)&&t.push({startNode:r,endNode:i,startEdge:[new R(r.pageBounds.minX,r.pageBounds.maxY),new R(r.pageBounds.maxX,r.pageBounds.maxY)],endEdge:[new R(i.pageBounds.minX,i.pageBounds.minY),new R(i.pageBounds.maxX,i.pageBounds.minY)],length:i.pageBounds.minY-r.pageBounds.maxY,breadthIntersection:Xl(r.pageBounds.minX,r.pageBounds.maxX,i.pageBounds.minX,i.pageBounds.maxX)})}return{horizontal:e,vertical:t}}snapTranslateShapes({lockedAxis:e,initialSelectionPageBounds:t,initialSelectionSnapPoints:r,dragDelta:i}){var P,I;const s=this.manager.getSnapThreshold(),l=this.getSnappablePoints(),c=t.clone().translate(i),d=r.map(({x:k,y:L},O)=>({id:"selection:"+O,x:k+i.x,y:L+i.y})),h=l,g=[],y=[],v=new R(s,s);this.collectPointSnaps({minOffset:v,nearestSnapsX:g,nearestSnapsY:y,otherNodeSnapPoints:h,selectionSnapPoints:d}),this.collectGapSnaps({selectionPageBounds:c,nearestSnapsX:g,nearestSnapsY:y,minOffset:v});const w=new R(e==="x"?0:((P=g[0])==null?void 0:P.nudge)??0,e==="y"?0:((I=y[0])==null?void 0:I.nudge)??0);v.x=0,v.y=0,g.length=0,y.length=0,d.forEach(k=>{k.x+=w.x,k.y+=w.y}),c.translate(w),this.collectPointSnaps({minOffset:v,nearestSnapsX:g,nearestSnapsY:y,otherNodeSnapPoints:h,selectionSnapPoints:d}),this.collectGapSnaps({selectionPageBounds:c,nearestSnapsX:g,nearestSnapsY:y,minOffset:v});const C=this.getPointSnapLines({nearestSnapsX:g,nearestSnapsY:y}),E=this.getGapSnapLines({selectionPageBounds:c,nearestSnapsX:g,nearestSnapsY:y});return this.manager.setIndicators([...E,...C]),{nudge:w}}snapResizeShapes({initialSelectionPageBounds:e,dragDelta:t,handle:r,isAspectRatioLocked:i,isResizingFromCenter:s}){var H,V;const l=this.manager.getSnapThreshold(),{box:c,scaleX:d,scaleY:h}=Xe.Resize(e,r,s?t.x*2:t.x,s?t.y*2:t.y,i);let g=r;d<0&&(g=Dte(g)),h<0&&(g=Ate(g)),s&&(c.center=e.center);const y=g==="top"||g==="bottom",v=g==="left"||g==="right",w=oU(g,c),C=this.getSnappablePoints(),E=[],P=[],I=new R(l,l);this.collectPointSnaps({minOffset:I,nearestSnapsX:E,nearestSnapsY:P,otherNodeSnapPoints:C,selectionSnapPoints:w});const k=new R(y?0:((H=E[0])==null?void 0:H.nudge)??0,v?0:((V=P[0])==null?void 0:V.nudge)??0);if(i&&Ote(g)&&k.len()!==0){const re=E.length&&P.length?Math.abs(k.x)<Math.abs(k.y)?"x":"y":E.length?"x":"y",q=e.aspectRatio;re==="x"?(P.length=0,k.y=k.x/q,(g==="bottom_left"||g==="top_right")&&(k.y=-k.y)):(E.length=0,k.x=k.y*q,(g==="bottom_left"||g==="top_right")&&(k.x=-k.x))}const L=R.Add(t,k),{box:O}=Xe.Resize(e,r,s?L.x*2:L.x,s?L.y*2:L.y,i);s&&(O.center=e.center);const z=oU("any",O);E.length=0,P.length=0,I.x=0,I.y=0,this.collectPointSnaps({minOffset:I,nearestSnapsX:E,nearestSnapsY:P,otherNodeSnapPoints:C,selectionSnapPoints:z});const F=this.getPointSnapLines({nearestSnapsX:E,nearestSnapsY:P});return this.manager.setIndicators([...F]),{nudge:k}}collectPointSnaps({selectionSnapPoints:e,otherNodeSnapPoints:t,minOffset:r,nearestSnapsX:i,nearestSnapsY:s}){for(const l of e)for(const c of t){const d=R.Sub(l,c),h=Math.abs(d.x),g=Math.abs(d.y);Nt(h)<=Nt(r.x)&&(Nt(h)<Nt(r.x)&&(i.length=0),i.push({type:"points",points:{thisPoint:l,otherPoint:c},nudge:c.x-l.x}),r.x=h),Nt(g)<=Nt(r.y)&&(Nt(g)<Nt(r.y)&&(s.length=0),s.push({type:"points",points:{thisPoint:l,otherPoint:c},nudge:c.y-l.y}),r.y=g)}}collectGapSnaps({selectionPageBounds:e,minOffset:t,nearestSnapsX:r,nearestSnapsY:i}){const{horizontal:s,vertical:l}=this.getVisibleGaps();for(const c of s){if(!zv(c.breadthIntersection[0],c.breadthIntersection[1],e.minY,e.maxY))continue;const h=c.startEdge[0].x+c.length/2-e.center.x;if(c.length>e.width&&Nt(Math.abs(h))<=Nt(t.x)){Nt(Math.abs(h))<Nt(t.x)&&(r.length=0),t.x=Math.abs(h);const I={type:"gap_center",gap:c,nudge:h},k=r.find(({type:O})=>O==="gap_center"),L=k&&Xl(c.breadthIntersection[0],c.breadthIntersection[1],k.gap.breadthIntersection[0],k.gap.breadthIntersection[1]);k&&k.gap.length>c.length&&L?r[r.indexOf(k)]=I:(!k||!L)&&r.push(I)}const y=c.startNode.pageBounds.minX-c.length,v=e.maxX,w=y-v;Nt(Math.abs(w))<=Nt(t.x)&&(Nt(Math.abs(w))<Nt(t.x)&&(r.length=0),t.x=Math.abs(w),r.push({type:"gap_duplicate",gap:c,protrusionDirection:"left",nudge:w}));const C=c.endNode.pageBounds.maxX+c.length,E=e.minX,P=C-E;Nt(Math.abs(P))<=Nt(t.x)&&(Nt(Math.abs(P))<Nt(t.x)&&(r.length=0),t.x=Math.abs(P),r.push({type:"gap_duplicate",gap:c,protrusionDirection:"right",nudge:P}))}for(const c of l){if(!zv(c.breadthIntersection[0],c.breadthIntersection[1],e.minX,e.maxX))continue;const h=c.startEdge[0].y+c.length/2-e.center.y;if(c.length>e.height&&Nt(Math.abs(h))<=Nt(t.y)){Nt(Math.abs(h))<Nt(t.y)&&(i.length=0),t.y=Math.abs(h);const I={type:"gap_center",gap:c,nudge:h},k=i.find(({type:O})=>O==="gap_center"),L=k&&zv(k.gap.breadthIntersection[0],k.gap.breadthIntersection[1],c.breadthIntersection[0],c.breadthIntersection[1]);k&&k.gap.length>c.length&&L?i[i.indexOf(k)]=I:(!k||!L)&&i.push(I);continue}const y=c.startNode.pageBounds.minY-c.length,v=e.maxY,w=y-v;Nt(Math.abs(w))<=Nt(t.y)&&(Nt(Math.abs(w))<Nt(t.y)&&(i.length=0),t.y=Math.abs(w),i.push({type:"gap_duplicate",gap:c,protrusionDirection:"top",nudge:w}));const C=c.endNode.pageBounds.maxY+c.length,E=e.minY,P=C-E;Nt(Math.abs(P))<=Nt(t.y)&&(Nt(Math.abs(P))<Nt(t.y)&&(i.length=0),t.y=Math.abs(P),i.push({type:"gap_duplicate",gap:c,protrusionDirection:"bottom",nudge:P}))}}getPointSnapLines({nearestSnapsX:e,nearestSnapsY:t}){const r={},i={};if(e.length>0){for(const s of e)if(s.type==="points"){const l=Nt(s.points.otherPoint.x);r[l]||(r[l]=[]),r[l].push(s.points)}}if(t.length>0){for(const s of t)if(s.type==="points"){const l=Nt(s.points.otherPoint.y);i[l]||(i[l]=[]),i[l].push(s.points)}}return Object.values(r).concat(Object.values(i)).map(s=>({id:nr(),type:"points",points:iP(s.map(l=>R.From(l.otherPoint)).concat(s.map(l=>R.From(l.thisPoint))),(l,c)=>l.equals(c))}))}getGapSnapLines({selectionPageBounds:e,nearestSnapsX:t,nearestSnapsY:r}){const{vertical:i,horizontal:s}=this.getVisibleGaps(),l={top:e.sides[0],right:e.sides[1],bottom:[e.corners[3],e.corners[2]],left:[e.corners[0],e.corners[3]]},c=[];if(t.length>0)for(const d of t){if(d.type==="points")continue;const{gap:{breadthIntersection:h,startEdge:g,startNode:y,endNode:v,length:w,endEdge:C}}=d;switch(d.type){case"gap_center":{const E=(w-e.width)/2,P=Xl(h[0],h[1],e.minY,e.maxY);c.push({type:"gaps",direction:"horizontal",id:nr(),gaps:[...Ju(s,y.id,E,"backward",P),{startEdge:g,endEdge:l.left},{startEdge:l.right,endEdge:C},...Ju(s,v.id,E,"forward",P)]});break}case"gap_duplicate":{const E=Xl(h[0],h[1],e.minY,e.maxY);c.push({type:"gaps",direction:"horizontal",id:nr(),gaps:d.protrusionDirection==="left"?[{startEdge:l.right,endEdge:g.map(P=>P.clone().addXY(-y.pageBounds.width,0))},{startEdge:g,endEdge:C},...Ju(s,v.id,w,"forward",E)]:[...Ju(s,y.id,w,"backward",E),{startEdge:g,endEdge:C},{startEdge:C.map(P=>P.clone().addXY(d.gap.endNode.pageBounds.width,0)),endEdge:l.left}]});break}}}if(r.length>0)for(const d of r){if(d.type==="points")continue;const{gap:{breadthIntersection:h,startEdge:g,startNode:y,endNode:v,length:w,endEdge:C}}=d;switch(d.type){case"gap_center":{const E=(w-e.height)/2,P=Xl(h[0],h[1],e.minX,e.maxX);c.push({type:"gaps",direction:"vertical",id:nr(),gaps:[...Ju(i,y.id,E,"backward",P),{startEdge:g,endEdge:l.top},{startEdge:l.bottom,endEdge:C},...Ju(i,d.gap.endNode.id,E,"forward",P)]});break}case"gap_duplicate":{const E=Xl(h[0],h[1],e.minX,e.maxX);c.push({type:"gaps",direction:"vertical",id:nr(),gaps:d.protrusionDirection==="top"?[{startEdge:l.bottom,endEdge:g.map(P=>P.clone().addXY(0,-y.pageBounds.height))},{startEdge:g,endEdge:C},...Ju(i,v.id,w,"forward",E)]:[...Ju(i,y.id,w,"backward",E),{startEdge:g,endEdge:C},{startEdge:C.map(P=>P.clone().addXY(0,v.pageBounds.height)),endEdge:l.top}]})}break}}return kie(c),c}}Zh=Eie(),a0(Zh,1,"getSnapPointsCache",iU,Bg),a0(Zh,1,"getSnappablePoints",rU,Bg),a0(Zh,1,"getSnappableGapNodes",nU,Bg),a0(Zh,1,"getVisibleGaps",tU,Bg),Pie(Zh,Bg);function oU(n,e){const{minX:t,maxX:r,minY:i,maxY:s}=e,l=[];switch(n){case"top":case"left":case"top_left":case"any":l.push({id:"top_left",handle:"top_left",x:t,y:i})}switch(n){case"top":case"right":case"top_right":case"any":l.push({id:"top_right",handle:"top_right",x:r,y:i})}switch(n){case"bottom":case"right":case"bottom_right":case"any":l.push({id:"bottom_right",handle:"bottom_right",x:r,y:s})}switch(n){case"bottom":case"left":case"bottom_left":case"any":l.push({id:"bottom_left",handle:"bottom_left",x:t,y:s})}return l}var Rie=Object.create,sU=Object.defineProperty,Mie=Object.getOwnPropertyDescriptor,Aie=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),aU=n=>{throw TypeError(n)},lU=(n,e,t)=>e in n?sU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Die=n=>[,,,Rie(null)],cU=["class","method","getter","setter","accessor","field","value","get","set"],uU=n=>n!==void 0&&typeof n!="function"?aU("Function expected"):n,Oie=(n,e,t,r,i)=>({kind:cU[n],name:e,metadata:r,addInitializer:s=>t._?aU("Already initialized"):i.push(uU(s||null))}),jie=(n,e)=>lU(e,Aie("metadata"),n[3]),Lie=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},Nie=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=cU[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,Mie(i,t)),I=r.length-1;I>=0;I--)d=Oie(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,uU(l)&&(P[C]=l);return P&&sU(i,t,P),i},Fie=(n,e,t)=>lU(n,e+"",t),dU,l0;const zie=()=>null,Uie=()=>[];dU=[Le];class Xk{constructor(e){this.manager=e,Lie(l0,5,this),Fie(this,"editor"),this.editor=e.editor}getSnapGeometryCache(){const{editor:e}=this;return e.store.createComputedCache("handle snap geometry",t=>{const r=e.getShapeUtil(t).getHandleSnapGeometry(t),i=r.getSelfSnapOutline?r.getSelfSnapOutline.bind(r):zie,s=r.getSelfSnapPoints?r.getSelfSnapPoints.bind(r):Uie;return{outline:r.outline===void 0?e.getShapeGeometry(t):r.outline,points:r.points??[],getSelfSnapOutline:i,getSelfSnapPoints:s}})}*iterateSnapPointsInPageSpace(e,t){var i,s;const r=(i=this.getSnapGeometryCache().get(e))==null?void 0:i.getSelfSnapPoints(t);if(r&&r.length){const l=Js(this.editor.getShapePageTransform(e));for(const c of r)yield l.applyToPoint(c)}for(const l of this.manager.getSnappableShapes()){if(l===e)continue;const c=(s=this.getSnapGeometryCache().get(l))==null?void 0:s.points;if(!c||!c.length)continue;const d=Js(this.editor.getShapePageTransform(l));for(const h of c)yield d.applyToPoint(h)}}*iterateSnapOutlines(e,t){var i,s;const r=(i=this.getSnapGeometryCache().get(e))==null?void 0:i.getSelfSnapOutline(t);r&&(yield{shapeId:e,outline:r});for(const l of this.manager.getSnappableShapes()){if(l===e)continue;const c=(s=this.getSnapGeometryCache().get(l))==null?void 0:s.outline;c&&(yield{shapeId:l,outline:c})}}getHandleSnapPosition({currentShapeId:e,handle:t,handleInPageSpace:r}){const i=this.manager.getSnapThreshold();let s=i,l=null;for(const h of this.iterateSnapPointsInPageSpace(e,t))R.DistMin(r,h,s)&&(s=R.Dist(r,h),l=h);if(l)return l;let c=i,d=null;for(const{shapeId:h,outline:g}of this.iterateSnapOutlines(e,t)){const y=Js(this.editor.getShapePageTransform(h)),v=this.editor.getPointInShapeSpace(h,r),w=g.nearestPoint(v),C=y.applyToPoint(w);R.DistMin(r,C,c)&&(c=R.Dist(r,C),d=C)}return d||null}snapHandle({currentShapeId:e,handle:t}){const i=Js(this.editor.getShapePageTransform(e)).applyToPoint(t),s=this.getHandleSnapPosition({currentShapeId:e,handle:t,handleInPageSpace:i});return s?(this.manager.setIndicators([{id:nr(),type:"points",points:[s]}]),{nudge:R.Sub(s,i)}):null}}l0=Die(),Nie(l0,1,"getSnapGeometryCache",dU,Xk),jie(l0,Xk);var $ie=Object.create,fU=Object.defineProperty,Bie=Object.getOwnPropertyDescriptor,Hie=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),hU=n=>{throw TypeError(n)},pU=(n,e,t)=>e in n?fU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Vie=n=>[,,,$ie(null)],gU=["class","method","getter","setter","accessor","field","value","get","set"],mU=n=>n!==void 0&&typeof n!="function"?hU("Function expected"):n,Kie=(n,e,t,r,i)=>({kind:gU[n],name:e,metadata:r,addInitializer:s=>t._?hU("Already initialized"):i.push(mU(s||null))}),Wie=(n,e)=>pU(e,Hie("metadata"),n[3]),Gie=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},Zk=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=gU[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,Bie(i,t)),I=r.length-1;I>=0;I--)d=Kie(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,mU(l)&&(P[C]=l);return P&&fU(i,t,P),i},Qk=(n,e,t)=>pU(n,typeof e!="symbol"?e+"":e,t),yU,vU,SU,Hg;SU=[Le],vU=[Le],yU=[Le];class Xv{constructor(e){this.editor=e,Gie(Hg,5,this),Qk(this,"shapeBounds"),Qk(this,"handles"),Qk(this,"_snapIndicators",si("snapLines",void 0)),this.shapeBounds=new Bg(this),this.handles=new Xk(this)}getIndicators(){return this._snapIndicators.get()??Bu}clearIndicators(){this.getIndicators().length&&this._snapIndicators.set(void 0)}setIndicators(e){this._snapIndicators.set(e)}getSnapThreshold(){return 8/this.editor.getZoomLevel()}getSnappableShapes(){const{editor:e}=this,t=e.getViewportPageBounds(),r=e.getSelectedShapeIds(),i=new Set,s=l=>{if(ia(l)){const d=e.getShape(l);d&&e.isShapeOfType(d,"frame")&&i.add(l)}const c=e.getSortedChildIdsForParent(l);for(const d of c){if(r.includes(d))continue;const h=e.getShape(d);if(!h||!e.getShapeUtil(h).canSnap(h))continue;const y=e.getShapePageBounds(d);if(y&&t.includes(y)){if(e.isShapeOfType(h,"group")){s(d);continue}i.add(d)}}};return s(this.getCurrentCommonAncestor()??e.getCurrentPageId()),i}getCurrentCommonAncestor(){return this.editor.findCommonAncestor(this.editor.getSelectedShapes())}}Hg=Vie(),Zk(Hg,1,"getSnapThreshold",SU,Xv),Zk(Hg,1,"getSnappableShapes",vU,Xv),Zk(Hg,1,"getCurrentCommonAncestor",yU,Xv),Wie(Hg,Xv);const qie=/\r?\n|\r/g;function xU(n){return n.replace(qie,`
`).split(`
`).map(e=>e||" ").join(`
`)}const Yie={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},Xie=/\s/;class Zie{constructor(e){U(this,"baseElem");this.editor=e,this.baseElem=document.createElement("div"),this.baseElem.classList.add("tl-text"),this.baseElem.classList.add("tl-text-measure"),this.baseElem.tabIndex=-1}measureText(e,t){const r=this.baseElem.cloneNode();this.editor.getContainer().appendChild(r),r.setAttribute("dir","auto"),r.style.setProperty("unicode-bidi","plaintext"),r.style.setProperty("font-family",t.fontFamily),r.style.setProperty("font-style",t.fontStyle),r.style.setProperty("font-weight",t.fontWeight),r.style.setProperty("font-size",t.fontSize+"px"),r.style.setProperty("line-height",t.lineHeight*t.fontSize+"px"),r.style.setProperty("max-width",t.maxWidth===null?null:t.maxWidth+"px"),r.style.setProperty("min-width",t.minWidth===null?null:t.minWidth+"px"),r.style.setProperty("padding",t.padding),r.style.setProperty("overflow-wrap",t.disableOverflowWrapBreaking?"normal":"break-word"),r.textContent=xU(e);const i=r.scrollWidth,s=r.getBoundingClientRect();return r.remove(),{x:0,y:0,w:s.width,h:s.height,scrollWidth:i}}measureElementTextNodeSpans(e,{shouldTruncateToFirstLine:t=!1}={}){const r=[],i=e.getBoundingClientRect(),s=-i.left,l=-i.top,c=new Range,d=e.childNodes[0];let h=0,g=null,y=null,v=0,w=0,C=!1;for(const E of e.childNodes)if(E.nodeType===Node.TEXT_NODE)for(const P of E.textContent??""){c.setStart(d,h),c.setEnd(d,h+P.length);const I=c.getClientRects(),k=I[I.length-1],L=k.top+l,O=k.left+s,z=k.right+s,F=O<w,H=Xie.test(P);if(H!==y||L!==v||!g){if(g){if(t&&L!==v){C=!0;break}r.push(g)}g={box:{x:O,y:L,w:k.width,h:k.height},text:P},w=O}else F&&(g.box.x=O),g.box.w=F?g.box.w+k.width:z-g.box.x,g.text+=P;P===`
`&&(w=0),y=H,v=L,h+=P.length}return g&&r.push(g),{spans:r,didTruncate:C}}measureTextSpans(e,t){if(e==="")return[];const r=this.baseElem.cloneNode();this.editor.getContainer().appendChild(r);const i=Math.ceil(t.width-t.padding*2);r.setAttribute("dir","auto"),r.style.setProperty("unicode-bidi","plaintext"),r.style.setProperty("width",`${i}px`),r.style.setProperty("height","min-content"),r.style.setProperty("font-size",`${t.fontSize}px`),r.style.setProperty("font-family",t.fontFamily),r.style.setProperty("font-weight",t.fontWeight),r.style.setProperty("line-height",`${t.lineHeight*t.fontSize}px`),r.style.setProperty("text-align",Yie[t.textAlign]);const s=t.overflow==="truncate-ellipsis"||t.overflow==="truncate-clip";s&&(r.style.setProperty("overflow-wrap","anywhere"),r.style.setProperty("word-break","break-all"));const l=xU(e);r.textContent=l;const{spans:c,didTruncate:d}=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:s});if(t.overflow==="truncate-ellipsis"&&d){r.textContent="";const h=Math.ceil(this.measureElementTextNodeSpans(r).spans[0].box.w);r.style.setProperty("width",`${i-h}px`),r.textContent=l;const g=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:!0}).spans,y=g[g.length-1];return g.push({text:"",box:{x:Math.min(y.box.x+y.box.w,t.width-t.padding-h),y:y.box.y,w:h,h:y.box.h}}),g}return r.remove(),c}}var Qie={},Jie=Object.create,wU=Object.defineProperty,eoe=Object.getOwnPropertyDescriptor,toe=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),bU=n=>{throw TypeError(n)},CU=(n,e,t)=>e in n?wU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,noe=n=>[,,,Jie(null)],EU=["class","method","getter","setter","accessor","field","value","get","set"],_U=n=>n!==void 0&&typeof n!="function"?bU("Function expected"):n,roe=(n,e,t,r,i)=>({kind:EU[n],name:e,metadata:r,addInitializer:s=>t._?bU("Already initialized"):i.push(_U(s||null))}),ioe=(n,e)=>CU(e,toe("metadata"),n[3]),ooe=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},PU=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=EU[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,eoe(i,t)),I=r.length-1;I>=0;I--)d=roe(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,_U(l)&&(P[C]=l);return P&&wU(i,t,P),i},c0=(n,e,t)=>CU(n,typeof e!="symbol"?e+"":e,t),TU,IU,Zv;const kU=typeof process<"u"&&Qie.NODE_ENV==="test"?function(e){const t=requestAnimationFrame(e);return()=>cancelAnimationFrame(t)}:b2;IU=[ea],TU=[ea];class u0{constructor(e){this.editor=e,ooe(Zv,5,this),c0(this,"cancelRaf"),c0(this,"isPaused",!0),c0(this,"now",0),c0(this,"prevPoint",new R),this.editor.disposables.add(this.dispose),this.start()}start(){var e;this.isPaused=!1,(e=this.cancelRaf)==null||e.call(this),this.cancelRaf=kU(this.tick),this.now=Date.now()}tick(){if(this.isPaused)return;const e=Date.now(),t=e-this.now;this.now=e,this.updatePointerVelocity(t),this.editor.emit("frame",t),this.editor.emit("tick",t),this.cancelRaf=kU(this.tick)}dispose(){var e;this.isPaused=!0,(e=this.cancelRaf)==null||e.call(this)}updatePointerVelocity(e){const{prevPoint:t,editor:{inputs:{currentScreenPoint:r,pointerVelocity:i}}}=this;if(e===0)return;const s=R.Sub(r,t);this.prevPoint=r.clone();const l=s.len(),c=l?s.div(l):new R(0,0),d=i.clone().lrp(c.mul(l/e),.5);Math.abs(d.x)<.01&&(d.x=0),Math.abs(d.y)<.01&&(d.y=0),i.equals(d)||(this.editor.inputs.pointerVelocity=d)}}Zv=noe(),PU(Zv,1,"tick",IU,u0),PU(Zv,1,"dispose",TU,u0),ioe(Zv,u0);var soe=Object.create,RU=Object.defineProperty,aoe=Object.getOwnPropertyDescriptor,loe=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),MU=n=>{throw TypeError(n)},AU=(n,e,t)=>e in n?RU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,coe=n=>[,,,soe(null)],DU=["class","method","getter","setter","accessor","field","value","get","set"],OU=n=>n!==void 0&&typeof n!="function"?MU("Function expected"):n,uoe=(n,e,t,r,i)=>({kind:DU[n],name:e,metadata:r,addInitializer:s=>t._?MU("Already initialized"):i.push(OU(s||null))}),doe=(n,e)=>AU(e,loe("metadata"),n[3]),foe=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},gl=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=DU[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,aoe(i,t)),I=r.length-1;I>=0;I--)d=uoe(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,OU(l)&&(P[C]=l);return P&&RU(i,t,P),i},jU=(n,e,t)=>AU(n,typeof e!="symbol"?e+"":e,t),LU,NU,FU,zU,UU,$U,BU,HU,VU,KU,WU,GU,Is;GU=[Le],WU=[Le],KU=[Le],VU=[Le],HU=[Le],BU=[Le],$U=[Le],UU=[Le],zU=[Le],FU=[Le],NU=[Le],LU=[Le];class la{constructor(e,t){if(this.user=e,this.inferDarkMode=t,foe(Is,5,this),jU(this,"systemColorScheme",si("systemColorScheme","light")),jU(this,"disposables",new Set),typeof window>"u"||!("matchMedia"in window))return;const r=window.matchMedia("(prefers-color-scheme: dark)");r!=null&&r.matches&&this.systemColorScheme.set("dark");const i=s=>{s.matches?this.systemColorScheme.set("dark"):this.systemColorScheme.set("light")};r==null||r.addEventListener("change",i),this.disposables.add(()=>r==null?void 0:r.removeEventListener("change",i))}dispose(){this.disposables.forEach(e=>e())}updateUserPreferences(e){this.user.setUserPreferences({...this.user.userPreferences.get(),...e})}getUserPreferences(){return{id:this.getId(),name:this.getName(),locale:this.getLocale(),color:this.getColor(),animationSpeed:this.getAnimationSpeed(),isSnapMode:this.getIsSnapMode(),colorScheme:this.user.userPreferences.get().colorScheme,isDarkMode:this.getIsDarkMode(),isWrapMode:this.getIsWrapMode(),isDynamicResizeMode:this.getIsDynamicResizeMode()}}getIsDarkMode(){switch(this.user.userPreferences.get().colorScheme){case"dark":return!0;case"light":return!1;case"system":return this.systemColorScheme.get()==="dark";default:return this.inferDarkMode?this.systemColorScheme.get()==="dark":!1}}getEdgeScrollSpeed(){return this.user.userPreferences.get().edgeScrollSpeed??pl.edgeScrollSpeed}getAnimationSpeed(){return this.user.userPreferences.get().animationSpeed??pl.animationSpeed}getId(){return this.user.userPreferences.get().id}getName(){return this.user.userPreferences.get().name??pl.name}getLocale(){return this.user.userPreferences.get().locale??pl.locale}getColor(){return this.user.userPreferences.get().color??pl.color}getIsSnapMode(){return this.user.userPreferences.get().isSnapMode??pl.isSnapMode}getIsWrapMode(){return this.user.userPreferences.get().isWrapMode??pl.isWrapMode}getIsDynamicResizeMode(){return this.user.userPreferences.get().isDynamicSizeMode??pl.isDynamicSizeMode}getIsPasteAtCursorMode(){return this.user.userPreferences.get().isPasteAtCursorMode??pl.isPasteAtCursorMode}}Is=coe(),gl(Is,1,"getUserPreferences",GU,la),gl(Is,1,"getIsDarkMode",WU,la),gl(Is,1,"getEdgeScrollSpeed",KU,la),gl(Is,1,"getAnimationSpeed",VU,la),gl(Is,1,"getId",HU,la),gl(Is,1,"getName",BU,la),gl(Is,1,"getLocale",$U,la),gl(Is,1,"getColor",UU,la),gl(Is,1,"getIsSnapMode",zU,la),gl(Is,1,"getIsWrapMode",FU,la),gl(Is,1,"getIsDynamicResizeMode",NU,la),gl(Is,1,"getIsPasteAtCursorMode",LU,la),doe(Is,la);const hoe={wheel:"onWheel",pointer_down:"onPointerDown",pointer_move:"onPointerMove",long_press:"onLongPress",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick",tick:"onTick"},poe=["brushing","cropping","dragging","dragging_handle","drawing","erasing","lasering","resizing","rotating","scribble_brushing","translating"];class Ct{constructor(e,t){U(this,"performanceTracker");U(this,"id");U(this,"type");U(this,"shapeType");U(this,"initial");U(this,"children");U(this,"isLockable");U(this,"parent");U(this,"_path");U(this,"_current");U(this,"_isActive");U(this,"_currentToolIdMask",si("curent tool id mask",void 0));this.editor=e;const{id:r,children:i,initial:s,isLockable:l}=this.constructor;this.id=r,this._isActive=si("toolIsActive"+this.id,!1),this._current=si("toolState"+this.id,void 0),this._path=Le("toolPath"+this.id,()=>{const c=this.getCurrent();return this.id+(c?`.${c.getPath()}`:"")}),this.parent=t??{},this.parent?i&&s?(this.type="branch",this.initial=s,this.children=Object.fromEntries(i().map(c=>[c.id,new c(this.editor,this)])),this._current.set(this.children[this.initial])):this.type="leaf":(this.type="root",i&&s&&(this.initial=s,this.children=Object.fromEntries(i().map(c=>[c.id,new c(this.editor,this)])),this._current.set(this.children[this.initial]))),this.isLockable=l,this.performanceTracker=new HL}getPath(){return this._path.get()}getCurrent(){return this._current.get()}getIsActive(){return this._isActive.get()}transition(e,t={}){var s;const r=e.split(".");let i=this;for(let l=0;l<r.length;l++){const c=r[l],d=i.getCurrent(),h=(s=i.children)==null?void 0:s[c];if(!h)throw Error(`${i.id} - no child state exists with the id ${c}.`);if((d==null?void 0:d.id)!==h.id&&(d==null||d.exit(t,c),i._current.set(h),h.enter(t,(d==null?void 0:d.id)||"initial"),!h.getIsActive()))break;i=h}return this}handleEvent(e){var i;const t=hoe[e.name],r=this._current.__unsafe__getWithoutCapture();(i=this[t])==null||i.call(this,e),this._isActive.__unsafe__getWithoutCapture()&&r&&r===this._current.__unsafe__getWithoutCapture()&&r.handleEvent(e)}enter(e,t){var r;if(Si.measurePerformance.get()&&poe.includes(this.id)&&this.performanceTracker.start(this.id),this._isActive.set(!0),(r=this.onEnter)==null||r.call(this,e,t),this.children&&this.initial&&this.getIsActive()){const i=this.children[this.initial];this._current.set(i),i.enter(e,t)}}exit(e,t){var r,i;Si.measurePerformance.get()&&this.performanceTracker.isStarted()&&this.performanceTracker.stop(),this._isActive.set(!1),(r=this.onExit)==null||r.call(this,e,t),this.getIsActive()||(i=this.getCurrent())==null||i.exit(e,t)}getCurrentToolIdMask(){return this._currentToolIdMask.get()}setCurrentToolIdMask(e){this._currentToolIdMask.set(e)}}U(Ct,"id"),U(Ct,"initial"),U(Ct,"children"),U(Ct,"isLockable",!0);class Jk extends Ct{static children(){return[]}onKeyDown(e){var t;switch(e.code){case"KeyZ":{if(!(e.shiftKey||e.ctrlKey)){const r=this.getCurrent();r&&((t=r.getCurrent())==null?void 0:t.id)==="idle"&&this.children.zoom&&this.editor.setCurrentTool("zoom",{...e,onInteractionEnd:r.id})}break}}}}U(Jk,"id","root"),U(Jk,"initial","");var goe=Object.create,qU=Object.defineProperty,moe=Object.getOwnPropertyDescriptor,YU=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),XU=n=>{throw TypeError(n)},ZU=(n,e,t)=>e in n?qU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yoe=n=>[,,,goe((n==null?void 0:n[YU("metadata")])??null)],QU=["class","method","getter","setter","accessor","field","value","get","set"],JU=n=>n!==void 0&&typeof n!="function"?XU("Function expected"):n,voe=(n,e,t,r,i)=>({kind:QU[n],name:e,metadata:r,addInitializer:s=>t._?XU("Already initialized"):i.push(JU(s||null))}),Soe=(n,e)=>ZU(e,YU("metadata"),n[3]),xoe=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},dt=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=QU[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,moe(i,t)),I=r.length-1;I>=0;I--)d=voe(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,JU(l)&&(P[C]=l);return P&&qU(i,t,P),i},jt=(n,e,t)=>ZU(n,typeof e!="symbol"?e+"":e,t),e$,t$,n$,r$,i$,o$,s$,a$,l$,c$,u$,d$,f$,h$,p$,g$,m$,y$,v$,S$,x$,w$,b$,C$,E$,_$,P$,T$,I$,k$,R$,M$,A$,D$,O$,j$,L$,N$,F$,z$,U$,$$,B$,H$,V$,K$,W$,G$,q$,Y$,X$,Z$,Q$,J$,e6,t6,n6,r6,i6,o6,s6,a6,l6,c6,u6,d6,f6,h6,p6,g6,m6,y6,eR,lt;class it extends(eR=zne,y6=[Le],m6=[Le],g6=[Le],p6=[Le],h6=[Le],f6=[Le],d6=[Le],u6=[Le],c6=[Le],l6=[Le],a6=[Le],s6=[Le],o6=[Le],i6=[Le],r6=[Le],n6=[Le],t6=[Le],e6=[Le],J$=[Le],Q$=[Le],Z$=[Le],X$=[Le],Y$=[Le],q$=[Le],G$=[Le],W$=[Le],K$=[Le],V$=[Le],H$=[Le],B$=[Le],$$=[Le],U$=[Le],z$=[Le],F$=[Le],N$=[Le],L$=[Le],j$=[Le],O$=[Le],D$=[Le],A$=[Le],M$=[Le],R$=[Le],k$=[Le],I$=[Le],T$=[Le],P$=[Le],_$=[Le],E$=[Le],C$=[Le],b$=[Le],w$=[Le],x$=[Le],S$=[Le],v$=[Le],y$=[Le],m$=[Le],g$=[Le],p$=[Le],h$=[Le],f$=[Le],d$=[Le],u$=[Le],c$=[Le],l$=[Le],a$=[Le({isEqual:(e,t)=>e.equals(t)})],s$=[Le],o$=[Le],i$=[Le],r$=[ea],n$=[ea],t$=[ea],e$=[ea],eR){constructor({store:e,user:t,shapeUtils:r,bindingUtils:i,tools:s,getContainer:l,cameraOptions:c,initialState:d,autoFocus:h,inferDarkMode:g,options:y,isShapeHidden:v}){var re;super(),xoe(lt,5,this),jt(this,"_isShapeHiddenPredicate"),jt(this,"options"),jt(this,"contextId",nr()),jt(this,"store"),jt(this,"root"),jt(this,"disposables",new Set),jt(this,"isDisposed",!1),jt(this,"_tickManager"),jt(this,"snaps"),jt(this,"timers",Kk.forContext(this.contextId)),jt(this,"user"),jt(this,"textMeasure"),jt(this,"environment",xr),jt(this,"scribbles"),jt(this,"sideEffects"),jt(this,"edgeScrollManager"),jt(this,"focusManager"),jt(this,"getContainer"),jt(this,"shapeUtils"),jt(this,"styleProps"),jt(this,"bindingUtils"),jt(this,"history"),jt(this,"_shouldIgnoreShapeLock",!1),jt(this,"_crashingError",null),jt(this,"_isChangingStyleTimeout",-1),jt(this,"menus",Jl.forContext(this.contextId)),jt(this,"_cameraOptions",si("camera options",nz)),jt(this,"_viewportAnimation",null),jt(this,"_willSetInitialBounds",!0),jt(this,"_isLockedOnFollowingUser",si("isLockedOnFollowingUser",!1)),jt(this,"_cameraState",si("camera state","idle")),jt(this,"_cameraStateTimeoutRemaining",0),jt(this,"_currentPageShapeIds"),jt(this,"_parentIdsToChildIds"),jt(this,"animatingShapes",new Map),jt(this,"externalAssetContentHandlers",{file:null,url:null}),jt(this,"temporaryAssetPreview",new Map),jt(this,"externalContentHandlers",{text:null,files:null,embed:null,"svg-text":null,url:null}),jt(this,"inputs",{originPagePoint:new R,originScreenPoint:new R,previousPagePoint:new R,previousScreenPoint:new R,currentPagePoint:new R,currentScreenPoint:new R,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,isSpacebarPanning:!1,pointerVelocity:new R}),jt(this,"_clickManager",new s0(this)),jt(this,"_prevCursor","default"),jt(this,"_shiftKeyTimeout",-1),jt(this,"_altKeyTimeout",-1),jt(this,"_ctrlKeyTimeout",-1),jt(this,"_metaKeyTimeout",-1),jt(this,"_restoreToolId","select"),jt(this,"_pinchStart",1),jt(this,"_didPinch",!1),jt(this,"_selectedShapeIdsAtPointerDown",[]),jt(this,"_longPressTimeout",-1),jt(this,"capturedPointerId",null),jt(this,"performanceTracker"),jt(this,"performanceTrackerTimeout",-1),jt(this,"_pendingEventsForNextTick",[]),this._isShapeHiddenPredicate=v,this.options={...Hre,...y},this.store=e,this.disposables.add(this.store.dispose.bind(this.store)),this.history=new yie({store:e,annotateError:q=>{this.annotateError(q,{origin:"history.batch",willCrashApp:!0}),this.crash(q)}}),this.snaps=new Xv(this),this.disposables.add(this.timers.dispose),this._cameraOptions.set({...nz,...c}),this.user=new la(t??Jz(),g??!1),this.disposables.add(()=>this.user.dispose()),this.getContainer=l,this.textMeasure=new Zie(this),this._tickManager=new u0(this);class w extends Jk{}U(w,"initial",d??""),this.root=new w(this),this.root.children={};const C=u4(r),E={},P={},I=new Map;for(const q of C){const J=new q(this);E[q.type]=J;const ie=tN(q.props??{});P[q.type]=ie;for(const W of ie.keys())if(!I.has(W.id))I.set(W.id,W);else if(I.get(W.id)!==W)throw Error(`Multiple style props with id "${W.id}" in use. Style prop IDs must be unique.`)}this.shapeUtils=E,this.styleProps=P;const k=o4(i),L={};for(const q of k){const J=new q(this);L[q.type]=J}this.bindingUtils=L;for(const q of[...s]){if(Vl(this.root.children,q.id))throw Error(`Can't override tool with id "${q.id}"`);this.root.children[q.id]=new q(this,this.root)}this.scribbles=new xie(this);const O=(q,J)=>{let ie=null;const W=q.selectedShapeIds.filter(le=>!J.has(le));W.length!==q.selectedShapeIds.length&&(ie||(ie={...q}),ie.selectedShapeIds=W);const Y=q.erasingShapeIds.filter(le=>!J.has(le));Y.length!==q.erasingShapeIds.length&&(ie||(ie={...q}),ie.erasingShapeIds=Y),q.hoveredShapeId&&J.has(q.hoveredShapeId)&&(ie||(ie={...q}),ie.hoveredShapeId=null),q.editingShapeId&&J.has(q.editingShapeId)&&(ie||(ie={...q}),ie.editingShapeId=null);const oe=q.hintingShapeIds.filter(le=>!J.has(le));return oe.length!==q.hintingShapeIds.length&&(ie||(ie={...q}),ie.hintingShapeIds=oe),q.focusedGroupId&&J.has(q.focusedGroupId)&&(ie||(ie={...q}),ie.focusedGroupId=null),ie};this.sideEffects=this.store.sideEffects;let z=new Map;const F=new Set,H=new Set;let V=new Set;if(this.disposables.add(this.sideEffects.registerOperationCompleteHandler(()=>{var q,J,ie,W;F.clear();for(const Y of H){H.delete(Y);const oe=this.getShape(Y);if(!oe)continue;const le=this.getShapeUtil(oe),ce=(q=le.onChildrenChange)==null?void 0:q.call(le,oe);ce!=null&&ce.length&&this.updateShapes(ce)}if(V.size){const Y=V;V=new Set;for(const oe of Y){const le=this.getBindingUtil(oe);(J=le.onOperationComplete)==null||J.call(le)}}if(z.size){const Y=z;z=new Map;for(const oe of Y.values())(W=(ie=this.getBindingUtil(oe.binding)).onAfterDelete)==null||W.call(ie,oe)}this.emit("update")})),this.disposables.add(this.sideEffects.register({shape:{afterChange:(q,J)=>{var ie,W,Y,oe;for(const le of this.getBindingsInvolvingShape(J))V.add(le.type),le.fromId===J.id&&((W=(ie=this.getBindingUtil(le)).onAfterChangeFromShape)==null||W.call(ie,{binding:le,shapeBefore:q,shapeAfter:J})),le.toId===J.id&&((oe=(Y=this.getBindingUtil(le)).onAfterChangeToShape)==null||oe.call(Y,{binding:le,shapeBefore:q,shapeAfter:J}));if(q.parentId!==J.parentId){const le=ce=>{var he,ke,te,me;const Q=this.getShape(ce);if(Q)for(const Oe of this.getBindingsInvolvingShape(Q))V.add(Oe.type),Oe.fromId===Q.id&&((ke=(he=this.getBindingUtil(Oe)).onAfterChangeFromShape)==null||ke.call(he,{binding:Oe,shapeBefore:Q,shapeAfter:Q})),Oe.toId===Q.id&&((me=(te=this.getBindingUtil(Oe)).onAfterChangeToShape)==null||me.call(te,{binding:Oe,shapeBefore:Q,shapeAfter:Q}))};le(J.id),this.visitDescendants(J.id,le)}if(q.parentId!==J.parentId&&oa(J.parentId)){const le=new Set([q.id]);this.visitDescendants(q.id,ce=>{le.add(ce)});for(const ce of this.getPageStates()){if(ce.pageId===J.parentId)continue;const Q=O(ce,le);Q&&this.store.put([Q])}}q.parentId&&ia(q.parentId)&&H.add(q.parentId),J.parentId!==q.parentId&&ia(J.parentId)&&H.add(J.parentId)},beforeDelete:q=>{var Y,oe,le,ce;if(F.has(q.id))return;q.parentId&&ia(q.parentId)&&H.add(q.parentId),F.add(q.id);const J=[];for(const Q of this.getBindingsInvolvingShape(q)){V.add(Q.type),J.push(Q.id);const he=this.getBindingUtil(Q);Q.fromId===q.id?((Y=he.onBeforeIsolateToShape)==null||Y.call(he,{binding:Q,removedShape:q}),(oe=he.onBeforeDeleteFromShape)==null||oe.call(he,{binding:Q,shape:q})):((le=he.onBeforeIsolateFromShape)==null||le.call(he,{binding:Q,removedShape:q}),(ce=he.onBeforeDeleteToShape)==null||ce.call(he,{binding:Q,shape:q}))}J.length&&this.deleteBindings(J);const ie=new Set([q.id]),W=on(this.getPageStates().map(Q=>O(Q,ie)));W.length&&this.store.put(W)}},binding:{beforeCreate:q=>{var ie,W;const J=(W=(ie=this.getBindingUtil(q)).onBeforeCreate)==null?void 0:W.call(ie,{binding:q});return J||q},afterCreate:q=>{var J,ie;V.add(q.type),(ie=(J=this.getBindingUtil(q)).onAfterCreate)==null||ie.call(J,{binding:q})},beforeChange:(q,J)=>{var W,Y;const ie=(Y=(W=this.getBindingUtil(J)).onBeforeChange)==null?void 0:Y.call(W,{bindingBefore:q,bindingAfter:J});return ie||J},afterChange:(q,J)=>{var ie,W;V.add(J.type),(W=(ie=this.getBindingUtil(J)).onAfterChange)==null||W.call(ie,{bindingBefore:q,bindingAfter:J})},beforeDelete:q=>{var J,ie;(ie=(J=this.getBindingUtil(q)).onBeforeDelete)==null||ie.call(J,{binding:q})},afterDelete:q=>{var J,ie;(ie=(J=this.getBindingUtil(q)).onAfterDelete)==null||ie.call(J,{binding:q}),V.add(q.type)}},page:{afterCreate:q=>{const J=Gl.createId(q.id),ie=dl.createId(q.id);this.store.has(J)||this.store.put([Gl.create({id:J})]),this.store.has(ie)||this.store.put([dl.create({id:ie,pageId:q.id})])},afterDelete:(q,J)=>{var Y,oe;if(((Y=this.getInstanceState())==null?void 0:Y.currentPageId)===q.id){const le=(oe=this.getPages().find(ce=>ce.id!==q.id))==null?void 0:oe.id;le?this.store.put([{...this.getInstanceState(),currentPageId:le}]):J==="user"&&this.store.ensureStoreIsUsable()}const ie=Gl.createId(q.id),W=dl.createId(q.id);this.store.remove([ie,W])}},instance:{afterChange:(q,J,ie)=>{var W;if(!this.store.has(J.currentPageId)){const Y=this.store.has(q.currentPageId)?q.currentPageId:(W=this.getPages()[0])==null?void 0:W.id;Y?this.store.update(J.id,oe=>({...oe,currentPageId:Y})):ie==="user"&&this.store.ensureStoreIsUsable()}}},instance_page_state:{afterChange:(q,J)=>{if((q==null?void 0:q.selectedShapeIds)!==(J==null?void 0:J.selectedShapeIds)){const ie=J.selectedShapeIds.filter(Y=>{var le,ce;let oe=(le=this.getShape(Y))==null?void 0:le.parentId;for(;ia(oe);){if(J.selectedShapeIds.includes(oe))return!1;oe=(ce=this.getShape(oe))==null?void 0:ce.parentId}return!0});let W=null;if(ie.length>0){const Y=this.findCommonAncestor(on(ie.map(oe=>this.getShape(oe))),oe=>this.isShapeOfType(oe,"group"));Y&&(W=Y)}else J!=null&&J.focusedGroupId&&(W=J.focusedGroupId);(ie.length!==J.selectedShapeIds.length||W!==J.focusedGroupId)&&this.store.put([{...J,selectedShapeIds:ie,focusedGroupId:W??null}])}}}})),this._currentPageShapeIds=iie(this.store,()=>this.getCurrentPageId()),this._parentIdsToChildIds=rie(this.store),this.disposables.add(this.store.listen(q=>{this.emit("change",q)})),this.disposables.add(this.history.dispose),this.run(()=>{this.store.ensureStoreIsUsable(),this._updateCurrentPageState({editingShapeId:null,hoveredShapeId:null,erasingShapeIds:[]})},{history:"ignore"}),d&&this.root.children[d]===void 0)throw Error(`No state found for initialState "${d}".`);if(this.root.enter(void 0,"initial"),this.edgeScrollManager=new hie(this),this.focusManager=new pie(this,h),this.disposables.add(this.focusManager.dispose.bind(this.focusManager)),this.getInstanceState().followingUserId&&this.stopFollowingUser(),this.on("tick",this._flushEventsForTick),this.timers.requestAnimationFrame(()=>{this._tickManager.start()}),this.performanceTracker=new HL,(re=this.store.props.collaboration)!=null&&re.mode){const q=this.store.props.collaboration.mode;this.disposables.add(Kl("update collaboration mode",()=>{this.store.put([{...this.getInstanceState(),isReadonly:q.get()==="readonly"}])}))}}getIsShapeHiddenCache(){return this._isShapeHiddenPredicate?this.store.createComputedCache("isShapeHidden",e=>this.findShapeAncestor(e,r=>this.isShapeHidden(r))?!0:this._isShapeHiddenPredicate(e,this)??!1):null}isShapeHidden(e){return this._isShapeHiddenPredicate?!!this.getIsShapeHiddenCache().get(typeof e=="string"?e:e.id):!1}dispose(){this.disposables.forEach(e=>e()),this.disposables.clear(),this.isDisposed=!0}getShapeUtil(e){const t=typeof e=="string"?e:e.type,r=Wo(this.shapeUtils,t);return rn(r,`No shape util found for type "${t}"`),r}getBindingUtil(e){const t=typeof e=="string"?e:e.type,r=Wo(this.bindingUtils,t);return rn(r,`No binding util found for type "${t}"`),r}undo(){return this._flushEventsForTick(0),this.complete(),this.history.undo(),this}getCanUndo(){return this.history.getNumUndos()>0}redo(){return this._flushEventsForTick(0),this.complete(),this.history.redo(),this}clearHistory(){return this.history.clear(),this}getCanRedo(){return this.history.getNumRedos()>0}mark(e){return console.warn(typeof e=="string"?`[tldraw] \`editor.history.mark("${e}")\` is deprecated. Please use \`const myMarkId = editor.markHistoryStoppingPoint()\` instead.`:"[tldraw] `editor.mark()` is deprecated. Use `editor.markHistoryStoppingPoint()` instead."),this.history._mark(e??nr()),this}markHistoryStoppingPoint(e){const t=`[${e??"stop"}]_${nr()}`;return this.history._mark(t),t}getMarkIdMatching(e){return this.history.getMarkIdMatching(e)}squashToMark(e){return this.history.squashToMark(e),this}bail(){return this.history.bail(),this}bailToMark(e){return this.history.bailToMark(e),this}run(e,t){const r=this._shouldIgnoreShapeLock;this._shouldIgnoreShapeLock=(t==null?void 0:t.ignoreShapeLock)??r;try{this.history.batch(e,t)}finally{this._shouldIgnoreShapeLock=r}return this}batch(e,t){return this.run(e,t)}annotateError(e,{origin:t,willCrashApp:r,tags:i,extras:s}){const l=this.createErrorAnnotations(t,r);return oP(e,{tags:{...l.tags,...i},extras:{...l.extras,...s}}),r&&this.store.markAsPossiblyCorrupted(),this}createErrorAnnotations(e,t){try{const r=this.getEditingShapeId();return{tags:{origin:e,willCrashApp:t},extras:{activeStateNode:this.root.getPath(),selectedShapes:this.getSelectedShapes(),editingShape:r?this.getShape(r):void 0,inputs:this.inputs}}}catch{return{tags:{origin:e,willCrashApp:t},extras:{}}}}getCrashingError(){return this._crashingError}crash(e){return this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:e}),this}getPath(){return this.root.getPath().split("root.")[1]}isIn(e){const t=e.split(".").reverse();let r=this.root;for(;t.length>0;){const i=t.pop();if(!i)return!0;const s=r.getCurrent();if((s==null?void 0:s.id)===i){if(t.length===0)return!0;r=s;continue}else return!1}return!1}isInAny(...e){return e.some(t=>this.isIn(t))}setCurrentTool(e,t={}){return this.root.transition(e,t),this}getCurrentTool(){return this.root.getCurrent()}getCurrentToolId(){const e=this.getCurrentTool();return e?e.getCurrentToolIdMask()??e.id:""}getStateDescendant(e){var i;const t=e.split(".").reverse();let r=this.root;for(;t.length>0;){const s=t.pop();if(!s)return r;const l=(i=r.children)==null?void 0:i[s];if(!l)return;r=l}return r}getDocumentSettings(){return this.store.get(UP)}updateDocumentSettings(e){return this.run(()=>{this.store.put([{...this.getDocumentSettings(),...e}])},{history:"ignore"}),this}getInstanceState(){return this.store.get(Xo)}updateInstanceState(e,t){return this._updateInstanceState(e,{history:"ignore",...t}),e.isChangingStyle!==void 0&&(clearTimeout(this._isChangingStyleTimeout),e.isChangingStyle===!0&&(this._isChangingStyleTimeout=this.timers.setTimeout(()=>{this._updateInstanceState({isChangingStyle:!1},{history:"ignore"})},2e3))),this}_updateInstanceState(e,t){this.run(()=>{this.store.put([{...this.getInstanceState(),...e}])},t)}getOpenMenus(){return this.menus.getOpenMenus()}addOpenMenu(e){return this.menus.addOpenMenu(e),this}deleteOpenMenu(e){return this.menus.deleteOpenMenu(e),this}clearOpenMenus(){return this.menus.clearOpenMenus(),this}getIsMenuOpen(){return this.menus.hasAnyOpenMenus()}setCursor(e){return this.updateInstanceState({cursor:{...this.getInstanceState().cursor,...e}}),this}getPageStates(){return this._getPageStatesQuery().get()}_getPageStatesQuery(){return this.store.query.records("instance_page_state")}getCurrentPageState(){return this.store.get(this._getCurrentPageStateId())}_getCurrentPageStateId(){return dl.createId(this.getCurrentPageId())}updateCurrentPageState(e){return this._updateCurrentPageState(e),this}_updateCurrentPageState(e){this.store.update(e.id??this.getCurrentPageState().id,t=>({...t,...e}))}getSelectedShapeIds(){return this.getCurrentPageState().selectedShapeIds}getSelectedShapes(){const{selectedShapeIds:e}=this.getCurrentPageState();return on(e.map(t=>this.store.get(t)))}setSelectedShapes(e){return this.run(()=>{const t=e.map(s=>typeof s=="string"?s:s.id),{selectedShapeIds:r}=this.getCurrentPageState(),i=new Set(r);if(t.length===i.size&&t.every(s=>i.has(s)))return null;this.store.put([{...this.getCurrentPageState(),selectedShapeIds:t}])},{history:"record-preserveRedoStack"})}isAncestorSelected(e){const t=typeof e=="string"?e:(e==null?void 0:e.id)??null,r=this.getShape(t);if(!r)return!1;const i=this.getSelectedShapeIds();return!!this.findShapeAncestor(r,s=>i.includes(s.id))}select(...e){const t=typeof e[0]=="string"?e:e.map(r=>r.id);return this.setSelectedShapes(t),this}deselect(...e){const t=typeof e[0]=="string"?e:e.map(i=>i.id),r=this.getSelectedShapeIds();return r.length>0&&t.length>0&&this.setSelectedShapes(r.filter(i=>!t.includes(i))),this}selectAll(){const e=this.getSortedChildIdsForParent(this.getCurrentPageId());return e.length<=0?this:(this.setSelectedShapes(this._getUnlockedShapeIds(e)),this)}selectNone(){return this.getSelectedShapeIds().length>0&&this.setSelectedShapes([]),this}getOnlySelectedShapeId(){var e;return((e=this.getOnlySelectedShape())==null?void 0:e.id)??null}getOnlySelectedShape(){const e=this.getSelectedShapes();return e.length===1?e[0]:null}getShapesPageBounds(e){const t=on(e.map(r=>this.getShapePageBounds(r)));return t.length===0?null:Xe.Common(t)}getSelectionPageBounds(){return this.getShapesPageBounds(this.getSelectedShapeIds())}getShapesSharedRotation(e){let t=!1,r=0;for(let i=0,s=e.length;i<s;i++){const l=this.getShapePageTransform(e[i]);if(l)if(t){if(l.rotation()!==r)return 0}else t=!0,r=l.rotation()}return r}getSelectionRotation(){return this.getShapesSharedRotation(this.getSelectedShapeIds())}getShapesRotatedPageBounds(e){if(e.length===0)return;const t=this.getShapesSharedRotation(e);if(t===0)return this.getShapesPageBounds(e)??void 0;if(e.length===1){const i=this.getShapeGeometry(e[0]).bounds.clone(),s=this.getShapePageTransform(e[0]);return i.point=s.applyToPoint(i.point),i}const r=Xe.FromPoints(e.flatMap(i=>{const s=this.getShapePageTransform(i);return s?s.applyToPoints(this.getShapeGeometry(i).bounds.corners):[]}).map(i=>i.rot(-t)));return r.point=r.point.rot(t),r}getSelectionRotatedPageBounds(){return this.getShapesRotatedPageBounds(this.getSelectedShapeIds())}getSelectionRotatedScreenBounds(){const e=this.getSelectionRotatedPageBounds();if(!e)return;const{x:t,y:r}=this.pageToScreen(e.point),i=this.getZoomLevel();return new Xe(t,r,e.width*i,e.height*i)}getFocusedGroupId(){return this.getCurrentPageState().focusedGroupId??this.getCurrentPageId()}getFocusedGroup(){const e=this.getFocusedGroupId();return e?this.getShape(e):void 0}setFocusedGroup(e){const t=typeof e=="string"?e:(e==null?void 0:e.id)??null;if(t!==null){const r=this.getShape(t);if(!r)throw Error(`Editor.setFocusedGroup: Shape with id ${t} does not exist`);if(!this.isShapeOfType(r,"group"))throw Error(`Editor.setFocusedGroup: Cannot set focused group to shape of type ${r.type}`)}return t===this.getFocusedGroupId()?this:this.run(()=>{this.store.update(this.getCurrentPageState().id,r=>({...r,focusedGroupId:t}))},{history:"record-preserveRedoStack"})}popFocusedGroupId(){const e=this.getFocusedGroup();if(e){const t=this.findShapeAncestor(e,r=>this.isShapeOfType(r,"group"));this.setFocusedGroup((t==null?void 0:t.id)??null),this.select(e.id)}else this.setFocusedGroup(null),this.selectNone();return this}getEditingShapeId(){return this.getCurrentPageState().editingShapeId}getEditingShape(){const e=this.getEditingShapeId();return e?this.getShape(e):void 0}setEditingShape(e){const t=typeof e=="string"?e:(e==null?void 0:e.id)??null;if(t!==this.getEditingShapeId()){if(t){const r=this.getShape(t);if(r&&this.getShapeUtil(r).canEdit(r))return this.run(()=>{this._updateCurrentPageState({editingShapeId:t})},{history:"ignore"}),this}this.run(()=>{this._updateCurrentPageState({editingShapeId:null})},{history:"ignore"})}return this}getHoveredShapeId(){return this.getCurrentPageState().hoveredShapeId}getHoveredShape(){const e=this.getHoveredShapeId();return e?this.getShape(e):void 0}setHoveredShape(e){const t=typeof e=="string"?e:(e==null?void 0:e.id)??null;return t===this.getHoveredShapeId()?this:(this.run(()=>{this.updateCurrentPageState({hoveredShapeId:t})},{history:"ignore"}),this)}getHintingShapeIds(){return this.getCurrentPageState().hintingShapeIds}getHintingShape(){const e=this.getHintingShapeIds();return on(e.map(t=>this.getShape(t)))}setHintingShapes(e){const t=typeof e[0]=="string"?e:e.map(r=>r.id);return this.run(()=>{this._updateCurrentPageState({hintingShapeIds:iP(t)})},{history:"ignore"}),this}getErasingShapeIds(){return this.getCurrentPageState().erasingShapeIds}getErasingShapes(){const e=this.getErasingShapeIds();return on(e.map(t=>this.getShape(t)))}setErasingShapes(e){const t=typeof e[0]=="string"?e:e.map(i=>i.id);t.sort();const r=this.getErasingShapeIds();return this.run(()=>{if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i]){this._updateCurrentPageState({erasingShapeIds:t});break}}else this._updateCurrentPageState({erasingShapeIds:t})},{history:"ignore"}),this}getCroppingShapeId(){return this.getCurrentPageState().croppingShapeId}setCroppingShape(e){const t=typeof e=="string"?e:(e==null?void 0:e.id)??null;return t!==this.getCroppingShapeId()&&this.run(()=>{if(!t)this.updateCurrentPageState({croppingShapeId:null});else{const r=this.getShape(t),i=this.getShapeUtil(r);r&&i.canCrop(r)&&this.updateCurrentPageState({croppingShapeId:t})}},{history:"ignore"}),this}_unsafe_getCameraId(){return Gl.createId(this.getCurrentPageId())}getCamera(){const e=this.store.get(this._unsafe_getCameraId());if(this._isLockedOnFollowingUser.get()){const t=this.getCameraForFollowing();if(t)return{...e,...t}}return e}getViewportPageBoundsForFollowing(){const e=this.getInstanceState().followingUserId;if(!e)return null;const t=this.getCollaborators().find(y=>y.userId===e);if(!t||!t.camera||!t.screenBounds)return null;const{w:r,h:i}=t.screenBounds,{x:s,y:l,z:c}=t.camera,d=new Xe(-s,-l,r/c,i/c),h=this.getViewportScreenBounds().clone(),g=h.width/h.height;return h.width=d.width,h.height=h.width/g,h.height<d.height&&(h.height=d.height,h.width=h.height*g),h.center=d.center,h}getCameraForFollowing(){const e=this.getViewportPageBoundsForFollowing();return e?{x:-e.x,y:-e.y,z:this.getViewportScreenBounds().w/e.width}:null}getZoomLevel(){return this.getCamera().z}getInitialZoom(){const e=this.getCameraOptions();if(!e.constraints||e.constraints.initialZoom==="default")return 1;const{zx:t,zy:r}=x6(this,e);switch(e.constraints.initialZoom){case"fit-min":return Math.max(t,r);case"fit-max":return Math.min(t,r);case"fit-x":return t;case"fit-y":return r;case"fit-min-100":return Math.min(1,Math.max(t,r));case"fit-max-100":return Math.min(1,Math.min(t,r));case"fit-x-100":return Math.min(1,t);case"fit-y-100":return Math.min(1,r);default:throw Bi(e.constraints.initialZoom)}}getBaseZoom(){const e=this.getCameraOptions();if(!e.constraints||e.constraints.baseZoom==="default")return 1;const{zx:t,zy:r}=x6(this,e);switch(e.constraints.baseZoom){case"fit-min":return Math.max(t,r);case"fit-max":return Math.min(t,r);case"fit-x":return t;case"fit-y":return r;case"fit-min-100":return Math.min(1,Math.max(t,r));case"fit-max-100":return Math.min(1,Math.min(t,r));case"fit-x-100":return Math.min(1,t);case"fit-y-100":return Math.min(1,r);default:throw Bi(e.constraints.baseZoom)}}getCameraOptions(){return this._cameraOptions.get()}setCameraOptions(e){var r;const t=Lr({...this._cameraOptions.__unsafe__getWithoutCapture(),...e});return((r=t.zoomSteps)==null?void 0:r.length)<1&&(t.zoomSteps=[1]),this._cameraOptions.set(t),this.setCamera(this.getCamera()),this}getConstrainedCamera(e,t){const r=this.getCamera();let{x:i,y:s,z:l=r.z}=e;if(!(t!=null&&t.force)){const c=this.getCameraOptions(),d=c.zoomSteps[0],h=yo(c.zoomSteps),g=this.getViewportScreenBounds();if(c.constraints){const{constraints:y}=c,v=Math.min(y.padding.y,g.w/2),w=Math.min(y.padding.x,g.h/2),C=Xe.From(c.constraints.bounds),E=(g.w-w*2)/C.w,P=(g.h-v*2)/C.h,I=this.getBaseZoom(),k=h*I,L=d*I;if(t!=null&&t.reset&&(l=this.getInitialZoom()),l<L||l>k){const{x:ie,y:W,z:Y}=r,oe=-ie+g.w/Y/2,le=-W+g.h/Y/2;l=Co(l,L,k);const ce=-ie+g.w/l/2,Q=-W+g.h/l/2;i=ie+ce-oe,s=W+Q-le}const O=w/l-C.x,z=v/l-C.y,F=(g.w-w*2)/l-C.w,H=(g.h-v*2)/l-C.h,V=O+F*y.origin.x,re=z+H*y.origin.y,q=typeof y.behavior=="string"?y.behavior:y.behavior.x,J=typeof y.behavior=="string"?y.behavior:y.behavior.y;if(t!=null&&t.reset)i=V,s=re;else{switch(q){case"fixed":{i=V;break}case"contain":{l<E?i=V:i=Co(i,O+F,O);break}case"inside":{l<E?i=Co(i,O,(g.w-w)/l-C.w):i=Co(i,O+F,O);break}case"outside":{i=Co(i,w/l-C.w,(g.w-w)/l);break}case"free":break;default:throw Bi(q)}switch(J){case"fixed":{s=re;break}case"contain":{l<P?s=re:s=Co(s,z+H,z);break}case"inside":{l<P?s=Co(s,z,(g.h-v)/l-C.h):s=Co(s,z+H,z);break}case"outside":{s=Co(s,v/l-C.h,(g.h-v)/l);break}case"free":break;default:throw Bi(J)}}}else if(l>h||l<d){const{x:y,y:v,z:w}=r;l=Co(l,d,h),i=y+(-y+g.w/l/2)-(-y+g.w/w/2),s=v+(-v+g.h/l/2)-(-v+g.h/w/2)}}return{x:i,y:s,z:l}}_setCamera(e,t){const r=this.getCamera(),{x:i,y:s,z:l}=this.getConstrainedCamera(e,t);return r.x===i&&r.y===s&&r.z===l?this:(cl(()=>{const c={...r,x:i,y:s,z:l};this.run(()=>{this.store.put([c])},{history:"ignore"});const{currentScreenPoint:d,currentPagePoint:h}=this.inputs,{screenBounds:g}=this.store.unsafeGetWithoutCapture(Xo);if(d.x/l-i!==h.x||d.y/l-s!==h.y){const y={type:"pointer",target:"canvas",name:"pointer_move",point:R.AddXY(d,g.x,g.y),pointerId:rz.CAMERA_MOVE,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,shiftKey:this.inputs.shiftKey,metaKey:this.inputs.metaKey,accelKey:Qo(this.inputs),button:0,isPen:this.getInstanceState().isPenMode??!1};t!=null&&t.immediate?this._flushEventForTick(y):this.dispatch(y)}this._tickCameraState()}),this)}setCamera(e,t){const{isLocked:r}=this._cameraOptions.__unsafe__getWithoutCapture();if(r&&!(t!=null&&t.force))return this;this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser();const i=R.Cast(e);Number.isFinite(i.x)||(i.x=0),Number.isFinite(i.y)||(i.y=0),(i.z===void 0||!Number.isFinite(i.z))&&(e.z=this.getZoomLevel());const s=this.getConstrainedCamera(i,t);if(t!=null&&t.animation){const{width:l,height:c}=this.getViewportScreenBounds();this._animateToViewport(new Xe(-s.x,-s.y,l/s.z,c/s.z),t)}else this._setCamera(s,{...t,force:!0});return this}centerOnPoint(e,t){const{isLocked:r}=this.getCameraOptions();if(r&&!(t!=null&&t.force))return this;const{width:i,height:s}=this.getViewportPageBounds();return this.setCamera(new R(-(e.x-i/2),-(e.y-s/2),this.getCamera().z),t),this}zoomToFit(e){const t=[...this.getCurrentPageShapeIds()];if(t.length<=0)return this;const r=Xe.Common(on(t.map(i=>this.getShapePageBounds(i))));return this.zoomToBounds(r,e),this}resetZoom(e=this.getViewportScreenCenter(),t){const{isLocked:r,constraints:i}=this.getCameraOptions();if(r&&!(t!=null&&t.force))return this;const s=this.getCamera(),{x:l,y:c,z:d}=s,{x:h,y:g}=e;let y=1;if(i){const v=this.getInitialZoom();d!==v&&(y=v)}return this.setCamera(new R(l+(h/y-h)-(h/d-h),c+(g/y-g)-(g/d-g),y),t),this}zoomIn(e=this.getViewportScreenCenter(),t){const{isLocked:r}=this.getCameraOptions();if(r&&!(t!=null&&t.force))return this;const{x:i,y:s,z:l}=this.getCamera(),{zoomSteps:c}=this.getCameraOptions();if(c!==null&&c.length>1){const d=this.getBaseZoom();let h=yo(c)*d;for(let g=1;g<c.length;g++){const y=c[g-1]*d,v=c[g]*d;if(!(v-l<=(v-y)/2)){h=v;break}}this.setCamera(new R(i+(e.x/h-e.x)-(e.x/l-e.x),s+(e.y/h-e.y)-(e.y/l-e.y),h),t)}return this}zoomOut(e=this.getViewportScreenCenter(),t){const{isLocked:r}=this.getCameraOptions();if(r&&!(t!=null&&t.force))return this;const{zoomSteps:i}=this.getCameraOptions();if(i!==null&&i.length>1){const s=this.getBaseZoom(),{x:l,y:c,z:d}=this.getCamera();let h=i[0]*s;for(let g=i.length-1;g>0;g--){const y=i[g-1]*s,v=i[g]*s;if(!(v-d>=(v-y)/2)){h=y;break}}this.setCamera(new R(l+(e.x/h-e.x)-(e.x/d-e.x),c+(e.y/h-e.y)-(e.y/d-e.y),h),t)}return this}zoomToSelection(e){const{isLocked:t}=this.getCameraOptions();if(t&&!(e!=null&&e.force))return this;const r=this.getSelectionPageBounds();return r&&this.zoomToBounds(r,{targetZoom:Math.max(1,this.getZoomLevel()),...e}),this}zoomToBounds(e,t){const r=this._cameraOptions.__unsafe__getWithoutCapture();if(r.isLocked&&!(t!=null&&t.force))return this;const i=this.getViewportScreenBounds(),s=(t==null?void 0:t.inset)??Math.min(mee,i.width*.28),l=this.getBaseZoom(),c=r.zoomSteps[0],d=yo(r.zoomSteps);let h=Co(Math.min((i.width-s)/e.w,(i.height-s)/e.h),c*l,d*l);return(t==null?void 0:t.targetZoom)!==void 0&&(h=Math.min(t.targetZoom,h)),this.setCamera(new R(-e.x+(i.width-e.w*h)/2/h,-e.y+(i.height-e.h*h)/2/h,h),t),this}stopCameraAnimation(){return this.emit("stop-camera-animation"),this}_animateViewport(e){if(!this._viewportAnimation)return;this._viewportAnimation.elapsed+=e;const{elapsed:t,easing:r,duration:i,start:s,end:l}=this._viewportAnimation;if(t>i){this.off("tick",this._animateViewport),this._viewportAnimation=null,this._setCamera(new R(-l.x,-l.y,this.getViewportScreenBounds().width/l.width));return}const c=i-t,d=r(1-c/i),h=s.minX+(l.minX-s.minX)*d,g=s.minY+(l.minY-s.minY)*d,y=s.maxX+(l.maxX-s.maxX)*d;this._setCamera(new R(-h,-g,this.getViewportScreenBounds().width/(y-h)),{force:!0})}_animateToViewport(e,t={animation:dk}){const{animation:r,...i}=t;if(!r)return;const{duration:s=0,easing:l=ao.easeInOutCubic}=r,c=this.user.getAnimationSpeed(),d=this.getViewportPageBounds();return this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser(),s===0||c===0?this._setCamera(new R(-e.x,-e.y,this.getViewportScreenBounds().width/e.width),{...i}):(this._viewportAnimation={elapsed:0,duration:s/c,easing:l,start:d.clone(),end:e.clone()},this.once("stop-camera-animation",()=>{this.off("tick",this._animateViewport),this._viewportAnimation=null}),this.on("tick",this._animateViewport),this)}slideCamera(e={}){const{isLocked:t}=this.getCameraOptions();if(t&&!(e!=null&&e.force))return this;if(this.user.getAnimationSpeed()===0)return this;this.stopCameraAnimation();const{speed:i,friction:s=this.options.cameraSlideFriction,direction:l,speedThreshold:c=.01}=e;let d=Math.min(i,1);const h=()=>{this.off("tick",g),this.off("stop-camera-animation",h)};this.once("stop-camera-animation",h);const g=y=>{const{x:v,y:w,z:C}=this.getCamera(),E=R.Mul(l,d*y/C);d*=1-s,d<c?h():this._setCamera(new R(v+E.x,w+E.y,C))};return this.on("tick",g),this}zoomToUser(e,t={animation:{duration:500}}){const r=this.getCollaborators().find(s=>s.userId===e);if(!r)return this;const i=r.cursor;return i?(this.run(()=>{this.getInstanceState().followingUserId!==null&&this.stopFollowingUser();const s=r.currentPageId===this.getCurrentPageId();s||this.setCurrentPage(r.currentPageId),t&&t.animation&&!s&&(t.animation=void 0),this.centerOnPoint(i,t);const{highlightedUserIds:l}=this.getInstanceState();this.updateInstanceState({highlightedUserIds:[...l,e]}),this.timers.setTimeout(()=>{const c=[...this.getInstanceState().highlightedUserIds],d=c.indexOf(e);d<0||(c.splice(d,1),this.updateInstanceState({highlightedUserIds:c}))},this.options.collaboratorIdleTimeoutMs)}),this):this}updateViewportScreenBounds(e,t=!1){if(e instanceof HTMLElement){const c=e.getBoundingClientRect();e=new Xe(c.left||c.x,c.top||c.y,Math.max(c.width,1),Math.max(c.height,1))}else e.width=Math.max(e.width,1),e.height=Math.max(e.height,1);const r=[e.minY!==0,!gf(document.body.scrollWidth,e.maxX,1),!gf(document.body.scrollHeight,e.maxY,1),e.minX!==0],{_willSetInitialBounds:i}=this;this._willSetInitialBounds=!1;const{screenBounds:s,insets:l}=this.getInstanceState();if(e.equals(s)&&r.every((c,d)=>c===l[d]))return this;if(i)this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this.setCamera(this.getCamera());else if(t&&!this.getInstanceState().followingUserId){const c=this.getViewportPageBounds().center;this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this.centerOnPoint(c)}else this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this._setCamera(R.From({...this.getCamera()}));return this._tickCameraState(),this}getViewportScreenBounds(){const{x:e,y:t,w:r,h:i}=this.getInstanceState().screenBounds;return new Xe(e,t,r,i)}getViewportScreenCenter(){const e=this.getViewportScreenBounds();return new R(e.midX-e.minX,e.midY-e.minY)}getViewportPageBounds(){const{w:e,h:t}=this.getViewportScreenBounds(),{x:r,y:i,z:s}=this.getCamera();return new Xe(-r,-i,e/s,t/s)}screenToPage(e){const{screenBounds:t}=this.store.unsafeGetWithoutCapture(Xo),{x:r,y:i,z:s=1}=this.getCamera();return new R((e.x-t.x)/s-r,(e.y-t.y)/s-i,e.z??.5)}pageToScreen(e){const{screenBounds:t}=this.store.unsafeGetWithoutCapture(Xo),{x:r,y:i,z:s=1}=this.getCamera();return new R((e.x+r)*s+t.x,(e.y+i)*s+t.y,e.z??.5)}pageToViewport(e){const{x:t,y:r,z:i=1}=this.getCamera();return new R((e.x+t)*i,(e.y+r)*i,e.z??.5)}_getCollaboratorsQuery(){return this.store.query.records("instance_presence",()=>({userId:{neq:this.user.getId()}}))}getCollaborators(){const e=this._getCollaboratorsQuery().get();return e.length?[...new Set(e.map(r=>r.userId))].sort().map(r=>YY(e.filter(s=>s.userId===r),s=>s.lastActivityTimestamp??0)):Bu}getCollaboratorsOnCurrentPage(){const e=this.getCurrentPageId();return this.getCollaborators().filter(t=>t.currentPageId===e)}startFollowingUser(e){this.stopFollowingUser();const t=this._getCollaboratorsQuery().get().filter(s=>s.userId===e);if(!t.length)return console.warn("User not found"),this;const r=this.user.getId();if(r||console.warn("You should set the userId for the current instance before following a user"),t.some(s=>s.followingUserId===r))return this;const i=Le("latestLeaderPresence",()=>this.getCollaborators().find(s=>s.userId===e));return cl(()=>{this.updateInstanceState({followingUserId:e},{history:"ignore"});const s=Kl("update current page",()=>{const d=i.get();if(!d){this.stopFollowingUser();return}d.currentPageId!==this.getCurrentPageId()&&this.getPage(d.currentPageId)&&this.run(()=>{this.store.put([{...this.getInstanceState(),currentPageId:d.currentPageId}]),this._isLockedOnFollowingUser.set(!0)},{history:"ignore"})}),l=()=>{s(),this._isLockedOnFollowingUser.set(!1),this.off("frame",c),this.off("stop-following",l)},c=()=>{if(!i.get()){this.stopFollowingUser();return}if(this._isLockedOnFollowingUser.get())return;const h=this.user.getAnimationSpeed();if(h===0){this._isLockedOnFollowingUser.set(!0);return}const g=this.getViewportPageBoundsForFollowing();if(!g){this.stopFollowingUser();return}const y=this.getViewportPageBounds(),v=Math.abs(g.minX-y.minX)+Math.abs(g.maxX-y.maxX),w=Math.abs(g.minY-y.minY)+Math.abs(g.maxY-y.maxY);if(v<this.options.followChaseViewportSnap&&w<this.options.followChaseViewportSnap){this._isLockedOnFollowingUser.set(!0);return}const C=Co(h*.5,.1,.8),E=new Xe(Rn(y.minX,g.minX,C),Rn(y.minY,g.minY,C),Rn(y.width,g.width,C),Rn(y.height,g.height,C)),P=new R(-E.x,-E.y,this.getViewportScreenBounds().width/E.width);this.stopCameraAnimation(),this._setCamera(P)};this.once("stop-following",l),this.addListener("frame",c),c()}),this}stopFollowingUser(){return this.run(()=>{this.store.put([this.getCamera()]),this._isLockedOnFollowingUser.set(!1),this.updateInstanceState({followingUserId:null}),this.emit("stop-following")},{history:"ignore"}),this}getUnorderedRenderingShapes(e){const t=[];let r=this.options.maxShapesPerPage*2,i=this.options.maxShapesPerPage;const s=this.getErasingShapeIds(),l=(d,h,g)=>{const y=this.getShape(d);if(!y||this.isShapeHidden(y))return;h*=y.opacity;let v=!1;const w=this.getShapeUtil(y);e&&(v=!g&&s.includes(d),v&&(h*=.32)),t.push({id:d,shape:y,util:w,index:r,backgroundIndex:i,opacity:h}),r+=1,i+=1;const C=this.getSortedChildIdsForParent(d);if(!C.length)return;let E=null;w.providesBackgroundForChildren(y)&&(E=i,i=r,r+=this.options.maxShapesPerPage);for(const P of C)l(P,h,g||v);E!==null&&(i=E)},c=e?[this.getCurrentPage()]:this.getPages();for(const d of c)for(const h of this.getSortedChildIdsForParent(d.id))l(h,1,!1);return t}_decayCameraStateTimeout(e){this._cameraStateTimeoutRemaining-=e,!(this._cameraStateTimeoutRemaining>0)&&(this.off("tick",this._decayCameraStateTimeout),this._cameraState.set("idle"))}_tickCameraState(){this._cameraStateTimeoutRemaining=this.options.cameraMovingTimeoutMs,this._cameraState.__unsafe__getWithoutCapture()==="idle"&&(this._cameraState.set("moving"),this.on("tick",this._decayCameraStateTimeout))}getCameraState(){return this._cameraState.get()}getRenderingShapes(){return this.getUnorderedRenderingShapes(!0).sort(_X)}_getAllPagesQuery(){return this.store.query.records("page")}getPages(){return Array.from(this._getAllPagesQuery().get()).sort(Go)}getCurrentPage(){return this.getPage(this.getCurrentPageId())}getCurrentPageId(){return this.getInstanceState().currentPageId}getPage(e){return this.store.get(typeof e=="string"?e:e.id)}getCurrentPageShapeIds(){return this._currentPageShapeIds.get()}getCurrentPageShapeIdsSorted(){return Array.from(this.getCurrentPageShapeIds()).sort()}getPageShapeIds(e){const t=typeof e=="string"?e:e.id,r=this.store.query.exec("shape",{parentId:{eq:t}});return this.getShapeAndDescendantIds(r.map(i=>i.id))}setCurrentPage(e){const t=typeof e=="string"?e:e.id;return this.store.has(t)?(this.stopFollowingUser(),this.complete(),this.run(()=>{this.store.put([{...this.getInstanceState(),currentPageId:t}]),this.setCamera(this.getCamera())},{history:"record-preserveRedoStack"})):(console.error("Tried to set the current page id to a page that doesn't exist."),this)}updatePage(e){return this.getIsReadonly()?this:this.getPage(e.id)?this.run(()=>this.store.update(e.id,r=>({...r,...e}))):this}createPage(e){return this.run(()=>{if(this.getIsReadonly()||this.getPages().length>=this.options.maxPages)return;const t=this.getPages(),r=Yre(e.name??"Page 1",t.map(l=>l.name));let i=e.index;(!i||t.some(l=>l.index===i))&&(i=Fc(t[t.length-1].index));const s=La.create({meta:{},...e,name:r,index:i});this.store.put([s])}),this}deletePage(e){const t=typeof e=="string"?e:e.id;return this.run(()=>{if(this.getIsReadonly())return;const r=this.getPages();if(r.length===1)return;const i=this.getPage(t);if(i){if(t===this.getCurrentPageId()){const s=r.findIndex(c=>c.id===t),l=r[s-1]??r[s+1];this.setCurrentPage(l.id)}this.store.remove([i.id])}}),this}duplicatePage(e,t=La.createId()){if(this.getPages().length>=this.options.maxPages)return this;const r=typeof e=="string"?e:e.id,i=this.getPage(r);if(!i)return this;const s={...this.getCamera()},l=this.getContentFromCurrentPage(this.getSortedChildIdsForParent(i.id));return this.run(()=>{var h;const c=this.getPages(),d=cv(i.index,(h=c[c.indexOf(i)+1])==null?void 0:h.index);if(this.createPage({name:i.name+" Copy",id:t,index:d}),this.setCurrentPage(t),this.setCamera(s),l)return this.putContentOntoCurrentPage(l)}),this}renamePage(e,t){const r=typeof e=="string"?e:e.id;return this.getIsReadonly()?this:(this.updatePage({id:r,name:t}),this)}_getAllAssetsQuery(){return this.store.query.records("asset")}getAssets(){return this._getAllAssetsQuery().get()}createAssets(e){return this.getIsReadonly()?this:e.length<=0?this:(this.run(()=>this.store.put(e),{history:"ignore"}),this)}updateAssets(e){return this.getIsReadonly()?this:e.length<=0?this:(this.run(()=>{this.store.put(e.map(t=>({...this.store.get(t.id),...t})))},{history:"ignore"}),this)}deleteAssets(e){if(this.getIsReadonly())return this;const t=typeof e[0]=="string"?e:e.map(r=>r.id);return t.length<=0?this:(this.run(()=>this.store.remove(t),{history:"ignore"}),this)}getAsset(e){return this.store.get(typeof e=="string"?e:e.id)}async resolveAssetUrl(e,t){if(!e)return null;const r=this.getAsset(e);if(!r)return null;const{screenScale:i=1,shouldResolveToOriginal:s=!1}=t,c=Math.max(.125,(g=>Math.pow(2,Math.ceil(Math.log2(g))))(i)),d="connection"in navigator?navigator.connection.effectiveType:null,h=this.getInstanceState().devicePixelRatio;return await this.store.props.assets.resolve(r,{screenScale:i||1,steppedScreenScale:c,dpr:h,networkEffectiveType:d,shouldResolveToOriginal:s})}async uploadAsset(e,t,r){return await this.store.props.assets.upload(e,t,r)}_getShapeGeometryCache(){return this.store.createComputedCache("bounds",e=>this.getShapeUtil(e).getGeometry(e),(e,t)=>e.props===t.props)}getShapeGeometry(e){return this._getShapeGeometryCache().get(typeof e=="string"?e:e.id)}_getShapeHandlesCache(){return this.store.createComputedCache("handles",e=>{var t,r;return(r=(t=this.getShapeUtil(e)).getHandles)==null?void 0:r.call(t,e)})}getShapeHandles(e){return this._getShapeHandlesCache().get(typeof e=="string"?e:e.id)}getShapeLocalTransform(e){const t=typeof e=="string"?e:e.id,r=this.getShape(t);if(!r)throw Error("Editor.getTransform: shape not found");return qe.Identity().translate(r.x,r.y).rotate(r.rotation)}_getShapePageTransformCache(){return this.store.createComputedCache("pageTransformCache",e=>{if(oa(e.parentId))return this.getShapeLocalTransform(e);const t=this._getShapePageTransformCache().get(e.parentId)??qe.Identity();return qe.Compose(t,this.getShapeLocalTransform(e))})}getShapeParentTransform(e){const t=typeof e=="string"?e:e.id,r=this.getShape(t);return!r||oa(r.parentId)?qe.Identity():this._getShapePageTransformCache().get(r.parentId)??qe.Identity()}getShapePageTransform(e){const t=typeof e=="string"?e:e.id;return this._getShapePageTransformCache().get(t)??qe.Identity()}_getShapePageBoundsCache(){return this.store.createComputedCache("pageBoundsCache",e=>{const t=this._getShapePageTransformCache().get(e.id);return t?Xe.FromPoints(qe.applyToPoints(t,this.getShapeGeometry(e).vertices)):new Xe})}getShapePageBounds(e){return this._getShapePageBoundsCache().get(typeof e=="string"?e:e.id)}_getShapeClipPathCache(){return this.store.createComputedCache("clipPathCache",e=>{const t=this._getShapeMaskCache().get(e.id);if(!t)return;if(t.length===0)return"polygon(0px 0px, 0px 0px, 0px 0px)";const r=this._getShapePageTransformCache().get(e.id);return r?`polygon(${qe.applyToPoints(qe.Inverse(r),t).map(s=>`${s.x}px ${s.y}px`).join(",")})`:void 0})}getShapeClipPath(e){return this._getShapeClipPathCache().get(typeof e=="string"?e:e.id)}_getShapeMaskCache(){return this.store.createComputedCache("pageMaskCache",e=>{if(oa(e.parentId))return;const t=this.getShapeAncestors(e.id).filter(i=>this.isShapeOfType(i,"frame"));return t.length===0?void 0:t.map(i=>this._getShapePageTransformCache().get(i.id).applyToPoints(this.getShapeGeometry(i).vertices)).reduce((i,s)=>{if(!(s&&i))return;const l=a4(i,s);return l?l.map(R.Cast):[]})})}getShapeMask(e){return this._getShapeMaskCache().get(typeof e=="string"?e:e.id)}getShapeMaskedPageBounds(e){return typeof e!="string"&&(e=e.id),this._getShapeMaskedPageBoundsCache().get(e)}_getShapeMaskedPageBoundsCache(){return this.store.createComputedCache("shapeMaskedPageBoundsCache",e=>{const t=this._getShapePageBoundsCache().get(e.id);if(!t)return;const r=this._getShapeMaskCache().get(e.id);if(r){if(r.length===0)return;const{corners:i}=t;if(i.every((l,c)=>l&&R.Equals(l,r[c])))return t.clone();const s=a4(r,i);return s?Xe.FromPoints(s):void 0}return t})}getShapeAncestors(e,t=[]){const r=typeof e=="string"?e:e.id,i=this.getShape(r);if(!i)return t;const s=i.parentId;if(oa(s))return t.reverse(),t;const l=this.store.get(s);return l?(t.push(l),this.getShapeAncestors(l,t)):t}findShapeAncestor(e,t){const r=typeof e=="string"?e:e.id,i=this.getShape(r);if(!i)return;const s=i.parentId;if(oa(s))return;const l=this.getShape(s);if(l)return t(l)?l:this.findShapeAncestor(l,t)}hasAncestor(e,t){const r=typeof e=="string"?e:e==null?void 0:e.id,i=r&&this.getShape(r);return i?i.parentId===t?!0:this.hasAncestor(this.getShapeParent(i),t):!1}findCommonAncestor(e,t){var d;if(e.length===0)return;const r=typeof e[0]=="string"?e:e.map(h=>h.id),i=on(r.map(h=>this.getShape(h)));if(i.length===1){const h=i[0].parentId;return oa(h)?void 0:t?(d=this.findShapeAncestor(i[0],t))==null?void 0:d.id:h}const[s,...l]=i;let c=this.getShapeParent(s);for(;c;){if(t&&!t(c)){c=this.getShapeParent(c);continue}if(l.every(h=>this.hasAncestor(h,c.id)))return c.id;c=this.getShapeParent(c)}}isShapeOrAncestorLocked(e){const t=typeof e=="string"?this.getShape(e):e;return t===void 0?!1:t.isLocked?!0:this.isShapeOrAncestorLocked(this.getShapeParent(t))}_notVisibleShapes(){return nie(this)}getCulledShapes(){const e=this._notVisibleShapes().get(),t=this.getSelectedShapeIds(),r=this.getEditingShapeId(),i=new Set(e);return r&&i.delete(r),t.forEach(s=>{i.delete(s)}),i}getCurrentPageBounds(){let e;return this.getCurrentPageShapeIdsSorted().forEach(t=>{const r=this.getShapeMaskedPageBounds(t);r&&(e?e=e.expand(r):e=r.clone())}),e}getSelectedShapeAtPoint(e){const t=this.getSelectedShapeIds();return this.getCurrentPageShapesSorted().filter(r=>r.type!=="group"&&t.includes(r.id)).reverse().find(r=>this.isPointInShape(r,e,{hitInside:!0,margin:0}))}getShapeAtPoint(e,t={}){const r=this.getZoomLevel(),i=this.getViewportPageBounds(),{filter:s,margin:l=0,hitLocked:c=!1,hitLabels:d=!1,hitInside:h=!1,hitFrameInside:g=!1}=t;let y=1/0,v=null,w=1/0,C=null;const E=(t.renderingOnly?this.getCurrentPageRenderingShapesSorted():this.getCurrentPageShapesSorted()).filter(P=>{if(P.isLocked&&!c||this.isShapeHidden(P)||this.isShapeOfType(P,"group"))return!1;const I=this.getShapeMask(P);return I&&!Na(e,I)?!1:s?s(P):!0});for(let P=E.length-1;P>=0;P--){const I=E[P],k=this.getShapeGeometry(I),L=k instanceof hl,O=this.getPointInShapeSpace(I,e);if(this.isShapeOfType(I,"frame")||(this.isShapeOfType(I,"arrow")||this.isShapeOfType(I,"geo")&&I.props.fill==="none")&&I.props.text.trim()){for(const F of k.children)if(F.isLabel&&F.isPointInBounds(O))return I}if(this.isShapeOfType(I,"frame")){const F=k.distanceToPoint(O,h);if(Math.abs(F)<=l)return C||I;if(k.hitTestPoint(O,0,!0))return C||v||(g?I:void 0);continue}let z;if(L){let F=1/0;for(const H of k.children){if(H.isLabel&&!d)continue;const V=H.distanceToPoint(O,h);V<F&&(F=V)}z=F}else l===0&&(k.bounds.w<1||k.bounds.h<1)||k.bounds.containsPoint(O,l)?z=k.distanceToPoint(O,h):z=1/0;if(k.isClosed){if(z<=l){if(k.isFilled||L&&k.children[0].isFilled)return C||I;if(this.getShapePageBounds(I).contains(i))continue;if(Math.abs(z)<l)Math.abs(z)<w&&(w=Math.abs(z),C=I);else if(!C){const{area:F}=k;F<y&&(y=F,v=I)}}}else if(z<this.options.hitTestMargin/r)return I}return C||v||void 0}getShapesAtPoint(e,t={}){return this.getCurrentPageShapes().filter(r=>!this.isShapeHidden(r)&&this.isPointInShape(r,e,t))}isPointInShape(e,t,r={}){const{hitInside:i=!1,margin:s=0}=r,l=typeof e=="string"?e:e.id,c=this.getShapeMask(l);return c&&!Na(t,c)?!1:this.getShapeGeometry(l).hitTestPoint(this.getPointInShapeSpace(e,t),s,i)}getPointInShapeSpace(e,t){const r=typeof e=="string"?e:e.id;return this._getShapePageTransformCache().get(r).clone().invert().applyToPoint(t)}getPointInParentSpace(e,t){const r=typeof e=="string"?e:e.id,i=this.getShape(r);if(!i)return new R(0,0);if(oa(i.parentId))return R.From(t);const s=this.getShapePageTransform(i.parentId);return s?s.clone().invert().applyToPoint(t):R.From(t)}getCurrentPageShapes(){return Array.from(this.getCurrentPageShapeIds(),e=>this.store.get(e))}getCurrentPageShapesSorted(){const e=[],t=this.getSortedChildIdsForParent(this.getCurrentPageId());for(let r=0,i=t.length;r<i;r++)v6(this,t[r],e);return e}getCurrentPageRenderingShapesSorted(){const e=this.getCulledShapes();return this.getCurrentPageShapesSorted().filter(({id:t})=>!e.has(t)&&!this.isShapeHidden(t))}isShapeOfType(e,t){const r=typeof e=="string"?this.getShape(e):e;return r?r.type===t:!1}getShape(e){const t=typeof e=="string"?e:e.id;if(ia(t))return this.store.get(t)}getShapeParent(e){const t=typeof e=="string"?e:e==null?void 0:e.id;if(!t)return;const r=this.getShape(t);if(!(r===void 0||!ia(r.parentId)))return this.store.get(r.parentId)}getShapeNearestSibling(e,t){return t?t.parentId===e.parentId?t:this.findShapeAncestor(t,i=>i.parentId===e.parentId):void 0}isShapeInPage(e,t=this.getCurrentPageId()){const r=typeof e=="string"?e:e.id,i=this.getShape(r);if(!i)return!1;let s=!1;if(i.parentId===t)s=!0;else{let l=this.getShape(i.parentId);e:for(;l;){if(l.parentId===t){s=!0;break e}l=this.getShape(l.parentId)}}return s}getAncestorPageId(e){const t=typeof e=="string"?e:e==null?void 0:e.id,r=t&&this.getShape(t);if(r)return oa(r.parentId)?r.parentId:this.getAncestorPageId(this.getShape(r.parentId))}reparentShapes(e,t,r){const i=typeof e[0]=="string"?e:e.map(v=>v.id);if(i.length===0)return this;const s=[],l=oa(t)?qe.Identity():this.getShapePageTransform(t),c=l.rotation();let d=[];const h=on(this.getSortedChildIdsForParent(t).map(v=>this.getShape(v)));if(r){const v=h.find(w=>w.index===r);if(v){const w=h[h.indexOf(v)+1];w?d=bg(r,w.index,i.length):d=mP(r,i.length)}else{const w=h.sort(Go).find(C=>C.index>r);w?d=bg(r,w.index,i.length):d=mP(r,i.length)}}else{const v=h.length&&h[h.length-1];d=v?mP(v.index,i.length):uv(i.length)}const g=l.clone().invert(),y=on(i.map(v=>this.getShape(v)));return this.run(()=>{for(let v=0;v<y.length;v++){const w=y[v],C=this.getShapePageTransform(w);if(!C)continue;const E=C.point();if(!E)continue;const P=g.applyToPoint(E),I=C.rotation()-c;s.push({id:w.id,type:w.type,parentId:t,x:P.x,y:P.y,rotation:I,index:d[v]})}this.updateShapes(s)},{ignoreShapeLock:!0}),this}getHighestIndexForParent(e){const t=typeof e=="string"?e:e.id,r=this._parentIdsToChildIds.get()[t];if(!r||r.length===0)return"a1";const i=this.getShape(r[r.length-1]);return Fc(i.index)}getSortedChildIdsForParent(e){const t=typeof e=="string"?e:e.id,r=this._parentIdsToChildIds.get()[t];return r||Bu}visitDescendants(e,t){const r=typeof e=="string"?e:e.id,i=this.getSortedChildIdsForParent(r);for(const s of i)t(s)!==!1&&this.visitDescendants(s,t);return this}getShapeAndDescendantIds(e){const t=new Set;for(const r of e.map(i=>this.getShape(i)).sort(Go))t.add(r.id),this.visitDescendants(r,i=>{t.add(i)});return t}getDroppingOverShape(e,t=[]){const r=this.getCurrentPageShapesSorted();for(let i=r.length-1;i>=0;i--){const s=r[i];if(this.isShapeHidden(s)||this.getSelectedShapeIds().includes(s.id)||!this.getShapeUtil(s).canDropShapes(s,t)||t.find(c=>c.id===s.id||this.hasAncestor(s,c.id)))continue;const l=this.getShapeMaskedPageBounds(s.id);if(l&&l.containsPoint(e)&&this.getShapeGeometry(s).hitTestPoint(this.getPointInShapeSpace(s,e),0,!0))return s}}getOutermostSelectableShape(e,t){const r=typeof e=="string"?e:e.id,i=this.getShape(r);let s=i,l=i;const c=this.getFocusedGroup();for(;l;){if(this.isShapeOfType(l,"group")&&(c==null?void 0:c.id)!==l.id&&!this.hasAncestor(c,l.id)&&((t==null?void 0:t(l))??!0))s=l;else if((c==null?void 0:c.id)===l.id)break;l=this.getShapeParent(l)}return s}_getBindingsIndexCache(){const e=eie(this);return this.store.createComputedCache("bindingsIndex",t=>e.get().get(t.id))}getBinding(e){return this.store.get(e)}getBindingsFromShape(e,t){const r=typeof e=="string"?e:e.id;return this.getBindingsInvolvingShape(r).filter(i=>i.fromId===r&&i.type===t)}getBindingsToShape(e,t){const r=typeof e=="string"?e:e.id;return this.getBindingsInvolvingShape(r).filter(i=>i.toId===r&&i.type===t)}getBindingsInvolvingShape(e,t){const r=typeof e=="string"?e:e.id,i=this._getBindingsIndexCache().get(r)??Bu;return t?i.filter(s=>s.type===t):i}createBindings(e){const t=[];for(const r of e){const i=this.getShape(r.fromId),s=this.getShape(r.toId);if(!i||!s||!this.canBindShapes({fromShape:i,toShape:s,binding:r}))continue;const c=this.getBindingUtil(r.type).getDefaultProps(),d=this.store.schema.types.binding.create({...r,id:r.id??$h(),props:{...c,...r.props}});t.push(d)}return this.store.put(t),this}createBinding(e){return this.createBindings([e])}updateBindings(e){const t=[];for(const r of e){if(!r)continue;const i=this.getBinding(r.id);if(!i)continue;const s=Kc(i,r);if(s===i)continue;const l=this.getShape(s.fromId),c=this.getShape(s.toId);!l||!c||this.canBindShapes({fromShape:l,toShape:c,binding:s})&&t.push(s)}return this.store.put(t),this}updateBinding(e){return this.updateBindings([e])}deleteBindings(e,{isolateShapes:t=!1}={}){const r=e.map(i=>typeof i=="string"?i:i.id);return t?this.store.atomic(()=>{var i,s;for(const l of r){const c=this.getBinding(l);if(!c)continue;const d=this.getBindingUtil(c);(i=d.onBeforeIsolateFromShape)==null||i.call(d,{binding:c,removedShape:this.getShape(c.toId)}),(s=d.onBeforeIsolateToShape)==null||s.call(d,{binding:c,removedShape:this.getShape(c.fromId)}),this.store.remove([l])}}):this.store.remove(r),this}deleteBinding(e,t){return this.deleteBindings([e],t)}canBindShapes({fromShape:e,toShape:t,binding:r}){const i=typeof e=="string"?e:e.type,s=typeof t=="string"?t:t.type,l=typeof r=="string"?r:r.type,c={fromShapeType:i,toShapeType:s,bindingType:l};return i===s?this.getShapeUtil(i).canBind(c):this.getShapeUtil(i).canBind(c)&&this.getShapeUtil(s).canBind(c)}rotateShapesBy(e,t,r){const i=typeof e[0]=="string"?e:e.map(l=>l.id);if(i.length<=0)return this;const s=$4({editor:this,ids:i});return s?(o0({delta:t,snapshot:s,editor:this,stage:"one-off",centerOverride:r==null?void 0:r.center}),this):this}getChangesToTranslateShape(e,t){var s,l,c;let r=e;const i=this.getShapeUtil(e);return r=Kc(r,((s=i.onTranslateStart)==null?void 0:s.call(i,r))??void 0),r=Kc(r,{id:e.id,type:e.type,x:t.x,y:t.y}),r=Kc(r,((l=i.onTranslate)==null?void 0:l.call(i,e,r))??void 0),r=Kc(r,((c=i.onTranslateEnd)==null?void 0:c.call(i,e,r))??void 0),r}nudgeShapes(e,t){const r=typeof e[0]=="string"?e:e.map(s=>s.id);if(r.length<=0)return this;const i=[];for(const s of r){const l=this.getShape(s),c=R.From(t),d=this.getShapeParentTransform(l);d&&c.rot(-d.rotation()),i.push(this.getChangesToTranslateShape(l,c.add(l)))}return this.updateShapes(i),this}duplicateShapes(e,t){return this.run(()=>{const r=typeof e[0]=="string"?e:e.map(v=>v.id);if(r.length<=0)return this;const i=new Set(r),s=this.getShapeAndDescendantIds(r),l=[...s].reverse(),c=new Map;for(const v of s)c.set(v,yr());const{shapesToCreateWithOriginals:d,bindingsToCreate:h}=S6(this,s,v=>{const w=[];for(const E of v){const P=this.getBinding(E);if(!P)continue;const I=$h();w.push({...P,id:I,fromId:Js(c.get(P.fromId)),toId:Js(c.get(P.toId))})}const C=[];for(const E of l){const P=Js(c.get(E)),I=this.getShape(E);if(!I)continue;let k=0,L=0;if(t&&i.has(E)){const O=this.getShapeParentTransform(I),z=new R(t.x,t.y).rot(-O.rotation());k=z.x,L=z.y}C.push({shape:{...I,id:P,x:I.x+k,y:I.y+L,index:"a1",parentId:c.get(I.parentId)??I.parentId},originalShape:I})}return{shapesToCreateWithOriginals:C,bindingsToCreate:w}});d.forEach(({shape:v,originalShape:w})=>{const C=w.parentId,E=this.getSortedChildIdsForParent(C),P=E.indexOf(w.id),I=E[P+1],k=I?this.getShape(I):void 0,L=cv(w.index,k==null?void 0:k.index);v.index=L});const g=d.map(({shape:v})=>v);if(g.length+this.getCurrentPageShapeIds().size>this.options.maxShapesPerPage){d0(this);return}if(this.createShapes(g),this.createBindings(h),this.setSelectedShapes(on(r.map(v=>c.get(v)))),t!==void 0){const v=this.getSelectionPageBounds(),w=this.getViewportPageBounds();v&&!w.contains(v)&&this.centerOnPoint(v.center,{animation:{duration:this.options.animationMediumMs}})}}),this}moveShapesToPage(e,t){const r=typeof e[0]=="string"?e:e.map(c=>c.id);if(r.length===0)return this;if(this.getIsReadonly())return this;const i=this.getCurrentPageId();if(t===i)return this;if(!this.store.has(t))return this;const s=this.getContentFromCurrentPage(r);if(!s)return this;if(this.getPageShapeIds(t).size+s.shapes.length>this.options.maxShapesPerPage)return d0(this,t),this;const l=this.getCamera().z;return this.run(()=>{this.deleteShapes(r),this.setCurrentPage(t),this.setFocusedGroup(null),this.selectNone(),this.putContentOntoCurrentPage(s,{select:!0,preserveIds:!0,preservePosition:!0}),this.setCamera({...this.getCamera(),z:l}),this.centerOnPoint(this.getSelectionRotatedPageBounds().center)}),this}toggleLock(e){const t=typeof e[0]=="string"?e:e.map(l=>l.id);if(this.getIsReadonly()||t.length===0)return this;let r=!0,i=!0;const s=[];for(const l of t){const c=this.getShape(l);c&&(s.push(c),c.isLocked?i=!1:r=!1)}return this.run(()=>{i?(this.updateShapes(s.map(l=>({id:l.id,type:l.type,isLocked:!0}))),this.setSelectedShapes([])):r?this.updateShapes(s.map(l=>({id:l.id,type:l.type,isLocked:!1}))):this.updateShapes(s.map(l=>({id:l.id,type:l.type,isLocked:!0})))}),this}sendToBack(e){const t=typeof e[0]=="string"?e:e.map(i=>i.id),r=i0(this,"toBack",t,{considerAllShapes:!0});return r&&this.updateShapes(r),this}sendBackward(e,t={}){const r=typeof e[0]=="string"?e:e.map(s=>s.id),i=i0(this,"backward",r,t);return i&&this.updateShapes(i),this}bringForward(e,t={}){const r=typeof e[0]=="string"?e:e.map(s=>s.id),i=i0(this,"forward",r,t);return i&&this.updateShapes(i),this}bringToFront(e){const t=typeof e[0]=="string"?e:e.map(i=>i.id),r=i0(this,"toFront",t);return r&&this.updateShapes(r),this}flipShapes(e,t){const r=typeof e[0]=="string"?e:e.map(l=>l.id);if(this.getIsReadonly())return this;let i=on(r.map(l=>this.getShape(l)));if(!i.length)return this;i=on(i.map(l=>this.isShapeOfType(l,"group")?this.getSortedChildIdsForParent(l.id).map(c=>this.getShape(c)):l).flat());const s=Xe.Common(on(i.map(l=>this.getShapePageBounds(l)))).center;return this.run(()=>{for(const l of i){const c=this.getShapeGeometry(l).bounds,d=this.getShapePageTransform(l.id);d&&this.resizeShape(l.id,{x:t==="horizontal"?-1:1,y:t==="vertical"?-1:1},{initialBounds:c,initialPageTransform:d,initialShape:l,mode:"scale_shape",isAspectRatioLocked:this.getShapeUtil(l).isAspectRatioLocked(l),scaleOrigin:s,scaleAxisRotation:0})}}),this}stackShapes(e,t,r){const i=typeof e[0]=="string"?e:e.map(E=>E.id);if(this.getIsReadonly())return this;const s=i.map(E=>this.getShape(E)).filter(E=>E?this.getShapeUtil(E).canBeLaidOut(E):!1),l=s.length;if(r===0&&l<3||l<2)return this;const c=Object.fromEntries(s.map(E=>[E.id,this.getShapePageBounds(E)]));let d,h,g,y;t==="horizontal"?(d="x",h="minX",g="maxX",y="width"):(d="y",h="minY",g="maxY",y="height");let v;if(r===0){const E=[];s.sort((I,k)=>c[I.id][h]-c[k.id][h]);for(let I=0;I<l-1;I++){const k=s[I],L=s[I+1],O=c[k.id],F=c[L.id][h]-O[g],H=E.find(V=>V.gap===F);H?H.count++:E.push({gap:F,count:1})}let P=0;E.forEach(I=>{I.count>P&&(P=I.count,v=I.gap)}),P===1&&(v=Math.max(0,E.reduce((I,k)=>I+k.gap*k.count,0)/(l-1)))}else v=r;const w=[];let C=c[s[0].id][g];return s.forEach((E,P)=>{var z,F;if(P===0)return;const I={x:0,y:0};I[d]=C+v-c[E.id][d];const k=this.getShapeParent(E),L=k?R.Rot(I,-this.getShapePageTransform(k).decompose().rotation):I,O=(F=(z=this.getShapeUtil(E)).onTranslateStart)==null?void 0:F.call(z,E);w.push(O?{...O,[d]:E[d]+L[d]}:{id:E.id,type:E.type,[d]:E[d]+L[d]}),C+=c[E.id][y]+v}),this.updateShapes(w),this}packShapes(e,t){var F,H;const r=typeof e[0]=="string"?e:e.map(V=>V.id);if(this.getIsReadonly())return this;if(r.length<2)return this;const i=r.map(V=>this.getShape(V)).filter(V=>V?this.getShapeUtil(V).canBeLaidOut(V):!1),s={},l={};let c,d,h=0;for(let V=0;V<i.length;V++)c=i[V],d=this.getShapePageBounds(c),s[c.id]=d,l[c.id]=d.clone(),h+=d.width*d.height;const g=Xe.Common(on(Object.values(s))),y=g.width;i.sort((V,re)=>s[re.id].height-s[V.id].height);const v=Math.max(Math.ceil(Math.sqrt(h/.95)),y),w=[new Xe(g.x,g.y,v,1/0)];let C=0,E=0,P,I;for(let V=0;V<i.length;V++){c=i[V],d=l[c.id];for(let re=w.length-1;re>=0;re--)if(P=w[re],!(d.width>P.width||d.height>P.height)){d.x=P.x,d.y=P.y,E=Math.max(E,d.maxY),C=Math.max(C,d.maxX),d.width===P.width&&d.height===P.height?(I=w.pop(),re<w.length&&(w[re]=I)):d.height===P.height?(P.x+=d.width+t,P.width-=d.width+t):d.width===P.width?(P.y+=d.height+t,P.height-=d.height+t):(w.push(new Xe(P.x+(d.width+t),P.y,P.width-(d.width+t),d.height)),P.y+=d.height+t,P.height-=d.height+t);break}}const k=Xe.Common(Object.values(l)),L=R.Sub(g.center,k.center);let O;const z=[];for(let V=0;V<i.length;V++){c=i[V],d=s[c.id],O=l[c.id];const re=R.Sub(O.point,d.point).add(L),q=this.getShapeParentTransform(c);q&&re.rot(-q.rotation());const J={id:c.id,type:c.type,x:c.x+re.x,y:c.y+re.y},ie=(H=(F=this.getShapeUtil(c)).onTranslateStart)==null?void 0:H.call(F,{...c,...J});ie?z.push({...J,...ie}):z.push(J)}return z.length&&this.updateShapes(z),this}alignShapes(e,t){const r=typeof e[0]=="string"?e:e.map(d=>d.id);if(this.getIsReadonly())return this;if(r.length<2)return this;const i=on(r.map(d=>this.getShape(d))),s=Object.fromEntries(i.map(d=>[d.id,this.getShapePageBounds(d)])),l=Xe.Common(on(Object.values(s))),c=[];return i.forEach(d=>{const h=s[d.id];if(!h)return;const g={x:0,y:0};switch(t){case"top":{g.y=l.minY-h.minY;break}case"center-vertical":{g.y=l.midY-h.minY-h.height/2;break}case"bottom":{g.y=l.maxY-h.minY-h.height;break}case"left":{g.x=l.minX-h.minX;break}case"center-horizontal":{g.x=l.midX-h.minX-h.width/2;break}case"right":{g.x=l.maxX-h.minX-h.width;break}}const y=this.getShapeParent(d),v=y?R.Rot(g,-this.getShapePageTransform(y).decompose().rotation):g;c.push(this.getChangesToTranslateShape(d,R.Add(d,v)))}),this.updateShapes(c),this}distributeShapes(e,t){const r=typeof e[0]=="string"?e:e.map(k=>k.id);if(this.getIsReadonly())return this;if(r.length<3)return this;const i=r.length,s=on(r.map(k=>this.getShape(k))),l=Object.fromEntries(s.map(k=>[k.id,this.getShapePageBounds(k)]));let c,d,h,g,y;t==="horizontal"?(c="x",d="minX",h="maxX",g="midX",y="width"):(c="y",d="minY",h="maxY",g="midY",y="height");const v=[],w=s.sort((k,L)=>l[k.id][d]-l[L.id][d])[0],C=s.sort((k,L)=>l[L.id][h]-l[k.id][h])[0],E=l[w.id][g],P=(l[C.id][g]-E)/(i-1),I=E+P;return s.filter(k=>k!==w&&k!==C).sort((k,L)=>l[k.id][g]-l[L.id][g]).forEach((k,L)=>{const O={x:0,y:0};O[c]=I+P*L-l[k.id][y]/2-l[k.id][c];const z=this.getShapeParent(k),F=z?R.Rot(O,-this.getShapePageTransform(z).rotation()):O;v.push(this.getChangesToTranslateShape(k,R.Add(k,F)))}),this.updateShapes(v),this}stretchShapes(e,t){const r=typeof e[0]=="string"?e:e.map(d=>d.id);if(this.getIsReadonly())return this;if(r.length<2)return this;const i=on(r.map(d=>this.getShape(d))),s=Object.fromEntries(r.map(d=>[d,this.getShapeGeometry(d).bounds])),l=Object.fromEntries(r.map(d=>[d,this.getShapePageBounds(d)])),c=Xe.Common(on(Object.values(l)));switch(t){case"vertical":{this.run(()=>{for(const d of i){if(this.getShapePageTransform(d).rotation()%sr)continue;const g=s[d.id],y=l[d.id],v=new R(0,c.minY-y.minY),w=this.getShapeParentTransform(d);w&&v.rot(-w.rotation());const{x:C,y:E}=R.Add(v,d);this.updateShapes([{id:d.id,type:d.type,x:C,y:E}]);const P=new R(1,c.height/y.height);this.resizeShape(d.id,P,{initialBounds:g,scaleOrigin:new R(y.center.x,c.minY),isAspectRatioLocked:this.getShapeUtil(d).isAspectRatioLocked(d),scaleAxisRotation:0})}});break}case"horizontal":{this.run(()=>{for(const d of i){const h=s[d.id],g=l[d.id];if(this.getShapePageTransform(d).rotation()%sr)continue;const v=new R(c.minX-g.minX,0),w=this.getShapeParentTransform(d);w&&v.rot(-w.rotation());const{x:C,y:E}=R.Add(v,d);this.updateShapes([{id:d.id,type:d.type,x:C,y:E}]);const P=new R(c.width/g.width,1);this.resizeShape(d.id,P,{initialBounds:h,scaleOrigin:new R(c.minX,g.center.y),isAspectRatioLocked:this.getShapeUtil(d).isAspectRatioLocked(d),scaleAxisRotation:0})}});break}}return this}resizeShape(e,t,r={}){var w,C,E;const i=typeof e=="string"?e:e.id;if(this.getIsReadonly())return this;Number.isFinite(t.x)||(t=new R(1,t.y)),Number.isFinite(t.y)||(t=new R(t.x,1));const s=r.initialShape??this.getShape(i);if(!s)return this;const l=r.scaleOrigin??((w=this.getShapePageBounds(i))==null?void 0:w.center);if(!l)return this;const c=r.initialPageTransform?qe.Cast(r.initialPageTransform):this.getShapePageTransform(i);if(!c)return this;const d=c.rotation();if(d==null)return this;const h=r.scaleAxisRotation??d,g=r.initialBounds??this.getShapeGeometry(i).bounds;if(!g)return this;const y=r.isAspectRatioLocked??this.getShapeUtil(s).isAspectRatioLocked(s);if(!J5(d,h))return this._resizeUnalignedShape(i,t,{...r,initialBounds:g,scaleOrigin:l,scaleAxisRotation:h,initialPageTransform:c,isAspectRatioLocked:y,initialShape:s});const v=this.getShapeUtil(s);if(y&&(Math.abs(t.x)>Math.abs(t.y)?t=new R(t.x,Math.sign(t.y)*Math.abs(t.x)):t=new R(Math.sign(t.x)*Math.abs(t.y),t.y)),v.onResize&&v.canResize(s)){const P=this._scalePagePoint(qe.applyToPoint(c,new R(0,0)),l,t,h),I=this.getPointInParentSpace(s.id,P),k=new R(t.x,t.y),L=gf((d-h)%Math.PI,0);k.x=L?t.x:t.y,k.y=L?t.y:t.x;const O=qe.applyToPoint(c,new R),{x:z,y:F}=this.getPointInParentSpace(s.id,O);let H=s;r.skipStartAndEndCallbacks||(H=Kc(s,((C=v.onResizeStart)==null?void 0:C.call(v,s))??void 0)),H=Kc(H,{id:i,type:s.type,x:I.x,y:I.y,...v.onResize({...s,x:z,y:F},{newPoint:I,handle:r.dragHandle??"bottom_right",mode:r.mode??"scale_shape",scaleX:k.x,scaleY:k.y,initialBounds:g,initialShape:s})}),r.skipStartAndEndCallbacks||(H=Kc(H,((E=v.onResizeEnd)==null?void 0:E.call(v,s,H))??void 0)),this.updateShapes([H])}else{const P=qe.applyToPoint(c,g.center),I=this._scalePagePoint(P,l,t,h),k=this.getPointInParentSpace(s.id,P),L=this.getPointInParentSpace(s.id,I),O=R.Sub(L,k);this.updateShapes([{id:i,type:s.type,x:s.x+O.x,y:s.y+O.y}])}return this}_scalePagePoint(e,t,r,i){const s=R.RotWith(e,t,-i).sub(t),l=R.MulV(s,r);return R.Add(l,t).rotWith(t,i)}_resizeUnalignedShape(e,t,r){const{type:i}=r.initialShape,s=new R(t.x,t.y);if(Math.abs(t.x)>Math.abs(t.y)?s.x=Math.sign(t.x)*Math.abs(t.y):s.y=Math.sign(t.y)*Math.abs(t.x),this.resizeShape(e,s,{initialShape:r.initialShape,initialBounds:r.initialBounds,isAspectRatioLocked:r.isAspectRatioLocked}),Math.sign(t.x)*Math.sign(t.y)<0){let{rotation:P}=qe.Decompose(r.initialPageTransform);P-=2*P,this.updateShapes([{id:e,type:i,rotation:P}])}const l=qe.applyToPoint(r.initialPageTransform,r.initialBounds.center),c=this._scalePagePoint(l,r.scaleOrigin,t,r.scaleAxisRotation),d=this.getShapePageBounds(e),h=this.getShapePageTransform(e),g=d.center,y=h.point();if(!g||!y)return this;const v=R.Sub(c,g),w=R.Add(y,v),{x:C,y:E}=this.getPointInParentSpace(e,w);return this.updateShapes([{id:e,type:i,x:C,y:E}]),this}getInitialMetaForShape(e){return{}}createShape(e){return this.createShapes([e]),this}createShapes(e){if(!Array.isArray(e))throw Error("Editor.createShapes: must provide an array of shapes or shape partials");if(this.getIsReadonly())return this;if(e.length<=0)return this;const t=this.getCurrentPageShapeIds();if(e.length+t.size>this.options.maxShapesPerPage)return d0(this),this;const i=this.getFocusedGroupId();return this.run(()=>{var g,y;const s=this.getCurrentPageShapesSorted(),l=e.map(v=>{if(v.id||(v={id:yr(),...v}),!v.parentId||!(this.store.has(v.parentId)||e.some(w=>w.id===v.parentId))){let w=this.getFocusedGroupId();for(let E=s.length-1;E>=0;E--){const P=s[E];if(!this.isShapeHidden(P)&&this.getShapeUtil(P).canReceiveNewChildrenOfType(P,v.type)&&this.isPointInShape(P,{x:v.x??0,y:v.y??0},{margin:0,hitInside:!0})){w=P.id;break}}const C=v.parentId;if(w===v.id&&(w=i),w!==C&&(v={...v},v.parentId=w,ia(w))){const E=this.getPointInShapeSpace(this.getShape(w),{x:v.x??0,y:v.y??0});v.x=E.x,v.y=E.y,v.rotation=-this.getShapePageTransform(w).rotation()+(v.rotation??0)}}return v}),c=new Map,d=[],{opacityForNextShape:h}=this.getInstanceState();for(const v of l){const w=this.getShapeUtil(v);let C=v.index;if(!C){const k=v.parentId??i;c.has(k)||c.set(k,this.getHighestIndexForParent(k)),C=c.get(k),c.set(k,Fc(C))}const E=w.getDefaultProps();for(const[k,L]of this.styleProps[v.type])E[L]=this.getStyleForNextShape(k);let P=this.store.schema.types.shape.create({...v,index:C,opacity:v.opacity??h,parentId:v.parentId??i,props:"props"in v?{...E,...v.props}:E});if(P.index===void 0)throw Error("no index!");const I=(y=(g=this.getShapeUtil(P)).onBeforeCreate)==null?void 0:y.call(g,P);I&&(P=I),d.push(P)}d.forEach(v=>{v.meta={...this.getInitialMetaForShape(v),...v.meta}}),this.store.put(d)}),this}animateShape(e,t={animation:dk}){return this.animateShapes([e],t)}animateShapes(e,t={animation:dk}){if(!t.animation)return this;const{duration:r=500,easing:i=ao.linear}=t.animation,s=nr();let l=r,c;const d=[];let h,g;for(let v=0,w=e.length;v<w;v++){if(h=e[v],!h)continue;const C=this.getShape(h.id);C&&(g={start:Lr(C),end:Kc(Lr(C),h)},d.push(g),this.animatingShapes.set(C.id,s))}const y=v=>{var P,I;if(l-=v,l<0){const{animatingShapes:k}=this,L=e.filter(O=>O&&k.get(O.id)===s);L.length&&this.updateShapes(L),this.off("tick",y);return}c=i(1-l/r);const{animatingShapes:w}=this,C=[];let E;for(let k=0,L=d.length;k<L;k++){const{start:O,end:z}=d[k];E=w.get(O.id),E===s&&C.push({...z,x:O.x+(z.x-O.x)*c,y:O.y+(z.y-O.y)*c,opacity:O.opacity+(z.opacity-O.opacity)*c,rotation:O.rotation+(z.rotation-O.rotation)*c,props:((I=(P=this.getShapeUtil(z)).getInterpolatedProps)==null?void 0:I.call(P,O,z,c))??z.props})}this._updateShapes(C)};return this.on("tick",y),this}groupShapes(e,t={}){var C;const{groupId:r=yr(),select:i=!0}=t;if(!Array.isArray(e))throw Error("Editor.groupShapes: must provide an array of shapes or shape ids");if(this.getIsReadonly())return this;const s=typeof e[0]=="string"?e:e.map(E=>E.id);if(s.length<=1)return this;const l=on((this._shouldIgnoreShapeLock?s:this._getUnlockedShapeIds(s)).map(E=>this.getShape(E))),c=l.sort(Go).map(E=>E.id),d=Xe.Common(on(l.map(E=>this.getShapePageBounds(E)))),{x:h,y:g}=d.point,y=this.findCommonAncestor(l)??this.getCurrentPageId();if(this.getCurrentToolId()!=="select")return this;this.isIn("select.idle")||this.cancel();const v=l.filter(E=>E.parentId===y).sort(Go),w=(C=v[v.length-1])==null?void 0:C.index;return this.run(()=>{this.createShapes([{id:r,type:"group",parentId:y,index:w,x:h,y:g,opacity:1,props:{}}]),this.reparentShapes(c,r),i&&this.select(r)}),this}ungroupShapes(e,t={}){if(this.getIsReadonly())return this;const{select:r=!0}=t,i=typeof e[0]=="string"?e:e.map(d=>d.id),s=on((this._shouldIgnoreShapeLock?i:this._getUnlockedShapeIds(i)).map(d=>this.getShape(d)));if(s.length===0)return this;if(this.getCurrentToolId()!=="select")return this;this.isIn("select.idle")||this.cancel();const l=new Set,c=[];return s.forEach(d=>{this.isShapeOfType(d,"group")?c.push(d):l.add(d.id)}),c.length===0?this:(this.run(()=>{let d;for(let h=0,g=c.length;h<g;h++){d=c[h];const y=this.getSortedChildIdsForParent(d.id);for(let v=0,w=y.length;v<w;v++)l.add(y[v]);this.reparentShapes(y,d.parentId,d.index)}this.deleteShapes(c.map(h=>h.id)),r&&this.select(...l)}),this)}updateShape(e){return this.updateShapes([e]),this}updateShapes(e){const t=Array(e.length);for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s)continue;const l=this.getShape(s.id);if(l){if(!this._shouldIgnoreShapeLock){if(l.isLocked){if(!(Object.hasOwn(s,"isLocked")&&!s.isLocked))continue}else if(this.isShapeOrAncestorLocked(l))continue}this.animatingShapes.delete(s.id),t.push(s)}}return this._updateShapes(t),this}_updateShapes(e){this.getIsReadonly()||this.run(()=>{var s,l;const t=[];let r,i;for(let c=0,d=e.length;c<d;c++){const h=e[c];h&&(r=this.getShape(h.id),r&&(i=Kc(r,h),i!==r&&(i=((l=(s=this.getShapeUtil(r)).onBeforeUpdate)==null?void 0:l.call(s,r,i))??i,t.push(i))))}this.store.put(t)})}_getUnlockedShapeIds(e){return e.filter(t=>{var r;return!((r=this.getShape(t))!=null&&r.isLocked)})}deleteShapes(e){if(this.getIsReadonly())return this;if(!Array.isArray(e))throw Error("Editor.deleteShapes: must provide an array of shapes or shapeIds");const t=typeof e[0]=="string"?e:e.map(s=>s.id),r=this._shouldIgnoreShapeLock?t:this._getUnlockedShapeIds(t);if(r.length===0)return this;const i=new Set(r);for(const s of r)this.visitDescendants(s,l=>{i.add(l)});return this.run(()=>this.store.remove([...i]))}deleteShape(e){return this.deleteShapes([typeof e=="string"?e:e.id]),this}_extractSharedStyles(e,t){if(this.isShapeOfType(e,"group")){const r=this._parentIdsToChildIds.get()[e.id];if(!r)return;for(let i=0,s=r.length;i<s;i++)this._extractSharedStyles(this.getShape(r[i]),t)}else for(const[r,i]of this.styleProps[e.type])t.applyValue(r,Wo(e.props,i))}_getSelectionSharedStyles(){const e=this.getSelectedShapes(),t=new Wk;for(const r of e)this._extractSharedStyles(r,t);return t}getStyleForNextShape(e){const t=this.getInstanceState().stylesForNextShape[e.id];return t===void 0?e.defaultValue:t}getShapeStyleIfExists(e,t){const r=this.styleProps[e.type].get(t);if(r!==void 0)return Wo(e.props,r)}getSharedStyles(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0)return this._getSelectionSharedStyles();const e=this.root.getCurrent(),t=new Wk;if(!e)return t;if(e.shapeType)for(const r of this.styleProps[e.shapeType].keys())t.applyValue(r,this.getStyleForNextShape(r));return t}getSharedOpacity(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0){const e=[],t=i=>{const s=this.getShape(i);if(s)if(this.isShapeOfType(s,"group"))for(const l of this.getSortedChildIdsForParent(s.id))t(l);else e.push(s)};for(const i of this.getSelectedShapeIds())t(i);let r=null;for(const i of e)if(r===null)r=i.opacity;else if(r!==i.opacity)return{type:"mixed"};if(r!==null)return{type:"shared",value:r}}return{type:"shared",value:this.getInstanceState().opacityForNextShape}}setOpacityForNextShapes(e,t){return this.updateInstanceState({opacityForNextShape:e},t),this}setOpacityForSelectedShapes(e){const t=this.getSelectedShapes();if(t.length>0){const r=[],i=s=>{if(this.isShapeOfType(s,"group")){const l=this.getSortedChildIdsForParent(s);for(const c of l)i(this.getShape(c))}else r.push(s)};for(const s of t)i(s);this.updateShapes(r.map(s=>({id:s.id,type:s.type,opacity:e})))}return this}setStyleForNextShapes(e,t,r){const i=this.getInstanceState().stylesForNextShape;return this.updateInstanceState({stylesForNextShape:{...i,[e.id]:t}},r),this}setStyleForSelectedShapes(e,t){const r=this.getSelectedShapes();if(r.length>0){const i=[],s=l=>{if(this.isShapeOfType(l,"group")){const c=this.getSortedChildIdsForParent(l.id);for(const d of c)s(this.getShape(d))}else{const c=this.getShapeUtil(l),d=this.styleProps[l.type].get(e);if(d){const h={id:l.id,type:l.type,props:{[d]:t}};i.push({util:c,originalShape:l,updatePartial:h})}}};for(const l of r)s(l);this.updateShapes(i.map(({updatePartial:l})=>l))}return this}registerExternalAssetHandler(e,t){return this.externalAssetContentHandlers[e]=t,this}createTemporaryAssetPreview(e,t){if(this.temporaryAssetPreview.has(e))return this.temporaryAssetPreview.get(e);const r=URL.createObjectURL(t);return this.temporaryAssetPreview.set(e,r),setTimeout(()=>{this.temporaryAssetPreview.delete(e),URL.revokeObjectURL(r)},this.options.temporaryAssetPreviewLifetimeMs),r}getTemporaryAssetPreview(e){return this.temporaryAssetPreview.get(e)}async getAssetForExternalContent(e){var t,r;return await((r=(t=this.externalAssetContentHandlers)[e.type])==null?void 0:r.call(t,e))}hasExternalAssetHandler(e){return!!this.externalAssetContentHandlers[e]}registerExternalContentHandler(e,t){return this.externalContentHandlers[e]=t,this}async putExternalContent(e){var t,r;return(r=(t=this.externalContentHandlers)[e.type])==null?void 0:r.call(t,e)}getContentFromCurrentPage(e){const t=typeof e[0]=="string"?e:e.map(i=>i.id);if(!t||t.length===0)return;const r=this.getShapeAndDescendantIds(t);return S6(this,r,i=>{const s=[];for(const g of i){const y=this.getBinding(g);y&&s.push(y)}const l=[],c=[];for(const g of r){const y=this.getShape(g);if(!y)continue;if(!r.has(y.parentId)){const w=this.getShapePageTransform(y.id),C=w.point();c.push({...y,x:C.x,y:C.y,rotation:w.rotation(),parentId:this.getCurrentPageId()}),l.push(y.id)}else c.push(y)}const d=[],h=new Set;for(const g of c){if(!("assetId"in g.props))continue;const y=g.props.assetId;if(!y||h.has(y))continue;h.add(y);const v=this.getAsset(y);v&&d.push(v)}return{schema:this.store.schema.serialize(),shapes:c,rootShapeIds:l,bindings:s,assets:d}})}async resolveAssetsInContent(e){if(!e)return;const t=[];return await Promise.allSettled(e.assets.map(async r=>{var i,s,l;if((r.type==="image"||r.type==="video")&&!((i=r.props.src)!=null&&i.startsWith("data:image"))&&!((s=r.props.src)!=null&&s.startsWith("data:video"))&&!((l=r.props.src)!=null&&l.startsWith("http"))){const c=Lr(r),d=await this.store.props.assets.resolve(r,{screenScale:1,steppedScreenScale:1,dpr:1,networkEffectiveType:null,shouldResolveToOriginal:!0});c.props.src=await Bl.blobToDataUrl(await Lc(d).then(h=>h.blob())),t.push(c)}else t.push(r)})),e.assets=t,e}putContentOntoCurrentPage(e,t={}){var q,J,ie;if(this.getIsReadonly())return this;if(!e.schema)throw Error(`Could not put content:
content is missing a schema.`);const{select:r=!1,preserveIds:i=!1,preservePosition:s=!1}=t;let{point:l=void 0}=t;const c=this.getCurrentPageId(),{rootShapeIds:d}=e,h=[],g=[],y=[],v={store:{...Object.fromEntries(e.assets.map(W=>[W.id,W])),...Object.fromEntries(e.shapes.map(W=>[W.id,W])),...Object.fromEntries(((q=e.bindings)==null?void 0:q.map(W=>[W.id,W]))??[])},schema:e.schema},w=this.store.schema.migrateStoreSnapshot(v);if(w.type==="error")throw Error("Could not put content: could not migrate content");for(const W of Object.values(w.value))switch(W.typeName){case"asset":{h.push(W);break}case"shape":{g.push(W);break}case"binding":{y.push(W);break}}const C=new Map(i?g.map(W=>[W.id,W.id]):g.map(W=>[W.id,yr()])),E=new Map(i?y.map(W=>[W.id,W.id]):y.map(W=>[W.id,$h()]));let P=this.getCurrentPageId(),I=1/0,k=[];for(const W of this.getSelectedShapes()){if(I===0)break;const Y=this.isShapeOfType(W,"frame"),oe=this.getShapeAncestors(W);Y&&oe.push(W);const le=Y?oe.length+1:oe.length;if(le<I)I=le,k=oe,P=Y?W.id:W.parentId;else if(le===I){if(k.length!==oe.length)throw Error(`Ancestors: ${k.length} !== ${oe.length}`);if(k.length===0){P=c;break}else{P=c;for(let ce=0;ce<k.length&&oe[ce]===k[ce];ce++)P=oe[ce].id}}}let L=!1;if(!oa(P)){const W=this.getShape(P);if(W){if(!this.getViewportPageBounds().includes(this.getShapePageBounds(W)))P=c;else if(d.length===1){const Y=g.find(oe=>oe.id===d[0]);this.isShapeOfType(W,"frame")&&this.isShapeOfType(Y,"frame")&&Y.props.w===(W==null?void 0:W.props.w)&&Y.props.h===(W==null?void 0:W.props.h)&&(L=!0)}}else P=c}L||(L=C.has(P)),L&&(P=this.getShape(P).parentId);let O=this.getHighestIndexForParent(P);const z=[],F=g.map(W=>{const Y=C.get(W.id),oe={...W,id:Y};return d.includes(W.id)&&(oe.parentId=c,z.push(oe)),C.has(oe.parentId)?oe.parentId=C.get(W.parentId):(d.push(oe.id),oe.index=O,O=Fc(O)),oe});if(F.length+this.getCurrentPageShapeIds().size>this.options.maxShapesPerPage)return d0(this),this;const H=y.map(W=>({...W,id:Js(E.get(W.id)),fromId:Js(C.get(W.fromId)),toId:Js(C.get(W.toId))})),V=[],re=[];for(const W of h)this.store.has(W.id)||((W.type==="image"&&((J=W.props.src)!=null&&J.startsWith("data:image"))||W.type==="video"&&((ie=W.props.src)!=null&&ie.startsWith("data:video")))&&(re.push(Lr(W)),W.props.src=null),V.push(W));return Promise.allSettled(re.map(async W=>{const Y=await Kre(W.props.src,W.props.name,W.props.mimeType??"image/png"),oe=await this.getAssetForExternalContent({type:"file",file:Y,assetId:W.id});if(!oe){this.deleteAssets([W.id]);return}this.updateAssets([{...oe,id:W.id}])})),this.run(()=>{V.length>0&&this.createAssets(V),this.createShapes(F),this.createBindings(H),r&&this.select(...z.map(ce=>ce.id)),P!==c&&this.reparentShapes(z.map(ce=>ce.id),P);const W=F.map(ce=>this.getShape(ce.id)),Y=Xe.Common(W.map(ce=>this.getShapePageBounds(ce)));if(l===void 0)if(oa(P)){const ce=this.getViewportPageBounds();s||ce.includes(Xe.From(Y))?l=Y.center:l=ce.center}else{const ce=this.getShape(P);l=qe.applyToPoint(this.getShapePageTransform(ce),this.getShapeGeometry(ce).bounds.center)}if(z.length===1){const ce=z[0];if(this.isShapeOfType(ce,"frame"))for(;this.getShapesAtPoint(l).some(Q=>this.isShapeOfType(Q,"frame")&&Q.props.w===ce.props.w&&Q.props.h===ce.props.h);)l.x+=Y.w+16}const oe=Xe.Common(on(z.map(({id:ce})=>this.getShapePageBounds(ce)))).center,le=R.Sub(l,oe);this.updateShapes(z.map(({id:ce})=>{const Q=this.getShape(ce),he=this.getShapeParentTransform(ce).decompose().rotation,ke=R.Rot(le,-he);return{id:Q.id,type:Q.type,x:Q.x+ke.x,y:Q.y+ke.y}}))}),this}async getSvgElement(e,t={}){const r=typeof e[0]=="string"?e:e.map(i=>i.id);if(r.length!==0)return $re(this,r,t)}async getSvgString(e,t={}){const r=await this.getSvgElement(e,t);return r?{svg:new XMLSerializer().serializeToString(r.svg),width:r.width,height:r.height}:void 0}async getSvg(e,t={}){const r=await this.getSvgElement(e,t);if(r)return r.svg}_updateInputsFromEvent(e){const{pointerVelocity:t,previousScreenPoint:r,previousPagePoint:i,currentScreenPoint:s,currentPagePoint:l}=this.inputs,{screenBounds:c}=this.store.unsafeGetWithoutCapture(Xo),{x:d,y:h,z:g}=tb(()=>this.getCamera()),y=e.point.x-c.x,v=e.point.y-c.y,w=e.point.z??.5;r.setTo(s),i.setTo(l),s.set(y,v);const C=y/g-d,E=v/g-h;isFinite(C)&&isFinite(E)&&l.set(C,E,w),this.inputs.isPen=e.type==="pointer"&&e.isPen,(e.name==="pointer_down"||this.inputs.isPinching)&&(t.set(0,0),this.inputs.originScreenPoint.setTo(s),this.inputs.originPagePoint.setTo(l)),this.run(()=>{var P;this.store.put([{id:Cv,typeName:"pointer",x:l.x,y:l.y,lastActivityTimestamp:e.type==="pointer"&&e.pointerId===rz.CAMERA_MOVE?((P=this.store.unsafeGetWithoutCapture(Cv))==null?void 0:P.lastActivityTimestamp)??this._tickManager.now:this._tickManager.now,meta:{}}])},{history:"ignore"})}cancel(){return this.dispatch({type:"misc",name:"cancel"}),this}interrupt(){return this.dispatch({type:"misc",name:"interrupt"}),this}complete(){return this.dispatch({type:"misc",name:"complete"}),this}focus({focusContainer:e=!0}={}){return this.getIsFocused()?this:(e&&this.focusManager.focus(),this.updateInstanceState({isFocused:!0}),this)}blur({blurContainer:e=!0}={}){return this.getIsFocused()?(e?this.focusManager.blur():this.complete(),this.updateInstanceState({isFocused:!1}),this):this}getIsFocused(){return this.getInstanceState().isFocused}getIsReadonly(){return this.getInstanceState().isReadonly}getSnapshot(){return Vne(this.store)}loadSnapshot(e,t){return r4(this.store,e,t),this}_zoomToFitPageContentAt100Percent(){const e=this.getCurrentPageBounds();e&&this.zoomToBounds(e,{immediate:!0,targetZoom:this.getBaseZoom()})}_navigateToDeepLink(e){this.run(()=>{switch(e.type){case"page":{const t=this.getPage(e.pageId);t&&this.setCurrentPage(t),this._zoomToFitPageContentAt100Percent();return}case"shapes":{const t=on(e.shapeIds.map(l=>this.getShape(l))),r={};for(const l of t){const c=this.getAncestorPageId(l);c&&(r[c]??(r[c]=[]),r[c].push(l))}const[i,s]=Object.entries(r).sort(([l,c],[d,h])=>h.length-c.length)[0]??["",[]];if(!i||!s.length)this._zoomToFitPageContentAt100Percent();else{this.setCurrentPage(i);const l=Xe.Common(s.map(c=>this.getShapePageBounds(c)));this.zoomToBounds(l,{immediate:!0,targetZoom:this.getBaseZoom()})}return}case"viewport":{if(e.pageId){if(!this.getPage(e.pageId)){this._zoomToFitPageContentAt100Percent();return}this.setCurrentPage(e.pageId)}this.zoomToBounds(e.bounds,{immediate:!0,inset:0});return}default:Bi(e)}})}navigateToDeepLink(e){if(e&&"type"in e)return this._navigateToDeepLink(e),this;const r=new URL((e==null?void 0:e.url)??window.location.href).searchParams.get((e==null?void 0:e.param)??"d");if(!r)return this._zoomToFitPageContentAt100Percent(),this;try{this._navigateToDeepLink(qre(r))}catch(i){console.warn(i),this._zoomToFitPageContentAt100Percent()}return this}createDeepLink(e){const t=new URL((e==null?void 0:e.url)??window.location.href);return t.searchParams.set((e==null?void 0:e.param)??"d",Gre((e==null?void 0:e.to)??{type:"viewport",pageId:this.options.maxPages===1?void 0:this.getCurrentPageId(),bounds:this.getViewportPageBounds()})),t}registerDeepLinkListener(e){if(e!=null&&e.getUrl&&!(e!=null&&e.onChange))throw Error("[tldraw:urlStateSync] If you specify getUrl, you must also specify the onChange callback.");const t=Le("url with state",()=>{var d,h;const l=((d=e==null?void 0:e.getUrl)==null?void 0:d.call(e,this))??window.location.href;return this.createDeepLink({param:e==null?void 0:e.param,url:l,to:(h=e==null?void 0:e.getTarget)==null?void 0:h.call(e,this)}).toString()}),r=(e==null?void 0:e.onChange)??(()=>{var c;const l=this.createDeepLink({param:e==null?void 0:e.param,to:(c=e==null?void 0:e.getTarget)==null?void 0:c.call(e,this)});window.history.replaceState({},document.title,l.toString())}),i=Kw(l=>l(),(e==null?void 0:e.debounceMs)??500),s=Kl("update url on state change",()=>r(new URL(t.get()),this),{scheduleEffect:i});return()=>{s(),i.cancel()}}cancelDoubleClick(){this._clickManager.cancelDoubleClickTimeout()}_setShiftKeyTimeout(){this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Qo(this.inputs),code:"ShiftLeft"})}_setAltKeyTimeout(){this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Qo(this.inputs),code:"AltLeft"})}_setCtrlKeyTimeout(){this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Qo(this.inputs),code:"ControlLeft"})}_setMetaKeyTimeout(){this.inputs.metaKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Meta",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Qo(this.inputs),code:"MetaLeft"})}dispatch(e){return this._pendingEventsForNextTick.push(e),e.type==="pointer"&&e.name==="pointer_move"||e.type==="wheel"||e.type==="pinch"||this._flushEventsForTick(0),this}_flushEventsForTick(e){this.run(()=>{if(this._pendingEventsForNextTick.length>0){const t=[...this._pendingEventsForNextTick];this._pendingEventsForNextTick.length=0;for(const r of t)this._flushEventForTick(r)}e>0&&this.root.handleEvent({type:"misc",name:"tick",elapsed:e}),this.scribbles.tick(e)})}_flushEventForTick(e){if(this.getCrashingError())return this;const{inputs:t}=this,{type:r}=e;if(e.type==="misc"){(e.name==="cancel"||e.name==="complete")&&(this.inputs.isDragging=!1,this.inputs.isPanning&&(this.inputs.isPanning=!1,this.inputs.isSpacebarPanning=!1,this.setCursor({type:this._prevCursor,rotation:0}))),this.root.handleEvent(e);return}e.shiftKey?(clearTimeout(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,t.shiftKey=!0):!e.shiftKey&&t.shiftKey&&this._shiftKeyTimeout===-1&&(this._shiftKeyTimeout=this.timers.setTimeout(this._setShiftKeyTimeout,150)),e.altKey?(clearTimeout(this._altKeyTimeout),this._altKeyTimeout=-1,t.altKey=!0):!e.altKey&&t.altKey&&this._altKeyTimeout===-1&&(this._altKeyTimeout=this.timers.setTimeout(this._setAltKeyTimeout,150)),e.ctrlKey?(clearTimeout(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,t.ctrlKey=!0):!e.ctrlKey&&t.ctrlKey&&this._ctrlKeyTimeout===-1&&(this._ctrlKeyTimeout=this.timers.setTimeout(this._setCtrlKeyTimeout,150)),e.metaKey?(clearTimeout(this._metaKeyTimeout),this._metaKeyTimeout=-1,t.metaKey=!0):!e.metaKey&&t.metaKey&&this._metaKeyTimeout===-1&&(this._metaKeyTimeout=this.timers.setTimeout(this._setMetaKeyTimeout,150));const{originPagePoint:i,currentPagePoint:s}=t;t.isPointing||(t.isDragging=!1);const l=this.store.unsafeGetWithoutCapture(Xo),c=this.store.get(this._getCurrentPageStateId()),d=this._cameraOptions.__unsafe__getWithoutCapture();switch(r){case"pinch":{if(d.isLocked)return;switch(clearTimeout(this._longPressTimeout),this._updateInputsFromEvent(e),e.name){case"pinch_start":{if(t.isPinching)return;t.isEditing||(this._pinchStart=this.getCamera().z,this._selectedShapeIdsAtPointerDown.length||(this._selectedShapeIdsAtPointerDown=[...c.selectedShapeIds]),this._didPinch=!0,t.isPinching=!0,this.interrupt());return}case"pinch":{if(!t.isPinching)return;const{point:{z:h=1},delta:{x:g,y}}=e,{x:v,y:w}=R.SubXY(e.point,l.screenBounds.x,l.screenBounds.y);this.stopCameraAnimation(),l.followingUserId&&this.stopFollowingUser();const{x:C,y:E,z:P}=tb(()=>this.getCamera()),{panSpeed:I,zoomSpeed:k}=d;this._setCamera(new R(C+g*I/P-v/P+v/(h*k),E+y*I/P-w/P+w/(h*k),h*k),{immediate:!0});return}case"pinch_end":{if(!t.isPinching)return this;t.isPinching=!1;const{_selectedShapeIdsAtPointerDown:h}=this;this.setSelectedShapes(this._selectedShapeIdsAtPointerDown),this._selectedShapeIdsAtPointerDown=[],this._didPinch&&(this._didPinch=!1,h.length>0&&this.once("tick",()=>{this._didPinch||this.setSelectedShapes(h)}));return}}}case"wheel":{if(d.isLocked)return;this._updateInputsFromEvent(e);const{panSpeed:h,zoomSpeed:g,wheelBehavior:y}=d;if(y!=="none"){this.stopCameraAnimation(),l.followingUserId&&this.stopFollowingUser();const{x:v,y:w,z:C}=tb(()=>this.getCamera()),{x:E,y:P,z:I=0}=e.delta;let k=y;switch(t.ctrlKey&&(k=y==="pan"?"zoom":"pan"),k){case"zoom":{const{x:L,y:O}=this.inputs.currentScreenPoint;let z=I;y==="zoom"&&(Math.abs(P)>10?z=10*Math.sign(P)/100:z=P/100);const F=C+(z??0)*g*C;this._setCamera(new R(v+(L/F-L)-(L/C-L),w+(O/F-O)-(O/C-O),F),{immediate:!0}),this.maybeTrackPerformance("Zooming");return}case"pan":{this._setCamera(new R(v+E*h/C,w+P*h/C,C),{immediate:!0}),this.maybeTrackPerformance("Panning");return}}}break}case"pointer":{if(t.isPinching)return;this._updateInputsFromEvent(e);const{isPen:h}=e,{isPenMode:g}=l;switch(e.name){case"pointer_down":{if(g&&!h)return;if(this.inputs.isPanning||(this._longPressTimeout=this.timers.setTimeout(()=>{const y=this.getViewportScreenBounds();this.dispatch({...e,point:this.inputs.originScreenPoint.clone().addXY(y.x,y.y),name:"long_press"})},this.options.longPressDurationMs)),this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds(),e.button===iz&&(this.capturedPointerId=e.pointerId),t.buttons.add(e.button),t.isPointing=!0,t.isDragging=!1,!g&&h&&this.updateInstanceState({isPenMode:!0}),e.button===oz?(this._restoreToolId=this.getCurrentToolId(),this.complete(),this.setCurrentTool("eraser")):e.button===Ub&&(this.inputs.isPanning||(this._prevCursor=this.getInstanceState().cursor.type),this.inputs.isPanning=!0,clearTimeout(this._longPressTimeout)),this.inputs.isPanning)return this.stopCameraAnimation(),this.setCursor({type:"grabbing",rotation:0}),this;break}case"pointer_move":{if(!h&&g)return;const{x:y,y:v,z:w}=tb(()=>this.getCamera());if(this.inputs.isPanning&&this.inputs.isPointing){const{currentScreenPoint:C,previousScreenPoint:E}=this.inputs,{panSpeed:P}=d,I=R.Sub(C,E);this.setCamera(new R(y+I.x*P/w,v+I.y*P/w,w),{immediate:!0}),this.maybeTrackPerformance("Panning");return}t.isPointing&&!t.isDragging&&R.Dist2(i,s)*this.getZoomLevel()>(l.isCoarsePointer?this.options.coarseDragDistanceSquared:this.options.dragDistanceSquared)/w&&(t.isDragging=!0,clearTimeout(this._longPressTimeout));break}case"pointer_up":{if(t.isDragging=!1,t.isPointing=!1,clearTimeout(this._longPressTimeout),t.buttons.delete(e.button),l.isPenMode&&!h)return;if(this.capturedPointerId===e.pointerId&&(this.capturedPointerId=null,e.button=0),t.isPanning){t.keys.has("Space")||(t.isPanning=!1,t.isSpacebarPanning=!1);const y=this.inputs.pointerVelocity,v=Math.min(2,y.len());switch(e.button){case iz:{this.setCursor({type:"grab",rotation:0});break}case Ub:this.inputs.keys.has(" ")?this.setCursor({type:"grab",rotation:0}):this.setCursor({type:this._prevCursor,rotation:0})}v>0&&this.slideCamera({speed:v,direction:y})}else e.button===oz&&(this.complete(),this.setCurrentTool(this._restoreToolId));break}}break}case"keyboard":{switch(e.key==="ShiftRight"&&(e.key="ShiftLeft"),e.key==="AltRight"&&(e.key="AltLeft"),e.code==="ControlRight"&&(e.code="ControlLeft"),e.code==="MetaRight"&&(e.code="MetaLeft"),e.name){case"key_down":{if(t.keys.add(e.code),e.code==="Space"&&!e.ctrlKey&&(this.inputs.isPanning||(this._prevCursor=l.cursor.type),this.inputs.isPanning=!0,this.inputs.isSpacebarPanning=!0,clearTimeout(this._longPressTimeout),this.setCursor({type:this.inputs.isPointing?"grabbing":"grab",rotation:0})),this.inputs.isSpacebarPanning){let h;switch(e.code){case"ArrowUp":{h=new R(0,-1);break}case"ArrowRight":{h=new R(1,0);break}case"ArrowDown":{h=new R(0,1);break}case"ArrowLeft":{h=new R(-1,0);break}}if(h){const g=this.getViewportPageBounds(),y=g.clone().translate(h.mulV({x:g.w,y:g.h}));this._animateToViewport(y,{animation:{duration:320}})}}break}case"key_up":{t.keys.delete(e.code),e.code==="Space"&&(this.inputs.buttons.has(Ub)||(this.inputs.isPanning=!1,this.inputs.isSpacebarPanning=!1,this.setCursor({type:this._prevCursor,rotation:0})));break}}break}}if(e.type==="pointer"){e.button===Ub?e.name="middle_click":e.button===fk&&(e.name="right_click");const{isPenMode:h}=this.store.unsafeGetWithoutCapture(Xo);if(e.isPen===h){const g=this._clickManager.handlePointerEvent(e);if(e.name!==g.name){this.root.handleEvent(e),this.emit("event",e),this.root.handleEvent(g),this.emit("event",g);return}}}return this.root.handleEvent(e),this.emit("event",e),e.type==="pointer"&&e.name==="pointer_down"&&this.menus.clearOpenMenus(),this}maybeTrackPerformance(e){Si.measurePerformance.get()&&(this.performanceTracker.isStarted()?clearTimeout(this.performanceTrackerTimeout):this.performanceTracker.start(e),this.performanceTrackerTimeout=this.timers.setTimeout(()=>{this.performanceTracker.stop()},50))}}lt=yoe(eR),dt(lt,1,"getIsShapeHiddenCache",y6,it),dt(lt,1,"getCanUndo",m6,it),dt(lt,1,"getCanRedo",g6,it),dt(lt,1,"getPath",p6,it),dt(lt,1,"getCurrentTool",h6,it),dt(lt,1,"getCurrentToolId",f6,it),dt(lt,1,"getDocumentSettings",d6,it),dt(lt,1,"getInstanceState",u6,it),dt(lt,1,"getOpenMenus",c6,it),dt(lt,1,"getIsMenuOpen",l6,it),dt(lt,1,"getPageStates",a6,it),dt(lt,1,"_getPageStatesQuery",s6,it),dt(lt,1,"getCurrentPageState",o6,it),dt(lt,1,"_getCurrentPageStateId",i6,it),dt(lt,1,"getSelectedShapeIds",r6,it),dt(lt,1,"getSelectedShapes",n6,it),dt(lt,1,"getOnlySelectedShapeId",t6,it),dt(lt,1,"getOnlySelectedShape",e6,it),dt(lt,1,"getSelectionPageBounds",J$,it),dt(lt,1,"getSelectionRotation",Q$,it),dt(lt,1,"getSelectionRotatedPageBounds",Z$,it),dt(lt,1,"getSelectionRotatedScreenBounds",X$,it),dt(lt,1,"getFocusedGroupId",Y$,it),dt(lt,1,"getFocusedGroup",q$,it),dt(lt,1,"getEditingShapeId",G$,it),dt(lt,1,"getEditingShape",W$,it),dt(lt,1,"getHoveredShapeId",K$,it),dt(lt,1,"getHoveredShape",V$,it),dt(lt,1,"getHintingShapeIds",H$,it),dt(lt,1,"getHintingShape",B$,it),dt(lt,1,"getErasingShapeIds",$$,it),dt(lt,1,"getErasingShapes",U$,it),dt(lt,1,"_unsafe_getCameraId",z$,it),dt(lt,1,"getCamera",F$,it),dt(lt,1,"getViewportPageBoundsForFollowing",N$,it),dt(lt,1,"getCameraForFollowing",L$,it),dt(lt,1,"getZoomLevel",j$,it),dt(lt,1,"getViewportScreenBounds",O$,it),dt(lt,1,"getViewportScreenCenter",D$,it),dt(lt,1,"getViewportPageBounds",A$,it),dt(lt,1,"_getCollaboratorsQuery",M$,it),dt(lt,1,"getCollaborators",R$,it),dt(lt,1,"getCollaboratorsOnCurrentPage",k$,it),dt(lt,1,"getRenderingShapes",I$,it),dt(lt,1,"_getAllPagesQuery",T$,it),dt(lt,1,"getPages",P$,it),dt(lt,1,"getCurrentPageId",_$,it),dt(lt,1,"getCurrentPageShapeIdsSorted",E$,it),dt(lt,1,"_getAllAssetsQuery",C$,it),dt(lt,1,"_getShapeGeometryCache",b$,it),dt(lt,1,"_getShapeHandlesCache",w$,it),dt(lt,1,"_getShapePageTransformCache",x$,it),dt(lt,1,"_getShapePageBoundsCache",S$,it),dt(lt,1,"_getShapeClipPathCache",v$,it),dt(lt,1,"_getShapeMaskCache",y$,it),dt(lt,1,"_getShapeMaskedPageBoundsCache",m$,it),dt(lt,1,"_notVisibleShapes",g$,it),dt(lt,1,"getCulledShapes",p$,it),dt(lt,1,"getCurrentPageBounds",h$,it),dt(lt,1,"getCurrentPageShapes",f$,it),dt(lt,1,"getCurrentPageShapesSorted",d$,it),dt(lt,1,"getCurrentPageRenderingShapesSorted",u$,it),dt(lt,1,"_getBindingsIndexCache",c$,it),dt(lt,1,"_getSelectionSharedStyles",l$,it),dt(lt,1,"getSharedStyles",a$,it),dt(lt,1,"getSharedOpacity",s$,it),dt(lt,1,"getIsFocused",o$,it),dt(lt,1,"getIsReadonly",i$,it),dt(lt,1,"_setShiftKeyTimeout",r$,it),dt(lt,1,"_setAltKeyTimeout",n$,it),dt(lt,1,"_setCtrlKeyTimeout",t$,it),dt(lt,1,"_setMetaKeyTimeout",e$,it),Soe(lt,it);function d0(n,e=n.getCurrentPageId()){const t=n.getPage(e).name;n.emit("max-shapes",{name:t,pageId:e,count:n.options.maxShapesPerPage})}function Kc(n,e){if(!e)return n;let t=null;const r=Object.entries(e);for(let i=0,s=r.length;i<s;i++){const[l,c]=r[i];if(c!==void 0&&!(l==="id"||l==="type"||l==="typeName")&&c!==n[l]){if(t||(t={...n}),l==="props"||l==="meta"){t[l]={...n[l]};for(const[d,h]of Object.entries(c))t[l][d]=h;continue}t[l]=c}}return t||n}function v6(n,e,t){const r=n.getShape(e);if(!r)return;t.push(r);const i=n.getSortedChildIdsForParent(e);for(let s=0,l=i.length;s<l;s++)v6(n,i[s],t)}function S6(n,e,t){let r;if(n.run(()=>{const i=n.store.extractingChanges(()=>{const s=new Set,l=new Set;for(const c of e)if(n.getShape(c))for(const h of n.getBindingsInvolvingShape(c)){const g=e.has(h.fromId),y=e.has(h.toId);if(g&&y){s.add(h.id);continue}(!g||!y)&&l.add(h.id)}n.deleteBindings([...l],{isolateShapes:!0});try{r=tf.ok(t(s))}catch(c){r=tf.err(c)}});n.store.applyDiff(gv(i))},{history:"ignore"}),r.ok)return r.value;throw r.error}function x6(n,e){if(!e.constraints)throw Error("Should have constraints here");const{padding:{x:t,y:r}}=e.constraints,i=n.getViewportScreenBounds(),s=Xe.From(e.constraints.bounds),l=(i.w-t*2)/s.w,c=(i.h-r*2)/s.h;return{zx:l,zy:c}}function Qv(){const n=xe(),e=Gv();return Pe("isDarkMode",()=>(e==null?void 0:e.isDarkMode)??n.user.getIsDarkMode(),[e,n])}const w6="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",b6="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",f0='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>';function wf(n,e,t,r,i,s=16,l=16){const c=(-t-e)*(qn/180),d=Math.sin(c),h=Math.cos(c),g=1*h-1*d,y=1*d+1*h;return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${i};'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='${g}' dy='${y}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${e+t} 16 16)${r?" scale(-1,-1) translate(0, -32)":""}' filter='url(%23shadow)'>`+n.replaceAll('"',"'")+`</g></svg>") ${s} ${l}, pointer`}const woe=["default","pointer","cross","move","grab","grabbing","text","zoom-in","zoom-out"],boe={none:()=>"none","ew-resize":(n,e,t)=>wf(b6,n,0,e,t),"ns-resize":(n,e,t)=>wf(b6,n,90,e,t),"nesw-resize":(n,e,t)=>wf(w6,n,0,e,t),"nwse-resize":(n,e,t)=>wf(w6,n,90,e,t),"nwse-rotate":(n,e,t)=>wf(f0,n,0,e,t),"nesw-rotate":(n,e,t)=>wf(f0,n,90,e,t),"senw-rotate":(n,e,t)=>wf(f0,n,180,e,t),"swne-rotate":(n,e,t)=>wf(f0,n,270,e,t)};function za(n,e=0,t="black"){return boe[n](fee(e),!1,t)}function Coe(){const n=xe(),e=Hi(),t=Qv();df("useCursor",()=>{const{type:r,rotation:i}=n.getInstanceState().cursor;if(woe.includes(r)){e.style.setProperty("--tl-cursor",`var(--tl-cursor-${r})`);return}e.style.setProperty("--tl-cursor",za(r,i,t?"white":"black"))},[n,e,t])}function Eoe(){const n=xe(),e=Hi(),t=Qv(),r=Pe(Si.forceSrgb);zt.useEffect(()=>{t?(e.setAttribute("data-color-mode","dark"),e.classList.remove("tl-theme__light"),e.classList.add("tl-theme__dark")):(e.setAttribute("data-color-mode","light"),e.classList.remove("tl-theme__dark"),e.classList.add("tl-theme__light")),r?e.classList.add("tl-theme__force-sRGB"):e.classList.remove("tl-theme__force-sRGB")},[n,e,r,t])}function _oe(){const[n,e]=M.useState(0);M.useEffect(()=>e(t=>t+1),[])}const Poe=n=>n.props.src,Toe={upload:(n,e)=>Bl.blobToDataUrl(e)};function tR(n){return"schema"in n&&n.schema?n.schema:DQ({shapes:"shapeUtils"in n&&n.shapeUtils?C6(u4(n.shapeUtils)):void 0,bindings:"bindingUtils"in n&&n.bindingUtils?C6(o4(n.bindingUtils)):void 0,migrations:"migrations"in n?n.migrations:void 0})}function Jv({initialData:n,defaultName:e="",id:t,assets:r=Toe,onMount:i,collaboration:s,...l}={}){const c=tR(l),d=new _P({id:t,schema:c,initialData:n,props:{defaultName:e,assets:{upload:r.upload,resolve:r.resolve??Poe},onMount:h=>{rn(h instanceof it),i==null||i(h)},collaboration:s}});if(l.snapshot){if(n)throw new Error("Cannot provide both initialData and snapshot");r4(d,l.snapshot)}return d}function C6(n){return Object.fromEntries(n.map(e=>[e.type,{props:e.props,migrations:e.migrations}]))}function Ioe(){window.alert(`Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.

Keep seeing this message?
 If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.
 If your hard disk is full, try clearing up some space and then reload the page.`)}function koe(){window.alert(`Oops! We could not access your browser's storageand the app won't work correctly without that. We now need to reload the page and try again.

Keep seeing this message?
 If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.`)}const Roe=350,Moe=1e4,E6=Symbol("UPDATE_INSTANCE_STATE"),Aoe=n=>n;class Doe{constructor(e){U(this,"onmessage")}postMessage(e){}close(){}}const Ooe=typeof BroadcastChannel>"u"?Doe:BroadcastChannel;class joe{constructor(e,{persistenceKey:t,sessionId:r=Vv,onLoad:i,onLoadError:s},l=new Ooe(`tldraw-tab-sync-${t}`)){U(this,"disposables",new Set);U(this,"diffQueue",[]);U(this,"didDispose",!1);U(this,"shouldDoFullDBWrite",!0);U(this,"isReloading",!1);U(this,"persistenceKey");U(this,"sessionId");U(this,"serializedSchema");U(this,"isDebugging",!1);U(this,"documentTypes");U(this,"$sessionStateSnapshot");U(this,"db");U(this,"initTime",Date.now());U(this,"isPersisting",!1);U(this,"didLastWriteError",!1);U(this,"scheduledPersistTimeout",null);this.store=e,this.channel=l,typeof window<"u"&&(window.tlsync=this),this.persistenceKey=t,this.sessionId=r,this.db=new Ob(t),this.disposables.add(()=>this.db.close()),this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=Rk(this.store),this.disposables.add(e.listen(({changes:c})=>{this.diffQueue.push(c),this.channel.postMessage(Aoe({type:"diff",storeId:this.store.id,changes:c,schema:this.serializedSchema})),this.schedulePersist()},{source:"user",scope:"document"})),this.disposables.add(e.listen(()=>{this.diffQueue.push(E6),this.schedulePersist()},{scope:"session"})),this.connect(i,s),this.documentTypes=new Set(Object.values(this.store.schema.types).filter(c=>c.scope==="document").map(c=>c.typeName))}debug(...e){this.isDebugging&&console.debug(...e)}async connect(e,t){this.debug("connecting");let r;try{r=await this.db.load({sessionId:this.sessionId})}catch(i){t(i),koe();return}if(this.debug("loaded data from store",r,"didDispose",this.didDispose),!this.didDispose)try{if(r){const i=Object.fromEntries(r.records.map(d=>[d.id,d])),s=r.sessionStateSnapshot??Hne(i),l=this.store.schema.migrateStoreSnapshot({store:i,schema:r.schema??this.store.schema.serializeEarliestVersion()});if(l.type==="error"){console.error("failed to migrate store",l),t(new Error(`Failed to migrate store: ${l.reason}`));return}const c=Object.values(l.value).filter(d=>this.documentTypes.has(d.typeName));c.length>0&&this.store.mergeRemoteChanges(()=>{this.store.put(c,"initialize")}),s&&Mk(this.store,s)}this.channel.onmessage=({data:i})=>{var c,d;this.debug("got message",i);const s=i,l=this.store.schema.getMigrationsSince(s.schema);if(l.ok){if(l.value.length>0){this.debug("telling them to reload"),this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.shouldDoFullDBWrite=!0,this.persistIfNeeded();return}}else{if(Date.now()-this.initTime<5e3){t(new Error("Schema mismatch, please close other tabs and reload the page"));return}this.debug("reloading"),this.isReloading=!0,(d=(c=window==null?void 0:window.location)==null?void 0:c.reload)==null||d.call(c);return}s.type==="diff"&&(this.debug("applying diff"),cl(()=>{this.store.mergeRemoteChanges(()=>{this.store.applyDiff(s.changes)})}))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add(()=>{this.channel.close()}),e(this)}catch(i){if(this.debug("error loading data from store",i),this.didDispose)return;t(i);return}}close(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach(e=>e())}schedulePersist(){this.debug("schedulePersist",this.scheduledPersistTimeout),!this.scheduledPersistTimeout&&(this.scheduledPersistTimeout=setTimeout(()=>{this.scheduledPersistTimeout=null,this.persistIfNeeded()},this.didLastWriteError?Moe:Roe))}persistIfNeeded(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),!this.isPersisting&&(this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist())}async doPersist(){if(rn(!this.isPersisting,"persist already in progress"),this.didDispose)return;this.isPersisting=!0,this.debug("doPersist start");const e=this.diffQueue;this.diffQueue=[];try{if(this.shouldDoFullDBWrite)this.shouldDoFullDBWrite=!1,await this.db.storeSnapshot({schema:this.store.schema,snapshot:this.store.serialize(),sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()});else{const t=sb(e.filter(r=>r!==E6));await this.db.storeChanges({changes:t,schema:this.store.schema,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()})}this.didLastWriteError=!1}catch(t){this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",t),Ioe(),typeof window<"u"&&window.location.reload()}this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist()}}function nR(n){const e=M.useRef(n),[t,r]=M.useState(n);t!==e.current&&r(e.current);const i=M.useCallback(s=>{typeof s=="function"?e.current=s(e.current):e.current=s,r(e.current)},[]);return[t,i]}function Loe(n){const[e,t]=nR({status:"loading"});return n=Yh(n),M.useEffect(()=>{const{persistenceKey:r,sessionId:i,...s}=n;if(!r){t({status:"not-synced",store:Jv(s)});return}t({status:"loading"});const l=new jc,c={upload:async(y,v)=>(await g.db.storeAsset(y.id,v),y.id),resolve:async y=>y.props.src?y.props.src.startsWith("asset:")?await l.get(y,async()=>{const v=await g.db.getAsset(y.id);return v?URL.createObjectURL(v):null}):y.props.src:null,...s.assets},d=Jv({...s,assets:c});let h=!1;const g=new joe(d,{sessionId:i,persistenceKey:r,onLoad(){h||t({store:d,status:"synced-local"})},onLoadError(y){h||t({status:"error",error:y})}});return()=>{h=!0,g.close()}},[n,t]),e}function Noe(){const n=xe(),e=Hi();M.useEffect(()=>{const t=s=>e.style.setProperty("--tl-zoom",s.toString()),r=Kw(t,100),i=new Cg("useZoomCss",()=>{n.getCurrentPageShapeIds().size<300?t(n.getZoomLevel()):r(n.getZoomLevel())});return i.attach(),i.execute(),()=>{i.detach(),r.cancel()}},[n,e])}function rR(n){const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0,i=n.length;r<i;r++)t[r]=n.charCodeAt(r);return e}function Foe(n){const e=atob(n),t=rR(e);return crypto.subtle.importKey("spki",new Uint8Array(t),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"])}var zoe={};const Uoe=5,eS={ANNUAL_LICENSE:1,PERPETUAL_LICENSE:2,INTERNAL_LICENSE:4,WITH_WATERMARK:8},$oe=Math.max(...Object.values(eS)),tS={ID:0,HOSTS:1,FLAGS:2,EXPIRY_DATE:3},Boe=Object.keys(tS).length,iR="sales@tldraw.com",Hoe=`${xf()}/watermarks/watermark-track.svg`;class h0{constructor(e,t,r){U(this,"publicKey","MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEHJh0uUfxHtCGyerXmmatE368Hd9rI6LH9oPDQihnaCryRFWEVeOvf9U/SPbyxX74LFyJs5tYeAHq5Nc0Ax25LQ");U(this,"isDevelopment");U(this,"isTest");U(this,"isCryptoAvailable");U(this,"state",si("license state","pending"));U(this,"verbose",!0);this.isTest=zoe.NODE_ENV==="test",this.isDevelopment=this.getIsDevelopment(r),this.publicKey=t||this.publicKey,this.isCryptoAvailable=!!crypto.subtle,this.getLicenseFromKey(e).then(i=>{const s=Voe(i);!this.isDevelopment&&s&&Lc(Hoe),s?this.state.set("unlicensed"):i.isLicensedWithWatermark?this.state.set("licensed-with-watermark"):this.state.set("licensed")})}getIsDevelopment(e){return e==="development"?!0:e==="production"?!1:window.location.protocol!=="https:"}async extractLicenseKey(e){const[t,r]=e.split("."),[i,s]=t.split("/");if(!i.startsWith("tldraw-"))throw new Error(`Unsupported prefix '${i}'`);const l=await Foe(this.publicKey);let c;try{c=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},l,new Uint8Array(rR(atob(r))),new Uint8Array(rR(atob(s))))}catch(h){throw console.error(h),new Error("Could not perform signature validation")}if(!c)throw new Error("Invalid signature");let d;try{d=JSON.parse(atob(s))}catch{throw new Error("Could not parse object")}return d.length>Boe&&this.outputMessages(["License key contains some unknown properties.","You may want to update tldraw packages to a newer version to get access to new functionality."]),{id:d[tS.ID],hosts:d[tS.HOSTS],flags:d[tS.FLAGS],expiryDate:d[tS.EXPIRY_DATE]}}async getLicenseFromKey(e){if(!e)return this.isDevelopment||this.outputNoLicenseKeyProvided(),{isLicenseParseable:!1,reason:"no-key-provided"};if(this.isDevelopment&&!this.isCryptoAvailable)return this.verbose&&(console.log("tldraw: you seem to be in a development environment that does not support crypto. License not verified."),console.log("You should check that this works in production separately.")),{isLicenseParseable:!1,reason:"has-key-development-mode"};let t=e.replace(/[\u200B-\u200D\uFEFF]/g,"");t=t.replace(/\r?\n|\r/g,"");try{const r=await this.extractLicenseKey(t),i=new Date(r.expiryDate),s=this.isFlagEnabled(r.flags,eS.ANNUAL_LICENSE),l=this.isFlagEnabled(r.flags,eS.PERPETUAL_LICENSE),c={license:r,isLicenseParseable:!0,isDevelopment:this.isDevelopment,isDomainValid:this.isDomainValid(r),expiryDate:i,isAnnualLicense:s,isAnnualLicenseExpired:s&&this.isAnnualLicenseExpired(i),isPerpetualLicense:l,isPerpetualLicenseExpired:l&&this.isPerpetualLicenseExpired(i),isInternalLicense:this.isFlagEnabled(r.flags,eS.INTERNAL_LICENSE),isLicensedWithWatermark:this.isFlagEnabled(r.flags,eS.WITH_WATERMARK)};return this.outputLicenseInfoIfNeeded(c),c}catch(r){return this.outputInvalidLicenseKey(r.message),{isLicenseParseable:!1,reason:"invalid-license-key"}}}isDomainValid(e){const t=window.location.hostname.toLowerCase();return e.hosts.some(r=>{const i=r.toLowerCase().trim();if(i===t||`www.${i}`===t||i===`www.${t}`||r==="*")return!0;if(r.includes("*")){const s=new RegExp(r.replace(/\*/g,".*?"));return s.test(t)||s.test(`www.${t}`)}return!1})}getExpirationDateWithoutGracePeriod(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}getExpirationDateWithGracePeriod(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+Uoe+1)}isAnnualLicenseExpired(e){const t=this.getExpirationDateWithGracePeriod(e),r=new Date>=t;return!r&&new Date>=this.getExpirationDateWithoutGracePeriod(e)&&this.outputMessages(["tldraw license is about to expire, you are in a grace period.",`Please reach out to ${iR} if you would like to renew your license.`]),r}isPerpetualLicenseExpired(e){const t=this.getExpirationDateWithGracePeriod(e),r={major:new Date(Y5.major),minor:new Date(Y5.minor)};return r.major>=t||r.minor>=t}isFlagEnabled(e,t){return(e&t)===t}outputNoLicenseKeyProvided(){}outputInvalidLicenseKey(e){this.outputMessages(["Invalid tldraw license key",`Reason: ${e}`])}outputLicenseInfoIfNeeded(e){e.isAnnualLicenseExpired&&this.outputMessages(["Your tldraw license has expired!",`Please reach out to ${iR} to renew.`]),!e.isDomainValid&&!e.isDevelopment&&this.outputMessages(["This tldraw license key is not valid for this domain!",`Please reach out to ${iR} if you would like to use tldraw on other domains.`]),e.license.flags>=$oe*2&&this.outputMessages(["This tldraw license contains some unknown flags.","You may want to update tldraw packages to a newer version to get access to new functionality."])}outputMessages(e){if(!this.isTest&&this.verbose){this.outputDelimiter();for(const t of e)console.log(`%c${t}`,"color: white; background: crimson; padding: 2px; border-radius: 3px;");this.outputDelimiter()}}outputDelimiter(){console.log("%c-------------------------------------------------------------------","color: white; background: crimson; padding: 2px; border-radius: 3px;")}}U(h0,"className","tl-watermark_SEE-LICENSE");function Voe(n){if(!n.isLicenseParseable||!n.isDomainValid&&!n.isDevelopment)return!0;if(n.isPerpetualLicenseExpired||n.isAnnualLicenseExpired){if(n.isInternalLicense)throw new Error("License: Internal license expired.");return!0}return!1}const _6=M.createContext({}),Koe=()=>M.useContext(_6);function Woe({licenseKey:n,children:e}){const[t]=M.useState(()=>new h0(n));return m.jsx(_6.Provider,{value:t,children:e})}function bf(n){if(!n)throw Error("usePassThroughWheelEvents must be passed a ref");const e=Hi();M.useEffect(()=>{function t(i){if(i.isSpecialRedispatchedEvent)return;mn(i);const s=e.querySelector(".tl-canvas");if(!s)return;const l=new WheelEvent("wheel",i);l.isSpecialRedispatchedEvent=!0,s.dispatchEvent(l)}const r=n.current;if(r)return r.addEventListener("wheel",t,{passive:!1}),()=>{r.removeEventListener("wheel",t)}},[e,n])}const Goe='<svg xmlns="http://www.w3.org/2000/svg" width="3001" height="1000" fill="none"><path fill="#000" d="M590.656 300.449c0 49.706-40.294 90-90 90-49.705 0-90-40.294-90-90 0-49.705 40.295-90 90-90 49.706 0 90 40.295 90 90M569.431 719.011c-15.247 32.821-56.006 91.589-98.338 91.438-32.004-.115-38.642-30.904-17.414-50.856 17.381-16.337 28.246-48.075 31.995-72.719.415-2.728-1.556-5.197-4.272-5.679-39.666-7.04-70.746-40.877-70.746-83.417 0-48.23 38.983-87.329 87.07-87.329 39.936 0 70.172 22.237 83.369 52.397 18.839 43.055 7.117 115.733-11.664 156.165M2613.29 385.681V239.319c0-11.363 9.22-20.569 20.59-20.569h8.26c11.37 0 20.59 9.206 20.59 20.569v36.911c0 8.629 7 15.625 15.63 15.625h35.25c8.63 0 15.63-6.996 15.63-15.625v-36.911c0-11.363 9.22-20.569 20.59-20.569h8.17c11.37 0 20.59 9.206 20.59 20.569v146.362c0 11.363-9.22 20.569-20.59 20.569h-8.17c-11.37 0-20.59-9.206-20.59-20.569v-36.999c0-8.63-7-15.625-15.63-15.625h-35.25c-8.63 0-15.63 6.995-15.63 15.625v36.999c0 11.363-9.22 20.569-20.59 20.569h-8.26c-11.37 0-20.59-9.206-20.59-20.569M2391.97 239.319v146.362c0 11.348-9.16 20.569-20.49 20.569h-8.2c-11.33 0-20.49-9.221-20.49-20.569V239.319c0-11.348 9.16-20.569 20.49-20.569h8.2c11.33 0 20.49 9.221 20.49 20.569M2098.23 391.43l-42.69-146.361c-3.85-13.171 6.06-26.319 19.79-26.319h10.6c9.59 0 17.93 6.611 20.08 15.952l17.01 73.045c1.48 6.348 10.47 6.478 12.14.176l19.47-73.838c2.38-9.04 10.57-15.335 19.93-15.335h12.1c9.37 0 17.56 6.3 19.94 15.346l19.49 74.067c1.66 6.305 10.65 6.178 12.13-.171l17.09-73.294c2.15-9.339 10.49-15.948 20.08-15.948h10.53c13.72 0 23.63 13.141 19.79 26.31l-42.63 146.361c-2.56 8.789-10.63 14.829-19.79 14.829h-15.68c-9.12 0-17.16-5.98-19.76-14.709l-21.17-71.059c-1.77-5.948-10.19-5.957-11.97-.012l-21.33 71.071c-2.6 8.729-10.64 14.709-19.76 14.709h-15.59c-9.17 0-17.23-6.035-19.8-14.82M2443.23 218.75h118.59c11.38 0 20.62 9.195 20.62 20.557s-9.24 20.556-20.62 20.556h-24.79c-5.53 0-10 4.477-10 10v115.818c0 11.368-9.25 20.569-20.63 20.569h-7.65c-11.39 0-20.63-9.201-20.63-20.569V269.863c0-5.523-4.48-10-10-10h-24.89c-11.37 0-20.61-9.195-20.61-20.556s9.24-20.557 20.61-20.557M1174.15 218.75h24.64c8.35 0 15.88 5.042 19.04 12.764l34.61 83.942c2.13 5.161 9.44 5.155 11.56-.01l34.43-83.932a20.58 20.58 0 0 1 19.04-12.764h24.64c11.37 0 20.58 9.208 20.58 20.569v146.362c0 11.361-9.21 20.569-20.58 20.569h-7.09c-11.36 0-20.58-9.208-20.58-20.569l-.12-50.645c-.01-6.888-9.53-8.688-12.06-2.283l-23.46 59.332a20.57 20.57 0 0 1-19.14 13.009h-3.03a20.57 20.57 0 0 1-19.15-13.046l-23.47-59.68c-2.52-6.416-12.05-4.623-12.06 2.271l-.13 51.042c0 11.361-9.21 20.569-20.57 20.569h-7.1c-11.36 0-20.57-9.208-20.57-20.569V239.319c0-11.361 9.21-20.569 20.57-20.569"/><path fill="#000" fill-rule="evenodd" d="m1449.94 391.836 6.12-19.392a6.255 6.255 0 0 1 5.96-4.369l50.22-.061a6.24 6.24 0 0 1 5.96 4.348l6.23 19.486c2.71 8.581 10.71 14.402 19.74 14.402h9.34c14.13 0 24.15-13.791 19.61-27.151l-49.74-146.361c-2.85-8.37-10.74-13.988-19.61-13.988h-33.16c-8.87 0-16.77 5.618-19.61 13.988l-49.74 146.361c-4.54 13.36 5.48 27.151 19.61 27.151h9.32c9.04 0 17.04-5.827 19.75-14.414m31.1-98.858c1.85-5.807 10.08-5.796 11.91.016l8.83 27.916c1.28 4.028-1.73 8.134-5.96 8.134h-17.74c-4.23 0-7.24-4.119-5.95-8.151zM1681.81 406.25c18.91 0 35.39-3.686 49.36-11.168 13.97-7.544 24.73-18.394 32.24-32.489 7.56-14.105 11.29-30.866 11.29-50.182 0-19.256-3.73-35.957-11.29-50.004-7.57-14.094-18.35-24.912-32.32-32.397-13.91-7.545-30.4-11.26-49.37-11.26h-49.5c-11.38 0-20.63 9.201-20.63 20.569v146.362c0 11.368 9.25 20.569 20.63 20.569zm23.13-47.701c-6.62 3.215-14.85 4.886-24.79 4.886-10.49 0-19-8.507-19-19v-64.34c0-10.149 8.23-18.376 18.38-18.376 10.18 0 18.56 1.703 25.23 4.974 6.59 3.149 11.63 8.315 15.08 15.633 3.45 7.269 5.28 17.268 5.28 30.162 0 12.891-1.82 22.951-5.28 30.347-3.39 7.319-8.36 12.509-14.9 15.714" clip-rule="evenodd"/><path fill="#000" d="M1804.21 385.681V239.319c0-11.361 9.21-20.569 20.58-20.569h91.28c11.36 0 20.57 9.202 20.57 20.557s-9.21 20.556-20.57 20.556h-54.64a7.807 7.807 0 0 0-7.81 7.813v16.366a7.806 7.806 0 0 0 7.81 7.812h48.13c11.37 0 20.58 9.246 20.58 20.602s-9.21 20.601-20.58 20.601h-48.13a7.806 7.806 0 0 0-7.81 7.812v16.455a7.807 7.807 0 0 0 7.81 7.813h54.64c11.36 0 20.57 9.202 20.57 20.556s-9.21 20.557-20.57 20.557h-91.28c-11.37 0-20.58-9.208-20.58-20.569"/><path fill="#000" fill-rule="evenodd" d="M2875.5 68.75h-2750c-31.066 0-56.25 25.184-56.25 56.25v750c0 31.066 25.184 56.25 56.25 56.25h2750c31.07 0 56.25-25.184 56.25-56.25V125c0-31.066-25.18-56.25-56.25-56.25M125.5 0C56.464 0 .5 55.964.5 125v750c0 69.036 55.965 125 125 125h2750c69.04 0 125-55.964 125-125V125c0-69.036-55.96-125-125-125z" clip-rule="evenodd"/><path fill="#000" d="M2476.06 804.813c-10.54 0-19.82-6.947-22.81-17.068L2390.79 575.7c-4.49-15.248 6.92-30.534 22.8-30.534h27.75c11.1 0 20.72 7.686 23.18 18.52L2489 671.402c2.07 9.093 14.93 9.321 17.32.308l28.83-108.844c2.76-10.435 12.19-17.7 22.98-17.7h25.17c10.8 0 20.25 7.293 22.99 17.755l28.27 107.739c2.36 9.001 15.18 8.829 17.3-.232l25.01-106.888c2.51-10.763 12.1-18.374 23.14-18.374h27.87c15.88 0 27.29 15.286 22.8 30.534l-62.46 212.045a23.78 23.78 0 0 1-22.81 17.068h-32.12c-10.39 0-19.58-6.763-22.69-16.696l-32.08-102.694c-2.62-8.397-14.51-8.331-17.04.095l-30.74 102.346c-3.02 10.061-12.27 16.949-22.76 16.949zM1742.44 804.813h-75.81c-13.09 0-23.71-10.656-23.71-23.801V568.967c0-13.145 10.62-23.801 23.71-23.801h74.8c26.6 0 49.59 5.198 68.95 15.594 19.45 10.312 34.44 25.187 44.96 44.627 10.61 19.355 15.91 42.556 15.91 69.602q0 40.57-15.78 69.73c-10.53 19.355-25.43 34.231-44.71 44.627-19.28 10.311-42.05 15.467-68.32 15.467m-29.3-83.642c0 13.145 10.61 23.801 23.71 23.801h3.06c12.8 0 23.7-2.07 32.71-6.212 9.09-4.141 16-11.283 20.71-21.426q7.2-15.213 7.2-42.345 0-27.13-7.32-42.344c-4.8-10.143-11.87-17.285-21.22-21.426-9.26-4.142-20.63-6.212-34.1-6.212h-1.04c-13.1 0-23.71 10.656-23.71 23.801zM1460.86 804.813c-13.12 0-23.76-10.656-23.76-23.801V568.967c0-13.145 10.64-23.801 23.76-23.801h22.84c13.13 0 23.76 10.656 23.76 23.801v155.247c0 13.145 10.64 23.801 23.76 23.801h57.27c13.12 0 23.76 10.656 23.76 23.801v9.196c0 13.145-10.64 23.801-23.76 23.801zM1204.45 601.964c-13.13 0-23.77-10.656-23.77-23.801v-9.196c0-13.145 10.64-23.801 23.77-23.801h177.89c13.13 0 23.78 10.656 23.78 23.801v9.196c0 13.145-10.65 23.801-23.78 23.801h-39.38c-8.21 0-14.86 6.66-14.86 14.875v164.173c0 13.145-10.64 23.801-23.78 23.801h-21.85c-13.13 0-23.78-10.656-23.78-23.801V616.839c0-8.215-6.65-14.875-14.86-14.875z"/><path fill="#000" fill-rule="evenodd" d="M2223.05 787.891c-3.02 10.047-12.27 16.922-22.74 16.922h-25.43c-16.19 0-27.64-15.862-22.57-31.261l69.88-212.045c3.21-9.753 12.31-16.341 22.56-16.341h61.84c10.25 0 19.35 6.588 22.56 16.341l69.87 212.045c5.08 15.399-6.37 31.261-22.56 31.261h-25.43c-10.48 0-19.72-6.875-22.74-16.922l-6.7-22.2a14.84 14.84 0 0 0-14.21-10.576h-63.42c-6.55 0-12.32 4.296-14.22 10.576zm76.13-96.945-14.13-48.436c-2.46-8.451-14.36-8.602-17.04-.217l-15.46 48.436c-1.84 5.759 2.45 11.645 8.48 11.645h29.6c5.94 0 10.22-5.715 8.55-11.428" clip-rule="evenodd"/><path fill="#000" d="M1939.6 804.813c-13.13 0-23.77-10.656-23.77-23.801V568.967c0-13.145 10.64-23.801 23.77-23.801h88.13c19.24 0 36.08 3.508 50.51 10.523s25.65 17.115 33.67 30.3q12.03 19.779 12.03 47.416c0 18.595-4.14 34.273-12.41 47.036-7.64 11.913-18.18 21.101-31.63 27.564-16.98 8.159-36 11.104-54.7 11.104h-43.07c-76.56 0 4.08-135.84 4.08-84.706v7.996c0 12.117 9.81 21.941 21.91 21.941 8.12 0 16.3-.345 24.04-3.043 5.91-2.113 10.43-5.451 13.55-10.015 3.2-4.565 4.81-10.523 4.81-17.877 0-7.437-1.61-13.481-4.81-18.129-3.12-4.733-7.64-8.199-13.55-10.396-7.05-2.766-14.67-3.423-22.18-3.423-13.13 0-23.77 10.656-23.77 23.801v47.71c0 11.825 11.14 16.003 19.91 20.752 12.31 6.671 7.58 25.389-6.42 25.389-7.45 0-13.49 6.048-13.49 13.508v48.395c0 13.145-10.63 23.801-23.76 23.801zm134.89-106.758 5.41 9.95 33.51 61.622c8.62 15.86-2.84 35.186-20.87 35.186h-22.27c-8.74 0-16.77-4.798-20.92-12.496l-35.05-65.04a15.52 15.52 0 0 0-13.66-8.168c-42.24 0 40.62-82.154 73.85-21.054M931.652 0h68.748v1000h-68.748z"/></svg>',qoe='<svg xmlns="http://www.w3.org/2000/svg" width="400" height="1601" fill="none"><path fill="#000" d="M72 1319.8c0-10.73 7.071-20.18 17.372-23.22l215.823-63.62c15.519-4.57 31.078 7.05 31.078 23.22v28.26c0 11.31-7.824 21.1-18.85 23.61l-109.636 24.94c-9.254 2.1-9.487 15.2-.313 17.63l110.784 29.37a24.21 24.21 0 0 1 18.015 23.4v25.64c0 11-7.423 20.62-18.071 23.41l-109.659 28.79c-9.162 2.41-8.986 15.47.236 17.63l108.792 25.46c10.955 2.56 18.702 12.33 18.702 23.57v28.39c0 16.17-15.559 27.79-31.078 23.22l-215.823-63.62c-10.3-3.04-17.372-12.49-17.372-23.22v-32.72c0-10.59 6.883-19.95 16.994-23.11l104.523-32.67c8.547-2.67 8.479-14.79-.096-17.36l-104.17-31.3C79.01 1372.42 72 1363 72 1352.31zM72 572.638V495.43c0-13.336 10.846-24.147 24.225-24.147h215.823c13.379 0 24.225 10.811 24.225 24.147v76.179q0 40.645-15.872 70.228-15.743 29.712-45.422 45.79-29.55 16.206-70.843 16.206-41.292 0-70.971-16.078-29.55-16.077-45.422-45.532Q72 612.767 72 572.638m85.132-29.84c-13.379 0-24.225 10.81-24.225 24.146v3.122q0 19.55 6.323 33.313 6.323 13.89 21.807 21.094 15.485 7.332 43.099 7.331t43.1-7.46q15.484-7.33 21.807-21.608 6.323-14.15 6.323-34.728v-1.064c0-13.336-10.846-24.146-24.225-24.146zM72 285.858c0-13.363 10.846-24.197 24.225-24.197h215.823c13.379 0 24.225 10.834 24.225 24.197v23.27c0 13.364-10.846 24.197-24.225 24.197H154.035c-13.379 0-24.225 10.834-24.225 24.197v58.328c0 13.364-10.846 24.197-24.225 24.197h-9.36C82.845 440.047 72 429.214 72 415.85zM278.463 24.72c0-13.374 10.846-24.216 24.225-24.216h9.36c13.379 0 24.225 10.842 24.225 24.216v181.174c0 13.374-10.846 24.216-24.225 24.216h-9.36c-13.379 0-24.225-10.842-24.225-24.216v-40.108c0-8.359-6.779-15.135-15.141-15.135H96.225c-13.38 0-24.225-10.842-24.225-24.216v-22.256c0-13.374 10.846-24.216 24.225-24.216h167.097c8.362 0 15.141-6.776 15.141-15.135z"/><path fill="#000" fill-rule="evenodd" d="M89.224 1062.13C78.997 1059.04 72 1049.63 72 1038.96v-25.9c0-16.486 16.145-28.147 31.818-22.979l215.823 71.169a24.19 24.19 0 0 1 16.632 22.98v62.97c0 10.45-6.706 19.71-16.632 22.98l-215.823 71.17C88.145 1246.51 72 1234.86 72 1218.37v-25.9c0-10.67 6.997-20.08 17.224-23.17l22.595-6.81a15.13 15.13 0 0 0 10.765-14.48v-64.59a15.13 15.13 0 0 0-10.765-14.48zm98.672 77.53 49.299-14.39c8.601-2.51 8.755-14.62.22-17.35l-49.299-15.75c-5.861-1.88-11.852 2.49-11.852 8.64v30.14c0 6.05 5.817 10.41 11.632 8.71" clip-rule="evenodd"/><path fill="#000" d="M72 773.439c0-13.367 10.846-24.203 24.225-24.203h215.823c13.379 0 24.225 10.836 24.225 24.203v89.762q0 29.395-10.711 51.439-10.71 22.046-30.84 34.293t-48.261 12.248q-28.388 0-47.873-12.635-18.187-11.672-28.056-32.218c-8.303-17.289-11.301-36.661-11.301-55.705v-43.867c0-77.976 138.26 4.16 86.215 4.16h-8.138c-12.334 0-22.332 9.989-22.332 22.311 0 8.269.351 16.6 3.097 24.487q3.225 9.024 10.194 13.794 6.968 4.899 18.194 4.899 11.356 0 18.453-4.899 7.226-4.77 10.581-13.794c2.815-7.188 3.484-14.944 3.484-22.596 0-13.366-10.846-24.202-24.225-24.202h-48.56c-12.036 0-16.288 11.345-21.122 20.272-6.79 12.539-25.841 7.72-25.841-6.536 0-7.586-6.156-13.736-13.749-13.736H96.225C82.845 820.916 72 810.08 72 796.714zm108.66 137.378-10.128 5.511-62.72 34.131C91.67 959.243 72 947.569 72 929.205V906.52a24.2 24.2 0 0 1 12.719-21.299l66.199-35.696a15.82 15.82 0 0 0 8.313-13.921c0-43.012 83.618 41.371 21.429 75.213"/></svg>';function Yoe(n){return Pe("watermarkState",()=>n.state.get(),[n])}const Xoe=`data:image/svg+xml;utf8,${encodeURIComponent(Goe)}`,Zoe=`data:image/svg+xml;utf8,${encodeURIComponent(qoe)}`,Qoe=M.memo(function(){const e=Koe(),t=xe(),r=Pe("is mobile",()=>t.getViewportScreenBounds().width<700,[t]),i=Yoe(e);return["licensed-with-watermark","unlicensed"].includes(i)?m.jsxs(m.Fragment,{children:[m.jsx(ese,{}),m.jsx(Joe,{src:r?Zoe:Xoe})]}):null}),Joe=M.memo(function({src:e}){const t=xe(),r=Pe("debug mode",()=>t.getInstanceState().isDebugMode,[t]),i=Pe("is mobile",()=>t.getViewportScreenBounds().width<700,[t]),s=gk(),l=M.useRef(null);bf(l);const c=`url('${e}') center 100% / 100% no-repeat`,d="https://tldraw.dev";return m.jsx("div",{ref:l,className:h0.className,"data-debug":r,"data-mobile":i,draggable:!1,...s,children:xr.isWebview?m.jsx("a",{draggable:!1,role:"button",onPointerDown:h=>{xi(h),mn(h)},onClick:()=>Gb.openWindow(d,"_blank"),style:{mask:c,WebkitMask:c}}):m.jsx("a",{href:d,target:"_blank",rel:"noreferrer",draggable:!1,onPointerDown:h=>{xi(h)},style:{mask:c,WebkitMask:c}})})}),ese=M.memo(function(){const e=h0.className,t=`/* ------------------- SEE LICENSE -------------------
The tldraw watermark is part of tldraw's license. It is shown for unlicensed
or "licensed-with-watermark" users. By using this library, you agree to
preserve the watermark's behavior, keeping it visible, unobscured, and
available to user-interaction.

To remove the watermark, please purchase a license at tldraw.dev.
*/

	.${e} {
		position: absolute;
		bottom: var(--space-2);
		right: var(--space-2);
		width: 96px;
		height: 32px;
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: var(--layer-watermark) !important;
		background-color: color-mix(in srgb, var(--color-background) 62%, transparent);
		opacity: 1;
		border-radius: 5px;
		pointer-events: all;
		padding: 2px;
		box-sizing: content-box;
	}

	.${e} > a {
		position: absolute;
		width: 96px;
		height: 32px;
		pointer-events: all;
		cursor: inherit;
		color: var(--color-text);
		opacity: .38;
		background-color: currentColor;
	}

	.${e}[data-debug='true'] {
		bottom: 46px;
	}

	.${e}[data-mobile='true'] {
		border-radius: 4px 0px 0px 4px;
		right: -2px;
		width: 8px;
		height: 48px;
	}

	.${e}[data-mobile='true'] > a {
		width: 8px;
		height: 32px;
	}

	@media (hover: hover) {
		.${e} > a {
			pointer-events: none;
		}

		.${e}:hover {
			background-color: var(--color-background);
			transition: background-color 0.2s ease-in-out;
			transition-delay: 0.32s;
		}

		.${e}:hover > a {
			animation: delayed_link 0.2s forwards ease-in-out;
			animation-delay: 0.32s;
		}
	}

	@keyframes delayed_link {
		0% {
			cursor: inherit;
			opacity: .38;
			pointer-events: none;
		}
		100% {
			cursor: pointer;
			opacity: 1;
			pointer-events: all;
		}
	}`;return m.jsx("style",{children:t})}),tse=[],nse=[],rse=[],ise="tl-container",ose=M.memo(function({store:e,components:t,className:r,user:i,options:s,...l}){const[c,d]=M.useState(null),h=M.useMemo(()=>i??Jz(),[i]),g=(t==null?void 0:t.ErrorFallback)===void 0?Kz:t==null?void 0:t.ErrorFallback,y={...l,shapeUtils:l.shapeUtils??tse,bindingUtils:l.bindingUtils??nse,tools:l.tools??rse,components:t,options:Yh(s)};return m.jsx("div",{ref:d,"data-tldraw":q5,draggable:!1,className:It(`${ise} tl-theme__light`,r),onPointerDown:xi,tabIndex:-1,children:m.jsx(Nv,{fallback:g,onError:v=>oP(v,{tags:{origin:"react.tldraw-before-app"}}),children:c&&m.jsx(Woe,{licenseKey:l.licenseKey,children:m.jsx(lz,{container:c,children:m.jsx(_ne,{overrides:t,children:e?e instanceof _P?m.jsx(T6,{...y,store:e,user:h}):m.jsx(P6,{...y,store:e,user:h}):m.jsx(sse,{...y,store:e,user:h})})})})})})});function sse(n){const{defaultName:e,snapshot:t,initialData:r,shapeUtils:i,bindingUtils:s,persistenceKey:l,sessionId:c,user:d,assets:h}=n,g=Loe({shapeUtils:i,bindingUtils:s,initialData:r,persistenceKey:l,sessionId:c,defaultName:e,snapshot:t,assets:h});return m.jsx(P6,{...n,store:g,user:d})}const P6=M.memo(function({store:e,user:t,...r}){const i=Hi();M.useLayoutEffect(()=>{t.userPreferences.get().colorScheme==="dark"&&(i.classList.remove("tl-theme__light"),i.classList.add("tl-theme__dark"))},[i,t]);const{LoadingScreen:s}=zr();switch(e.status){case"error":throw e.error;case"loading":return s?m.jsx(s,{}):null}return m.jsx(T6,{...r,store:e.store,user:t})}),oR=()=>document.location.search.includes("tldraw_preserve_focus");function T6({onMount:n,children:e,store:t,tools:r,shapeUtils:i,bindingUtils:s,user:l,initialState:c,autoFocus:d=!0,inferDarkMode:h,cameraOptions:g,options:y,licenseKey:v,deepLinks:w,isShapeHidden:C}){const{ErrorFallback:E}=zr(),P=Hi(),[I,k]=nR(null),L=M.useRef(null),O=Yh(w===!0?{}:w),z=M.useRef({autoFocus:d&&!oR(),inferDarkMode:h,initialState:c,cameraOptions:g,deepLinks:O});M.useLayoutEffect(()=>{z.current={autoFocus:d&&!oR(),inferDarkMode:h,initialState:c,cameraOptions:g,deepLinks:O}},[d,h,c,g,O]),M.useLayoutEffect(()=>{const{autoFocus:V,inferDarkMode:re,initialState:q,cameraOptions:J,deepLinks:ie}=z.current,W=new it({store:t,shapeUtils:i,bindingUtils:s,tools:r,getContainer:()=>P,user:l,initialState:q,autoFocus:V,inferDarkMode:re,cameraOptions:J,options:y,licenseKey:v,isShapeHidden:C});return W.updateViewportScreenBounds(L.current??P),ie&&(ie!=null&&ie.getUrl?W.navigateToDeepLink({...ie,url:ie.getUrl(W)}):W.navigateToDeepLink(ie)),k(W),()=>{W.dispose()}},[s,P,y,i,t,r,l,k,v,C]),M.useLayoutEffect(()=>{if(I&&O)return I.registerDeepLinkListener(O)},[I,O]),M.useLayoutEffect(()=>{I&&g&&I.setCameraOptions(g)},[I,g]);const F=M.useSyncExternalStore(M.useCallback(V=>I?(I.on("crash",V),()=>I.off("crash",V)):()=>{},[I]),()=>(I==null?void 0:I.getCrashingError())??null);M.useEffect(function(){if(!I)return;function re(){I&&I.focus()}function q(){I&&I.blur()}if(d&&oR())return I.getContainer().addEventListener("pointerdown",re),document.body.addEventListener("pointerdown",q),()=>{var J;(J=I.getContainer())==null||J.removeEventListener("pointerdown",re),document.body.removeEventListener("pointerdown",q)}},[I,d]);const{Canvas:H}=zr();return I?m.jsx(Nv,{fallback:E,onError:V=>I.annotateError(V,{origin:"react.tldraw",willCrashApp:!0}),children:F?m.jsx(lse,{crashingError:F}):m.jsx(ok,{editor:I,children:m.jsxs(ase,{onMount:n,children:[e??(H?m.jsx(H,{},I.contextId):null),m.jsx(Qoe,{})]})})}):m.jsx("div",{className:"tl-canvas",ref:L})}function ase({children:n,onMount:e}){return Noe(),Coe(),Eoe(),_oe(),k6(t=>{const r=t.store.props.onMount(t),i=e==null?void 0:e(t);return()=>{r==null||r(),i==null||i()}}),n}function lse({crashingError:n}){throw n}function sR({children:n}){return m.jsx("div",{className:"tl-loading",children:n})}function I6({children:n}){return m.jsx("div",{className:"tl-loading",children:n})}function k6(n){const e=xe(),t=n0(r=>{let i;return r.run(()=>{i=n==null?void 0:n(r),r.emit("mount")},{history:"ignore"}),window.tldrawReady=!0,i});zt.useLayoutEffect(()=>{if(e)return t==null?void 0:t(e)},[e,t])}function Cf({children:n,className:e="",...t}){return m.jsx("div",{...t,className:It("tl-html-container",e),children:n})}class p0{constructor(e){this.editor=e}}U(p0,"props"),U(p0,"migrations"),U(p0,"type");function g0(n,e,t={}){const{newPoint:r,handle:i,scaleX:s,scaleY:l}=e,{minWidth:c=1,maxWidth:d=1/0,minHeight:h=1,maxHeight:g=1/0}=t;let y=n.props.w*s,v=n.props.h*l;const w=new R(0,0);if(y>0){if(y<c){switch(i){case"top_left":case"left":case"bottom_left":{w.x=y-c;break}case"top":case"bottom":{w.x=(y-c)/2;break}default:w.x=0}y=c}}else if(w.x=y,y=-y,y<c){switch(i){case"top_left":case"left":case"bottom_left":{w.x=-y;break}default:w.x=-c}y=c}if(v>0){if(v<h){switch(i){case"top_left":case"top":case"top_right":{w.y=v-h;break}case"right":case"left":{w.y=(v-h)/2;break}default:w.y=0}v=h}}else if(w.y=v,v=-v,v<h){switch(i){case"top_left":case"top":case"top_right":{w.y=-v;break}default:w.y=-h}v=h}const{x:C,y:E}=w.rot(n.rotation).add(r);return{...n,x:C,y:E,props:{w:Math.min(d,y),h:Math.min(g,v)}}}class Vg extends Zl{getGeometry(e){return new Vc({width:e.props.w,height:e.props.h,isFilled:!0})}onResize(e,t){return g0(e,t)}getHandleSnapGeometry(e){return{points:this.getGeometry(e).bounds.cornersAndCenter}}getInterpolatedProps(e,t,r){return{...t.props,w:Rn(e.props.w,t.props.w,r),h:Rn(e.props.h,t.props.h,r)}}}let cse=(UA=class extends Ct{onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onCancel(){this.editor.setCurrentTool("select")}},U(UA,"id","idle"),UA),use=($A=class extends Ct{onPointerMove(e){if(this.editor.inputs.isDragging){const{originPagePoint:t}=this.editor.inputs,r=this.parent.shapeType,i=yr(),s=this.editor.markHistoryStoppingPoint(`creating_box:${i}`),l=ec(t,this.editor);this.editor.createShapes([{id:i,type:r,x:l.x,y:l.y,props:{w:1,h:1}}]).select(i);const c=this.parent;this.editor.setCurrentTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creatingMarkId:s,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id,onCreate:c.onCreate?d=>{var h;return(h=c.onCreate)==null?void 0:h.call(c,d)}:void 0})}}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.cancel()}complete(){const{originPagePoint:e}=this.editor.inputs,t=this.parent.shapeType,r=yr();this.editor.markHistoryStoppingPoint(`creating_box:${r}`),this.editor.createShapes([{id:r,type:t,x:e.x,y:e.y}]);const i=this.editor.getShape(r);if(!i){this.cancel();return}let{w:s,h:l}=i.props;const c=new R(s/2,l/2),d=this.editor.getShapeParentTransform(i);d&&c.rot(-d.rotation());let h=1;this.editor.user.getIsDynamicResizeMode()&&(h=1/this.editor.getZoomLevel(),s*=h,l*=h,c.mul(h));const g=Lr(i),y=ec(new R(i.x-c.x,i.y-c.y),this.editor);g.x=y.x,g.y=y.y,g.props.w=s,g.props.h=l,"scale"in i.props&&(g.props.scale=h),this.editor.updateShape(g),this.editor.setSelectedShapes([r]),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select.idle")}cancel(){this.parent.transition("idle")}},U($A,"id","pointing"),$A);function ec(n,e){const t=e.getInstanceState().isGridMode,r=e.getDocumentSettings().gridSize;return t?n.clone().snapToGrid(r):n.clone()}class aR extends Ct{static children(){return[cse,use]}}U(aR,"id","box"),U(aR,"initial","idle");function dse(n,e,t){const r=M.useRef(!1),i=M.useCallback(l=>{r.current=l,l?Jl.addOpenMenu(n):Jl.deleteOpenMenu(n),e==null||e(l)},[n,e]),s=Pe("is menu open",()=>Jl.getOpenMenus().includes(n),[n]);return M.useEffect(()=>(r.current&&(t==null||t("open-menu"),Jl.addOpenMenu(n)),()=>{r.current&&(Jl.deleteOpenMenu(n),Jl.getOpenMenus().forEach(l=>{l.startsWith(n)&&(t==null||t("close-menu"),Jl.deleteOpenMenu(l))}),r.current=!1)}),[n,t]),[s,i]}function m0(n){const e=xe();return Pe("isEditing",()=>e.getEditingShapeId()===n,[e,n])}function Wc(n){const e=xe();return M.useMemo(function(){const i=h=>{if(h.isKilled)return;if(h.button===fk){e.dispatch({type:"pointer",target:"selection",handle:n,name:"right_click",...Fa(h)});return}if(h.button!==0)return;const g=$b(h.currentTarget);function y(){g.removeEventListener("pointerup",y),$v(g,h)}Uv(g,h),g.addEventListener("pointerup",y),e.dispatch({name:"pointer_down",type:"pointer",target:"selection",handle:n,...Fa(h)}),xi(h)};let s,l;function c(h){h.isKilled||h.button===0&&(h.clientX===s&&h.clientY===l||(s=h.clientX,l=h.clientY,e.dispatch({name:"pointer_move",type:"pointer",target:"selection",handle:n,...Fa(h)})))}return{onPointerDown:i,onPointerMove:c,onPointerUp:h=>{h.isKilled||h.button===0&&e.dispatch({name:"pointer_up",type:"pointer",target:"selection",handle:n,...Fa(h)})}}},[e,n])}function fse(n){const[e,t]=M.useState(()=>({store:Jv(n),opts:n}));if(!uP(e.opts,n)){const r={store:Jv(n),opts:n};return t(r),r.store}return e.store}function hse(n){const[e,t]=M.useState(()=>({opts:n,schema:tR(n)}));if(!uP(e.opts,n)){const r=tR(n);return t({opts:n,schema:r}),r}return e.schema}const pse=20,gse=8;function lR(n,e=pse){return Math.max(gse,Math.ceil(n/e))}class Kg extends yf{constructor(t){super({...t,isFilled:!1,isClosed:!1});U(this,"_center");U(this,"radius");U(this,"start");U(this,"end");U(this,"largeArcFlag");U(this,"sweepFlag");U(this,"measure");U(this,"angleStart");U(this,"angleEnd");const{center:r,sweepFlag:i,largeArcFlag:s,start:l,end:c}=t;if(l.equals(c))throw Error("Arc must have different start and end points.");this.angleStart=R.Angle(r,l),this.angleEnd=R.Angle(r,c),this.radius=R.Dist(r,l),this.measure=hee(this.angleStart,this.angleEnd,i,s),this.start=l,this.end=c,this.sweepFlag=i,this.largeArcFlag=s,this._center=r}nearestPoint(t){const{_center:r,measure:i,radius:s,angleEnd:l,angleStart:c,start:d,end:h}=this,g=lk(i,c,l,r.angle(t));if(g<=0)return d;if(g>=1)return h;const y=r.clone().add(t.clone().sub(r).uni().mul(s));let v,w=1/0,C;for(const E of[d,h,y])C=R.Dist2(t,E),C<w&&(v=E,w=C);if(!v)throw Error("nearest point not found");return v}hitTestLineSegment(t,r){const{_center:i,radius:s,measure:l,angleStart:c,angleEnd:d}=this,h=Kv(t,r,i,s);return h===null?!1:h.some(g=>{const y=lk(l,c,d,i.angle(g));return y>=0&&y<=1})}getVertices(){const{_center:t,measure:r,length:i,radius:s,angleStart:l}=this,c=[];for(let d=0,h=lR(Math.abs(i));d<h+1;d++){const g=d/h*r,y=l+g;c.push(qh(t,s,y))}return c}getSvgPathData(t=!0){const{start:r,end:i,radius:s,largeArcFlag:l,sweepFlag:c}=this;return`${t?`M${r.toFixed()}`:""} A${s} ${s} 0 ${l} ${c} ${i.toFixed()}`}getLength(){return this.measure*this.radius}}class cR extends yf{constructor(t){super({isClosed:!0,...t});U(this,"_center");U(this,"radius");U(this,"x");U(this,"y");this.config=t;const{x:r=0,y:i=0,radius:s}=t;this.x=r,this.y=i,this._center=new R(s+r,s+i),this.radius=s}getBounds(){return new Xe(this.x,this.y,this.radius*2,this.radius*2)}getVertices(){const{_center:t,radius:r}=this,i=sr*r,s=[];for(let l=0,c=lR(i);l<c;l++){const d=l/c*sr;s.push(qh(t,r,d))}return s}nearestPoint(t){const{_center:r,radius:i}=this;return r.equals(t)?R.AddXY(r,i,0):r.clone().add(t.clone().sub(r).uni().mul(i))}hitTestLineSegment(t,r,i=0){const{_center:s,radius:l}=this;return Kv(t,r,s,l+i)!==null}getSvgPathData(){const{_center:t,radius:r}=this;return`M${t.x+r},${t.y} a${r},${r} 0 1,0 ${r*2},0a${r},${r} 0 1,0 -${r*2},0`}}class es extends Fg{constructor(t){const{start:r,cp1:i,cp2:s,end:l}=t;super({...t,points:[r,l]});U(this,"a");U(this,"b");U(this,"c");U(this,"d");this.a=r,this.b=i,this.c=s,this.d=l}getVertices(){const t=[],{a:r,b:i,c:s,d:l}=this;for(let c=0,d=10;c<=d;c++){const h=c/d;t.push(new R((1-h)*(1-h)*(1-h)*r.x+3*((1-h)*(1-h))*h*i.x+3*(1-h)*(h*h)*s.x+h*h*h*l.x,(1-h)*(1-h)*(1-h)*r.y+3*((1-h)*(1-h))*h*i.y+3*(1-h)*(h*h)*s.y+h*h*h*l.y))}return t}midPoint(){return es.GetAtT(this,.5)}nearestPoint(t){let r,i=1/0,s,l;for(const c of this.segments)l=c.nearestPoint(t),s=R.Dist2(l,t),s<i&&(r=l,i=s);if(!r)throw Error("nearest point not found");return r}getSvgPathData(t=!0){const{a:r,b:i,c:s,d:l}=this;return`${t?`M ${r.toFixed()} `:""} C${i.toFixed()} ${s.toFixed()} ${l.toFixed()}`}static GetAtT(t,r){const{a:i,b:s,c:l,d:c}=t;return new R((1-r)*(1-r)*(1-r)*i.x+3*((1-r)*(1-r))*r*s.x+3*(1-r)*(r*r)*l.x+r*r*r*c.x,(1-r)*(1-r)*(1-r)*i.y+3*((1-r)*(1-r))*r*s.y+3*(1-r)*(r*r)*l.y+r*r*r*c.y)}getLength(t=32){let r,i=this.a,s=0;for(let l=1;l<=t;l++)r=es.GetAtT(this,l/t),s+=R.Dist(i,r),i=r;return s}}class mse extends yf{constructor(t){super({...t,isClosed:!1,isFilled:!1});U(this,"points");U(this,"_segments");const{points:r}=t;this.points=r}get segments(){if(!this._segments){this._segments=[];const{points:t}=this,r=t.length,i=r-2,s=1.25;for(let l=0;l<r-1;l++){const c=l===0?t[0]:t[l-1],d=t[l],h=t[l+1],g=l===i?h:t[l+2],y=d,v=l===0?c:new R(d.x+(h.x-c.x)/6*s,d.y+(h.y-c.y)/6*s),w=l===i?h:new R(h.x-(g.x-d.x)/6*s,h.y-(g.y-d.y)/6*s),C=h;this._segments.push(new es({start:y,cp1:v,cp2:w,end:C}))}}return this._segments}getLength(){return this.segments.reduce((t,r)=>t+r.length,0)}getVertices(){const t=this.segments.reduce((r,i)=>r.concat(i.vertices),[]);return t.push(this.points[this.points.length-1]),t}nearestPoint(t){let r,i=1/0,s,l;for(const c of this.segments)l=c.nearestPoint(t),s=R.Dist2(l,t),s<i&&(r=l,i=s);if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(t,r){return this.segments.some(i=>i.hitTestLineSegment(t,r))}getSvgPathData(){let t=this.segments.reduce((r,i,s)=>r+i.getSvgPathData(s===0),"");return this.isClosed&&(t+="Z"),t}}class yse extends yf{constructor(t){super({...t,isClosed:!0});U(this,"w");U(this,"h");U(this,"_edges");this.config=t;const{width:r,height:i}=t;this.w=r,this.h=i}get edges(){if(!this._edges){const{vertices:t}=this;this._edges=[];for(let r=0,i=t.length;r<i;r++){const s=t[r],l=t[(r+1)%i];this._edges.push(new Qu({start:s,end:l}))}}return this._edges}getVertices(){const t=Math.max(1,this.w),r=Math.max(1,this.h),i=t/2,s=r/2,l=Math.pow(i-s,2)/Math.pow(i+s,2),c=qn*(i+s)*(1+3*l/(10+Math.sqrt(4-3*l))),d=lR(c),h=sr/d,g=Math.cos(h),y=Math.sin(h);let v=0,w=1,C=0,E=1;const P=Array(d);for(let I=0;I<d;I++)P[I]=new R(i+i*w,s+s*v),C=y*w+g*v,E=g*w-y*v,v=C,w=E;return P}nearestPoint(t){let r,i=1/0,s,l;for(const c of this.edges)l=c.nearestPoint(t),s=R.Dist2(l,t),s<i&&(r=l,i=s);if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(t,r){return this.edges.some(i=>i.hitTestLineSegment(t,r))}getBounds(){return new Xe(0,0,this.w,this.h)}getLength(){const{w:t,h:r}=this,i=t/2,s=r/2,l=Math.max(0,i),c=Math.max(0,s);return Z5(l,c)}getSvgPathData(t=!1){const{w:r,h:i}=this,s=r/2,l=i/2,c=Math.max(0,s),d=Math.max(0,l);return`${t?`M${s-c},${l}`:""} a${c},${d},0,1,1,${c*2},0a${c},${d},0,1,1,-${c*2},0`}}class vse extends yf{constructor(t){super({...t,isClosed:!0});U(this,"w");U(this,"h");U(this,"a");U(this,"b");U(this,"c");U(this,"d");this.config=t;const{width:r,height:i}=t;if(this.w=r,this.h=i,i>r){const s=r/2;this.a=new Kg({start:new R(0,s),end:new R(r,s),center:new R(r/2,s),sweepFlag:1,largeArcFlag:1}),this.b=new Qu({start:new R(r,s),end:new R(r,i-s)}),this.c=new Kg({start:new R(r,i-s),end:new R(0,i-s),center:new R(r/2,i-s),sweepFlag:1,largeArcFlag:1}),this.d=new Qu({start:new R(0,i-s),end:new R(0,s)})}else{const s=i/2;this.a=new Kg({start:new R(s,i),end:new R(s,0),center:new R(s,s),sweepFlag:1,largeArcFlag:1}),this.b=new Qu({start:new R(s,0),end:new R(r-s,0)}),this.c=new Kg({start:new R(r-s,0),end:new R(r-s,i),center:new R(r-s,s),sweepFlag:1,largeArcFlag:1}),this.d=new Qu({start:new R(r-s,i),end:new R(s,i)})}}nearestPoint(t){let r,i=1/0,s,l;const{a:c,b:d,c:h,d:g}=this;for(const y of[c,d,h,g])l=y.nearestPoint(t),s=R.Dist2(l,t),s<i&&(r=l,i=s);if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(t,r){const{a:i,b:s,c:l,d:c}=this;return[i,s,l,c].some(d=>d.hitTestLineSegment(t,r))}getVertices(){const{a:t,b:r,c:i,d:s}=this;return[t,r,i,s].reduce((l,c)=>(l.push(...c.vertices),l),[])}getBounds(){return new Xe(0,0,this.w,this.h)}getLength(){const{h:t,w:r}=this;return t>r?(qn*(r/2)+(t-r))*2:(qn*(t/2)+(r-t))*2}getSvgPathData(){const{a:t,b:r,c:i,d:s}=this;return[t,r,i,s].map((l,c)=>l.getSvgPathData(c===0)).join(" ")+" Z"}}var Sse={};async function R6({shouldReload:n=!0}={}){TX();for(const e of Ob.connectedInstances)await e.close();await Promise.all(ek().map(e=>U5(e))),PX(),n&&window.location.reload()}typeof window<"u"&&(Sse.NODE_ENV==="development"&&(window.hardReset=R6),window.__tldraw__hardReset=R6);function xse(n,e="_blank"){Gb.openWindow(n,e)}Oc("@tldraw/editor","3.7.0","esm");function M6(){const[n,e]=M.useState(!1);return M.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const t=window.matchMedia("(prefers-reduced-motion: reduce)"),r=()=>{e(t.matches)};return r(),t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[]),n}const A6=()=>{},D6=M.createContext(null);function wse({onEvent:n,children:e}){return m.jsx(D6.Provider,{value:n??A6,children:e})}function _o(){return M.useContext(D6)??A6}function bt(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function bse(n,e){const t=M.createContext(e),r=s=>{const{children:l,...c}=s,d=M.useMemo(()=>c,Object.values(c));return m.jsx(t.Provider,{value:d,children:l})};r.displayName=n+"Provider";function i(s){const l=M.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function Gc(n,e=[]){let t=[];function r(s,l){const c=M.createContext(l),d=t.length;t=[...t,l];const h=y=>{var I;const{scope:v,children:w,...C}=y,E=((I=v==null?void 0:v[n])==null?void 0:I[d])||c,P=M.useMemo(()=>C,Object.values(C));return m.jsx(E.Provider,{value:P,children:w})};h.displayName=s+"Provider";function g(y,v){var E;const w=((E=v==null?void 0:v[n])==null?void 0:E[d])||c,C=M.useContext(w);if(C)return C;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${s}\``)}return[h,g]}const i=()=>{const s=t.map(l=>M.createContext(l));return function(c){const d=(c==null?void 0:c[n])||s;return M.useMemo(()=>({[`__scope${n}`]:{...c,[n]:d}}),[c,d])}};return i.scopeName=n,[r,Cse(i,...e)]}function Cse(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const l=r.reduce((c,{useScope:d,scopeName:h})=>{const y=d(s)[`__scope${h}`];return{...c,...y}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function O6(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function y0(...n){return e=>{let t=!1;const r=n.map(i=>{const s=O6(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():O6(n[i],null)}}}}function Tr(...n){return M.useCallback(y0(...n),n)}var Qh=M.forwardRef((n,e)=>{const{children:t,...r}=n,i=M.Children.toArray(t),s=i.find(_se);if(s){const l=s.props.children,c=i.map(d=>d===s?M.Children.count(l)>1?M.Children.only(null):M.isValidElement(l)?l.props.children:null:d);return m.jsx(uR,{...r,ref:e,children:M.isValidElement(l)?M.cloneElement(l,void 0,c):null})}return m.jsx(uR,{...r,ref:e,children:t})});Qh.displayName="Slot";var uR=M.forwardRef((n,e)=>{const{children:t,...r}=n;if(M.isValidElement(t)){const i=Tse(t);return M.cloneElement(t,{...Pse(r,t.props),ref:e?y0(e,i):i})}return M.Children.count(t)>1?M.Children.only(null):null});uR.displayName="SlotClone";var Ese=({children:n})=>m.jsx(m.Fragment,{children:n});function _se(n){return M.isValidElement(n)&&n.type===Ese}function Pse(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...c)=>{s(...c),i(...c)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function Tse(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ise=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Vn=Ise.reduce((n,e)=>{const t=M.forwardRef((r,i)=>{const{asChild:s,...l}=r,c=s?Qh:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(c,{...l,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function dR(n,e){n&&zg.flushSync(()=>n.dispatchEvent(e))}function v0(n){const e=n+"CollectionProvider",[t,r]=Gc(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=w=>{const{scope:C,children:E}=w,P=zt.useRef(null),I=zt.useRef(new Map).current;return m.jsx(i,{scope:C,itemMap:I,collectionRef:P,children:E})};l.displayName=e;const c=n+"CollectionSlot",d=zt.forwardRef((w,C)=>{const{scope:E,children:P}=w,I=s(c,E),k=Tr(C,I.collectionRef);return m.jsx(Qh,{ref:k,children:P})});d.displayName=c;const h=n+"CollectionItemSlot",g="data-radix-collection-item",y=zt.forwardRef((w,C)=>{const{scope:E,children:P,...I}=w,k=zt.useRef(null),L=Tr(C,k),O=s(h,E);return zt.useEffect(()=>(O.itemMap.set(k,{ref:k,...I}),()=>void O.itemMap.delete(k))),m.jsx(Qh,{[g]:"",ref:L,children:P})});y.displayName=h;function v(w){const C=s(n+"CollectionConsumer",w);return zt.useCallback(()=>{const P=C.collectionRef.current;if(!P)return[];const I=Array.from(P.querySelectorAll(`[${g}]`));return Array.from(C.itemMap.values()).sort((O,z)=>I.indexOf(O.ref.current)-I.indexOf(z.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:l,Slot:d,ItemSlot:y},v,r]}var kse=M.createContext(void 0);function fR(n){const e=M.useContext(kse);return n||e||"ltr"}function Po(n){const e=M.useRef(n);return M.useEffect(()=>{e.current=n}),M.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function Rse(n,e=globalThis==null?void 0:globalThis.document){const t=Po(n);M.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Mse="DismissableLayer",hR="dismissableLayer.update",Ase="dismissableLayer.pointerDownOutside",Dse="dismissableLayer.focusOutside",j6,L6=M.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nS=M.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:l,onDismiss:c,...d}=n,h=M.useContext(L6),[g,y]=M.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=M.useState({}),C=Tr(e,H=>y(H)),E=Array.from(h.layers),[P]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),I=E.indexOf(P),k=g?E.indexOf(g):-1,L=h.layersWithOutsidePointerEventsDisabled.size>0,O=k>=I,z=jse(H=>{const V=H.target,re=[...h.branches].some(q=>q.contains(V));!O||re||(i==null||i(H),l==null||l(H),H.defaultPrevented||c==null||c())},v),F=Lse(H=>{const V=H.target;[...h.branches].some(q=>q.contains(V))||(s==null||s(H),l==null||l(H),H.defaultPrevented||c==null||c())},v);return Rse(H=>{k===h.layers.size-1&&(r==null||r(H),!H.defaultPrevented&&c&&(H.preventDefault(),c()))},v),M.useEffect(()=>{if(g)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(j6=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(g)),h.layers.add(g),F6(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=j6)}},[g,v,t,h]),M.useEffect(()=>()=>{g&&(h.layers.delete(g),h.layersWithOutsidePointerEventsDisabled.delete(g),F6())},[g,h]),M.useEffect(()=>{const H=()=>w({});return document.addEventListener(hR,H),()=>document.removeEventListener(hR,H)},[]),m.jsx(Vn.div,{...d,ref:C,style:{pointerEvents:L?O?"auto":"none":void 0,...n.style},onFocusCapture:bt(n.onFocusCapture,F.onFocusCapture),onBlurCapture:bt(n.onBlurCapture,F.onBlurCapture),onPointerDownCapture:bt(n.onPointerDownCapture,z.onPointerDownCapture)})});nS.displayName=Mse;var Ose="DismissableLayerBranch",N6=M.forwardRef((n,e)=>{const t=M.useContext(L6),r=M.useRef(null),i=Tr(e,r);return M.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),m.jsx(Vn.div,{...n,ref:i})});N6.displayName=Ose;function jse(n,e=globalThis==null?void 0:globalThis.document){const t=Po(n),r=M.useRef(!1),i=M.useRef(()=>{});return M.useEffect(()=>{const s=c=>{if(c.target&&!r.current){let d=function(){z6(Ase,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Lse(n,e=globalThis==null?void 0:globalThis.document){const t=Po(n),r=M.useRef(!1);return M.useEffect(()=>{const i=s=>{s.target&&!r.current&&z6(Dse,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function F6(){const n=new CustomEvent(hR);document.dispatchEvent(n)}function z6(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?dR(i,s):i.dispatchEvent(s)}var Nse=nS,Fse=N6,pR=0;function gR(){M.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??U6()),document.body.insertAdjacentElement("beforeend",n[1]??U6()),pR++,()=>{pR===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),pR--}},[])}function U6(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var mR="focusScope.autoFocusOnMount",yR="focusScope.autoFocusOnUnmount",$6={bubbles:!1,cancelable:!0},zse="FocusScope",S0=M.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...l}=n,[c,d]=M.useState(null),h=Po(i),g=Po(s),y=M.useRef(null),v=Tr(e,E=>d(E)),w=M.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;M.useEffect(()=>{if(r){let E=function(L){if(w.paused||!c)return;const O=L.target;c.contains(O)?y.current=O:Ef(y.current,{select:!0})},P=function(L){if(w.paused||!c)return;const O=L.relatedTarget;O!==null&&(c.contains(O)||Ef(y.current,{select:!0}))},I=function(L){if(document.activeElement===document.body)for(const z of L)z.removedNodes.length>0&&Ef(c)};document.addEventListener("focusin",E),document.addEventListener("focusout",P);const k=new MutationObserver(I);return c&&k.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",P),k.disconnect()}}},[r,c,w.paused]),M.useEffect(()=>{if(c){V6.add(w);const E=document.activeElement;if(!c.contains(E)){const I=new CustomEvent(mR,$6);c.addEventListener(mR,h),c.dispatchEvent(I),I.defaultPrevented||(Use(Kse(B6(c)),{select:!0}),document.activeElement===E&&Ef(c))}return()=>{c.removeEventListener(mR,h),setTimeout(()=>{const I=new CustomEvent(yR,$6);c.addEventListener(yR,g),c.dispatchEvent(I),I.defaultPrevented||Ef(E??document.body,{select:!0}),c.removeEventListener(yR,g),V6.remove(w)},0)}}},[c,h,g,w]);const C=M.useCallback(E=>{if(!t&&!r||w.paused)return;const P=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,I=document.activeElement;if(P&&I){const k=E.currentTarget,[L,O]=$se(k);L&&O?!E.shiftKey&&I===O?(E.preventDefault(),t&&Ef(L,{select:!0})):E.shiftKey&&I===L&&(E.preventDefault(),t&&Ef(O,{select:!0})):I===k&&E.preventDefault()}},[t,r,w.paused]);return m.jsx(Vn.div,{tabIndex:-1,...l,ref:v,onKeyDown:C})});S0.displayName=zse;function Use(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Ef(r,{select:e}),document.activeElement!==t)return}function $se(n){const e=B6(n),t=H6(e,n),r=H6(e.reverse(),n);return[t,r]}function B6(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function H6(n,e){for(const t of n)if(!Bse(t,{upTo:e}))return t}function Bse(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Hse(n){return n instanceof HTMLInputElement&&"select"in n}function Ef(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Hse(n)&&e&&n.select()}}var V6=Vse();function Vse(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=K6(n,e),n.unshift(e)},remove(e){var t;n=K6(n,e),(t=n[0])==null||t.resume()}}}function K6(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function Kse(n){return n.filter(e=>e.tagName!=="A")}var _f=globalThis!=null&&globalThis.document?M.useLayoutEffect:()=>{},Wse=wY.useId||(()=>{}),Gse=0;function ed(n){const[e,t]=M.useState(Wse());return _f(()=>{n||t(r=>r??String(Gse++))},[n]),n||(e?`radix-${e}`:"")}const qse=["top","right","bottom","left"],Pf=Math.min,Ua=Math.max,x0=Math.round,w0=Math.floor,qc=n=>({x:n,y:n}),Yse={left:"right",right:"left",bottom:"top",top:"bottom"},Xse={start:"end",end:"start"};function vR(n,e,t){return Ua(n,Pf(e,t))}function td(n,e){return typeof n=="function"?n(e):n}function nd(n){return n.split("-")[0]}function Wg(n){return n.split("-")[1]}function SR(n){return n==="x"?"y":"x"}function xR(n){return n==="y"?"height":"width"}function Tf(n){return["top","bottom"].includes(nd(n))?"y":"x"}function wR(n){return SR(Tf(n))}function Zse(n,e,t){t===void 0&&(t=!1);const r=Wg(n),i=wR(n),s=xR(i);let l=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(l=b0(l)),[l,b0(l)]}function Qse(n){const e=b0(n);return[bR(n),e,bR(e)]}function bR(n){return n.replace(/start|end/g,e=>Xse[e])}function Jse(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],l=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:l;default:return[]}}function eae(n,e,t,r){const i=Wg(n);let s=Jse(nd(n),t==="start",r);return i&&(s=s.map(l=>l+"-"+i),e&&(s=s.concat(s.map(bR)))),s}function b0(n){return n.replace(/left|right|bottom|top/g,e=>Yse[e])}function tae(n){return{top:0,right:0,bottom:0,left:0,...n}}function W6(n){return typeof n!="number"?tae(n):{top:n,right:n,bottom:n,left:n}}function C0(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function G6(n,e,t){let{reference:r,floating:i}=n;const s=Tf(e),l=wR(e),c=xR(l),d=nd(e),h=s==="y",g=r.x+r.width/2-i.width/2,y=r.y+r.height/2-i.height/2,v=r[c]/2-i[c]/2;let w;switch(d){case"top":w={x:g,y:r.y-i.height};break;case"bottom":w={x:g,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y};break;case"left":w={x:r.x-i.width,y};break;default:w={x:r.x,y:r.y}}switch(Wg(e)){case"start":w[l]-=v*(t&&h?-1:1);break;case"end":w[l]+=v*(t&&h?-1:1);break}return w}const nae=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:l}=t,c=s.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:n,floating:e,strategy:i}),{x:g,y}=G6(h,r,d),v=r,w={},C=0;for(let E=0;E<c.length;E++){const{name:P,fn:I}=c[E],{x:k,y:L,data:O,reset:z}=await I({x:g,y,initialPlacement:r,placement:v,strategy:i,middlewareData:w,rects:h,platform:l,elements:{reference:n,floating:e}});g=k??g,y=L??y,w={...w,[P]:{...w[P],...O}},z&&C<=50&&(C++,typeof z=="object"&&(z.placement&&(v=z.placement),z.rects&&(h=z.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:i}):z.rects),{x:g,y}=G6(h,v,d)),E=-1)}return{x:g,y,placement:v,strategy:i,middlewareData:w}};async function rS(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:l,elements:c,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:g="viewport",elementContext:y="floating",altBoundary:v=!1,padding:w=0}=td(e,n),C=W6(w),P=c[v?y==="floating"?"reference":"floating":y],I=C0(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(P)))==null||t?P:P.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:h,rootBoundary:g,strategy:d})),k=y==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,L=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),O=await(s.isElement==null?void 0:s.isElement(L))?await(s.getScale==null?void 0:s.getScale(L))||{x:1,y:1}:{x:1,y:1},z=C0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:k,offsetParent:L,strategy:d}):k);return{top:(I.top-z.top+C.top)/O.y,bottom:(z.bottom-I.bottom+C.bottom)/O.y,left:(I.left-z.left+C.left)/O.x,right:(z.right-I.right+C.right)/O.x}}const rae=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:l,elements:c,middlewareData:d}=e,{element:h,padding:g=0}=td(n,e)||{};if(h==null)return{};const y=W6(g),v={x:t,y:r},w=wR(i),C=xR(w),E=await l.getDimensions(h),P=w==="y",I=P?"top":"left",k=P?"bottom":"right",L=P?"clientHeight":"clientWidth",O=s.reference[C]+s.reference[w]-v[w]-s.floating[C],z=v[w]-s.reference[w],F=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let H=F?F[L]:0;(!H||!await(l.isElement==null?void 0:l.isElement(F)))&&(H=c.floating[L]||s.floating[C]);const V=O/2-z/2,re=H/2-E[C]/2-1,q=Pf(y[I],re),J=Pf(y[k],re),ie=q,W=H-E[C]-J,Y=H/2-E[C]/2+V,oe=vR(ie,Y,W),le=!d.arrow&&Wg(i)!=null&&Y!==oe&&s.reference[C]/2-(Y<ie?q:J)-E[C]/2<0,ce=le?Y<ie?Y-ie:Y-W:0;return{[w]:v[w]+ce,data:{[w]:oe,centerOffset:Y-oe-ce,...le&&{alignmentOffset:ce}},reset:le}}}),iae=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:l,initialPlacement:c,platform:d,elements:h}=e,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:E=!0,...P}=td(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const I=nd(i),k=Tf(c),L=nd(c)===c,O=await(d.isRTL==null?void 0:d.isRTL(h.floating)),z=v||(L||!E?[b0(c)]:Qse(c)),F=C!=="none";!v&&F&&z.push(...eae(c,E,C,O));const H=[c,...z],V=await rS(e,P),re=[];let q=((r=s.flip)==null?void 0:r.overflows)||[];if(g&&re.push(V[I]),y){const Y=Zse(i,l,O);re.push(V[Y[0]],V[Y[1]])}if(q=[...q,{placement:i,overflows:re}],!re.every(Y=>Y<=0)){var J,ie;const Y=(((J=s.flip)==null?void 0:J.index)||0)+1,oe=H[Y];if(oe)return{data:{index:Y,overflows:q},reset:{placement:oe}};let le=(ie=q.filter(ce=>ce.overflows[0]<=0).sort((ce,Q)=>ce.overflows[1]-Q.overflows[1])[0])==null?void 0:ie.placement;if(!le)switch(w){case"bestFit":{var W;const ce=(W=q.filter(Q=>{if(F){const he=Tf(Q.placement);return he===k||he==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(he=>he>0).reduce((he,ke)=>he+ke,0)]).sort((Q,he)=>Q[1]-he[1])[0])==null?void 0:W[0];ce&&(le=ce);break}case"initialPlacement":le=c;break}if(i!==le)return{reset:{placement:le}}}return{}}}};function q6(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Y6(n){return qse.some(e=>n[e]>=0)}const oae=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=td(n,e);switch(r){case"referenceHidden":{const s=await rS(e,{...i,elementContext:"reference"}),l=q6(s,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Y6(l)}}}case"escaped":{const s=await rS(e,{...i,altBoundary:!0}),l=q6(s,t.floating);return{data:{escapedOffsets:l,escaped:Y6(l)}}}default:return{}}}}};async function sae(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=nd(t),c=Wg(t),d=Tf(t)==="y",h=["left","top"].includes(l)?-1:1,g=s&&d?-1:1,y=td(e,n);let{mainAxis:v,crossAxis:w,alignmentAxis:C}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return c&&typeof C=="number"&&(w=c==="end"?C*-1:C),d?{x:w*g,y:v*h}:{x:v*h,y:w*g}}const aae=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:l,middlewareData:c}=e,d=await sae(e,n);return l===((t=c.offset)==null?void 0:t.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:s+d.y,data:{...d,placement:l}}}}},lae=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:l=!1,limiter:c={fn:P=>{let{x:I,y:k}=P;return{x:I,y:k}}},...d}=td(n,e),h={x:t,y:r},g=await rS(e,d),y=Tf(nd(i)),v=SR(y);let w=h[v],C=h[y];if(s){const P=v==="y"?"top":"left",I=v==="y"?"bottom":"right",k=w+g[P],L=w-g[I];w=vR(k,w,L)}if(l){const P=y==="y"?"top":"left",I=y==="y"?"bottom":"right",k=C+g[P],L=C-g[I];C=vR(k,C,L)}const E=c.fn({...e,[v]:w,[y]:C});return{...E,data:{x:E.x-t,y:E.y-r,enabled:{[v]:s,[y]:l}}}}}},cae=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:l}=e,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=td(n,e),g={x:t,y:r},y=Tf(i),v=SR(y);let w=g[v],C=g[y];const E=td(c,e),P=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(d){const L=v==="y"?"height":"width",O=s.reference[v]-s.floating[L]+P.mainAxis,z=s.reference[v]+s.reference[L]-P.mainAxis;w<O?w=O:w>z&&(w=z)}if(h){var I,k;const L=v==="y"?"width":"height",O=["top","left"].includes(nd(i)),z=s.reference[y]-s.floating[L]+(O&&((I=l.offset)==null?void 0:I[y])||0)+(O?0:P.crossAxis),F=s.reference[y]+s.reference[L]+(O?0:((k=l.offset)==null?void 0:k[y])||0)-(O?P.crossAxis:0);C<z?C=z:C>F&&(C=F)}return{[v]:w,[y]:C}}}},uae=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:l,elements:c}=e,{apply:d=()=>{},...h}=td(n,e),g=await rS(e,h),y=nd(i),v=Wg(i),w=Tf(i)==="y",{width:C,height:E}=s.floating;let P,I;y==="top"||y==="bottom"?(P=y,I=v===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(I=y,P=v==="end"?"top":"bottom");const k=E-g.top-g.bottom,L=C-g.left-g.right,O=Pf(E-g[P],k),z=Pf(C-g[I],L),F=!e.middlewareData.shift;let H=O,V=z;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(V=L),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(H=k),F&&!v){const q=Ua(g.left,0),J=Ua(g.right,0),ie=Ua(g.top,0),W=Ua(g.bottom,0);w?V=C-2*(q!==0||J!==0?q+J:Ua(g.left,g.right)):H=E-2*(ie!==0||W!==0?ie+W:Ua(g.top,g.bottom))}await d({...e,availableWidth:V,availableHeight:H});const re=await l.getDimensions(c.floating);return C!==re.width||E!==re.height?{reset:{rects:!0}}:{}}}};function E0(){return typeof window<"u"}function Gg(n){return X6(n)?(n.nodeName||"").toLowerCase():"#document"}function $a(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Yc(n){var e;return(e=(X6(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function X6(n){return E0()?n instanceof Node||n instanceof $a(n).Node:!1}function tc(n){return E0()?n instanceof Element||n instanceof $a(n).Element:!1}function Xc(n){return E0()?n instanceof HTMLElement||n instanceof $a(n).HTMLElement:!1}function Z6(n){return!E0()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof $a(n).ShadowRoot}function iS(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=nc(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function dae(n){return["table","td","th"].includes(Gg(n))}function _0(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function CR(n){const e=ER(),t=tc(n)?nc(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function fae(n){let e=If(n);for(;Xc(e)&&!qg(e);){if(CR(e))return e;if(_0(e))return null;e=If(e)}return null}function ER(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qg(n){return["html","body","#document"].includes(Gg(n))}function nc(n){return $a(n).getComputedStyle(n)}function P0(n){return tc(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function If(n){if(Gg(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Z6(n)&&n.host||Yc(n);return Z6(e)?e.host:e}function Q6(n){const e=If(n);return qg(e)?n.ownerDocument?n.ownerDocument.body:n.body:Xc(e)&&iS(e)?e:Q6(e)}function oS(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Q6(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),l=$a(i);if(s){const c=_R(l);return e.concat(l,l.visualViewport||[],iS(i)?i:[],c&&t?oS(c):[])}return e.concat(i,oS(i,[],t))}function _R(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function J6(n){const e=nc(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Xc(n),s=i?n.offsetWidth:t,l=i?n.offsetHeight:r,c=x0(t)!==s||x0(r)!==l;return c&&(t=s,r=l),{width:t,height:r,$:c}}function PR(n){return tc(n)?n:n.contextElement}function Yg(n){const e=PR(n);if(!Xc(e))return qc(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=J6(e);let l=(s?x0(t.width):t.width)/r,c=(s?x0(t.height):t.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const hae=qc(0);function e8(n){const e=$a(n);return!ER()||!e.visualViewport?hae:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function pae(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==$a(n)?!1:e}function Jh(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=PR(n);let l=qc(1);e&&(r?tc(r)&&(l=Yg(r)):l=Yg(n));const c=pae(s,t,r)?e8(s):qc(0);let d=(i.left+c.x)/l.x,h=(i.top+c.y)/l.y,g=i.width/l.x,y=i.height/l.y;if(s){const v=$a(s),w=r&&tc(r)?$a(r):r;let C=v,E=_R(C);for(;E&&r&&w!==C;){const P=Yg(E),I=E.getBoundingClientRect(),k=nc(E),L=I.left+(E.clientLeft+parseFloat(k.paddingLeft))*P.x,O=I.top+(E.clientTop+parseFloat(k.paddingTop))*P.y;d*=P.x,h*=P.y,g*=P.x,y*=P.y,d+=L,h+=O,C=$a(E),E=_R(C)}}return C0({width:g,height:y,x:d,y:h})}function TR(n,e){const t=P0(n).scrollLeft;return e?e.left+t:Jh(Yc(n)).left+t}function t8(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:TR(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function gae(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",l=Yc(r),c=e?_0(e.floating):!1;if(r===l||c&&s)return t;let d={scrollLeft:0,scrollTop:0},h=qc(1);const g=qc(0),y=Xc(r);if((y||!y&&!s)&&((Gg(r)!=="body"||iS(l))&&(d=P0(r)),Xc(r))){const w=Jh(r);h=Yg(r),g.x=w.x+r.clientLeft,g.y=w.y+r.clientTop}const v=l&&!y&&!s?t8(l,d,!0):qc(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+g.x+v.x,y:t.y*h.y-d.scrollTop*h.y+g.y+v.y}}function mae(n){return Array.from(n.getClientRects())}function yae(n){const e=Yc(n),t=P0(n),r=n.ownerDocument.body,i=Ua(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ua(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-t.scrollLeft+TR(n);const c=-t.scrollTop;return nc(r).direction==="rtl"&&(l+=Ua(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:l,y:c}}function vae(n,e){const t=$a(n),r=Yc(n),i=t.visualViewport;let s=r.clientWidth,l=r.clientHeight,c=0,d=0;if(i){s=i.width,l=i.height;const h=ER();(!h||h&&e==="fixed")&&(c=i.offsetLeft,d=i.offsetTop)}return{width:s,height:l,x:c,y:d}}function Sae(n,e){const t=Jh(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Xc(n)?Yg(n):qc(1),l=n.clientWidth*s.x,c=n.clientHeight*s.y,d=i*s.x,h=r*s.y;return{width:l,height:c,x:d,y:h}}function n8(n,e,t){let r;if(e==="viewport")r=vae(n,t);else if(e==="document")r=yae(Yc(n));else if(tc(e))r=Sae(e,t);else{const i=e8(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return C0(r)}function r8(n,e){const t=If(n);return t===e||!tc(t)||qg(t)?!1:nc(t).position==="fixed"||r8(t,e)}function xae(n,e){const t=e.get(n);if(t)return t;let r=oS(n,[],!1).filter(c=>tc(c)&&Gg(c)!=="body"),i=null;const s=nc(n).position==="fixed";let l=s?If(n):n;for(;tc(l)&&!qg(l);){const c=nc(l),d=CR(l);!d&&c.position==="fixed"&&(i=null),(s?!d&&!i:!d&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||iS(l)&&!d&&r8(n,l))?r=r.filter(g=>g!==l):i=c,l=If(l)}return e.set(n,r),r}function wae(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const l=[...t==="clippingAncestors"?_0(e)?[]:xae(e,this._c):[].concat(t),r],c=l[0],d=l.reduce((h,g)=>{const y=n8(e,g,i);return h.top=Ua(y.top,h.top),h.right=Pf(y.right,h.right),h.bottom=Pf(y.bottom,h.bottom),h.left=Ua(y.left,h.left),h},n8(e,c,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function bae(n){const{width:e,height:t}=J6(n);return{width:e,height:t}}function Cae(n,e,t){const r=Xc(e),i=Yc(e),s=t==="fixed",l=Jh(n,!0,s,e);let c={scrollLeft:0,scrollTop:0};const d=qc(0);if(r||!r&&!s)if((Gg(e)!=="body"||iS(i))&&(c=P0(e)),r){const v=Jh(e,!0,s,e);d.x=v.x+e.clientLeft,d.y=v.y+e.clientTop}else i&&(d.x=TR(i));const h=i&&!r&&!s?t8(i,c):qc(0),g=l.left+c.scrollLeft-d.x-h.x,y=l.top+c.scrollTop-d.y-h.y;return{x:g,y,width:l.width,height:l.height}}function IR(n){return nc(n).position==="static"}function i8(n,e){if(!Xc(n)||nc(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Yc(n)===t&&(t=t.ownerDocument.body),t}function o8(n,e){const t=$a(n);if(_0(n))return t;if(!Xc(n)){let i=If(n);for(;i&&!qg(i);){if(tc(i)&&!IR(i))return i;i=If(i)}return t}let r=i8(n,e);for(;r&&dae(r)&&IR(r);)r=i8(r,e);return r&&qg(r)&&IR(r)&&!CR(r)?t:r||fae(n)||t}const Eae=async function(n){const e=this.getOffsetParent||o8,t=this.getDimensions,r=await t(n.floating);return{reference:Cae(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _ae(n){return nc(n).direction==="rtl"}const Pae={convertOffsetParentRelativeRectToViewportRelativeRect:gae,getDocumentElement:Yc,getClippingRect:wae,getOffsetParent:o8,getElementRects:Eae,getClientRects:mae,getDimensions:bae,getScale:Yg,isElement:tc,isRTL:_ae};function s8(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Tae(n,e){let t=null,r;const i=Yc(n);function s(){var c;clearTimeout(r),(c=t)==null||c.disconnect(),t=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),s();const h=n.getBoundingClientRect(),{left:g,top:y,width:v,height:w}=h;if(c||e(),!v||!w)return;const C=w0(y),E=w0(i.clientWidth-(g+v)),P=w0(i.clientHeight-(y+w)),I=w0(g),L={rootMargin:-C+"px "+-E+"px "+-P+"px "+-I+"px",threshold:Ua(0,Pf(1,d))||1};let O=!0;function z(F){const H=F[0].intersectionRatio;if(H!==d){if(!O)return l();H?l(!1,H):r=setTimeout(()=>{l(!1,1e-7)},1e3)}H===1&&!s8(h,n.getBoundingClientRect())&&l(),O=!1}try{t=new IntersectionObserver(z,{...L,root:i.ownerDocument})}catch{t=new IntersectionObserver(z,L)}t.observe(n)}return l(!0),s}function Iae(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=PR(n),g=i||s?[...h?oS(h):[],...oS(e)]:[];g.forEach(I=>{i&&I.addEventListener("scroll",t,{passive:!0}),s&&I.addEventListener("resize",t)});const y=h&&c?Tae(h,t):null;let v=-1,w=null;l&&(w=new ResizeObserver(I=>{let[k]=I;k&&k.target===h&&w&&(w.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var L;(L=w)==null||L.observe(e)})),t()}),h&&!d&&w.observe(h),w.observe(e));let C,E=d?Jh(n):null;d&&P();function P(){const I=Jh(n);E&&!s8(E,I)&&t(),E=I,C=requestAnimationFrame(P)}return t(),()=>{var I;g.forEach(k=>{i&&k.removeEventListener("scroll",t),s&&k.removeEventListener("resize",t)}),y==null||y(),(I=w)==null||I.disconnect(),w=null,d&&cancelAnimationFrame(C)}}const kae=aae,Rae=lae,Mae=iae,Aae=uae,Dae=oae,a8=rae,Oae=cae,jae=(n,e,t)=>{const r=new Map,i={platform:Pae,...t},s={...i.platform,_c:r};return nae(n,e,{...i,platform:s})};var T0=typeof document<"u"?M.useLayoutEffect:M.useEffect;function I0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!I0(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!I0(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function l8(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function c8(n,e){const t=l8(n);return Math.round(e*t)/t}function kR(n){const e=M.useRef(n);return T0(()=>{e.current=n}),e}function Lae(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:l}={},transform:c=!0,whileElementsMounted:d,open:h}=n,[g,y]=M.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,w]=M.useState(r);I0(v,r)||w(r);const[C,E]=M.useState(null),[P,I]=M.useState(null),k=M.useCallback(Q=>{Q!==F.current&&(F.current=Q,E(Q))},[]),L=M.useCallback(Q=>{Q!==H.current&&(H.current=Q,I(Q))},[]),O=s||C,z=l||P,F=M.useRef(null),H=M.useRef(null),V=M.useRef(g),re=d!=null,q=kR(d),J=kR(i),ie=kR(h),W=M.useCallback(()=>{if(!F.current||!H.current)return;const Q={placement:e,strategy:t,middleware:v};J.current&&(Q.platform=J.current),jae(F.current,H.current,Q).then(he=>{const ke={...he,isPositioned:ie.current!==!1};Y.current&&!I0(V.current,ke)&&(V.current=ke,zg.flushSync(()=>{y(ke)}))})},[v,e,t,J,ie]);T0(()=>{h===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,y(Q=>({...Q,isPositioned:!1})))},[h]);const Y=M.useRef(!1);T0(()=>(Y.current=!0,()=>{Y.current=!1}),[]),T0(()=>{if(O&&(F.current=O),z&&(H.current=z),O&&z){if(q.current)return q.current(O,z,W);W()}},[O,z,W,q,re]);const oe=M.useMemo(()=>({reference:F,floating:H,setReference:k,setFloating:L}),[k,L]),le=M.useMemo(()=>({reference:O,floating:z}),[O,z]),ce=M.useMemo(()=>{const Q={position:t,left:0,top:0};if(!le.floating)return Q;const he=c8(le.floating,g.x),ke=c8(le.floating,g.y);return c?{...Q,transform:"translate("+he+"px, "+ke+"px)",...l8(le.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:he,top:ke}},[t,c,le.floating,g.x,g.y]);return M.useMemo(()=>({...g,update:W,refs:oe,elements:le,floatingStyles:ce}),[g,W,oe,le,ce])}const Nae=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?a8({element:r.current,padding:i}).fn(t):{}:r?a8({element:r,padding:i}).fn(t):{}}}},Fae=(n,e)=>({...kae(n),options:[n,e]}),zae=(n,e)=>({...Rae(n),options:[n,e]}),Uae=(n,e)=>({...Oae(n),options:[n,e]}),$ae=(n,e)=>({...Mae(n),options:[n,e]}),Bae=(n,e)=>({...Aae(n),options:[n,e]}),Hae=(n,e)=>({...Dae(n),options:[n,e]}),Vae=(n,e)=>({...Nae(n),options:[n,e]});var Kae="Arrow",u8=M.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return m.jsx(Vn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});u8.displayName=Kae;var Wae=u8;function d8(n){const[e,t]=M.useState(void 0);return _f(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let l,c;if("borderBoxSize"in s){const d=s.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,c=h.blockSize}else l=n.offsetWidth,c=n.offsetHeight;t({width:l,height:c})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var RR="Popper",[f8,k0]=Gc(RR),[Gae,h8]=f8(RR),p8=n=>{const{__scopePopper:e,children:t}=n,[r,i]=M.useState(null);return m.jsx(Gae,{scope:e,anchor:r,onAnchorChange:i,children:t})};p8.displayName=RR;var g8="PopperAnchor",m8=M.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=h8(g8,t),l=M.useRef(null),c=Tr(e,l);return M.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:m.jsx(Vn.div,{...i,ref:c})});m8.displayName=g8;var MR="PopperContent",[qae,Yae]=f8(MR),y8=M.forwardRef((n,e)=>{var ot,We,Qe,gt,Pt,yn;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:w="optimized",onPlaced:C,...E}=n,P=h8(MR,t),[I,k]=M.useState(null),L=Tr(e,Zt=>k(Zt)),[O,z]=M.useState(null),F=d8(O),H=(F==null?void 0:F.width)??0,V=(F==null?void 0:F.height)??0,re=r+(s!=="center"?"-"+s:""),q=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},J=Array.isArray(h)?h:[h],ie=J.length>0,W={padding:q,boundary:J.filter(Zae),altBoundary:ie},{refs:Y,floatingStyles:oe,placement:le,isPositioned:ce,middlewareData:Q}=Lae({strategy:"fixed",placement:re,whileElementsMounted:(...Zt)=>Iae(...Zt,{animationFrame:w==="always"}),elements:{reference:P.anchor},middleware:[Fae({mainAxis:i+V,alignmentAxis:l}),d&&zae({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?Uae():void 0,...W}),d&&$ae({...W}),Bae({...W,apply:({elements:Zt,rects:an,availableWidth:ln,availableHeight:Yt})=>{const{width:Yn,height:br}=an.reference,Wr=Zt.floating.style;Wr.setProperty("--radix-popper-available-width",`${ln}px`),Wr.setProperty("--radix-popper-available-height",`${Yt}px`),Wr.setProperty("--radix-popper-anchor-width",`${Yn}px`),Wr.setProperty("--radix-popper-anchor-height",`${br}px`)}}),O&&Vae({element:O,padding:c}),Qae({arrowWidth:H,arrowHeight:V}),v&&Hae({strategy:"referenceHidden",...W})]}),[he,ke]=x8(le),te=Po(C);_f(()=>{ce&&(te==null||te())},[ce,te]);const me=(ot=Q.arrow)==null?void 0:ot.x,Oe=(We=Q.arrow)==null?void 0:We.y,Ze=((Qe=Q.arrow)==null?void 0:Qe.centerOffset)!==0,[De,yt]=M.useState();return _f(()=>{I&&yt(window.getComputedStyle(I).zIndex)},[I]),m.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:ce?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De,"--radix-popper-transform-origin":[(gt=Q.transformOrigin)==null?void 0:gt.x,(Pt=Q.transformOrigin)==null?void 0:Pt.y].join(" "),...((yn=Q.hide)==null?void 0:yn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:m.jsx(qae,{scope:t,placedSide:he,onArrowChange:z,arrowX:me,arrowY:Oe,shouldHideArrow:Ze,children:m.jsx(Vn.div,{"data-side":he,"data-align":ke,...E,ref:L,style:{...E.style,animation:ce?void 0:"none"}})})})});y8.displayName=MR;var v8="PopperArrow",Xae={top:"bottom",right:"left",bottom:"top",left:"right"},S8=M.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=Yae(v8,r),l=Xae[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(Wae,{...i,ref:t,style:{...i.style,display:"block"}})})});S8.displayName=v8;function Zae(n){return n!==null}var Qae=n=>({name:"transformOrigin",options:n,fn(e){var P,I,k;const{placement:t,rects:r,middlewareData:i}=e,l=((P=i.arrow)==null?void 0:P.centerOffset)!==0,c=l?0:n.arrowWidth,d=l?0:n.arrowHeight,[h,g]=x8(t),y={start:"0%",center:"50%",end:"100%"}[g],v=(((I=i.arrow)==null?void 0:I.x)??0)+c/2,w=(((k=i.arrow)==null?void 0:k.y)??0)+d/2;let C="",E="";return h==="bottom"?(C=l?y:`${v}px`,E=`${-d}px`):h==="top"?(C=l?y:`${v}px`,E=`${r.floating.height+d}px`):h==="right"?(C=`${-d}px`,E=l?y:`${w}px`):h==="left"&&(C=`${r.floating.width+d}px`,E=l?y:`${w}px`),{data:{x:C,y:E}}}});function x8(n){const[e,t="center"]=n.split("-");return[e,t]}var AR=p8,DR=m8,w8=y8,b8=S8,Jae="Portal",sS=M.forwardRef((n,e)=>{var c;const{container:t,...r}=n,[i,s]=M.useState(!1);_f(()=>s(!0),[]);const l=t||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?Xne.createPortal(m.jsx(Vn.div,{...r,ref:e}),l):null});sS.displayName=Jae;function ele(n,e){return M.useReducer((t,r)=>e[t][r]??t,n)}var rc=n=>{const{present:e,children:t}=n,r=tle(e),i=typeof t=="function"?t({present:r.isPresent}):M.Children.only(t),s=Tr(r.ref,nle(i));return typeof t=="function"||r.isPresent?M.cloneElement(i,{ref:s}):null};rc.displayName="Presence";function tle(n){const[e,t]=M.useState(),r=M.useRef({}),i=M.useRef(n),s=M.useRef("none"),l=n?"mounted":"unmounted",[c,d]=ele(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return M.useEffect(()=>{const h=R0(r.current);s.current=c==="mounted"?h:"none"},[c]),_f(()=>{const h=r.current,g=i.current;if(g!==n){const v=s.current,w=R0(h);n?d("MOUNT"):w==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(g&&v!==w?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),_f(()=>{if(e){let h;const g=e.ownerDocument.defaultView??window,y=w=>{const E=R0(r.current).includes(w.animationName);if(w.target===e&&E&&(d("ANIMATION_END"),!i.current)){const P=e.style.animationFillMode;e.style.animationFillMode="forwards",h=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=P)})}},v=w=>{w.target===e&&(s.current=R0(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:M.useCallback(h=>{h&&(r.current=getComputedStyle(h)),t(h)},[])}}function R0(n){return(n==null?void 0:n.animationName)||"none"}function nle(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function kf({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=rle({defaultProp:e,onChange:t}),s=n!==void 0,l=s?n:r,c=Po(t),d=M.useCallback(h=>{if(s){const y=typeof h=="function"?h(n):h;y!==n&&c(y)}else i(h)},[s,n,i,c]);return[l,d]}function rle({defaultProp:n,onChange:e}){const t=M.useState(n),[r]=t,i=M.useRef(r),s=Po(e);return M.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}var OR="rovingFocusGroup.onEntryFocus",ile={bubbles:!1,cancelable:!0},M0="RovingFocusGroup",[jR,C8,ole]=v0(M0),[sle,E8]=Gc(M0,[ole]),[ale,lle]=sle(M0),_8=M.forwardRef((n,e)=>m.jsx(jR.Provider,{scope:n.__scopeRovingFocusGroup,children:m.jsx(jR.Slot,{scope:n.__scopeRovingFocusGroup,children:m.jsx(cle,{...n,ref:e})})}));_8.displayName=M0;var cle=M.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:g=!1,...y}=n,v=M.useRef(null),w=Tr(e,v),C=fR(s),[E=null,P]=kf({prop:l,defaultProp:c,onChange:d}),[I,k]=M.useState(!1),L=Po(h),O=C8(t),z=M.useRef(!1),[F,H]=M.useState(0);return M.useEffect(()=>{const V=v.current;if(V)return V.addEventListener(OR,L),()=>V.removeEventListener(OR,L)},[L]),m.jsx(ale,{scope:t,orientation:r,dir:C,loop:i,currentTabStopId:E,onItemFocus:M.useCallback(V=>P(V),[P]),onItemShiftTab:M.useCallback(()=>k(!0),[]),onFocusableItemAdd:M.useCallback(()=>H(V=>V+1),[]),onFocusableItemRemove:M.useCallback(()=>H(V=>V-1),[]),children:m.jsx(Vn.div,{tabIndex:I||F===0?-1:0,"data-orientation":r,...y,ref:w,style:{outline:"none",...n.style},onMouseDown:bt(n.onMouseDown,()=>{z.current=!0}),onFocus:bt(n.onFocus,V=>{const re=!z.current;if(V.target===V.currentTarget&&re&&!I){const q=new CustomEvent(OR,ile);if(V.currentTarget.dispatchEvent(q),!q.defaultPrevented){const J=O().filter(le=>le.focusable),ie=J.find(le=>le.active),W=J.find(le=>le.id===E),oe=[ie,W,...J].filter(Boolean).map(le=>le.ref.current);I8(oe,g)}}z.current=!1}),onBlur:bt(n.onBlur,()=>k(!1))})})}),P8="RovingFocusGroupItem",T8=M.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,...l}=n,c=ed(),d=s||c,h=lle(P8,t),g=h.currentTabStopId===d,y=C8(t),{onFocusableItemAdd:v,onFocusableItemRemove:w}=h;return M.useEffect(()=>{if(r)return v(),()=>w()},[r,v,w]),m.jsx(jR.ItemSlot,{scope:t,id:d,focusable:r,active:i,children:m.jsx(Vn.span,{tabIndex:g?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:bt(n.onMouseDown,C=>{r?h.onItemFocus(d):C.preventDefault()}),onFocus:bt(n.onFocus,()=>h.onItemFocus(d)),onKeyDown:bt(n.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){h.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const E=fle(C,h.orientation,h.dir);if(E!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let I=y().filter(k=>k.focusable).map(k=>k.ref.current);if(E==="last")I.reverse();else if(E==="prev"||E==="next"){E==="prev"&&I.reverse();const k=I.indexOf(C.currentTarget);I=h.loop?hle(I,k+1):I.slice(k+1)}setTimeout(()=>I8(I))}})})})});T8.displayName=P8;var ule={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dle(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function fle(n,e,t){const r=dle(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ule[r]}function I8(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function hle(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var ple=_8,gle=T8,mle=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Xg=new WeakMap,A0=new WeakMap,D0={},LR=0,k8=function(n){return n&&(n.host||k8(n.parentNode))},yle=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=k8(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},vle=function(n,e,t,r){var i=yle(e,Array.isArray(n)?n:[n]);D0[t]||(D0[t]=new WeakMap);var s=D0[t],l=[],c=new Set,d=new Set(i),h=function(y){!y||c.has(y)||(c.add(y),h(y.parentNode))};i.forEach(h);var g=function(y){!y||d.has(y)||Array.prototype.forEach.call(y.children,function(v){if(c.has(v))g(v);else try{var w=v.getAttribute(r),C=w!==null&&w!=="false",E=(Xg.get(v)||0)+1,P=(s.get(v)||0)+1;Xg.set(v,E),s.set(v,P),l.push(v),E===1&&C&&A0.set(v,!0),P===1&&v.setAttribute(t,"true"),C||v.setAttribute(r,"true")}catch(I){console.error("aria-hidden: cannot operate on ",v,I)}})};return g(e),c.clear(),LR++,function(){l.forEach(function(y){var v=Xg.get(y)-1,w=s.get(y)-1;Xg.set(y,v),s.set(y,w),v||(A0.has(y)||y.removeAttribute(r),A0.delete(y)),w||y.removeAttribute(t)}),LR--,LR||(Xg=new WeakMap,Xg=new WeakMap,A0=new WeakMap,D0={})}},NR=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=mle(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),vle(r,i,t,"aria-hidden")):function(){return null}},Zc=function(){return Zc=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Zc.apply(this,arguments)};function R8(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Sle(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var O0="right-scroll-bar-position",j0="width-before-scroll-bar",xle="with-scroll-bars-hidden",wle="--removed-body-scroll-bar-size";function FR(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function ble(n,e){var t=M.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var Cle=typeof window<"u"?M.useLayoutEffect:M.useEffect,M8=new WeakMap;function Ele(n,e){var t=ble(null,function(r){return n.forEach(function(i){return FR(i,r)})});return Cle(function(){var r=M8.get(t);if(r){var i=new Set(r),s=new Set(n),l=t.current;i.forEach(function(c){s.has(c)||FR(c,null)}),s.forEach(function(c){i.has(c)||FR(c,l)})}M8.set(t,n)},[n]),t}function _le(n){return n}function Ple(n,e){e===void 0&&(e=_le);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var l=e(s,r);return t.push(l),function(){t=t.filter(function(c){return c!==l})}},assignSyncMedium:function(s){for(r=!0;t.length;){var l=t;t=[],l.forEach(s)}t={push:function(c){return s(c)},filter:function(){return t}}},assignMedium:function(s){r=!0;var l=[];if(t.length){var c=t;t=[],c.forEach(s),l=t}var d=function(){var g=l;l=[],g.forEach(s)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(g){l.push(g),h()},filter:function(g){return l=l.filter(g),t}}}};return i}function Tle(n){n===void 0&&(n={});var e=Ple(null);return e.options=Zc({async:!0,ssr:!1},n),e}var A8=function(n){var e=n.sideCar,t=R8(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return M.createElement(r,Zc({},t))};A8.isSideCarExport=!0;function Ile(n,e){return n.useMedium(e),A8}var D8=Tle(),zR=function(){},L0=M.forwardRef(function(n,e){var t=M.useRef(null),r=M.useState({onScrollCapture:zR,onWheelCapture:zR,onTouchMoveCapture:zR}),i=r[0],s=r[1],l=n.forwardProps,c=n.children,d=n.className,h=n.removeScrollBar,g=n.enabled,y=n.shards,v=n.sideCar,w=n.noIsolation,C=n.inert,E=n.allowPinchZoom,P=n.as,I=P===void 0?"div":P,k=n.gapMode,L=R8(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=v,z=Ele([t,e]),F=Zc(Zc({},L),i);return M.createElement(M.Fragment,null,g&&M.createElement(O,{sideCar:D8,removeScrollBar:h,shards:y,noIsolation:w,inert:C,setCallbacks:s,allowPinchZoom:!!E,lockRef:t,gapMode:k}),l?M.cloneElement(M.Children.only(c),Zc(Zc({},F),{ref:z})):M.createElement(I,Zc({},F,{className:d,ref:z}),c))});L0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},L0.classNames={fullWidth:j0,zeroRight:O0};var kle=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Rle(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=kle();return e&&n.setAttribute("nonce",e),n}function Mle(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function Ale(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var Dle=function(){var n=0,e=null;return{add:function(t){n==0&&(e=Rle())&&(Mle(e,t),Ale(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Ole=function(){var n=Dle();return function(e,t){M.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},O8=function(){var n=Ole(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},jle={left:0,top:0,right:0,gap:0},UR=function(n){return parseInt(n||"",10)||0},Lle=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[UR(t),UR(r),UR(i)]},Nle=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return jle;var e=Lle(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},Fle=O8(),Zg="data-scroll-locked",zle=function(n,e,t,r){var i=n.left,s=n.top,l=n.right,c=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(xle,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Zg,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(O0,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(j0,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(O0," .").concat(O0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(j0," .").concat(j0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Zg,`] {
    `).concat(wle,": ").concat(c,`px;
  }
`)},j8=function(){var n=parseInt(document.body.getAttribute(Zg)||"0",10);return isFinite(n)?n:0},Ule=function(){M.useEffect(function(){return document.body.setAttribute(Zg,(j8()+1).toString()),function(){var n=j8()-1;n<=0?document.body.removeAttribute(Zg):document.body.setAttribute(Zg,n.toString())}},[])},$le=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;Ule();var s=M.useMemo(function(){return Nle(i)},[i]);return M.createElement(Fle,{styles:zle(s,!e,i,t?"":"!important")})},$R=!1;if(typeof window<"u")try{var N0=Object.defineProperty({},"passive",{get:function(){return $R=!0,!0}});window.addEventListener("test",N0,N0),window.removeEventListener("test",N0,N0)}catch{$R=!1}var Qg=$R?{passive:!1}:!1,Ble=function(n){return n.tagName==="TEXTAREA"},L8=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Ble(n)&&t[e]==="visible")},Hle=function(n){return L8(n,"overflowY")},Vle=function(n){return L8(n,"overflowX")},N8=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=F8(n,r);if(i){var s=z8(n,r),l=s[1],c=s[2];if(l>c)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},Kle=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},Wle=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},F8=function(n,e){return n==="v"?Hle(e):Vle(e)},z8=function(n,e){return n==="v"?Kle(e):Wle(e)},Gle=function(n,e){return n==="h"&&e==="rtl"?-1:1},qle=function(n,e,t,r,i){var s=Gle(n,window.getComputedStyle(e).direction),l=s*r,c=t.target,d=e.contains(c),h=!1,g=l>0,y=0,v=0;do{var w=z8(n,c),C=w[0],E=w[1],P=w[2],I=E-P-s*C;(C||I)&&F8(n,c)&&(y+=I,v+=C),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(h=!0),h},F0=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},U8=function(n){return[n.deltaX,n.deltaY]},$8=function(n){return n&&"current"in n?n.current:n},Yle=function(n,e){return n[0]===e[0]&&n[1]===e[1]},Xle=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Zle=0,Jg=[];function Qle(n){var e=M.useRef([]),t=M.useRef([0,0]),r=M.useRef(),i=M.useState(Zle++)[0],s=M.useState(O8)[0],l=M.useRef(n);M.useEffect(function(){l.current=n},[n]),M.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var E=Sle([n.lockRef.current],(n.shards||[]).map($8),!0).filter(Boolean);return E.forEach(function(P){return P.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),E.forEach(function(P){return P.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var c=M.useCallback(function(E,P){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!l.current.allowPinchZoom;var I=F0(E),k=t.current,L="deltaX"in E?E.deltaX:k[0]-I[0],O="deltaY"in E?E.deltaY:k[1]-I[1],z,F=E.target,H=Math.abs(L)>Math.abs(O)?"h":"v";if("touches"in E&&H==="h"&&F.type==="range")return!1;var V=N8(H,F);if(!V)return!0;if(V?z=H:(z=H==="v"?"h":"v",V=N8(H,F)),!V)return!1;if(!r.current&&"changedTouches"in E&&(L||O)&&(r.current=z),!z)return!0;var re=r.current||z;return qle(re,P,E,re==="h"?L:O)},[]),d=M.useCallback(function(E){var P=E;if(!(!Jg.length||Jg[Jg.length-1]!==s)){var I="deltaY"in P?U8(P):F0(P),k=e.current.filter(function(z){return z.name===P.type&&(z.target===P.target||P.target===z.shadowParent)&&Yle(z.delta,I)})[0];if(k&&k.should){P.cancelable&&P.preventDefault();return}if(!k){var L=(l.current.shards||[]).map($8).filter(Boolean).filter(function(z){return z.contains(P.target)}),O=L.length>0?c(P,L[0]):!l.current.noIsolation;O&&P.cancelable&&P.preventDefault()}}},[]),h=M.useCallback(function(E,P,I,k){var L={name:E,delta:P,target:I,should:k,shadowParent:Jle(I)};e.current.push(L),setTimeout(function(){e.current=e.current.filter(function(O){return O!==L})},1)},[]),g=M.useCallback(function(E){t.current=F0(E),r.current=void 0},[]),y=M.useCallback(function(E){h(E.type,U8(E),E.target,c(E,n.lockRef.current))},[]),v=M.useCallback(function(E){h(E.type,F0(E),E.target,c(E,n.lockRef.current))},[]);M.useEffect(function(){return Jg.push(s),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",d,Qg),document.addEventListener("touchmove",d,Qg),document.addEventListener("touchstart",g,Qg),function(){Jg=Jg.filter(function(E){return E!==s}),document.removeEventListener("wheel",d,Qg),document.removeEventListener("touchmove",d,Qg),document.removeEventListener("touchstart",g,Qg)}},[]);var w=n.removeScrollBar,C=n.inert;return M.createElement(M.Fragment,null,C?M.createElement(s,{styles:Xle(i)}):null,w?M.createElement($le,{gapMode:n.gapMode}):null)}function Jle(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const ece=Ile(D8,Qle);var z0=M.forwardRef(function(n,e){return M.createElement(L0,Zc({},n,{ref:e,sideCar:ece}))});z0.classNames=L0.classNames;var BR=["Enter"," "],tce=["ArrowDown","PageUp","Home"],B8=["ArrowUp","PageDown","End"],nce=[...tce,...B8],rce={ltr:[...BR,"ArrowRight"],rtl:[...BR,"ArrowLeft"]},ice={ltr:["ArrowLeft"],rtl:["ArrowRight"]},aS="Menu",[lS,oce,sce]=v0(aS),[ep,U0]=Gc(aS,[sce,k0,E8]),cS=k0(),H8=E8(),[V8,Rf]=ep(aS),[ace,uS]=ep(aS),K8=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:s,modal:l=!0}=n,c=cS(e),[d,h]=M.useState(null),g=M.useRef(!1),y=Po(s),v=fR(i);return M.useEffect(()=>{const w=()=>{g.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>g.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),m.jsx(AR,{...c,children:m.jsx(V8,{scope:e,open:t,onOpenChange:y,content:d,onContentChange:h,children:m.jsx(ace,{scope:e,onClose:M.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:g,dir:v,modal:l,children:r})})})};K8.displayName=aS;var lce="MenuAnchor",HR=M.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=cS(t);return m.jsx(DR,{...i,...r,ref:e})});HR.displayName=lce;var VR="MenuPortal",[cce,W8]=ep(VR,{forceMount:void 0}),G8=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,s=Rf(VR,e);return m.jsx(cce,{scope:e,forceMount:t,children:m.jsx(rc,{present:t||s.open,children:m.jsx(sS,{asChild:!0,container:i,children:r})})})};G8.displayName=VR;var ml="MenuContent",[uce,KR]=ep(ml),q8=M.forwardRef((n,e)=>{const t=W8(ml,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=Rf(ml,n.__scopeMenu),l=uS(ml,n.__scopeMenu);return m.jsx(lS.Provider,{scope:n.__scopeMenu,children:m.jsx(rc,{present:r||s.open,children:m.jsx(lS.Slot,{scope:n.__scopeMenu,children:l.modal?m.jsx(dce,{...i,ref:e}):m.jsx(fce,{...i,ref:e})})})})}),dce=M.forwardRef((n,e)=>{const t=Rf(ml,n.__scopeMenu),r=M.useRef(null),i=Tr(e,r);return M.useEffect(()=>{const s=r.current;if(s)return NR(s)},[]),m.jsx(WR,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:bt(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),fce=M.forwardRef((n,e)=>{const t=Rf(ml,n.__scopeMenu);return m.jsx(WR,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),WR=M.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:y,onInteractOutside:v,onDismiss:w,disableOutsideScroll:C,...E}=n,P=Rf(ml,t),I=uS(ml,t),k=cS(t),L=H8(t),O=oce(t),[z,F]=M.useState(null),H=M.useRef(null),V=Tr(e,H,P.onContentChange),re=M.useRef(0),q=M.useRef(""),J=M.useRef(0),ie=M.useRef(null),W=M.useRef("right"),Y=M.useRef(0),oe=C?z0:M.Fragment,le=C?{as:Qh,allowPinchZoom:!0}:void 0,ce=he=>{var ot,We;const ke=q.current+he,te=O().filter(Qe=>!Qe.disabled),me=document.activeElement,Oe=(ot=te.find(Qe=>Qe.ref.current===me))==null?void 0:ot.textValue,Ze=te.map(Qe=>Qe.textValue),De=Ece(Ze,ke,Oe),yt=(We=te.find(Qe=>Qe.textValue===De))==null?void 0:We.ref.current;(function Qe(gt){q.current=gt,window.clearTimeout(re.current),gt!==""&&(re.current=window.setTimeout(()=>Qe(""),1e3))})(ke),yt&&setTimeout(()=>yt.focus())};M.useEffect(()=>()=>window.clearTimeout(re.current),[]),gR();const Q=M.useCallback(he=>{var te,me;return W.current===((te=ie.current)==null?void 0:te.side)&&Pce(he,(me=ie.current)==null?void 0:me.area)},[]);return m.jsx(uce,{scope:t,searchRef:q,onItemEnter:M.useCallback(he=>{Q(he)&&he.preventDefault()},[Q]),onItemLeave:M.useCallback(he=>{var ke;Q(he)||((ke=H.current)==null||ke.focus(),F(null))},[Q]),onTriggerLeave:M.useCallback(he=>{Q(he)&&he.preventDefault()},[Q]),pointerGraceTimerRef:J,onPointerGraceIntentChange:M.useCallback(he=>{ie.current=he},[]),children:m.jsx(oe,{...le,children:m.jsx(S0,{asChild:!0,trapped:i,onMountAutoFocus:bt(s,he=>{var ke;he.preventDefault(),(ke=H.current)==null||ke.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:m.jsx(nS,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:y,onInteractOutside:v,onDismiss:w,children:m.jsx(ple,{asChild:!0,...L,dir:I.dir,orientation:"vertical",loop:r,currentTabStopId:z,onCurrentTabStopIdChange:F,onEntryFocus:bt(d,he=>{I.isUsingKeyboardRef.current||he.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(w8,{role:"menu","aria-orientation":"vertical","data-state":fB(P.open),"data-radix-menu-content":"",dir:I.dir,...k,...E,ref:V,style:{outline:"none",...E.style},onKeyDown:bt(E.onKeyDown,he=>{const te=he.target.closest("[data-radix-menu-content]")===he.currentTarget,me=he.ctrlKey||he.altKey||he.metaKey,Oe=he.key.length===1;te&&(he.key==="Tab"&&he.preventDefault(),!me&&Oe&&ce(he.key));const Ze=H.current;if(he.target!==Ze||!nce.includes(he.key))return;he.preventDefault();const yt=O().filter(ot=>!ot.disabled).map(ot=>ot.ref.current);B8.includes(he.key)&&yt.reverse(),bce(yt)}),onBlur:bt(n.onBlur,he=>{he.currentTarget.contains(he.target)||(window.clearTimeout(re.current),q.current="")}),onPointerMove:bt(n.onPointerMove,fS(he=>{const ke=he.target,te=Y.current!==he.clientX;if(he.currentTarget.contains(ke)&&te){const me=he.clientX>Y.current?"right":"left";W.current=me,Y.current=he.clientX}}))})})})})})})});q8.displayName=ml;var hce="MenuGroup",GR=M.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return m.jsx(Vn.div,{role:"group",...r,ref:e})});GR.displayName=hce;var pce="MenuLabel",Y8=M.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return m.jsx(Vn.div,{...r,ref:e})});Y8.displayName=pce;var $0="MenuItem",X8="menu.itemSelect",B0=M.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,s=M.useRef(null),l=uS($0,n.__scopeMenu),c=KR($0,n.__scopeMenu),d=Tr(e,s),h=M.useRef(!1),g=()=>{const y=s.current;if(!t&&y){const v=new CustomEvent(X8,{bubbles:!0,cancelable:!0});y.addEventListener(X8,w=>r==null?void 0:r(w),{once:!0}),dR(y,v),v.defaultPrevented?h.current=!1:l.onClose()}};return m.jsx(Z8,{...i,ref:d,disabled:t,onClick:bt(n.onClick,g),onPointerDown:y=>{var v;(v=n.onPointerDown)==null||v.call(n,y),h.current=!0},onPointerUp:bt(n.onPointerUp,y=>{var v;h.current||(v=y.currentTarget)==null||v.click()}),onKeyDown:bt(n.onKeyDown,y=>{const v=c.searchRef.current!=="";t||v&&y.key===" "||BR.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});B0.displayName=$0;var Z8=M.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...s}=n,l=KR($0,t),c=H8(t),d=M.useRef(null),h=Tr(e,d),[g,y]=M.useState(!1),[v,w]=M.useState("");return M.useEffect(()=>{const C=d.current;C&&w((C.textContent??"").trim())},[s.children]),m.jsx(lS.ItemSlot,{scope:t,disabled:r,textValue:i??v,children:m.jsx(gle,{asChild:!0,...c,focusable:!r,children:m.jsx(Vn.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:h,onPointerMove:bt(n.onPointerMove,fS(C=>{r?l.onItemLeave(C):(l.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:bt(n.onPointerLeave,fS(C=>l.onItemLeave(C))),onFocus:bt(n.onFocus,()=>y(!0)),onBlur:bt(n.onBlur,()=>y(!1))})})})}),gce="MenuCheckboxItem",Q8=M.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return m.jsx(rB,{scope:n.__scopeMenu,checked:t,children:m.jsx(B0,{role:"menuitemcheckbox","aria-checked":H0(t)?"mixed":t,...i,ref:e,"data-state":XR(t),onSelect:bt(i.onSelect,()=>r==null?void 0:r(H0(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Q8.displayName=gce;var J8="MenuRadioGroup",[mce,yce]=ep(J8,{value:void 0,onValueChange:()=>{}}),eB=M.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,s=Po(r);return m.jsx(mce,{scope:n.__scopeMenu,value:t,onValueChange:s,children:m.jsx(GR,{...i,ref:e})})});eB.displayName=J8;var tB="MenuRadioItem",nB=M.forwardRef((n,e)=>{const{value:t,...r}=n,i=yce(tB,n.__scopeMenu),s=t===i.value;return m.jsx(rB,{scope:n.__scopeMenu,checked:s,children:m.jsx(B0,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":XR(s),onSelect:bt(r.onSelect,()=>{var l;return(l=i.onValueChange)==null?void 0:l.call(i,t)},{checkForDefaultPrevented:!1})})})});nB.displayName=tB;var qR="MenuItemIndicator",[rB,vce]=ep(qR,{checked:!1}),iB=M.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,s=vce(qR,t);return m.jsx(rc,{present:r||H0(s.checked)||s.checked===!0,children:m.jsx(Vn.span,{...i,ref:e,"data-state":XR(s.checked)})})});iB.displayName=qR;var Sce="MenuSeparator",oB=M.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return m.jsx(Vn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});oB.displayName=Sce;var xce="MenuArrow",sB=M.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=cS(t);return m.jsx(b8,{...i,...r,ref:e})});sB.displayName=xce;var YR="MenuSub",[wce,aB]=ep(YR),lB=n=>{const{__scopeMenu:e,children:t,open:r=!1,onOpenChange:i}=n,s=Rf(YR,e),l=cS(e),[c,d]=M.useState(null),[h,g]=M.useState(null),y=Po(i);return M.useEffect(()=>(s.open===!1&&y(!1),()=>y(!1)),[s.open,y]),m.jsx(AR,{...l,children:m.jsx(V8,{scope:e,open:r,onOpenChange:y,content:h,onContentChange:g,children:m.jsx(wce,{scope:e,contentId:ed(),triggerId:ed(),trigger:c,onTriggerChange:d,children:t})})})};lB.displayName=YR;var dS="MenuSubTrigger",cB=M.forwardRef((n,e)=>{const t=Rf(dS,n.__scopeMenu),r=uS(dS,n.__scopeMenu),i=aB(dS,n.__scopeMenu),s=KR(dS,n.__scopeMenu),l=M.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=s,h={__scopeMenu:n.__scopeMenu},g=M.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return M.useEffect(()=>g,[g]),M.useEffect(()=>{const y=c.current;return()=>{window.clearTimeout(y),d(null)}},[c,d]),m.jsx(HR,{asChild:!0,...h,children:m.jsx(Z8,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":fB(t.open),...n,ref:y0(e,i.onTriggerChange),onClick:y=>{var v;(v=n.onClick)==null||v.call(n,y),!(n.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:bt(n.onPointerMove,fS(y=>{s.onItemEnter(y),!y.defaultPrevented&&!n.disabled&&!t.open&&!l.current&&(s.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),g()},100))})),onPointerLeave:bt(n.onPointerLeave,fS(y=>{var w,C;g();const v=(w=t.content)==null?void 0:w.getBoundingClientRect();if(v){const E=(C=t.content)==null?void 0:C.dataset.side,P=E==="right",I=P?-5:5,k=v[P?"left":"right"],L=v[P?"right":"left"];s.onPointerGraceIntentChange({area:[{x:y.clientX+I,y:y.clientY},{x:k,y:v.top},{x:L,y:v.top},{x:L,y:v.bottom},{x:k,y:v.bottom}],side:E}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(y),y.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:bt(n.onKeyDown,y=>{var w;const v=s.searchRef.current!=="";n.disabled||v&&y.key===" "||rce[r.dir].includes(y.key)&&(t.onOpenChange(!0),(w=t.content)==null||w.focus(),y.preventDefault())})})})});cB.displayName=dS;var uB="MenuSubContent",dB=M.forwardRef((n,e)=>{const t=W8(ml,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=Rf(ml,n.__scopeMenu),l=uS(ml,n.__scopeMenu),c=aB(uB,n.__scopeMenu),d=M.useRef(null),h=Tr(e,d);return m.jsx(lS.Provider,{scope:n.__scopeMenu,children:m.jsx(rc,{present:r||s.open,children:m.jsx(lS.Slot,{scope:n.__scopeMenu,children:m.jsx(WR,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{var y;l.isUsingKeyboardRef.current&&((y=d.current)==null||y.focus()),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:bt(n.onFocusOutside,g=>{g.target!==c.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:bt(n.onEscapeKeyDown,g=>{l.onClose(),g.preventDefault()}),onKeyDown:bt(n.onKeyDown,g=>{var w;const y=g.currentTarget.contains(g.target),v=ice[l.dir].includes(g.key);y&&v&&(s.onOpenChange(!1),(w=c.trigger)==null||w.focus(),g.preventDefault())})})})})})});dB.displayName=uB;function fB(n){return n?"open":"closed"}function H0(n){return n==="indeterminate"}function XR(n){return H0(n)?"indeterminate":n?"checked":"unchecked"}function bce(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function Cce(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function Ece(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let l=Cce(n,Math.max(s,0));i.length===1&&(l=l.filter(h=>h!==t));const d=l.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function _ce(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,l=e.length-1;s<e.length;l=s++){const c=e[s].x,d=e[s].y,h=e[l].x,g=e[l].y;d>r!=g>r&&t<(h-c)*(r-d)/(g-d)+c&&(i=!i)}return i}function Pce(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return _ce(t,e)}function fS(n){return e=>e.pointerType==="mouse"?n(e):void 0}var hB=K8,pB=HR,gB=G8,mB=q8,yB=GR,vB=Y8,SB=B0,xB=Q8,wB=eB,bB=nB,CB=iB,EB=oB,_B=sB,PB=lB,TB=cB,IB=dB,ZR="ContextMenu",[Tce,aEe]=Gc(ZR,[U0]),ts=U0(),[Ice,kB]=Tce(ZR),RB=n=>{const{__scopeContextMenu:e,children:t,onOpenChange:r,dir:i,modal:s=!0}=n,[l,c]=M.useState(!1),d=ts(e),h=Po(r),g=M.useCallback(y=>{c(y),h(y)},[h]);return m.jsx(Ice,{scope:e,open:l,onOpenChange:g,modal:s,children:m.jsx(hB,{...d,dir:i,open:l,onOpenChange:g,modal:s,children:t})})};RB.displayName=ZR;var MB="ContextMenuTrigger",AB=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,disabled:r=!1,...i}=n,s=kB(MB,t),l=ts(t),c=M.useRef({x:0,y:0}),d=M.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...c.current})}),h=M.useRef(0),g=M.useCallback(()=>window.clearTimeout(h.current),[]),y=v=>{c.current={x:v.clientX,y:v.clientY},s.onOpenChange(!0)};return M.useEffect(()=>g,[g]),M.useEffect(()=>void(r&&g()),[r,g]),m.jsxs(m.Fragment,{children:[m.jsx(pB,{...l,virtualRef:d}),m.jsx(Vn.span,{"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,...i,ref:e,style:{WebkitTouchCallout:"none",...n.style},onContextMenu:r?n.onContextMenu:bt(n.onContextMenu,v=>{g(),y(v),v.preventDefault()}),onPointerDown:r?n.onPointerDown:bt(n.onPointerDown,V0(v=>{g(),h.current=window.setTimeout(()=>y(v),700)})),onPointerMove:r?n.onPointerMove:bt(n.onPointerMove,V0(g)),onPointerCancel:r?n.onPointerCancel:bt(n.onPointerCancel,V0(g)),onPointerUp:r?n.onPointerUp:bt(n.onPointerUp,V0(g))})]})});AB.displayName=MB;var kce="ContextMenuPortal",QR=n=>{const{__scopeContextMenu:e,...t}=n,r=ts(e);return m.jsx(gB,{...r,...t})};QR.displayName=kce;var DB="ContextMenuContent",OB=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=kB(DB,t),s=ts(t),l=M.useRef(!1);return m.jsx(mB,{...s,...r,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:c=>{var d;(d=n.onCloseAutoFocus)==null||d.call(n,c),!c.defaultPrevented&&l.current&&c.preventDefault(),l.current=!1},onInteractOutside:c=>{var d;(d=n.onInteractOutside)==null||d.call(n,c),!c.defaultPrevented&&!i.modal&&(l.current=!0)},style:{...n.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});OB.displayName=DB;var Rce="ContextMenuGroup",jB=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(yB,{...i,...r,ref:e})});jB.displayName=Rce;var Mce="ContextMenuLabel",Ace=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(vB,{...i,...r,ref:e})});Ace.displayName=Mce;var Dce="ContextMenuItem",LB=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(SB,{...i,...r,ref:e})});LB.displayName=Dce;var Oce="ContextMenuCheckboxItem",NB=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(xB,{...i,...r,ref:e})});NB.displayName=Oce;var jce="ContextMenuRadioGroup",Lce=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(wB,{...i,...r,ref:e})});Lce.displayName=jce;var Nce="ContextMenuRadioItem",Fce=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(bB,{...i,...r,ref:e})});Fce.displayName=Nce;var zce="ContextMenuItemIndicator",Uce=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(CB,{...i,...r,ref:e})});Uce.displayName=zce;var $ce="ContextMenuSeparator",Bce=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(EB,{...i,...r,ref:e})});Bce.displayName=$ce;var Hce="ContextMenuArrow",Vce=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(_B,{...i,...r,ref:e})});Vce.displayName=Hce;var Kce="ContextMenuSub",FB=n=>{const{__scopeContextMenu:e,children:t,onOpenChange:r,open:i,defaultOpen:s}=n,l=ts(e),[c,d]=kf({prop:i,defaultProp:s,onChange:r});return m.jsx(PB,{...l,open:c,onOpenChange:d,children:t})};FB.displayName=Kce;var Wce="ContextMenuSubTrigger",zB=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(TB,{...i,...r,ref:e})});zB.displayName=Wce;var Gce="ContextMenuSubContent",UB=M.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=ts(t);return m.jsx(IB,{...i,...r,ref:e,style:{...n.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});UB.displayName=Gce;function V0(n){return e=>e.pointerType!=="mouse"?n(e):void 0}var qce=RB,Yce=AB,Xce=QR,Zce=OB,Qce=NB,JR="DropdownMenu",[Jce,lEe]=Gc(JR,[U0]),ns=U0(),[eue,$B]=Jce(JR),BB=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:s,onOpenChange:l,modal:c=!0}=n,d=ns(e),h=M.useRef(null),[g=!1,y]=kf({prop:i,defaultProp:s,onChange:l});return m.jsx(eue,{scope:e,triggerId:ed(),triggerRef:h,contentId:ed(),open:g,onOpenChange:y,onOpenToggle:M.useCallback(()=>y(v=>!v),[y]),modal:c,children:m.jsx(hB,{...d,open:g,onOpenChange:y,dir:r,modal:c,children:t})})};BB.displayName=JR;var HB="DropdownMenuTrigger",VB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,s=$B(HB,t),l=ns(t);return m.jsx(pB,{asChild:!0,...l,children:m.jsx(Vn.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:y0(e,s.triggerRef),onPointerDown:bt(n.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(s.onOpenToggle(),s.open||c.preventDefault())}),onKeyDown:bt(n.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&s.onOpenToggle(),c.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});VB.displayName=HB;var tue="DropdownMenuPortal",KB=n=>{const{__scopeDropdownMenu:e,...t}=n,r=ns(e);return m.jsx(gB,{...r,...t})};KB.displayName=tue;var WB="DropdownMenuContent",GB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=$B(WB,t),s=ns(t),l=M.useRef(!1);return m.jsx(mB,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:bt(n.onCloseAutoFocus,c=>{var d;l.current||(d=i.triggerRef.current)==null||d.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:bt(n.onInteractOutside,c=>{const d=c.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,g=d.button===2||h;(!i.modal||g)&&(l.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GB.displayName=WB;var nue="DropdownMenuGroup",qB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(yB,{...i,...r,ref:e})});qB.displayName=nue;var rue="DropdownMenuLabel",iue=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(vB,{...i,...r,ref:e})});iue.displayName=rue;var oue="DropdownMenuItem",YB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(SB,{...i,...r,ref:e})});YB.displayName=oue;var sue="DropdownMenuCheckboxItem",XB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(xB,{...i,...r,ref:e})});XB.displayName=sue;var aue="DropdownMenuRadioGroup",lue=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(wB,{...i,...r,ref:e})});lue.displayName=aue;var cue="DropdownMenuRadioItem",uue=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(bB,{...i,...r,ref:e})});uue.displayName=cue;var due="DropdownMenuItemIndicator",fue=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(CB,{...i,...r,ref:e})});fue.displayName=due;var hue="DropdownMenuSeparator",pue=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(EB,{...i,...r,ref:e})});pue.displayName=hue;var gue="DropdownMenuArrow",mue=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(_B,{...i,...r,ref:e})});mue.displayName=gue;var yue=n=>{const{__scopeDropdownMenu:e,children:t,open:r,onOpenChange:i,defaultOpen:s}=n,l=ns(e),[c=!1,d]=kf({prop:r,defaultProp:s,onChange:i});return m.jsx(PB,{...l,open:c,onOpenChange:d,children:t})},vue="DropdownMenuSubTrigger",ZB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(TB,{...i,...r,ref:e})});ZB.displayName=vue;var Sue="DropdownMenuSubContent",QB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ns(t);return m.jsx(IB,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});QB.displayName=Sue;var eM=BB,tM=VB,K0=KB,nM=GB,xue=qB,wue=YB,bue=XB,Cue=yue,Eue=ZB,_ue=QB;function Ir(n,e){var i;const t=new Set;for(const s of e){const l=n.getShape(s);if(!l)continue;n.getShapeUtil(l).onDragShapesOut&&t.add(l);const c=n.getShape(l.parentId);c&&n.getShapeUtil(c).onDragShapesOut&&t.add(c)}const r=new Map;for(const s of t){const l=JB(n,s);l.length&&r.set(s,l)}for(const[s,l]of r){const c=n.getShapeUtil(s),d=on(l.map(h=>n.getShape(h)));(i=c.onDragShapesOut)==null||i.call(c,s,d)}}function JB(n,e){const t=n.getSortedChildIdsForParent(e.id);if(t.length===0)return[];const r=n.getShapePageBounds(e);if(!r)return[];let i,s,l;const c=[];for(const d of t){const h=n.getShapePageBounds(d);if(!h)continue;if(!r.includes(h)){c.push(d);continue}i??(i=n.getShapeGeometry(e)),s??(s=n.getShapePageTransform(e)),l??(l=s.applyToPoints(i.vertices));const g=n.getShapePageTransform(d).clone().invert().applyToPoints(l),{vertices:y,isClosed:v}=n.getShapeGeometry(d);if(!y.some(w=>Na(w,g))){if(v){if(Nk(g,y))continue}else if(qne(g,y))continue;c.push(d)}}return c}function W0(n,e,t=!1){n.select(e),n.setEditingShape(e),n.setCurrentTool("select.editing_shape",{target:"shape",shape:e}),t&&n.emit("select-all-text",{shapeId:e.id})}function Pue(n,e){const t=on(e.map(i=>n.getShape(i)).filter(i=>i&&n.isShapeOfType(i,"frame")));if(!t.length)return;const r=[];n.run(()=>{t.map(i=>{const s=n.getSortedChildIdsForParent(i.id);s.length&&(n.reparentShapes(s,i.parentId,i.index),r.push(...s))}),n.setSelectedShapes(r),n.deleteShapes(e)})}const Tue=50;function Iue(n,e,t={}){const r=n.getShape(e);if(!r)return;const i=n.getSortedChildIdsForParent(r.id),s=on(i.map(w=>n.getShape(w)));if(!s.length)return;const l=Xe.FromPoints(s.flatMap(w=>{const C=n.getShapeGeometry(w.id);return n.getShapeLocalTransform(w).applyToPoints(C.vertices)})),{padding:c=Tue}=t,d=l.w+2*c,h=l.h+2*c,g=c-l.minX,y=c-l.minY;if(g===0&&y===0&&r.props.w===d&&r.props.h===h)return;const v=new R(g,y).rot(r.rotation);n.run(()=>{const w=i.map(C=>{const E=n.getShape(C);return{id:E.id,type:E.type,x:E.x+g,y:E.y+y}});w.push({id:r.id,type:r.type,x:r.x-v.x,y:r.y-v.y,props:{w:d,h}}),n.updateShapes(w)})}const e9=M.createContext(null);function kue({assetUrls:n,children:e}){return M.useEffect(()=>{for(const t of Object.values(n.icons)){const r=sv();r.src=t,r.decode()}for(const t of Object.values(n.embedIcons)){const r=sv();r.src=t,r.decode()}},[n]),m.jsx(e9.Provider,{value:n,children:e})}function rM(){const n=M.useContext(e9);if(!n)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return n}const iM={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.unlock-all":"Unlock all","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.export-all-as-json.short":"JSON","action.export-all-as-json":"Export as JSON","action.export-all-as-png.short":"PNG","action.export-all-as-png":"Export as PNG","action.export-all-as-svg.short":"SVG","action.export-all-as-svg":"Export as SVG","action.fit-frame-to-content":"Fit to content","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.fork-project-on-tldraw":"Fork project on tldraw","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.paste-error-title":"Pasting failed","action.paste-error-description":"Could not paste due to missing clipboard permissions. Please enable the permissions and try again.","action.print":"Print","action.redo":"Redo","action.remove-frame":"Remove frame","action.rename":"Rename","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-paste-at-cursor.menu":"Paste at cursor","action.toggle-paste-at-cursor":"Toggle paste at cursor","action.toggle-wrap-mode.menu":"Select on wrap","action.toggle-wrap-mode":"Toggle Select on wrap","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-edge-scrolling.menu":"Edge scrolling","action.toggle-edge-scrolling":"Toggle edge scrolling","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-dynamic-size-mode.menu":"Dynamic size","action.toggle-dynamic-size-mode":"Toggle dynamic size","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.flatten-to-image":"Flatten","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","assets.files.size-too-big":"File size is too big","assets.files.type-not-allowed":"File type is not allowed","assets.files.upload-failed":"Upload failed","assets.url.failed":"Couldn't load URL preview","theme.dark":"Dark","theme.light":"Light","theme.system":"System","color-style.white":"White","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","document.default-name":"Untitled","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","fill-style.fill":"Fill","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","verticalAlign-style.start":"Top","verticalAlign-style.middle":"Middle","verticalAlign-style.end":"Bottom","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.cloud":"Cloud","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.cloud":"Cloud","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","tool.pointer-down":"Pointer down","menu.title":"Menu","menu.theme":"Theme","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.help":"Help","menu.view":"View","context-menu.edit":"Edit","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.export-all-as":"Export","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy editor link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy viewer link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to access this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","share-menu.creating-project":"Creating the new project","share-menu.copied":"Copied link","document-name-menu.copy-link":"Copy link","status.offline":"Offline","status.online":"Online","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.import-tldr-file":"Import file...","help-menu.title":"Help and resources","help-menu.about":"About tldraw","help-menu.docs":"Documentation & API","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","help-menu.terms":"Terms of service","help-menu.privacy":"Privacy policy","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.label-align":"Label align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrows","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."};var Rue={};const Mue=new Set(["ar","fa","he","ur","ku"]),em={locale:"en",label:"English",messages:iM,dir:"ltr"};async function Aue(n,e){if(!(await Lc(e.translations.en)).ok)return console.warn("No main translations found."),em;if(n==="en")return em;const r=Tv.find(c=>c.locale===n);if(!r)return console.warn(`No translation found for locale ${n}`),em;const s=await(await Lc(e.translations[r.locale])).json();if(!s)return console.warn(`No messages found for locale ${n}`),em;const l=[];for(const c in em.messages)s[c]||l.push(c);return l.length>0&&Rue.NODE_ENV==="development"&&console.warn(`Language ${n}: missing messages for keys:
${l.join(`
`)}`),{locale:n,label:r.label,dir:Mue.has(r.locale)?"rtl":"ltr",messages:{...em.messages,...s}}}const t9=M.createContext(null);function n9(){const n=M.useContext(t9);if(!n)throw new Error("useCurrentTranslation must be used inside of <TldrawUiContextProvider />");return n}function Due({overrides:n,locale:e,children:t}){const r=rM(),[i,s]=M.useState(()=>n&&n.en?{locale:"en",label:"English",dir:"ltr",messages:{...iM,...n.en}}:{locale:"en",label:"English",dir:"ltr",messages:iM});return M.useEffect(()=>{let l=!1;async function c(){const d=await Aue(e,r);d&&!l&&(n&&n[e]?s({...d,messages:{...d.messages,...n[e]}}):s(d))}return c(),()=>{l=!0}},[r,e,n]),m.jsx(t9.Provider,{value:i,children:t})}function An(){const n=n9();return M.useCallback(function(t){return n.messages[t]??t},[n])}function cEe(n){return n}const Dt=M.forwardRef(function({children:e,type:t,...r},i){return m.jsx("button",{ref:i,type:"button",draggable:!1,...r,className:It("tlui-button",`tlui-button__${t}`,r.className),children:e})});function bi({children:n}){return m.jsx("span",{className:"tlui-button__label",children:n})}var oM="Dialog",[r9,uEe]=Gc(oM),[Oue,ic]=r9(oM),i9=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:l=!0}=n,c=M.useRef(null),d=M.useRef(null),[h=!1,g]=kf({prop:r,defaultProp:i,onChange:s});return m.jsx(Oue,{scope:e,triggerRef:c,contentRef:d,contentId:ed(),titleId:ed(),descriptionId:ed(),open:h,onOpenChange:g,onOpenToggle:M.useCallback(()=>g(y=>!y),[g]),modal:l,children:t})};i9.displayName=oM;var o9="DialogTrigger",jue=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ic(o9,t),s=Tr(e,i.triggerRef);return m.jsx(Vn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":lM(i.open),...r,ref:s,onClick:bt(n.onClick,i.onOpenToggle)})});jue.displayName=o9;var sM="DialogPortal",[Lue,s9]=r9(sM,{forceMount:void 0}),a9=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=ic(sM,e);return m.jsx(Lue,{scope:e,forceMount:t,children:M.Children.map(r,l=>m.jsx(rc,{present:t||s.open,children:m.jsx(sS,{asChild:!0,container:i,children:l})}))})};a9.displayName=sM;var G0="DialogOverlay",l9=M.forwardRef((n,e)=>{const t=s9(G0,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=ic(G0,n.__scopeDialog);return s.modal?m.jsx(rc,{present:r||s.open,children:m.jsx(Nue,{...i,ref:e})}):null});l9.displayName=G0;var Nue=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ic(G0,t);return m.jsx(z0,{as:Qh,allowPinchZoom:!0,shards:[i.contentRef],children:m.jsx(Vn.div,{"data-state":lM(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),tp="DialogContent",c9=M.forwardRef((n,e)=>{const t=s9(tp,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=ic(tp,n.__scopeDialog);return m.jsx(rc,{present:r||s.open,children:s.modal?m.jsx(Fue,{...i,ref:e}):m.jsx(zue,{...i,ref:e})})});c9.displayName=tp;var Fue=M.forwardRef((n,e)=>{const t=ic(tp,n.__scopeDialog),r=M.useRef(null),i=Tr(e,t.contentRef,r);return M.useEffect(()=>{const s=r.current;if(s)return NR(s)},[]),m.jsx(u9,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bt(n.onCloseAutoFocus,s=>{var l;s.preventDefault(),(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:bt(n.onPointerDownOutside,s=>{const l=s.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&s.preventDefault()}),onFocusOutside:bt(n.onFocusOutside,s=>s.preventDefault())})}),zue=M.forwardRef((n,e)=>{const t=ic(tp,n.__scopeDialog),r=M.useRef(!1),i=M.useRef(!1);return m.jsx(u9,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var l,c;(l=n.onCloseAutoFocus)==null||l.call(n,s),s.defaultPrevented||(r.current||(c=t.triggerRef.current)==null||c.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var d,h;(d=n.onInteractOutside)==null||d.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((h=t.triggerRef.current)==null?void 0:h.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),u9=M.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...l}=n,c=ic(tp,t),d=M.useRef(null),h=Tr(e,d);return gR(),m.jsxs(m.Fragment,{children:[m.jsx(S0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(nS,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":lM(c.open),...l,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx($ue,{titleId:c.titleId}),m.jsx(Hue,{contentRef:d,descriptionId:c.descriptionId})]})]})}),aM="DialogTitle",d9=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ic(aM,t);return m.jsx(Vn.h2,{id:i.titleId,...r,ref:e})});d9.displayName=aM;var f9="DialogDescription",Uue=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ic(f9,t);return m.jsx(Vn.p,{id:i.descriptionId,...r,ref:e})});Uue.displayName=f9;var h9="DialogClose",p9=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ic(h9,t);return m.jsx(Vn.button,{type:"button",...r,ref:e,onClick:bt(n.onClick,()=>i.onOpenChange(!1))})});p9.displayName=h9;function lM(n){return n?"open":"closed"}var g9="DialogTitleWarning",[dEe,m9]=bse(g9,{contentName:tp,titleName:aM,docsSlug:"dialog"}),$ue=({titleId:n})=>{const e=m9(g9),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return M.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},Bue="DialogDescriptionWarning",Hue=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${m9(Bue).contentName}}.`;return M.useEffect(()=>{var s;const i=(s=n.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},Vue=i9,Kue=a9,Wue=l9,Gue=c9;const Qc=M.memo(function({small:e,invertIcon:t,icon:r,color:i,className:s,...l}){const c=rM(),d=c.icons[r]??c.icons["question-mark-circle"],h=M.useRef(null);return M.useLayoutEffect(()=>{d||console.error(`Icon not found: ${r}. Add it to the assetUrls.icons object.`),h!=null&&h.current&&(h.current.style.webkitMask=`url(${d}) center 100% / 100% no-repeat`)},[h,d,r]),r==="none"?m.jsx("div",{className:It("tlui-icon tlui-icon__placeholder",{"tlui-icon__small":e},s)}):m.jsx("div",{...l,ref:h,className:It("tlui-icon",{"tlui-icon__small":e},s),style:{color:i,mask:`url(${d}) center 100% / 100% no-repeat`,transform:t?"scale(-1, 1)":void 0}})});function In({icon:n,small:e,invertIcon:t}){return m.jsx(Qc,{className:"tlui-button__icon",icon:n,small:e,invertIcon:t})}function q0({className:n,children:e}){return m.jsx("div",{className:It("tlui-dialog__header",n),children:e})}function Y0({className:n,children:e}){return m.jsx(d9,{dir:"ltr",className:It("tlui-dialog__header__title",n),children:e})}function X0(){return m.jsx("div",{className:"tlui-dialog__header__close",children:m.jsx(p9,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:m.jsx(Dt,{type:"icon","aria-label":"Close",onTouchEnd:n=>n.target.click(),children:m.jsx(In,{small:!0,icon:"cross-2"})})})})}function hS({className:n,children:e,style:t}){return m.jsx("div",{className:It("tlui-dialog__body",n),style:t,children:e})}function cM({className:n,children:e}){return m.jsx("div",{className:It("tlui-dialog__footer",n),children:e})}const Z0=M.forwardRef(function({className:e,label:t,icon:r,iconLeft:i,autoSelect:s=!1,autoFocus:l=!1,defaultValue:c,placeholder:d,onComplete:h,onValueChange:g,onCancel:y,onFocus:v,onBlur:w,shouldManuallyMaintainScrollPositionWhenFocused:C=!1,children:E,value:P},I){const k=pf(),L=M.useRef(null);M.useImperativeHandle(I,()=>L.current);const O=An(),z=M.useRef(c??""),F=M.useRef(c??""),[H,V]=M.useState(!1),re=M.useCallback(W=>{V(!0);const Y=W.currentTarget;F.current=Y.value,k?k.timers.requestAnimationFrame(()=>{s&&Y.select()}):Kk.requestAnimationFrame("anon",()=>{s&&Y.select()}),v==null||v()},[s,k,v]),q=M.useCallback(W=>{const Y=W.currentTarget.value;F.current=Y,g==null||g(Y)},[g]),J=M.useCallback(W=>{switch(W.key){case"Enter":{W.currentTarget.blur(),xi(W),h==null||h(W.currentTarget.value);break}case"Escape":{W.currentTarget.value=z.current,y==null||y(W.currentTarget.value),W.currentTarget.blur(),xi(W);break}}},[h,y]),ie=M.useCallback(W=>{V(!1);const Y=W.currentTarget.value;w==null||w(Y)},[w]);return M.useEffect(()=>{if(!xr.isIos)return;const W=window.visualViewport;if(H&&C&&W){const Y=()=>{var oe;(oe=L.current)==null||oe.scrollIntoView({block:"center"})};return W.addEventListener("resize",Y),W.addEventListener("scroll",Y),k?k.timers.requestAnimationFrame(()=>{var oe;(oe=L.current)==null||oe.scrollIntoView({block:"center"})}):Kk.requestAnimationFrame("anon",()=>{var oe;(oe=L.current)==null||oe.scrollIntoView({block:"center"})}),()=>{W.removeEventListener("resize",Y),W.removeEventListener("scroll",Y)}}},[H,k,C]),m.jsxs("div",{draggable:!1,className:"tlui-input__wrapper",children:[E,t&&m.jsx("label",{children:O(t)}),i&&m.jsx(Qc,{icon:i,className:"tlui-icon-left",small:!0}),m.jsx("input",{ref:L,className:It("tlui-input",e),type:"text",defaultValue:c,onKeyDownCapture:J,onChange:q,onFocus:re,onBlur:ie,autoFocus:l,placeholder:d,value:P}),r&&m.jsx(Qc,{icon:r,small:!!t})]})});function y9(n){return Da.isValid(n)?{isValid:!0,hasProtocol:!0}:Da.isValid("https://"+n)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}const que=bo(function({onClose:e}){const r=xe().getOnlySelectedShape();return r&&"url"in r.props&&typeof r.props.url=="string"?m.jsx(Yue,{onClose:e,selectedShape:r}):null}),Yue=bo(function({onClose:e,selectedShape:t}){const r=xe(),i=An(),s=M.useRef(null);M.useEffect(()=>{r.timers.requestAnimationFrame(()=>{var C;return(C=s.current)==null?void 0:C.focus()})},[r]);const l=M.useRef(t.props.url),[c,d]=M.useState(()=>{const C=y9(t.props.url),E=C.isValid===!0?C.hasProtocol?t.props.url:"https://"+t.props.url:"https://";return{actual:E,safe:E,valid:!0}}),h=M.useCallback(C=>{const E=C.replace(/https?:\/\/(https?:\/\/)/,(k,L)=>L),P=y9(E),I=P.isValid===!0?P.hasProtocol?E:"https://"+E:"https://";d({actual:E,safe:I,valid:P.isValid})},[]),g=M.useCallback(()=>{const C=r.getOnlySelectedShape();C&&(r.updateShapes([{id:C.id,type:C.type,props:{url:""}}]),e())},[r,e]),y=M.useCallback(()=>{const C=r.getOnlySelectedShape();C&&(C&&"url"in C.props&&C.props.url!==c.safe&&r.updateShapes([{id:C.id,type:C.type,props:{url:c.safe}}]),e())},[r,e,c]),v=M.useCallback(()=>{e()},[e]);if(!t)return e(),null;const w=l.current&&!c.valid;return m.jsxs(m.Fragment,{children:[m.jsxs(q0,{children:[m.jsx(Y0,{children:i("edit-link-dialog.title")}),m.jsx(X0,{})]}),m.jsx(hS,{children:m.jsxs("div",{className:"tlui-edit-link-dialog",children:[m.jsx(Z0,{ref:s,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autoFocus:!0,value:c.actual,onValueChange:h,onComplete:y,onCancel:v}),m.jsx("div",{children:c.valid?i("edit-link-dialog.detail"):i("edit-link-dialog.invalid-url")})]})}),m.jsxs(cM,{className:"tlui-dialog__footer__actions",children:[m.jsx(Dt,{type:"normal",onClick:v,onTouchEnd:v,children:m.jsx(bi,{children:i("edit-link-dialog.cancel")})}),w?m.jsx(Dt,{type:"danger",onTouchEnd:g,onClick:g,children:m.jsx(bi,{children:i("edit-link-dialog.clear")})}):m.jsx(Dt,{type:"primary",disabled:!c.valid,onTouchEnd:y,onClick:y,children:m.jsx(bi,{children:i("edit-link-dialog.save")})})]})]})});var Xue={};const v9=/(^\/r\/[^/]+\/?$)/,uM=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,overridePermissions:{"allow-top-navigation":!0},toEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(v9))return n},fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(v9))return n}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,toEmbedUrl:n=>{if(n.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!n.includes("figma.com/embed"))return`https://www.figma.com/embed?embed_host=share&url=${n}`},fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/embed\/?$/)){const t=e.searchParams.get("url");if(t)return t}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,overridePermissions:{"allow-presentation":!0},toEmbedUrl:n=>{if(n.includes("/maps/embed?"))return n;if(n.includes("/maps/")){const e=n.match(/@(.*?),(.*?),(.*?)z/);let t;if(e){const[,r,i,s]=e;t=`https://${new URL(n).host.replace("www.","")}/maps/embed/v1/view?key=${Xue.NEXT_PUBLIC_GC_API_KEY}&center=${r},${i}&zoom=${s}`}else t="";return t}},fromEmbedUrl:n=>{const e=Wt(n);if(!e)return;if(e.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&e.searchParams.has("center")&&e.searchParams.get("zoom")){const r=e.searchParams.get("zoom"),[i,s]=e.searchParams.get("center").split(",");return`https://www.google.com/maps/@${i},${s},${r}z`}}},{type:"val_town",title:"Val Town",hostnames:["val.town"],minWidth:260,minHeight:100,width:720,height:500,doesResize:!0,toEmbedUrl:n=>{const e=Wt(n),t=e&&e.pathname.match(/\/v\/(.+)\/?/);if(t)return`https://www.val.town/embed/${t[1]}`},fromEmbedUrl:n=>{const e=Wt(n),t=e&&e.pathname.match(/\/embed\/(.+)\/?/);if(t)return`https://www.val.town/v/${t[1]}`}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,toEmbedUrl:n=>{const e=Wt(n),t=e&&e.pathname.match(/\/s\/([^/]+)\/?/);if(t)return`https://codesandbox.io/embed/${t[1]}`},fromEmbedUrl:n=>{const e=Wt(n),t=e&&e.pathname.match(/\/embed\/([^/]+)\/?/);if(t)return`https://codesandbox.io/s/${t[1]}`}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,toEmbedUrl:n=>{const e=/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/,t=n.match(e);if(t){const[r,i,s]=t;return`https://codepen.io/${i}/embed/${s}`}},fromEmbedUrl:n=>{const e=/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/,t=n.match(e);if(t){const[r,i,s]=t;return`https://codepen.io/${i}/pen/${s}`}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,toEmbedUrl:n=>{const e=/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/,t=n.match(e);if(t){const[r,i]=t;return`https://scratch.mit.edu/projects/embed/${i}`}},fromEmbedUrl:n=>{const e=/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/,t=n.match(e);if(t){const[r,i]=t;return`https://scratch.mit.edu/projects/${i}`}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,overridePermissions:{"allow-presentation":!0,"allow-popups-to-escape-sandbox":!0},isAspectRatioLocked:!0,toEmbedUrl:n=>{const e=Wt(n);if(!e)return;const t=e.hostname.replace(/^www./,"");if(t==="youtu.be")return`https://www.youtube.com/embed/${e.pathname.split("/").filter(Boolean)[0]}`;if((t==="youtube.com"||t==="m.youtube.com")&&e.pathname.match(/^\/watch/))return`https://www.youtube.com/embed/${e.searchParams.get("v")}`},fromEmbedUrl:n=>{const e=Wt(n);if(!e)return;if(e.hostname.replace(/^www./,"")==="youtube.com"){const r=e.pathname.match(/^\/embed\/([^/]+)\/?/);if(r)return`https://www.youtube.com/watch?v=${r[1]}`}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",overridePermissions:{"allow-popups-to-escape-sandbox":!0},toEmbedUrl:n=>{const e=Wt(n),t=e==null?void 0:e.searchParams.get("cid");if(e!=null&&e.pathname.match(/\/calendar\/u\/0/)&&t){e.pathname="/calendar/embed";const r=Array.from(e.searchParams.keys());for(const i of r)e.searchParams.delete(i);return e.searchParams.set("src",t),e.href}},fromEmbedUrl:n=>{const e=Wt(n),t=e==null?void 0:e.searchParams.get("src");if(e!=null&&e.pathname.match(/\/calendar\/embed/)&&t){e.pathname="/calendar/u/0";const r=Array.from(e.searchParams.keys());for(const i of r)e.searchParams.delete(i);return e.searchParams.set("cid",t),e.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,overridePermissions:{"allow-popups-to-escape-sandbox":!0},toEmbedUrl:n=>{const e=Wt(n);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/pub\/?$/))){e.pathname=e.pathname.replace(/\/pub$/,"/embed");const t=Array.from(e.searchParams.keys());for(const r of t)e.searchParams.delete(r);return e.href}},fromEmbedUrl:n=>{const e=Wt(n);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/embed\/?$/))){e.pathname=e.pathname.replace(/\/embed$/,"/pub");const t=Array.from(e.searchParams.keys());for(const r of t)e.searchParams.delete(r);return e.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,toEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/\/([^/]+)\/([0-9a-f]+)$/))return n.split("/").pop()?n:void 0},fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/\/([^/]+)\/([0-9a-f]+)$/))return n.split("/").pop()?n:void 0}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,toEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/))return`${n}?embed=true`},fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/)&&e.searchParams.has("embed"))return e.searchParams.delete("embed"),e.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,toEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/map\//))return e.origin+"/embed"+e.pathname},fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/embed\/map\//))return e.pathname=e.pathname.replace(/^\/embed/,""),e.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,toEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/(artist|album)\//))return e.origin+"/embed"+e.pathname},fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/embed\/(artist|album)\//))return e.origin+e.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:n=>{const e=Wt(n);if(e&&e.hostname==="vimeo.com"&&e.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+e.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.hostname==="player.vimeo.com"){const t=e.pathname.match(/^\/video\/([^/]+)\/?$/);if(t)return"https://vimeo.com/"+t[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:n=>{const e=Wt(n);if(e&&e.hash.match(/#room=/))return n},fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.hash.match(/#room=/))return n}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}/embed${e.pathname}?cell=*`;if(e&&e.pathname.match(/^\/d\/([^/]+)\/?$/)){const t=e.pathname.replace(/^\/d/,"");return`${e.origin}/embed${t}?cell=*`}},fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","")}#cell-*`;if(e&&e.pathname.match(/^\/embed\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","/d")}#cell-*`}},{type:"desmos",title:"Desmos",hostnames:["desmos.com"],width:700,height:450,doesResize:!0,toEmbedUrl:n=>{const e=Wt(n);if(e&&e.hostname==="www.desmos.com"&&e.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&e.search===""&&e.hash==="")return`${n}?embed`},fromEmbedUrl:n=>{const e=Wt(n);if(e&&e.hostname==="www.desmos.com"&&e.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&e.search==="?embed"&&e.hash==="")return n.replace("?embed","")}}],Zue={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},Que=uM.map(n=>n.type);function Jue(n){return Que.includes(n)}function ede(n){return"icon"in n}function S9(){return xe().getShapeUtil("embed")}function dM(){const n=S9();return e=>n?n.getEmbedDefinition(e):void 0}function tde(){const n=S9();return n?n.getEmbedDefinitions():[]}const x9=bo(function({onClose:e}){const t=xe(),r=An(),i=rM(),[s,l]=M.useState(null),[c,d]=M.useState(""),[h,g]=M.useState(null),[y,v]=M.useState(!1),w=M.useRef(-1),C=tde(),E=dM();return m.jsxs(m.Fragment,{children:[m.jsxs(q0,{children:[m.jsx(Y0,{children:s?`${r("embed-dialog.title")}  ${s.title}`:r("embed-dialog.title")}),m.jsx(X0,{})]}),s?m.jsxs(m.Fragment,{children:[m.jsxs(hS,{className:"tlui-embed-dialog__enter",children:[m.jsx(Z0,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"https://example.com",autoFocus:!0,onValueChange:P=>{d(P);const I=E(P);g(I&&I.definition.type===s.type?I:null),v(!1),clearTimeout(w.current),w.current=t.timers.setTimeout(()=>v(!I),320)}}),c===""?m.jsxs("div",{className:"tlui-embed-dialog__instruction",children:[m.jsx("span",{children:r("embed-dialog.instruction")})," ",s.instructionLink&&m.jsxs("a",{target:"_blank",rel:"noopener noreferrer",href:s.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",m.jsx(Qc,{icon:"external-link",small:!0})]})]}):m.jsx("div",{className:"tlui-embed-dialog__warning",children:y?r("embed-dialog.invalid-url"):""})]}),m.jsxs(cM,{className:"tlui-dialog__footer__actions",children:[m.jsx(Dt,{type:"normal",onClick:()=>{l(null),g(null),d("")},children:m.jsx(bi,{children:r("embed-dialog.back")})}),m.jsx("div",{className:"tlui-embed__spacer"}),m.jsx(Dt,{type:"normal",onClick:e,children:m.jsx(bi,{children:r("embed-dialog.cancel")})}),m.jsx(Dt,{type:"primary",disabled:!h,onClick:()=>{h&&(t.putExternalContent({type:"embed",url:c,point:t.getViewportPageBounds().center,embed:h.definition}),e())},children:m.jsx(bi,{children:r("embed-dialog.create")})})]})]}):m.jsx(m.Fragment,{children:m.jsx(hS,{className:"tlui-embed-dialog__list",children:C.map(P=>{const I=Jue(P.type)?i.embedIcons[P.type]:ede(P)?P.icon:void 0;return m.jsxs(Dt,{type:"menu",onClick:()=>l(P),children:[m.jsx(bi,{children:P.title}),I&&m.jsx("div",{className:"tlui-embed-dialog__item__image",style:{backgroundImage:`url(${I})`}})]},P.type)})})})]})});async function nde(n,e,t){const r=on(e.map(c=>{const d=n.getShape(c);if(!(!d||n.getShapeUtil(d.type).toSvg===void 0))return d}));if(r.length===0)return;if(r.length===1){const c=r[0];if(!c||n.isShapeOfType(c,"image"))return}const i=[];if(t!==void 0){const c=r.map(d=>({shape:d,bounds:n.getShapeMaskedPageBounds(d).clone().expandBy(t)}));for(let d=0;d<c.length;d++){const h=c[d];if(d===0){i[0]={shapes:[h.shape],bounds:h.bounds};continue}let g=!1;for(const y of i)if(y.bounds.includes(h.bounds)){y.shapes.push(h.shape),y.bounds.expand(h.bounds),g=!0;break}g||i.push({shapes:[h.shape],bounds:h.bounds})}}else{const c=Xe.Common(r.map(d=>n.getShapeMaskedPageBounds(d)));i.push({shapes:r,bounds:c})}const s=n.options.flattenImageBoundsPadding;for(const c of i){t!==void 0&&c.bounds.expandBy(-t);const d=await n.getSvgString(c.shapes,{padding:s});if(!(d!=null&&d.svg))continue;const h=new Blob([d.svg],{type:"image/svg+xml"}),g=await n.getAssetForExternalContent({type:"file",file:new File([h],"asset.svg",{type:"image/svg+xml"})});g&&(c.asset=g)}const l=[];return cl(()=>{for(const c of i){const{asset:d,bounds:h,shapes:g}=c;if(!d)continue;const y=n.findCommonAncestor(g)??n.getCurrentPageId();if(!y)continue;let v="a1";for(const I of g)if(I.parentId===y){I.index>v&&(v=I.index);break}let w,C,E;if(ia(y)){const I=n.getShape(y);if(!I)continue;const k=n.getPointInShapeSpace(I,{x:h.x,y:h.y});E=n.getShapePageTransform(y).rotation(),k.sub(new R(s,s).rot(-E)),w=k.x,C=k.y}else w=h.x-s,C=h.y-s,E=0;n.deleteShapes(g),n.createAssets([{...d,id:d.id}]);const P=yr();n.createShape({id:P,type:"image",index:v,parentId:y,x:w,y:C,rotation:-E,props:{assetId:d.id,w:h.w+s*2,h:h.h+s*2}}),l.push(P)}}),l}function Q0(){const n=pf();return(n==null?void 0:n.store.props.collaboration)!==void 0}function rde(){const n=pf();return Pe("sync status",()=>{var e;return(e=n==null?void 0:n.store.props.collaboration)!=null&&e.status?n.store.props.collaboration.status.get():null},[n])}const fM=[0,389,436,476,580,640,840,1023];var ai=(n=>(n[n.ZERO=0]="ZERO",n[n.MOBILE_XXS=1]="MOBILE_XXS",n[n.MOBILE_XS=2]="MOBILE_XS",n[n.MOBILE_SM=3]="MOBILE_SM",n[n.MOBILE=4]="MOBILE",n[n.TABLET_SM=5]="TABLET_SM",n[n.TABLET=6]="TABLET",n[n.DESKTOP=7]="DESKTOP",n))(ai||{});const w9=zt.createContext(null);function ide({forceMobile:n=!1,children:e}){const t=pf(),r=Pe("breakpoint",()=>{const{width:i}=(t==null?void 0:t.getViewportScreenBounds())??{width:window.innerWidth},s=n?ai.MOBILE_SM:fM.length-1;for(let l=0;l<s;l++)if(i>fM[l]&&i<=fM[l+1])return l;return s},[t]);return m.jsx(w9.Provider,{value:r,children:e})}function ks(){const n=M.useContext(w9);if(n===null)throw new Error("useBreakpoint must be used inside of the <BreakpointProvider /> component");return n}const b9=M.createContext(null);function ode({context:n,children:e}){const t=_o(),r=Iv("dialogs",[]),i=M.useMemo(()=>({dialogs:r,addDialog(s){const l=s.id??nr();return r.update(c=>[...c.filter(d=>d.id!==s.id),{...s,id:l}]),t("open-menu",{source:"dialog",id:l}),Jl.addOpenMenu(l,n),l},removeDialog(s){var c;const l=r.get().find(d=>d.id===s);return l&&((c=l.onClose)==null||c.call(l),t("close-menu",{source:"dialog",id:s}),Jl.deleteOpenMenu(s,n),r.update(d=>d.filter(h=>h!==l))),s},clearDialogs(){const s=r.get();s.length!==0&&(s.forEach(l=>{var c;(c=l.onClose)==null||c.call(l),t("close-menu",{source:"dialog",id:l.id}),Jl.deleteOpenMenu(l.id,n)}),r.set([]))}}),[t,r,n]);return m.jsx(b9.Provider,{value:i,children:e})}function pS(){const n=M.useContext(b9);if(!n)throw new Error("useDialogs must be used within a DialogsProvider");return n}var sde="VisuallyHidden",hM=M.forwardRef((n,e)=>m.jsx(Vn.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));hM.displayName=sde;var pM="ToastProvider",[gM,ade,lde]=v0("Toast"),[C9,fEe]=Gc("Toast",[lde]),[cde,J0]=C9(pM),E9=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:l}=n,[c,d]=M.useState(null),[h,g]=M.useState(0),y=M.useRef(!1),v=M.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${pM}\`. Expected non-empty \`string\`.`),m.jsx(gM.Provider,{scope:e,children:m.jsx(cde,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:h,viewport:c,onViewportChange:d,onToastAdd:M.useCallback(()=>g(w=>w+1),[]),onToastRemove:M.useCallback(()=>g(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:l})})};E9.displayName=pM;var _9="ToastViewport",ude=["F8"],mM="toast.viewportPause",yM="toast.viewportResume",P9=M.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=ude,label:i="Notifications ({hotkey})",...s}=n,l=J0(_9,t),c=ade(t),d=M.useRef(null),h=M.useRef(null),g=M.useRef(null),y=M.useRef(null),v=Tr(e,y,l.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),C=l.toastCount>0;M.useEffect(()=>{const P=I=>{var L;r.length!==0&&r.every(O=>I[O]||I.code===O)&&((L=y.current)==null||L.focus())};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[r]),M.useEffect(()=>{const P=d.current,I=y.current;if(C&&P&&I){const k=()=>{if(!l.isClosePausedRef.current){const F=new CustomEvent(mM);I.dispatchEvent(F),l.isClosePausedRef.current=!0}},L=()=>{if(l.isClosePausedRef.current){const F=new CustomEvent(yM);I.dispatchEvent(F),l.isClosePausedRef.current=!1}},O=F=>{!P.contains(F.relatedTarget)&&L()},z=()=>{P.contains(document.activeElement)||L()};return P.addEventListener("focusin",k),P.addEventListener("focusout",O),P.addEventListener("pointermove",k),P.addEventListener("pointerleave",z),window.addEventListener("blur",k),window.addEventListener("focus",L),()=>{P.removeEventListener("focusin",k),P.removeEventListener("focusout",O),P.removeEventListener("pointermove",k),P.removeEventListener("pointerleave",z),window.removeEventListener("blur",k),window.removeEventListener("focus",L)}}},[C,l.isClosePausedRef]);const E=M.useCallback(({tabbingDirection:P})=>{const k=c().map(L=>{const O=L.ref.current,z=[O,...Cde(O)];return P==="forwards"?z:z.reverse()});return(P==="forwards"?k.reverse():k).flat()},[c]);return M.useEffect(()=>{const P=y.current;if(P){const I=k=>{var z,F,H;const L=k.altKey||k.ctrlKey||k.metaKey;if(k.key==="Tab"&&!L){const V=document.activeElement,re=k.shiftKey;if(k.target===P&&re){(z=h.current)==null||z.focus();return}const ie=E({tabbingDirection:re?"backwards":"forwards"}),W=ie.findIndex(Y=>Y===V);xM(ie.slice(W+1))?k.preventDefault():re?(F=h.current)==null||F.focus():(H=g.current)==null||H.focus()}};return P.addEventListener("keydown",I),()=>P.removeEventListener("keydown",I)}},[c,E]),m.jsxs(Fse,{ref:d,role:"region","aria-label":i.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:C?void 0:"none"},children:[C&&m.jsx(vM,{ref:h,onFocusFromOutsideViewport:()=>{const P=E({tabbingDirection:"forwards"});xM(P)}}),m.jsx(gM.Slot,{scope:t,children:m.jsx(Vn.ol,{tabIndex:-1,...s,ref:v})}),C&&m.jsx(vM,{ref:g,onFocusFromOutsideViewport:()=>{const P=E({tabbingDirection:"backwards"});xM(P)}})]})});P9.displayName=_9;var T9="ToastFocusProxy",vM=M.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=J0(T9,t);return m.jsx(hM,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:l=>{var h;const c=l.relatedTarget;!((h=s.viewport)!=null&&h.contains(c))&&r()}})});vM.displayName=T9;var e1="Toast",dde="toast.swipeStart",fde="toast.swipeMove",hde="toast.swipeCancel",pde="toast.swipeEnd",I9=M.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...l}=n,[c=!0,d]=kf({prop:r,defaultProp:i,onChange:s});return m.jsx(rc,{present:t||c,children:m.jsx(yde,{open:c,...l,ref:e,onClose:()=>d(!1),onPause:Po(n.onPause),onResume:Po(n.onResume),onSwipeStart:bt(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:bt(n.onSwipeMove,h=>{const{x:g,y}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:bt(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:bt(n.onSwipeEnd,h=>{const{x:g,y}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),d(!1)})})})});I9.displayName=e1;var[gde,mde]=C9(e1,{onClose(){}}),yde=M.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:l,onEscapeKeyDown:c,onPause:d,onResume:h,onSwipeStart:g,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:w,...C}=n,E=J0(e1,t),[P,I]=M.useState(null),k=Tr(e,Y=>I(Y)),L=M.useRef(null),O=M.useRef(null),z=i||E.duration,F=M.useRef(0),H=M.useRef(z),V=M.useRef(0),{onToastAdd:re,onToastRemove:q}=E,J=Po(()=>{var oe;(P==null?void 0:P.contains(document.activeElement))&&((oe=E.viewport)==null||oe.focus()),l()}),ie=M.useCallback(Y=>{!Y||Y===1/0||(window.clearTimeout(V.current),F.current=new Date().getTime(),V.current=window.setTimeout(J,Y))},[J]);M.useEffect(()=>{const Y=E.viewport;if(Y){const oe=()=>{ie(H.current),h==null||h()},le=()=>{const ce=new Date().getTime()-F.current;H.current=H.current-ce,window.clearTimeout(V.current),d==null||d()};return Y.addEventListener(mM,le),Y.addEventListener(yM,oe),()=>{Y.removeEventListener(mM,le),Y.removeEventListener(yM,oe)}}},[E.viewport,z,d,h,ie]),M.useEffect(()=>{s&&!E.isClosePausedRef.current&&ie(z)},[s,z,E.isClosePausedRef,ie]),M.useEffect(()=>(re(),()=>q()),[re,q]);const W=M.useMemo(()=>P?j9(P):null,[P]);return E.viewport?m.jsxs(m.Fragment,{children:[W&&m.jsx(vde,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:W}),m.jsx(gde,{scope:t,onClose:J,children:zg.createPortal(m.jsx(gM.ItemSlot,{scope:t,children:m.jsx(Nse,{asChild:!0,onEscapeKeyDown:bt(c,()=>{E.isFocusedToastEscapeKeyDownRef.current||J(),E.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(Vn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":E.swipeDirection,...C,ref:k,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:bt(n.onKeyDown,Y=>{Y.key==="Escape"&&(c==null||c(Y.nativeEvent),Y.nativeEvent.defaultPrevented||(E.isFocusedToastEscapeKeyDownRef.current=!0,J()))}),onPointerDown:bt(n.onPointerDown,Y=>{Y.button===0&&(L.current={x:Y.clientX,y:Y.clientY})}),onPointerMove:bt(n.onPointerMove,Y=>{if(!L.current)return;const oe=Y.clientX-L.current.x,le=Y.clientY-L.current.y,ce=!!O.current,Q=["left","right"].includes(E.swipeDirection),he=["left","up"].includes(E.swipeDirection)?Math.min:Math.max,ke=Q?he(0,oe):0,te=Q?0:he(0,le),me=Y.pointerType==="touch"?10:2,Oe={x:ke,y:te},Ze={originalEvent:Y,delta:Oe};ce?(O.current=Oe,t1(fde,y,Ze,{discrete:!1})):L9(Oe,E.swipeDirection,me)?(O.current=Oe,t1(dde,g,Ze,{discrete:!1}),Y.target.setPointerCapture(Y.pointerId)):(Math.abs(oe)>me||Math.abs(le)>me)&&(L.current=null)}),onPointerUp:bt(n.onPointerUp,Y=>{const oe=O.current,le=Y.target;if(le.hasPointerCapture(Y.pointerId)&&le.releasePointerCapture(Y.pointerId),O.current=null,L.current=null,oe){const ce=Y.currentTarget,Q={originalEvent:Y,delta:oe};L9(oe,E.swipeDirection,E.swipeThreshold)?t1(pde,w,Q,{discrete:!0}):t1(hde,v,Q,{discrete:!0}),ce.addEventListener("click",he=>he.preventDefault(),{once:!0})}})})})}),E.viewport)})]}):null}),vde=n=>{const{__scopeToast:e,children:t,...r}=n,i=J0(e1,e),[s,l]=M.useState(!1),[c,d]=M.useState(!1);return wde(()=>l(!0)),M.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),c?null:m.jsx(sS,{asChild:!0,children:m.jsx(hM,{...r,children:s&&m.jsxs(m.Fragment,{children:[i.label," ",t]})})})},Sde="ToastTitle",k9=M.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return m.jsx(Vn.div,{...r,ref:e})});k9.displayName=Sde;var xde="ToastDescription",R9=M.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return m.jsx(Vn.div,{...r,ref:e})});R9.displayName=xde;var M9="ToastAction",A9=M.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?m.jsx(O9,{altText:t,asChild:!0,children:m.jsx(SM,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${M9}\`. Expected non-empty \`string\`.`),null)});A9.displayName=M9;var D9="ToastClose",SM=M.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=mde(D9,t);return m.jsx(O9,{asChild:!0,children:m.jsx(Vn.button,{type:"button",...r,ref:e,onClick:bt(n.onClick,i.onClose)})})});SM.displayName=D9;var O9=M.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return m.jsx(Vn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function j9(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),bde(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const l=r.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...j9(r))}}),e}function t1(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?dR(i,s):i.dispatchEvent(s)}var L9=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function wde(n=()=>{}){const e=Po(n);_f(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function bde(n){return n.nodeType===n.ELEMENT_NODE}function Cde(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function xM(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Ede=I9,_de=k9,Pde=R9,Tde=A9,N9=SM;const F9=M.createContext(null);function Ide({children:n}){const e=Iv("toasts",[]),t=M.useMemo(()=>({toasts:e,addToast(r){const i=r.id??nr();return e.update(s=>[...s.filter(l=>l.id!==r.id),{...r,id:i}]),i},removeToast(r){return e.update(i=>i.filter(s=>s.id!==r)),r},clearToasts(){e.set([])}}),[e]);return m.jsx(E9,{children:m.jsx(F9.Provider,{value:t,children:n})})}function rd(){const n=M.useContext(F9);if(!n)throw new Error("useToasts must be used within a ToastsProvider");return n}var n1={exports:{}};n1.exports;var z9;function kde(){return z9||(z9=1,function(n){var e=function(){var t=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function l(d,h){if(!s[d]){s[d]={};for(var g=0;g<d.length;g++)s[d][d.charAt(g)]=g}return s[d][h]}var c={compressToBase64:function(d){if(d==null)return"";var h=c._compress(d,6,function(g){return r.charAt(g)});switch(h.length%4){default:case 0:return h;case 1:return h+"===";case 2:return h+"==";case 3:return h+"="}},decompressFromBase64:function(d){return d==null?"":d==""?null:c._decompress(d.length,32,function(h){return l(r,d.charAt(h))})},compressToUTF16:function(d){return d==null?"":c._compress(d,15,function(h){return t(h+32)})+" "},decompressFromUTF16:function(d){return d==null?"":d==""?null:c._decompress(d.length,16384,function(h){return d.charCodeAt(h)-32})},compressToUint8Array:function(d){for(var h=c.compress(d),g=new Uint8Array(h.length*2),y=0,v=h.length;y<v;y++){var w=h.charCodeAt(y);g[y*2]=w>>>8,g[y*2+1]=w%256}return g},decompressFromUint8Array:function(d){if(d==null)return c.decompress(d);for(var h=new Array(d.length/2),g=0,y=h.length;g<y;g++)h[g]=d[g*2]*256+d[g*2+1];var v=[];return h.forEach(function(w){v.push(t(w))}),c.decompress(v.join(""))},compressToEncodedURIComponent:function(d){return d==null?"":c._compress(d,6,function(h){return i.charAt(h)})},decompressFromEncodedURIComponent:function(d){return d==null?"":d==""?null:(d=d.replace(/ /g,"+"),c._decompress(d.length,32,function(h){return l(i,d.charAt(h))}))},compress:function(d){return c._compress(d,16,function(h){return t(h)})},_compress:function(d,h,g){if(d==null)return"";var y,v,w={},C={},E="",P="",I="",k=2,L=3,O=2,z=[],F=0,H=0,V;for(V=0;V<d.length;V+=1)if(E=d.charAt(V),Object.prototype.hasOwnProperty.call(w,E)||(w[E]=L++,C[E]=!0),P=I+E,Object.prototype.hasOwnProperty.call(w,P))I=P;else{if(Object.prototype.hasOwnProperty.call(C,I)){if(I.charCodeAt(0)<256){for(y=0;y<O;y++)F=F<<1,H==h-1?(H=0,z.push(g(F)),F=0):H++;for(v=I.charCodeAt(0),y=0;y<8;y++)F=F<<1|v&1,H==h-1?(H=0,z.push(g(F)),F=0):H++,v=v>>1}else{for(v=1,y=0;y<O;y++)F=F<<1|v,H==h-1?(H=0,z.push(g(F)),F=0):H++,v=0;for(v=I.charCodeAt(0),y=0;y<16;y++)F=F<<1|v&1,H==h-1?(H=0,z.push(g(F)),F=0):H++,v=v>>1}k--,k==0&&(k=Math.pow(2,O),O++),delete C[I]}else for(v=w[I],y=0;y<O;y++)F=F<<1|v&1,H==h-1?(H=0,z.push(g(F)),F=0):H++,v=v>>1;k--,k==0&&(k=Math.pow(2,O),O++),w[P]=L++,I=String(E)}if(I!==""){if(Object.prototype.hasOwnProperty.call(C,I)){if(I.charCodeAt(0)<256){for(y=0;y<O;y++)F=F<<1,H==h-1?(H=0,z.push(g(F)),F=0):H++;for(v=I.charCodeAt(0),y=0;y<8;y++)F=F<<1|v&1,H==h-1?(H=0,z.push(g(F)),F=0):H++,v=v>>1}else{for(v=1,y=0;y<O;y++)F=F<<1|v,H==h-1?(H=0,z.push(g(F)),F=0):H++,v=0;for(v=I.charCodeAt(0),y=0;y<16;y++)F=F<<1|v&1,H==h-1?(H=0,z.push(g(F)),F=0):H++,v=v>>1}k--,k==0&&(k=Math.pow(2,O),O++),delete C[I]}else for(v=w[I],y=0;y<O;y++)F=F<<1|v&1,H==h-1?(H=0,z.push(g(F)),F=0):H++,v=v>>1;k--,k==0&&(k=Math.pow(2,O),O++)}for(v=2,y=0;y<O;y++)F=F<<1|v&1,H==h-1?(H=0,z.push(g(F)),F=0):H++,v=v>>1;for(;;)if(F=F<<1,H==h-1){z.push(g(F));break}else H++;return z.join("")},decompress:function(d){return d==null?"":d==""?null:c._decompress(d.length,32768,function(h){return d.charCodeAt(h)})},_decompress:function(d,h,g){var y=[],v=4,w=4,C=3,E="",P=[],I,k,L,O,z,F,H,V={val:g(0),position:h,index:1};for(I=0;I<3;I+=1)y[I]=I;for(L=0,z=Math.pow(2,2),F=1;F!=z;)O=V.val&V.position,V.position>>=1,V.position==0&&(V.position=h,V.val=g(V.index++)),L|=(O>0?1:0)*F,F<<=1;switch(L){case 0:for(L=0,z=Math.pow(2,8),F=1;F!=z;)O=V.val&V.position,V.position>>=1,V.position==0&&(V.position=h,V.val=g(V.index++)),L|=(O>0?1:0)*F,F<<=1;H=t(L);break;case 1:for(L=0,z=Math.pow(2,16),F=1;F!=z;)O=V.val&V.position,V.position>>=1,V.position==0&&(V.position=h,V.val=g(V.index++)),L|=(O>0?1:0)*F,F<<=1;H=t(L);break;case 2:return""}for(y[3]=H,k=H,P.push(H);;){if(V.index>d)return"";for(L=0,z=Math.pow(2,C),F=1;F!=z;)O=V.val&V.position,V.position>>=1,V.position==0&&(V.position=h,V.val=g(V.index++)),L|=(O>0?1:0)*F,F<<=1;switch(H=L){case 0:for(L=0,z=Math.pow(2,8),F=1;F!=z;)O=V.val&V.position,V.position>>=1,V.position==0&&(V.position=h,V.val=g(V.index++)),L|=(O>0?1:0)*F,F<<=1;y[w++]=t(L),H=w-1,v--;break;case 1:for(L=0,z=Math.pow(2,16),F=1;F!=z;)O=V.val&V.position,V.position>>=1,V.position==0&&(V.position=h,V.val=g(V.index++)),L|=(O>0?1:0)*F,F<<=1;y[w++]=t(L),H=w-1,v--;break;case 2:return P.join("")}if(v==0&&(v=Math.pow(2,C),C++),y[H])E=y[H];else if(H===w)E=k+k.charAt(0);else return null;P.push(E),y[w++]=k+E.charAt(0),v--,k=E,v==0&&(v=Math.pow(2,C),C++)}}};return c}();n!=null?n.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})}(n1)),n1.exports}var Rde=kde();const U9=ef(Rde),wM="web image/vnd.tldraw+png",Mde={"image/png":wM},Ade={[wM]:"image/png"};function Dde(n){return Wo(Mde,n)??null}function Ode(n){return Wo(Ade,n)??n}function jde(n){return typeof ClipboardItem<"u"&&"supports"in ClipboardItem&&ClipboardItem.supports(n)}function Lde(n){const e=Object.entries(n);for(const[t,r]of e)r.catch(i=>console.error(i));return navigator.clipboard.write([new ClipboardItem(n)]).catch(t=>(console.error(t),Promise.all(e.map(async([r,i])=>[r,await i])).then(r=>{const i=cP(r);return navigator.clipboard.write([new ClipboardItem(i)])})))}async function Nde(n,e,t){var I,k,L;const{elements:r,files:i}=e,s={shapes:[],bindings:[],rootShapeIds:[],assets:[],schema:n.store.schema.serialize()},l=new Map,c=new Map,d=n.getCurrentPageId(),h=new Map,g=[],y=new Set;r.forEach(O=>{if(h.set(O.id,yr()),O.boundElements!==null)for(const z of O.boundElements)z.type==="text"&&y.add(z.id)});let v=y2;for(const O of r){if(y.has(O.id))continue;const z=h.get(O.id),F={id:z,typeName:"shape",parentId:d,index:v,x:O.x,y:O.y,rotation:0,isLocked:O.locked,opacity:Fde(O.opacity),meta:{}};switch(O.angle!==0&&c.set(z,O.angle),O.groupIds&&O.groupIds.length>0?l.has(O.groupIds[0])?(I=l.get(O.groupIds[0]))==null||I.push(z):l.set(O.groupIds[0],[z]):g.push(z),O.type){case"rectangle":case"ellipse":case"diamond":{let H="",V="middle";if(O.boundElements!==null){for(const q of O.boundElements)if(q.type==="text"){const J=r.find(ie=>ie.id===q.id);J&&(H=J.text,V=Kde[J.textAlign])}}const re=O.backgroundColor==="transparent"?O.strokeColor:O.backgroundColor;s.shapes.push({...F,type:"geo",props:{geo:O.type,url:O.link??"",w:O.width,h:O.height,size:r1[O.strokeWidth]??"draw",color:gS[re]??"black",text:H,align:V,dash:i1(O),fill:qde(O)}});break}case"freedraw":{s.shapes.push({...F,type:"draw",props:{dash:i1(O),size:r1[O.strokeWidth],color:gS[O.strokeColor]??"black",segments:[{type:"free",points:O.points.map(([H,V,re=.5])=>({x:H,y:V,z:re}))}]}});break}case"line":{if(O.points.slice().length<2)break;const V=uv(O.points.length);s.shapes.push({...F,type:"line",props:{dash:i1(O),size:r1[O.strokeWidth],color:gS[O.strokeColor]??"black",spline:O.roundness?"cubic":"line",points:{...Object.fromEntries(O.points.map(([re,q],J)=>{const ie=V[J];return[ie,{id:ie,index:ie,x:re,y:q}]}))}}});break}case"arrow":{let H="";if(O.boundElements!==null){for(const ie of O.boundElements)if(ie.type==="text"){const W=r.find(Y=>Y.id===ie.id);W&&(H=W.text)}}const V=O.points[0],re=O.points[O.points.length-1],q=h.get((k=O.startBinding)==null?void 0:k.elementId),J=h.get((L=O.endBinding)==null?void 0:L.elementId);s.shapes.push({...F,type:"arrow",props:{text:H,bend:Gde(O,V,re),dash:i1(O),size:r1[O.strokeWidth]??"m",color:gS[O.strokeColor]??"black",start:{x:V[0],y:V[1]},end:{x:re[0],y:re[1]},arrowheadEnd:$9[O.endArrowhead]??"none",arrowheadStart:$9[O.startArrowhead]??"none"}}),q&&s.bindings.push({id:$h(),typeName:"binding",type:"arrow",fromId:z,toId:q,props:{terminal:"start",normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1},meta:{}}),J&&s.bindings.push({id:$h(),typeName:"binding",type:"arrow",fromId:z,toId:J,props:{terminal:"end",normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1},meta:{}});break}case"text":{const{size:H,scale:V}=Ude(O.fontSize);s.shapes.push({...F,type:"text",props:{size:H,scale:V,font:$de[O.fontFamily]??"draw",color:gS[O.strokeColor]??"black",text:O.text,textAlign:Wde[O.textAlign]}});break}case"image":{const H=i[O.fileId];if(!H)break;const V=cf.createId();s.assets.push({id:V,typeName:"asset",type:"image",props:{w:O.width,h:O.height,fileSize:H.size,name:O.id??"Untitled",isAnimated:!1,mimeType:H.mimeType,src:H.dataURL},meta:{}}),s.shapes.push({...F,type:"image",props:{w:O.width,h:O.height,assetId:V}})}}v=Fc(v)}const w=t??(n.inputs.shiftKey?n.inputs.currentPagePoint:void 0);n.markHistoryStoppingPoint("paste"),n.putContentOntoCurrentPage(s,{point:w,select:!1,preserveIds:!0});for(const O of l.values())if(O.length>1){n.groupShapes(O);const z=n.getShape(O[0]);z!=null&&z.parentId&&ia(z.parentId)&&g.push(z.parentId)}for(const[O,z]of c)n.select(O),n.rotateShapesBy([O],z);const C=on(g.map(O=>n.getShape(O))),E=Xe.Common(C.map(O=>n.getShapePageBounds(O))),P=n.getViewportPageBounds().center;n.updateShapes(C.map(O=>{const z={x:(O.x??0)-(E.x+E.w/2),y:(O.y??0)-(E.y+E.h/2)};return{id:O.id,type:O.type,x:P.x+z.x,y:P.y+z.y}})),n.setSelectedShapes(g)}const Fde=n=>{const e=n/100;return e<.2?.1:e<.4?.25:e<.6?.5:e<.8?.75:1},r1={1:"s",2:"m",3:"l",4:"xl"},zde={16:"s",20:"m",28:"l",36:"xl"};function Ude(n){const e=zde[n];return e?{size:e,scale:1}:n<16?{size:"s",scale:n/16}:n>36?{size:"xl",scale:n/36}:{size:"m",scale:1}}const $de={1:"draw",2:"sans",3:"mono"},Bde={gray:["#f8f9fa","#e9ecef","#ced4da","#868e96","#343a40"],red:["#fff5f5","#ffc9c9","#ff8787","#fa5252","#e03131"],pink:["#fff0f6","#fcc2d7","#f783ac","#e64980","#c2255c"],grape:["#f8f0fc","#eebefa","#da77f2","#be4bdb","#9c36b5"],violet:["#f3f0ff","#d0bfff","#9775fa","#7950f2","#6741d9"],indigo:["#edf2ff","#bac8ff","#748ffc","#4c6ef5","#3b5bdb"],blue:["#e7f5ff","#a5d8ff","#4dabf7","#228be6","#1971c2"],cyan:["#e3fafc","#99e9f2","#3bc9db","#15aabf","#0c8599"],teal:["#e6fcf5","#96f2d7","#38d9a9","#12b886","#099268"],green:["#ebfbee","#b2f2bb","#69db7c","#40c057","#2f9e44"],lime:["#f4fce3","#d8f5a2","#a9e34b","#82c91e","#66a80f"],yellow:["#fff9db","#ffec99","#ffd43b","#fab005","#f08c00"],orange:["#fff4e6","#ffd8a8","#ffa94d","#fd7e14","#e8590c"]};function Jc(n,e,t){const r=[0,1,2,3,4].map(i=>Bde[n][i]);return Object.fromEntries(r.map((i,s)=>[i,s<3?e:t]))}const gS={...Jc("gray","grey","black"),...Jc("red","light-red","red"),...Jc("pink","light-red","red"),...Jc("grape","light-violet","violet"),...Jc("blue","light-blue","blue"),...Jc("cyan","light-blue","blue"),...Jc("teal","light-green","green"),...Jc("green","light-green","green"),...Jc("yellow","yellow","orange"),...Jc("orange","yellow","orange"),"#ffffff":"white","#000000":"black"},Hde={solid:"draw",dashed:"dashed",dotted:"dotted"},Vde={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},Kde={left:"start",center:"middle",right:"end"},Wde={left:"start",center:"middle",right:"end"},$9={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function Gde(n,e,t){let r=0;if(n.points.length>2){const i=new R(e[0],e[1]),s=new R(t[0],t[1]),l=new R(n.points[1][0],n.points[1][1]),c=R.Sub(s,i),d=R.Per(c),h=R.Med(s,i),g=R.Sub(h,d),y=R.Add(h,d),v=R.NearestPointOnLineSegment(g,y,l,!1);r=R.Dist(v,h),R.Clockwise(v,s,h)&&(r*=-1)}return r}const i1=n=>{let e=Hde[n.strokeStyle]??"draw";return e==="draw"&&n.roughness===0&&(e="solid"),e},qde=n=>n.backgroundColor==="transparent"?"none":Vde[n.fillStyle]??"solid";async function Yde(n,e,t,r){const i=e.map(s=>s instanceof File?s:new File([s],"tldrawFile",{type:s.type}));n.markHistoryStoppingPoint("paste"),await n.putExternalContent({type:"files",files:i,point:t,ignoreParent:!1,sources:r})}function Xde(n,e,t){const r=n.getSelectionPageBounds();n.markHistoryStoppingPoint("paste"),n.putContentOntoCurrentPage(e,{point:t,select:!0});const i=n.getSelectionPageBounds();r&&i&&(r!=null&&r.collides(i))&&(n.updateInstanceState({isChangingStyle:!0}),n.timers.setTimeout(()=>{n.updateInstanceState({isChangingStyle:!1})},150))}async function bM(n,e,t,r){return n.markHistoryStoppingPoint("paste"),await n.putExternalContent({type:"url",point:t,url:e,sources:r})}const Zde=[wM,"image/png","image/jpeg","image/webp","image/svg+xml"];function Qde(n){const e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=n.trim(),e.body.textContent||e.body.innerText||""}const Jde=n=>{try{const e=new URL(n);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},efe=n=>{const e=n.split(/[\n\s]/);for(const t of e)try{const r=new URL(t);if(!(r.protocol==="http:"||r.protocol==="https:"))return}catch{return}return Mz(e)},tfe=n=>/^<svg/.test(n),nfe=["input","select","textarea"];function CM(n){const{activeElement:e}=document;return n.menus.hasAnyOpenMenus()||e&&(e.getAttribute("contenteditable")||nfe.indexOf(e.tagName.toLowerCase())>-1)}const o1=(n,e,t,r)=>{const i=efe(e);if(i)for(const s of i)bM(n,s,t);else Jde(e)?bM(n,e,t):tfe(e)?(n.markHistoryStoppingPoint("paste"),n.putExternalContent({type:"svg-text",text:e,point:t,sources:r})):(n.markHistoryStoppingPoint("paste"),n.putExternalContent({type:"text",text:e,point:t,sources:r}))},rfe=async(n,e,t)=>{if(n.getEditingShapeId()!==null)return;if(!e)throw Error("No clipboard data");const r=[];for(const i of Object.values(e.items))switch(i.kind){case"file":{r.push({type:"file",source:new Promise(s=>s(i.getAsFile()))});break}case"string":{i.type==="text/html"?r.push({type:"html",source:new Promise(s=>i.getAsString(s))}):i.type==="text/plain"?r.push({type:"text",source:new Promise(s=>i.getAsString(s))}):r.push({type:i.type,source:new Promise(s=>i.getAsString(s))});break}}H9(n,r,t)},B9=async(n,e,t)=>{const r=[];for(const i of e){for(const s of Zde)if(i.types.includes(s)){const l=i.getType(s).then(c=>Bl.rewriteMimeType(c,Ode(s)));r.push({type:"blob",source:l});break}i.types.includes("text/html")&&r.push({type:"html",source:(async()=>{const s=await i.getType("text/html");return await Bl.blobToText(s)})()}),i.types.includes("text/uri-list")&&r.push({type:"url",source:(async()=>{const s=await i.getType("text/uri-list");return await Bl.blobToText(s)})()}),i.types.includes("text/plain")&&r.push({type:"text",source:(async()=>{const s=await i.getType("text/plain");return await Bl.blobToText(s)})()})}return await H9(n,r,t)};async function H9(n,e,t){const r=e.filter(s=>(s.type==="file"||s.type==="blob")&&s.source!==null);if(r.length){if(r.length>n.options.maxFilesAtOnce)throw Error("Too many files");const s=on(await Promise.all(r.map(l=>l.source)));return await Yde(n,s,t)}const i=await Promise.all(e.filter(s=>s.type!=="file").map(s=>new Promise(l=>{const c=s;if(c.type==="file"){l({type:"error",data:null,reason:"unexpected file"});return}c.source.then(d=>{var g;const h=(g=d.match(/<div data-tldraw[^>]*>(.*)<\/div>/))==null?void 0:g[1];if(h)try{const y=U9.decompressFromBase64(h);if(y===null){l({type:"error",data:y,reason:"found tldraw data comment but could not parse base64"});return}else{const v=JSON.parse(y);if(v.type!=="application/tldraw"&&l({type:"error",data:v,reason:`found tldraw data comment but JSON was of a different type: ${v.type}`}),typeof v.data=="string"){l({type:"error",data:v,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}l({type:"tldraw",data:v.data});return}}catch{l({type:"error",data:h,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}else{if(c.type==="html"){l({type:"text",data:d,subtype:"html"});return}if(c.type==="url"){l({type:"text",data:d,subtype:"url"});return}try{const y=JSON.parse(d);if(y.type==="excalidraw/clipboard"){l({type:"excalidraw",data:y});return}else{l({type:"text",data:d,subtype:"json"});return}}catch{l({type:"text",data:d,subtype:"text"});return}}l({type:"error",data:d,reason:"unhandled case"})})})));for(const s of i)if(s.type==="tldraw"){Xde(n,s.data,t);return}for(const s of i)if(s.type==="excalidraw"){Nde(n,s.data,t);return}for(const s of i){if(s.type==="text"&&s.subtype==="html"){const c=new DOMParser().parseFromString(s.data,"text/html").querySelector("body");if(c&&Array.from(c.children).filter(h=>h.nodeType===1).length===1&&c.firstElementChild&&c.firstElementChild.tagName==="A"&&c.firstElementChild.hasAttribute("href")&&c.firstElementChild.getAttribute("href")!==""){const h=c.firstElementChild.getAttribute("href");o1(n,h,t,i);return}if(!i.some(h=>h.type==="text"&&h.subtype!=="html")&&s.data.trim()){o1(n,Qde(s.data),t,i);return}}if(s.type==="text"&&s.subtype==="text"&&s.data.startsWith("<iframe ")){const c=new DOMParser().parseFromString(s.data,"text/html").querySelector("body");if(c&&Array.from(c.children).filter(h=>h.nodeType===1).length===1&&c.firstElementChild&&c.firstElementChild.tagName==="IFRAME"&&c.firstElementChild.hasAttribute("src")&&c.firstElementChild.getAttribute("src")!==""){const h=c.firstElementChild.getAttribute("src");o1(n,h,t,i);return}}}for(const s of i)if(s.type==="text"&&s.subtype==="url"){bM(n,s.data,t,i);return}for(const s of i)if(s.type==="text"&&s.subtype==="text"&&s.data.trim()){o1(n,s.data,t,i);return}}const s1=async n=>{var r;const e=await n.resolveAssetsInContent(n.getContentFromCurrentPage(n.getSelectedShapeIds()));if(!e){navigator&&navigator.clipboard&&navigator.clipboard.writeText("");return}const t=U9.compressToBase64(JSON.stringify({type:"application/tldraw",kind:"content",data:e}));if(!(typeof navigator>"u")){const i=e.shapes.map(s=>n.getShapeUtil(s).getText(s)).filter(MX);if((r=navigator.clipboard)!=null&&r.write){const s=new Blob([`<div data-tldraw>${t}</div>`],{type:"text/html"});let l=i.join(" ");l===""&&(l=" "),navigator.clipboard.write([new ClipboardItem({"text/html":s,"text/plain":new Blob([l],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText(`<div data-tldraw>${t}</div>`)}};function ife(){const n=xe(),e=_o(),t=M.useCallback(async function(l){n.getSelectedShapeIds().length!==0&&(await s1(n),e("copy",{source:l}))},[n,e]),r=M.useCallback(async function(l){n.getSelectedShapeIds().length!==0&&(await s1(n),n.deleteShapes(n.getSelectedShapeIds()),e("cut",{source:l}))},[n,e]),i=M.useCallback(async function(l,c,d){n.getEditingShapeId()===null&&(Array.isArray(l)&&l[0]instanceof ClipboardItem?(B9(n,l,d),e("paste",{source:"menu"})):navigator.clipboard.read().then(h=>{i(h,c,d)}))},[n,e]);return{copy:t,cut:r,paste:i}}function ofe(){const n=xe(),e=_o(),t=Pe("editor.isFocused",()=>n.getInstanceState().isFocused,[n]);M.useEffect(()=>{if(!t)return;const r=async d=>{n.getSelectedShapeIds().length===0||n.getEditingShapeId()!==null||CM(n)||(mn(d),await s1(n),e("copy",{source:"kbd"}))};async function i(d){n.getSelectedShapeIds().length===0||n.getEditingShapeId()!==null||CM(n)||(mn(d),await s1(n),n.deleteShapes(n.getSelectedShapeIds()),e("cut",{source:"kbd"}))}let s=!1;const l=d=>{d.button===1&&(s=!0,n.timers.requestAnimationFrame(()=>{s=!1}))},c=d=>{var v;if(s){xi(d);return}if(n.getEditingShapeId()!==null||CM(n))return;let h,g=!1;n.inputs.shiftKey&&(g=!0),n.user.getIsPasteAtCursorMode()&&(g=!g),g&&(h=n.inputs.currentPagePoint);const y=()=>{d.clipboardData&&rfe(n,d.clipboardData,h)};(v=navigator.clipboard)!=null&&v.read?navigator.clipboard.read().then(w=>{Array.isArray(w)&&w[0]instanceof ClipboardItem&&B9(n,w,h)},()=>{y()}):y(),mn(d),e("paste",{source:"kbd"})};return document.addEventListener("copy",r),document.addEventListener("cut",i),document.addEventListener("paste",c),document.addEventListener("pointerup",l),()=>{document.removeEventListener("copy",r),document.removeEventListener("cut",i),document.removeEventListener("paste",c),document.removeEventListener("pointerup",l)}},[n,e,t])}/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function sfe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,l,c=[],d=!0,h=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;d=!1}else for(;!(d=(r=s.call(t)).done)&&(c.push(r.value),c.length!==e);d=!0);}catch(g){h=!0,i=g}finally{try{if(!d&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(h)throw i}}return c}}function V9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ba(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?V9(Object(t),!0).forEach(function(r){afe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):V9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function afe(n,e,t){return e=mfe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lfe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function cfe(n,e){if(n==null)return{};var t=lfe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function K9(n,e){return dfe(n)||sfe(n,e)||W9(n,e)||pfe()}function a1(n){return ufe(n)||ffe(n)||W9(n)||hfe()}function ufe(n){if(Array.isArray(n))return EM(n)}function dfe(n){if(Array.isArray(n))return n}function ffe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function W9(n,e){if(n){if(typeof n=="string")return EM(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return EM(n,e)}}function EM(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function hfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gfe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mfe(n){var e=gfe(n,"string");return typeof e=="symbol"?e:String(e)}function mS(n){var e=n.sizes.shift(),t=Math.max(Math.ceil(e[0]),1),r=Math.max(Math.ceil(e[1]),1),i=[t-1,r-1,1,1],s=Date.now(),l=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,c,d;l?(c=new OffscreenCanvas(1,1),d=new OffscreenCanvas(t,r)):(c=document.createElement("canvas"),c.width=1,c.height=1,d=document.createElement("canvas"),d.width=t,d.height=r);var h=c.getContext("2d"),g=d.getContext("2d");g&&(g.fillRect.apply(g,i),h.drawImage(d,t-1,r-1,1,1,0,0,1,1));var y=h&&h.getImageData(0,0,1,1).data[3]!==0,v=Date.now()-s;return[c,d].forEach(function(w){w.height=0,w.width=0}),l?(postMessage({width:t,height:r,benchmark:v,isTestPass:y}),!y&&n.sizes.length&&mS(n)):y?n.onSuccess(t,r,v):(n.onError(t,r,v),n.sizes.length&&mS(n)),y}var _M={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},yfe=["onError","onSuccess"],tm={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},yS={};function PM(n){var e=n.width===n.height,t=n.height===1,r=n.width===1,i=[];if(!n.width||!n.height)n.sizes.forEach(function(g){var y=e||t?g:1,v=e||r?g:1;i.push([y,v])});else for(var s=n.min||tm.min,l=n.step||tm.step,c=Math.max(n.width,n.height);c>=s;){var d=e||t?c:1,h=e||r?c:1;i.push([d,h]),c-=l}return i}function l1(n){var e=window&&"HTMLCanvasElement"in window,t=window&&"OffscreenCanvas"in window,r=Date.now(),i=n.onError,s=n.onSuccess,l=cfe(n,yfe),c=null;if(!e)return!1;if(n.useWorker&&t){var d=`
            var canvasTest = `.concat(mS.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),h=new Blob([d],{type:"application/javascript"}),g=URL.createObjectURL(h);c=new Worker(g),URL.revokeObjectURL(g),c.onmessage=function(y){var v=y.data,w=v.width,C=v.height,E=v.benchmark,P=v.isTestPass;P?(yS[r].onSuccess(w,C,E),delete yS[r]):yS[r].onError(w,C,E)}}if(n.usePromise)return new Promise(function(y,v){var w=Ba(Ba({},n),{},{onError:function(I,k,L){var O;if(n.sizes.length===0)O=!0;else{var z=n.sizes.slice(-1),F=K9(z,1),H=K9(F[0],2),V=H[0],re=H[1];O=I===V&&k===re}i(I,k,L),O&&v({width:I,height:k,benchmark:L})},onSuccess:function(I,k,L){s(I,k,L),y({width:I,height:k,benchmark:L})}});if(c){var C=w.onError,E=w.onSuccess;yS[r]={onError:C,onSuccess:E},c.postMessage(l)}else mS(w)});if(c)yS[r]={onError:i,onSuccess:s},c.postMessage(l);else return mS(n)}var TM={maxArea:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=PM({width:e.max,height:e.max,min:e.min,step:e.step,sizes:a1(_M.area)}),r=Ba(Ba(Ba({},tm),e),{},{sizes:t});return l1(r)},maxHeight:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=PM({width:1,height:e.max,min:e.min,step:e.step,sizes:a1(_M.height)}),r=Ba(Ba(Ba({},tm),e),{},{sizes:t});return l1(r)},maxWidth:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=PM({width:e.max,height:1,min:e.min,step:e.step,sizes:a1(_M.width)}),r=Ba(Ba(Ba({},tm),e),{},{sizes:t});return l1(r)},test:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ba(Ba({},tm),e);return t.sizes=a1(t.sizes),t.width&&t.height&&(t.sizes=[[t.width,t.height]]),l1(t)}};let IM=null;function vfe(){return IM||(IM=Sfe()),IM}async function Sfe(){const n=await TM.maxWidth({usePromise:!0}),e=await TM.maxHeight({usePromise:!0}),t=await TM.maxArea({usePromise:!0});return{maxWidth:n.width,maxHeight:e.height,maxArea:t.width*t.height}}const G9=8192,xfe=4096*4096;async function wfe(n,e){if(n<=G9&&e<=G9&&n*e<=xfe)return[n,e];const{maxWidth:t,maxHeight:r,maxArea:i}=await vfe(),s=n/e;if(n>t&&(n=t,e=n/s),e>r&&(e=r,n=e*s),n*e>i){const l=Math.sqrt(i/(n*e));n*=l,e*=l}return[n,e]}async function q9(n,e,t){const{type:r,width:i,height:s,quality:l=1,pixelRatio:c=2}=t;let[d,h]=await wfe(i*c,s*c);d=Math.floor(d),h=Math.floor(h);const g=d/i,y=await Bl.blobToDataUrl(new Blob([e],{type:"image/svg+xml"})),v=await new Promise(C=>{const E=sv();E.crossOrigin="anonymous",E.onload=async()=>{xr.isSafari&&await rP(250);const P=document.createElement("canvas"),I=P.getContext("2d");P.width=d,P.height=h,I.imageSmoothingEnabled=!0,I.imageSmoothingQuality="high",I.drawImage(E,0,0,d,h),URL.revokeObjectURL(y),C(P)},E.onerror=()=>{C(null)},E.src=y});if(!v)return null;const w=await new Promise(C=>v.toBlob(E=>{(!E||Si.throwToBlob.get())&&C(null),C(E)},"image/"+r,l));if(!w)return null;if(r==="png"){const C=new DataView(await w.arrayBuffer());return Nc.setPhysChunk(C,g,{type:"image/"+r})}else return w}async function Y9(n,e,t){const r=await n.getSvgString(e!=null&&e.length?e:[...n.getCurrentPageShapeIds()],{scale:t.scale??1,background:n.getInstanceState().exportBackground,...t});if(!r)throw new Error("Could not construct SVG.");return r}async function kM(n,e,t,r={}){var i;switch(t){case"svg":return(i=await Y9(n,e,r))==null?void 0:i.svg;case"json":{const s=await n.resolveAssetsInContent(n.getContentFromCurrentPage(e));return JSON.stringify(s)}default:Bi(t)}}async function X9({editor:n,ids:e,format:t,opts:r={}}){switch(t){case"svg":return new Blob([await kM(n,e,"svg",r)],{type:"text/plain"});case"json":return new Blob([await kM(n,e,"json",r)],{type:"text/plain"});case"jpeg":case"png":case"webp":{const i=await Y9(n,e,r);if(!i)throw new Error("Could not construct image.");const s=await q9(n,i.svg,{type:t,quality:r.quality,pixelRatio:r.pixelRatio,width:i.width,height:i.height});if(!s)throw new Error("Could not construct image.");return s}default:Bi(t)}}const bfe={jpeg:"image/jpeg",png:"image/png",webp:"image/webp",json:"text/plain",svg:"text/plain"};function Cfe(n,e,t,r={}){return{blobPromise:X9({editor:n,ids:e,format:t,opts:r}),mimeType:bfe[t]}}function Efe(n,e,t="svg",r={}){if(!navigator.clipboard)return Promise.reject(new Error("Copy not supported"));if(navigator.clipboard.write){const{blobPromise:i,mimeType:s}=Cfe(n,e,t,r),l={[s]:i},c=Dde(s);return c&&jde(c)&&(l[c]=i.then(d=>Bl.rewriteMimeType(d,c))),Lde(l)}switch(t){case"json":case"svg":return _fe(async()=>kM(n,e,t,r));case"jpeg":case"png":throw new Error("Copy not supported");default:Bi(t)}}async function _fe(n){var e,t;await((t=(e=navigator.clipboard)==null?void 0:e.writeText)==null?void 0:t.call(e,await n()))}function Pfe(){const n=xe(),{addToast:e}=rd(),t=An();return M.useCallback((r,i="svg")=>{Efe(n,r,i).catch(()=>{e({id:"copy-fail",severity:"warning",title:t("toast.error.copy-fail.title"),description:t("toast.error.copy-fail.desc")})})},[n,e,t])}async function Tfe(n,e,t="png",r,i={}){if(!r&&(r=`shapes at ${Z9()}`,e.length===1)){const c=n.getShape(e[0]);n.isShapeOfType(c,"frame")?r=c.props.name||"frame":r=`${Lb(c.id)} at ${Z9()}`}r+=`.${t}`;const s=await X9({editor:n,ids:e,format:t,opts:i}),l=new File([s],r,{type:s.type});Ife(l)}function Z9(){const n=new Date,e=String(n.getFullYear()).slice(2),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),i=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0"),l=String(n.getSeconds()).padStart(2,"0");return`${e}-${t}-${r} ${i}.${s}.${l}`}function Ife(n){const e=document.createElement("a"),t=URL.createObjectURL(n);e.href=t,e.download=n.name,e.click(),URL.revokeObjectURL(t)}function kfe(){const n=xe(),{addToast:e}=rd(),t=An();return M.useCallback((r,i="png",s)=>{Tfe(n,r,i,s,{scale:1,background:n.getInstanceState().exportBackground}).catch(l=>{console.error(l.message),e({id:"export-fail",title:t("toast.error.export-fail.title"),description:t("toast.error.export-fail.desc"),severity:"error"})})},[n,e,t])}const Q9=zt.createContext([]);function Rfe(){const n=xe(),e=M.useRef(),t=vf(zt.useContext(Q9));return M.useEffect(()=>{const r=window.document.createElement("input");r.type="file",r.accept=(t==null?void 0:t.join(","))??lX,r.multiple=!0,e.current=r;async function i(s){const l=s.target.files;!l||l.length===0||(n.markHistoryStoppingPoint("insert media"),await n.putExternalContent({type:"files",files:Array.from(l),point:n.getViewportPageBounds().center,ignoreParent:!1}),r.value="")}return r.addEventListener("change",i),()=>{e.current=void 0,r.removeEventListener("change",i)}},[n,t]),M.useCallback(()=>{var r;(r=e.current)==null||r.click()},[e])}function Mfe(){const n=xe(),e=M.useRef(null),t=M.useRef(null);return M.useCallback(async function(){const i=document.createElement("div"),s=document.createElement("style"),l=(I,k)=>{I&&(I.innerHTML=""),k&&document.head.contains(k)&&document.head.removeChild(k),I&&document.body.contains(I)&&document.body.removeChild(I)};l(e.current,t.current),e.current=i,t.current=s;const c=`tl-print-surface-${nr()}`;i.className=c,s.innerHTML=`
			.${c} {
				display: none;
			}

			.${c} svg {
				max-width: 100%;
				height: 100%;
				display: block;
			}

			@media print {				  
				html, body {
					min-height: 100%;
					height: 100%;
					margin: 0;
				}

				body {
					position: relative;
				}

				body > * {
					display: none;
				}

				.tldraw__editor {
					display: none;
				}

				.${c} {
					display: block !important;
					background: white;
					min-height: 100%;
					height: 100%;
					max-width: 100%;
				}

				.${c}__item {
					padding: 10mm;
					display: flex;
					min-height: 100%;
					flex-direction: column;
					page-break-after: always;
					position: relative;
					overflow: hidden;
					height: 100%;
				}

				.${c}__item__main {
					flex: 1;
					display: flex;
					align-items: center;
					justify-content: center;
					max-height: 100%;
				}

				.${c}__item__header {
					display: none;
				}

				.${c}__item__footer {
					display: none;
					text-align: right;
				}

				.${c}__item__footer__hide {
					display: none;
				}

				
			}

		`;const d=()=>{document.head.appendChild(s),document.body.appendChild(i)},h=()=>{n.once("tick",()=>{l(i,s)})};window.addEventListener("beforeprint",d),window.addEventListener("afterprint",h);function g(I,k,L){try{i.innerHTML+=`<div class="${c}__item">
        <div class="${c}__item__header">
          ${I.replace(/</g,"&lt;").replace(/>/g,"&gt;")}
        </div>
        <div class="${c}__item__main">
          ${L}
        </div>
        <div class="${c}__item__footer ${c}__item__footer__${k?"":"hide"}">
          ${k??""}
        </div>
      </div>`}catch(O){console.error(O)}}function y(){xr.isChromeForIos?(d(),window.print()):xr.isSafari?(d(),document.execCommand("print",!1)):window.print()}const v=n.getSelectedShapeIds(),w=n.getCurrentPageId(),C=n.getPages(),P={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"};if(n.getSelectedShapeIds().length>0){const I=await n.getSvgString(v,P);if(I){const k=C.find(L=>L.id===w);g(`tldraw  ${k==null?void 0:k.name}`,null,I.svg),y()}}else{const I=n.getCurrentPage(),k=await n.getSvgString(n.getSortedChildIdsForParent(I.id),P);k&&(g(`tldraw  ${I.name}`,null,k.svg),y())}window.removeEventListener("beforeprint",d),window.removeEventListener("afterprint",h)},[n])}function RM(){const{addToast:n,removeToast:e,clearToasts:t}=rd(),{addDialog:r,clearDialogs:i,removeDialog:s}=pS(),l=An(),c=Rfe(),d=Mfe(),{cut:h,copy:g,paste:y}=ife(),v=Pfe(),w=kfe(),C=dM(),P=ks()<ai.TABLET_SM;return M.useMemo(()=>({addToast:n,removeToast:e,clearToasts:t,addDialog:r,removeDialog:s,clearDialogs:i,msg:l,isMobile:P,insertMedia:c,printSelectionOrPages:d,cut:h,copy:g,paste:y,copyAs:v,exportAs:w,getEmbedDefinition:C}),[n,e,t,r,s,i,l,P,c,d,h,g,y,v,w,C])}function Afe(n,e){const t={};for(const r of n)if(r.translations)for(const[i,s]of vo(r.translations)){let l=t[i];l||(l=t[i]={}),Object.assign(l,s)}return{actions:(r,i,s)=>{for(const l of n)l.actions&&(i=l.actions(r,i,s));return i},tools:(r,i,s)=>{for(const l of n)l.tools&&(i=l.tools(r,i,{...e,...s}));return i},translations:t}}function J9(n){return M.useMemo(()=>n,n)}function Dfe(n){const e=J9(n==null?[]:Array.isArray(n)?n:[n]);return M.useMemo(()=>{const t={};for(const r of e)if(r.translations)for(const[i,s]of vo(r.translations)){let l=t[i];l||(l=t[i]={}),Object.assign(l,s)}return t},[e])}function Ofe(n){const e=RM(),t=J9(n==null?[]:Array.isArray(n)?n:[n]);return M.useMemo(()=>Afe(t,e),[t,e])}const e7=M.createContext(null);function jfe(n){return Object.fromEntries(n.map(e=>[e.id,e]))}function nm(n,e){if(n.getSelectedShapes().length===0)return n.getDocumentSettings().name||e}function Lfe({overrides:n,children:e}){const t=xe(),r=Q0(),i=RM(),s=_o(),l=i.msg("document.default-name"),c=M.useMemo(()=>{function d(){return t.isIn("select")||(t.complete(),t.setCurrentTool("select")),!1}function h(){return t.isIn("select")&&t.getSelectedShapeIds().length>0}const g=[{id:"edit-link",label:"action.edit-link",icon:"link",onSelect(v){h()&&(d()||(s("edit-link",{source:v}),t.markHistoryStoppingPoint("edit-link"),i.addDialog({component:que})))}},{id:"insert-embed",label:"action.insert-embed",kbd:"$i",onSelect(v){s("insert-embed",{source:v}),i.addDialog({component:x9})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",onSelect(v){s("insert-media",{source:v}),i.insertMedia()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",onSelect(v){s("undo",{source:v}),t.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",onSelect(v){s("redo",{source:v}),t.redo()}},{id:"export-as-svg",label:{default:"action.export-as-svg",menu:"action.export-as-svg.short","context-menu":"action.export-as-svg.short"},readonlyOk:!0,onSelect(v){let w=t.getSelectedShapeIds();w.length===0&&(w=Array.from(t.getCurrentPageShapeIds().values())),w.length!==0&&(s("export-as",{format:"svg",source:v}),i.exportAs(w,"svg",nm(t,l)))}},{id:"export-as-png",label:{default:"action.export-as-png",menu:"action.export-as-png.short","context-menu":"action.export-as-png.short"},readonlyOk:!0,onSelect(v){let w=t.getSelectedShapeIds();w.length===0&&(w=Array.from(t.getCurrentPageShapeIds().values())),w.length!==0&&(s("export-as",{format:"png",source:v}),i.exportAs(w,"png",nm(t,l)))}},{id:"export-as-json",label:{default:"action.export-as-json",menu:"action.export-as-json.short","context-menu":"action.export-as-json.short"},readonlyOk:!0,onSelect(v){let w=t.getSelectedShapeIds();w.length===0&&(w=Array.from(t.getCurrentPageShapeIds().values())),w.length!==0&&(s("export-as",{format:"json",source:v}),i.exportAs(w,"json",nm(t,l)))}},{id:"export-all-as-svg",label:{default:"action.export-all-as-svg",menu:"action.export-all-as-svg.short","context-menu":"action.export-all-as-svg.short"},readonlyOk:!0,onSelect(v){let w=t.getSelectedShapeIds();w.length===0&&(w=Array.from(t.getCurrentPageShapeIds().values())),w.length!==0&&(s("export-all-as",{format:"svg",source:v}),i.exportAs(Array.from(t.getCurrentPageShapeIds()),"svg",nm(t,l)))}},{id:"export-all-as-png",label:{default:"action.export-all-as-png",menu:"action.export-all-as-png.short","context-menu":"action.export-all-as-png.short"},readonlyOk:!0,onSelect(v){const w=Array.from(t.getCurrentPageShapeIds().values());w.length!==0&&(s("export-all-as",{format:"png",source:v}),i.exportAs(w,"png",nm(t,l)))}},{id:"export-all-as-json",label:{default:"action.export-all-as-json",menu:"action.export-all-as-json.short","context-menu":"action.export-all-as-json.short"},readonlyOk:!0,onSelect(v){const w=Array.from(t.getCurrentPageShapeIds().values());w.length!==0&&(s("export-all-as",{format:"json",source:v}),i.exportAs(w,"json",nm(t,l)))}},{id:"copy-as-svg",label:{default:"action.copy-as-svg",menu:"action.copy-as-svg.short","context-menu":"action.copy-as-svg.short"},kbd:"$!c",readonlyOk:!0,onSelect(v){let w=t.getSelectedShapeIds();w.length===0&&(w=Array.from(t.getCurrentPageShapeIds().values())),w.length!==0&&(s("copy-as",{format:"svg",source:v}),i.copyAs(w,"svg"))}},{id:"copy-as-png",label:{default:"action.copy-as-png",menu:"action.copy-as-png.short","context-menu":"action.copy-as-png.short"},readonlyOk:!0,onSelect(v){let w=t.getSelectedShapeIds();w.length===0&&(w=Array.from(t.getCurrentPageShapeIds().values())),w.length!==0&&(s("copy-as",{format:"png",source:v}),i.copyAs(w,"png"))}},{id:"copy-as-json",label:{default:"action.copy-as-json",menu:"action.copy-as-json.short","context-menu":"action.copy-as-json.short"},readonlyOk:!0,onSelect(v){let w=t.getSelectedShapeIds();w.length===0&&(w=Array.from(t.getCurrentPageShapeIds().values())),w.length!==0&&(s("copy-as",{format:"json",source:v}),i.copyAs(w,"json"))}},{id:"toggle-auto-size",label:"action.toggle-auto-size",onSelect(v){if(!h()||d())return;s("toggle-auto-size",{source:v}),t.markHistoryStoppingPoint("toggling auto size");const w=t.getSelectedShapes().filter(C=>t.isShapeOfType(C,"text")&&C.props.autoSize===!1);t.updateShapes(w.map(C=>({id:C.id,type:C.type,props:{...C.props,w:8,autoSize:!0}}))),Ir(t,w.map(C=>C.id))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect(v){s("open-embed-link",{source:v});const w=t.getSelectedShapeIds(),C="No embed shapes selected";if(w.length!==1){console.error(C);return}const E=t.getShape(w[0]);if(!E||!t.isShapeOfType(E,"embed")){console.error(C);return}xse(E.props.url,"_blank")}},{id:"select-zoom-tool",readonlyOk:!0,kbd:"z",onSelect(v){var w,C;if(((w=t.root.getCurrent())==null?void 0:w.id)!=="zoom"&&(s("zoom-tool",{source:v}),!(t.inputs.shiftKey||t.inputs.ctrlKey))){const E=t.root.getCurrent();E&&((C=E.getCurrent())==null?void 0:C.id)==="idle"&&t.setCurrentTool("zoom",{onInteractionEnd:E.id,maskAs:"zoom"})}}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",onSelect(v){h()&&(d()||t.run(()=>{s("convert-to-bookmark",{source:v});const w=t.getSelectedShapes(),C=[],E=[];for(const P of w){if(!P||!t.isShapeOfType(P,"embed")||!P.props.url)continue;const I=new R(P.x,P.y);I.rot(-P.rotation),I.add(new R(P.props.w/2-300/2,P.props.h/2-320/2)),I.rot(P.rotation);const k={id:yr(),type:"bookmark",rotation:P.rotation,x:I.x,y:I.y,opacity:1,props:{url:P.props.url}};C.push(k),E.push(P.id)}t.markHistoryStoppingPoint("convert shapes to bookmark"),t.deleteShapes(E),t.createShapes(C)}))}},{id:"convert-to-embed",label:"action.convert-to-embed",onSelect(v){h()&&(d()||(s("convert-to-embed",{source:v}),t.run(()=>{const w=t.getSelectedShapeIds(),C=on(w.map(I=>t.getShape(I))),E=[],P=[];for(const I of C){if(!t.isShapeOfType(I,"bookmark"))continue;const{url:k}=I.props,L=i.getEmbedDefinition(k);if(!L||!L.definition)continue;const{width:O,height:z}=L.definition,F=new R(I.x,I.y);F.rot(-I.rotation),F.add(new R(I.props.w/2-O/2,I.props.h/2-z/2)),F.rot(I.rotation);const H={id:yr(),type:"embed",x:F.x,y:F.y,rotation:I.rotation,props:{url:k,w:O,h:z}};E.push(H),P.push(I.id)}t.markHistoryStoppingPoint("convert shapes to embed"),t.deleteShapes(P),t.createShapes(E)})))}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",onSelect(v){if(!h()||d())return;s("duplicate-shapes",{source:v});const w=t.getInstanceState();let C,E;if(w.duplicateProps)C=w.duplicateProps.shapeIds,E=w.duplicateProps.offset;else{C=t.getSelectedShapeIds();const P=Xe.Common(on(C.map(I=>t.getShapePageBounds(I))));E=t.getCameraOptions().isLocked?{x:t.options.adjacentShapeMargin,y:t.options.adjacentShapeMargin}:{x:P.width+t.options.adjacentShapeMargin,y:0}}t.markHistoryStoppingPoint("duplicate shapes"),t.duplicateShapes(C,E),w.duplicateProps&&t.updateInstanceState({duplicateProps:{...w.duplicateProps,shapeIds:t.getSelectedShapeIds()}})}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",onSelect(v){h()&&(d()||(s("ungroup-shapes",{source:v}),t.markHistoryStoppingPoint("ungroup"),t.ungroupShapes(t.getSelectedShapeIds())))}},{id:"group",label:"action.group",kbd:"$g",icon:"group",onSelect(v){if(!h()||d())return;s("group-shapes",{source:v});const w=t.getOnlySelectedShape();w&&t.isShapeOfType(w,"group")?(t.markHistoryStoppingPoint("ungroup"),t.ungroupShapes(t.getSelectedShapeIds())):(t.markHistoryStoppingPoint("group"),t.groupShapes(t.getSelectedShapeIds()))}},{id:"remove-frame",label:"action.remove-frame",kbd:"$!f",onSelect(v){if(!h())return;s("remove-frame",{source:v});const w=t.getSelectedShapes();w.length>0&&w.every(C=>t.isShapeOfType(C,"frame"))&&(t.markHistoryStoppingPoint("remove-frame"),Pue(t,w.map(C=>C.id)))}},{id:"fit-frame-to-content",label:"action.fit-frame-to-content",onSelect(v){if(!h())return;s("fit-frame-to-content",{source:v});const w=t.getOnlySelectedShape();w&&t.isShapeOfType(w,"frame")&&(t.markHistoryStoppingPoint("fit-frame-to-content"),Iue(t,w.id))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",onSelect(v){if(!h()||d())return;s("align-shapes",{operation:"left",source:v}),t.markHistoryStoppingPoint("align left");const w=t.getSelectedShapeIds();t.alignShapes(w,"left"),Ir(t,w)}},{id:"align-center-horizontal",label:{default:"action.align-center-horizontal","context-menu":"action.align-center-horizontal.short"},kbd:"?H",icon:"align-center-horizontal",onSelect(v){if(!h()||d())return;s("align-shapes",{operation:"center-horizontal",source:v}),t.markHistoryStoppingPoint("align center horizontal");const w=t.getSelectedShapeIds();t.alignShapes(w,"center-horizontal"),Ir(t,w)}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",onSelect(v){if(!h()||d())return;s("align-shapes",{operation:"right",source:v}),t.markHistoryStoppingPoint("align right");const w=t.getSelectedShapeIds();t.alignShapes(w,"right"),Ir(t,w)}},{id:"align-center-vertical",label:{default:"action.align-center-vertical","context-menu":"action.align-center-vertical.short"},kbd:"?V",icon:"align-center-vertical",onSelect(v){if(!h()||d())return;s("align-shapes",{operation:"center-vertical",source:v}),t.markHistoryStoppingPoint("align center vertical");const w=t.getSelectedShapeIds();t.alignShapes(w,"center-vertical"),Ir(t,w)}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",onSelect(v){if(!h()||d())return;s("align-shapes",{operation:"top",source:v}),t.markHistoryStoppingPoint("align top");const w=t.getSelectedShapeIds();t.alignShapes(w,"top"),Ir(t,w)}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",onSelect(v){if(!h()||d())return;s("align-shapes",{operation:"bottom",source:v}),t.markHistoryStoppingPoint("align bottom");const w=t.getSelectedShapeIds();t.alignShapes(w,"bottom"),Ir(t,w)}},{id:"distribute-horizontal",label:{default:"action.distribute-horizontal","context-menu":"action.distribute-horizontal.short"},icon:"distribute-horizontal",kbd:"?!h",onSelect(v){if(!h()||d())return;s("distribute-shapes",{operation:"horizontal",source:v}),t.markHistoryStoppingPoint("distribute horizontal");const w=t.getSelectedShapeIds();t.distributeShapes(w,"horizontal"),Ir(t,w)}},{id:"distribute-vertical",label:{default:"action.distribute-vertical","context-menu":"action.distribute-vertical.short"},icon:"distribute-vertical",kbd:"?!V",onSelect(v){if(!h()||d())return;s("distribute-shapes",{operation:"vertical",source:v}),t.markHistoryStoppingPoint("distribute vertical");const w=t.getSelectedShapeIds();t.distributeShapes(w,"vertical"),Ir(t,w)}},{id:"stretch-horizontal",label:{default:"action.stretch-horizontal","context-menu":"action.stretch-horizontal.short"},icon:"stretch-horizontal",onSelect(v){if(!h()||d())return;s("stretch-shapes",{operation:"horizontal",source:v}),t.markHistoryStoppingPoint("stretch horizontal");const w=t.getSelectedShapeIds();t.stretchShapes(w,"horizontal"),Ir(t,w)}},{id:"stretch-vertical",label:{default:"action.stretch-vertical","context-menu":"action.stretch-vertical.short"},icon:"stretch-vertical",onSelect(v){if(!h()||d())return;s("stretch-shapes",{operation:"vertical",source:v}),t.markHistoryStoppingPoint("stretch vertical");const w=t.getSelectedShapeIds();t.stretchShapes(w,"vertical"),Ir(t,w)}},{id:"flip-horizontal",label:{default:"action.flip-horizontal","context-menu":"action.flip-horizontal.short"},kbd:"!h",onSelect(v){if(!h()||d())return;s("flip-shapes",{operation:"horizontal",source:v}),t.markHistoryStoppingPoint("flip horizontal");const w=t.getSelectedShapeIds();t.flipShapes(w,"horizontal"),Ir(t,w)}},{id:"flip-vertical",label:{default:"action.flip-vertical","context-menu":"action.flip-vertical.short"},kbd:"!v",onSelect(v){if(!h()||d())return;s("flip-shapes",{operation:"vertical",source:v}),t.markHistoryStoppingPoint("flip vertical");const w=t.getSelectedShapeIds();t.flipShapes(w,"vertical"),Ir(t,w)}},{id:"pack",label:"action.pack",icon:"pack",onSelect(v){if(!h()||d())return;s("pack-shapes",{source:v}),t.markHistoryStoppingPoint("pack");const w=t.getSelectedShapeIds();t.packShapes(w,t.options.adjacentShapeMargin),Ir(t,w)}},{id:"stack-vertical",label:{default:"action.stack-vertical","context-menu":"action.stack-vertical.short"},icon:"stack-vertical",onSelect(v){if(!h()||d())return;s("stack-shapes",{operation:"vertical",source:v}),t.markHistoryStoppingPoint("stack-vertical");const w=t.getSelectedShapeIds();t.stackShapes(w,"vertical",16),Ir(t,w)}},{id:"stack-horizontal",label:{default:"action.stack-horizontal","context-menu":"action.stack-horizontal.short"},icon:"stack-horizontal",onSelect(v){if(!h()||d())return;s("stack-shapes",{operation:"horizontal",source:v}),t.markHistoryStoppingPoint("stack-horizontal");const w=t.getSelectedShapeIds();t.stackShapes(w,"horizontal",16),Ir(t,w)}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",onSelect(v){h()&&(d()||(s("reorder-shapes",{operation:"toFront",source:v}),t.markHistoryStoppingPoint("bring to front"),t.bringToFront(t.getSelectedShapeIds())))}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",onSelect(v){h()&&(d()||(s("reorder-shapes",{operation:"forward",source:v}),t.markHistoryStoppingPoint("bring forward"),t.bringForward(t.getSelectedShapeIds())))}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",onSelect(v){h()&&(d()||(s("reorder-shapes",{operation:"backward",source:v}),t.markHistoryStoppingPoint("send backward"),t.sendBackward(t.getSelectedShapeIds())))}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",onSelect(v){h()&&(d()||(s("reorder-shapes",{operation:"toBack",source:v}),t.markHistoryStoppingPoint("send to back"),t.sendToBack(t.getSelectedShapeIds())))}},{id:"cut",label:"action.cut",kbd:"$x",onSelect(v){h()&&(d()||(t.markHistoryStoppingPoint("cut"),i.cut(v)))}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect(v){h()&&(d()||i.copy(v))}},{id:"paste",label:"action.paste",kbd:"$v",onSelect(v){var w;(w=navigator.clipboard)==null||w.read().then(C=>{i.paste(C,v,v==="context-menu"?t.inputs.currentPagePoint:void 0)}).catch(()=>{i.addToast({title:i.msg("action.paste-error-title"),description:i.msg("action.paste-error-description"),severity:"error"})})}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect(v){t.run(()=>{d()||(s("select-all-shapes",{source:v}),t.markHistoryStoppingPoint("select all kbd"),t.selectAll())})}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect(v){h()&&(d()||(s("select-none-shapes",{source:v}),t.markHistoryStoppingPoint("select none"),t.selectNone()))}},{id:"delete",label:"action.delete",kbd:",del,backspace",icon:"trash",onSelect(v){h()&&(d()||(s("delete-shapes",{source:v}),t.markHistoryStoppingPoint("delete"),t.deleteShapes(t.getSelectedShapeIds())))}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",onSelect(v){if(!h()||d())return;s("rotate-cw",{source:v}),t.markHistoryStoppingPoint("rotate-cw");const w=t.getSelectionRotation()%(Pr/2),C=gf(w,0)||gf(w,Pr/2),E=t.getSelectedShapeIds();t.rotateShapesBy(E,Pr/2-(C?0:w)),Ir(t,E)}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",onSelect(v){if(!h()||d())return;s("rotate-ccw",{source:v}),t.markHistoryStoppingPoint("rotate-ccw");const w=t.getSelectionRotation()%(Pr/2),C=gf(w,0),E=t.getSelectedShapeIds();t.rotateShapesBy(E,C?-(Pr/2):-w),Ir(t,E)}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect(v){s("zoom-in",{source:v}),t.zoomIn(void 0,{animation:{duration:t.options.animationMediumMs}})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect(v){s("zoom-out",{source:v}),t.zoomOut(void 0,{animation:{duration:t.options.animationMediumMs}})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect(v){s("reset-zoom",{source:v}),t.resetZoom(void 0,{animation:{duration:t.options.animationMediumMs}})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect(v){s("zoom-to-fit",{source:v}),t.zoomToFit({animation:{duration:t.options.animationMediumMs}})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect(v){h()&&(d()||(s("zoom-to-selection",{source:v}),t.zoomToSelection({animation:{duration:t.options.animationMediumMs}})))}},{id:"toggle-snap-mode",label:{default:"action.toggle-snap-mode",menu:"action.toggle-snap-mode.menu"},onSelect(v){s("toggle-snap-mode",{source:v}),t.user.updateUserPreferences({isSnapMode:!t.user.getIsSnapMode()})},checkbox:!0},{id:"toggle-dark-mode",label:{default:"action.toggle-dark-mode",menu:"action.toggle-dark-mode.menu"},kbd:"$/",readonlyOk:!0,onSelect(v){const w=t.user.getIsDarkMode()?"light":"dark";s("color-scheme",{source:v,value:w}),t.user.updateUserPreferences({colorScheme:w})},checkbox:!0},{id:"toggle-wrap-mode",label:{default:"action.toggle-wrap-mode",menu:"action.toggle-wrap-mode.menu"},readonlyOk:!0,onSelect(v){s("toggle-wrap-mode",{source:v}),t.user.updateUserPreferences({isWrapMode:!t.user.getIsWrapMode()})},checkbox:!0},{id:"toggle-dynamic-size-mode",label:{default:"action.toggle-dynamic-size-mode",menu:"action.toggle-dynamic-size-mode.menu"},readonlyOk:!1,onSelect(v){s("toggle-dynamic-size-mode",{source:v}),t.user.updateUserPreferences({isDynamicSizeMode:!t.user.getIsDynamicResizeMode()})},checkbox:!0},{id:"toggle-paste-at-cursor",label:{default:"action.toggle-paste-at-cursor",menu:"action.toggle-paste-at-cursor.menu"},readonlyOk:!1,onSelect(v){s("toggle-paste-at-cursor",{source:v}),t.user.updateUserPreferences({isPasteAtCursorMode:!t.user.getIsPasteAtCursorMode()})},checkbox:!0},{id:"toggle-reduce-motion",label:{default:"action.toggle-reduce-motion",menu:"action.toggle-reduce-motion.menu"},readonlyOk:!0,onSelect(v){s("toggle-reduce-motion",{source:v}),t.user.updateUserPreferences({animationSpeed:t.user.getAnimationSpeed()===0?1:0})},checkbox:!0},{id:"toggle-edge-scrolling",label:{default:"action.toggle-edge-scrolling",menu:"action.toggle-edge-scrolling.menu"},readonlyOk:!0,onSelect(v){s("toggle-edge-scrolling",{source:v}),t.user.updateUserPreferences({edgeScrollSpeed:t.user.getEdgeScrollSpeed()===0?1:0})},checkbox:!0},{id:"toggle-transparent",label:{default:"action.toggle-transparent",menu:"action.toggle-transparent.menu","context-menu":"action.toggle-transparent.context-menu"},readonlyOk:!0,onSelect(v){s("toggle-transparent",{source:v}),t.updateInstanceState({exportBackground:!t.getInstanceState().exportBackground})},checkbox:!0},{id:"toggle-tool-lock",label:{default:"action.toggle-tool-lock",menu:"action.toggle-tool-lock.menu"},kbd:"q",onSelect(v){s("toggle-tool-lock",{source:v}),t.updateInstanceState({isToolLocked:!t.getInstanceState().isToolLocked})},checkbox:!0},{id:"unlock-all",label:"action.unlock-all",onSelect(v){s("unlock-all",{source:v});const w=[];for(const C of t.getCurrentPageShapes())C.isLocked&&w.push({id:C.id,type:C.type,isLocked:!1});w.length>0&&t.updateShapes(w)}},{id:"toggle-focus-mode",label:{default:"action.toggle-focus-mode",menu:"action.toggle-focus-mode.menu"},readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect(v){t.timers.requestAnimationFrame(()=>{t.run(()=>{s("toggle-focus-mode",{source:v}),i.clearDialogs(),i.clearToasts(),t.updateInstanceState({isFocusMode:!t.getInstanceState().isFocusMode})})})}},{id:"toggle-grid",label:{default:"action.toggle-grid",menu:"action.toggle-grid.menu"},readonlyOk:!0,kbd:"$'",onSelect(v){s("toggle-grid-mode",{source:v}),t.updateInstanceState({isGridMode:!t.getInstanceState().isGridMode})},checkbox:!0},{id:"toggle-debug-mode",label:{default:"action.toggle-debug-mode",menu:"action.toggle-debug-mode.menu"},readonlyOk:!0,onSelect(v){s("toggle-debug-mode",{source:v}),t.updateInstanceState({isDebugMode:!t.getInstanceState().isDebugMode})},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect(v){s("print",{source:v}),i.printSelectionOrPages()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect(v){s("exit-pen-mode",{source:v}),t.updateInstanceState({isPenMode:!1})}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect(v){s("stop-following",{source:v}),t.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect(v){s("zoom-to-content",{source:v});const w=t.getSelectionPageBounds()??t.getCurrentPageBounds();w&&t.zoomToBounds(w,{targetZoom:Math.min(1,t.getZoomLevel()),animation:{duration:220}})}},{id:"toggle-lock",label:"action.toggle-lock",kbd:"!l",onSelect(v){t.markHistoryStoppingPoint("locking"),s("toggle-lock",{source:v}),t.toggleLock(t.getSelectedShapeIds())}},{id:"move-to-new-page",label:"context.pages.new-page",onSelect(v){const w=La.createId(),C=t.getSelectedShapeIds();t.run(()=>{t.markHistoryStoppingPoint("move_shapes_to_page"),t.createPage({name:i.msg("page-menu.new-page-initial-name"),id:w}),t.moveShapesToPage(C,w)}),s("move-to-new-page",{source:v})}},{id:"select-white-color",label:"color-style.white",kbd:"?t",onSelect(v){const w=ja;t.run(()=>{t.markHistoryStoppingPoint("change-color"),t.isIn("select")&&t.setStyleForSelectedShapes(w,"white"),t.setStyleForNextShapes(w,"white")}),s("set-style",{source:v,id:w.id,value:"white"})}},{id:"select-fill-fill",label:"fill-style.fill",kbd:"?f",onSelect(v){const w=Hh;t.run(()=>{t.markHistoryStoppingPoint("change-fill"),t.isIn("select")&&t.setStyleForSelectedShapes(w,"fill"),t.setStyleForNextShapes(w,"fill")}),s("set-style",{source:v,id:w.id,value:"fill"})}},{id:"flatten-to-image",label:"action.flatten-to-image",kbd:"!f",onSelect:async v=>{const w=t.getSelectedShapeIds();if(w.length===0)return;t.markHistoryStoppingPoint("flattening to image"),s("flatten-to-image",{source:v});const C=await nde(t,w,t.options.flattenImageBoundsExpand);C!=null&&C.length&&t.setSelectedShapes(C)}}];r&&g.push({id:"open-cursor-chat",label:"action.open-cursor-chat",readonlyOk:!0,kbd:"/",onSelect(v){s("open-cursor-chat",{source:v}),!t.getInstanceState().isCoarsePointer&&t.timers.requestAnimationFrame(()=>{t.updateInstanceState({isChatting:!0})})}});const y=jfe(g);return n?n(t,y,i):y},[i,t,s,n,l,r]);return m.jsx(e7.Provider,{value:c,children:e})}function np(){const n=M.useContext(e7);if(!n)throw new Error("useTools must be used within a ToolProvider");return n}function hEe(n){return n}function vS(n,e){return n?typeof n=="string"?n:e?n[e]??n.default:void 0:void 0}function Ha(){const n=pf();return Pe("isReadonlyMode",()=>!!(n!=null&&n.getIsReadonly()),[n])}const Nfe=xr.isDarwin?"":"Ctrl",Ffe=xr.isDarwin?"":"Alt";function t7(n){return n===","?[","]:n.split(",")[0].split("").map(e=>{const t=e.replace(/\$/g,Nfe).replace(/\?/g,Ffe).replace(/!/g,"");return t[0].toUpperCase()+t.slice(1)})}function MM(n){return" "+t7(n).join("")}function SS({children:n,visibleOnMobileLayout:e=!1}){const t=ks();return!e&&t<ai.MOBILE?null:m.jsx("kbd",{className:"tlui-kbd",children:t7(n).map((r,i)=>m.jsx("span",{children:r},i))})}const n7=M.createContext(null);function c1(){const n=M.useContext(n7);if(!n)throw new Error("useTldrawUiMenuContext must be used within a TldrawUiMenuContextProvider");return n}function yl({type:n,sourceId:e,children:t}){return m.jsx(n7.Provider,{value:{type:n,sourceId:e},children:t})}function u1({id:n,kbd:e,label:t,readonlyOk:r,onSelect:i,toggle:s=!1,disabled:l=!1,checked:c=!1}){const{type:d,sourceId:h}=c1(),g=Ha(),y=An();if(g&&!r)return null;const v=vS(t,d),w=v?y(v):void 0;switch(d){case"menu":return m.jsxs(bue,{dir:"ltr",className:"tlui-button tlui-button__menu tlui-button__checkbox",title:w,onSelect:C=>{i==null||i(h),mn(C)},disabled:l,checked:c,children:[m.jsx(Qc,{small:!0,icon:s?c?"toggle-on":"toggle-off":c?"check":"none"}),w&&m.jsx("span",{className:"tlui-button__label",draggable:!1,children:w}),e&&m.jsx(SS,{children:e})]});case"context-menu":return m.jsxs(Qce,{className:"tlui-button tlui-button__menu tlui-button__checkbox",dir:"ltr",title:w,onSelect:C=>{i(h),mn(C)},disabled:l,checked:c,children:[m.jsx(Qc,{small:!0,icon:s?c?"toggle-on":"toggle-off":c?"check":"none"}),w&&m.jsx("span",{className:"tlui-button__label",draggable:!1,children:w}),e&&m.jsx(SS,{children:e})]},n);default:return null}}function id(n,e){const t=pf(),r=M.useCallback(l=>{l&&(t==null||t.complete()),e==null||e(l)},[t,e]),i=_o(),s=M.useCallback(l=>{i(l,{source:"unknown",id:n})},[n,i]);return dse(t?`${n}-${t.contextId}`:n,r,s)}function rp({id:n,children:e,modal:t=!1,debugOpen:r=!1}){const[i,s]=id(n);return m.jsx(eM,{open:r||i,dir:"ltr",modal:t,onOpenChange:s,children:e})}function ip({children:n,...e}){return m.jsx(tM,{dir:"ltr",asChild:!0,onTouchEnd:t=>mn(t),...e,children:n})}function op({className:n,side:e="bottom",align:t="start",sideOffset:r=8,alignOffset:i=8,children:s}){const l=Hi();return m.jsx(K0,{container:l,children:m.jsx(nM,{className:It("tlui-menu",n),side:e,sideOffset:r,align:t,alignOffset:i,collisionPadding:4,children:s})})}function zfe({id:n,children:e}){const[t,r]=id(n);return m.jsx(Cue,{open:t,onOpenChange:r,children:e})}function Ufe({id:n,label:e,title:t,disabled:r}){return m.jsx(Eue,{dir:"ltr",asChild:!0,disabled:r,children:m.jsxs(Dt,{"data-testid":n,type:"menu",className:"tlui-menu__submenu__trigger",disabled:r,title:t,children:[m.jsx(bi,{children:e}),m.jsx(In,{icon:"chevron-right",small:!0})]})})}function $fe({id:n,alignOffset:e=-1,sideOffset:t=-6,size:r="small",children:i}){const s=Hi();return m.jsx(K0,{container:s,children:m.jsx(_ue,{"data-testid":n,className:"tlui-menu tlui-menu__submenu__content",alignOffset:e,sideOffset:t,collisionPadding:4,"data-size":r,children:i})})}function Bfe({children:n}){return m.jsx(xue,{dir:"ltr",className:"tlui-menu__group",children:n})}function xS({noClose:n,children:e}){return m.jsx(wue,{dir:"ltr",asChild:!0,onClick:n?mn:void 0,children:e})}function fn({id:n,label:e,children:t}){const{type:r,sourceId:i}=c1(),s=An(),l=vS(e,r),c=l?s(l):void 0;switch(r){case"panel":return m.jsx("div",{className:"tlui-menu__group","data-testid":`${i}-group.${n}`,children:t});case"menu":return m.jsx(Bfe,{"data-testid":`${i}-group.${n}`,children:t});case"context-menu":return m.jsx(jB,{dir:"ltr",className:"tlui-menu__group","data-testid":`${i}-group.${n}`,children:t});case"keyboard-shortcuts":return m.jsxs("div",{className:"tlui-shortcuts-dialog__group","data-testid":`${i}-group.${n}`,children:[m.jsx("h2",{className:"tlui-shortcuts-dialog__group__title",children:c}),m.jsx("div",{className:"tlui-shortcuts-dialog__group__content",children:t})]});default:return t}}function ca({id:n,disabled:e=!1,label:t,size:r="small",children:i}){const{type:s,sourceId:l}=c1(),c=Hi(),d=An(),h=t?typeof t=="string"?t:t[s]??t.default:void 0,g=h?d(h):void 0;switch(s){case"menu":return m.jsxs(zfe,{id:`${l}-sub.${n}`,children:[m.jsx(Ufe,{id:`${l}-sub.${n}-button`,disabled:e,label:g,title:g}),m.jsx($fe,{id:`${l}-sub.${n}-content`,size:r,children:i})]});case"context-menu":return e?null:m.jsxs(Hfe,{id:`${l}-sub.${n}`,children:[m.jsx(zB,{dir:"ltr",disabled:e,asChild:!0,children:m.jsxs(Dt,{"data-testid":`${l}-sub.${n}-button`,type:"menu",className:"tlui-menu__submenu__trigger",children:[m.jsx(bi,{children:g}),m.jsx(In,{icon:"chevron-right",small:!0})]})}),m.jsx(QR,{container:c,children:m.jsx(UB,{"data-testid":`${l}-sub.${n}-content`,className:"tlui-menu tlui-menu__submenu__content",alignOffset:-1,sideOffset:-4,collisionPadding:4,"data-size":r,children:i})})]});default:return i}}function Hfe({id:n,children:e}){const[t,r]=id(n);return m.jsx(FB,{open:t,onOpenChange:r,children:e})}const Vfe=[{colorScheme:"light",label:"theme.light"},{colorScheme:"dark",label:"theme.dark"},{colorScheme:"system",label:"theme.system"}];function Kfe(){const n=xe(),e=_o(),t=Pe("colorScheme",()=>n.user.getUserPreferences().colorScheme??(n.user.getIsDarkMode()?"dark":"light"),[n]);return m.jsx(ca,{id:"help menu color-scheme",label:"menu.theme",children:m.jsx(fn,{id:"theme",children:Vfe.map(({colorScheme:r,label:i})=>m.jsx(u1,{id:`color-scheme-${r}`,label:i,checked:r===t,readonlyOk:!0,onSelect:()=>{n.user.updateUserPreferences({colorScheme:r}),e("color-scheme",{source:"menu",value:r})}},r))})})}const Wfe=({id:n,component:e,onClose:t})=>{const{removeDialog:r}=pS(),i=Hi(),s=M.useCallback(l=>{if(!l){if(t)try{t()}catch(c){console.warn(c)}r(n)}},[n,t,r]);return m.jsx(Vue,{onOpenChange:s,defaultOpen:!0,children:m.jsx(Kue,{container:i,children:m.jsx(Wue,{dir:"ltr",className:"tlui-dialog__overlay",onClick:l=>{l.target===l.currentTarget&&s(!1)},children:m.jsx(Gue,{dir:"ltr",className:"tlui-dialog__content","aria-describedby":void 0,children:m.jsx(e,{onClose:()=>s(!1)})})})})})},Gfe=M.memo(function(){const{dialogs:e}=pS();return Pe("dialogs",()=>e.get(),[e]).map(r=>m.jsx(Wfe,{...r},r.id))}),qfe=4e3,Yfe={success:"check-circle",warning:"warning-triangle",error:"cross-circle",info:"info-circle"};function Xfe({toast:n}){const{removeToast:e}=rd(),t=An(),r=l=>{l||e(n.id)},i=n.actions&&n.actions.length>0,s=n.icon||n.severity&&Yfe[n.severity];return m.jsxs(Ede,{onOpenChange:r,className:"tlui-toast__container",duration:n.keepOpen?1/0:qfe,"data-severity":n.severity,children:[s&&m.jsx("div",{className:"tlui-toast__icon",children:m.jsx(Qc,{icon:s})}),m.jsxs("div",{className:"tlui-toast__main","data-title":!!n.title,"data-description":!!n.description,"data-actions":!!n.actions,children:[m.jsxs("div",{className:"tlui-toast__content",children:[n.title&&m.jsx(_de,{className:"tlui-toast__title",children:n.title}),n.description&&m.jsx(Pde,{className:"tlui-toast__description",children:n.description})]}),n.actions&&m.jsxs("div",{className:"tlui-toast__actions",children:[n.actions.map((l,c)=>m.jsx(Tde,{altText:l.label,asChild:!0,onClick:l.onClick,children:m.jsx(Dt,{type:l.type,children:m.jsx(bi,{children:l.label})})},c)),m.jsx(N9,{asChild:!0,children:m.jsx(Dt,{type:"normal",className:"tlui-toast__close",style:{marginLeft:"auto"},children:m.jsx(bi,{children:n.closeLabel??t("toast.close")})})})]})]}),!i&&m.jsx(N9,{asChild:!0,children:m.jsx(Dt,{type:"normal",className:"tlui-toast__close",children:m.jsx(bi,{children:n.closeLabel??t("toast.close")})})})]})}const Zfe=M.memo(function(){const{toasts:e}=rd(),t=Pe("toasts",()=>e.get(),[]);return m.jsxs(m.Fragment,{children:[t.map(r=>m.jsx(Xfe,{toast:r},r.id)),m.jsx(P9,{className:"tlui-toast__viewport"})]})});function oc({actionId:n="",...e}){const r=np()[n];return r?m.jsx(u1,{...r,...e}):null}function r7(n){return m.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",...n,children:m.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[m.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),m.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:m.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}function To({disabled:n=!1,spinner:e=!1,readonlyOk:t=!1,id:r,kbd:i,label:s,icon:l,onSelect:c,noClose:d,isSelected:h}){const{type:g,sourceId:y}=c1(),v=An(),[w,C]=M.useState(!1);if(Ha()&&!t)return null;const P=vS(s,g),I=i?MM(i):void 0,k=P?v(P):void 0,L=k&&I?`${k} ${I}`:k;switch(g){case"menu":return m.jsx(xS,{children:m.jsxs(Dt,{type:"menu","data-testid":`${y}.${r}`,disabled:n,title:L,onClick:O=>{d&&mn(O),w?C(!1):c(y)},children:[m.jsx(bi,{children:k}),i&&m.jsx(SS,{children:i})]})});case"context-menu":return n?null:m.jsxs(LB,{dir:"ltr",title:L,draggable:!1,className:"tlui-button tlui-button__menu","data-testid":`${y}.${r}`,onSelect:O=>{d&&mn(O),w?C(!1):c(y)},children:[m.jsx("span",{className:"tlui-button__label",draggable:!1,children:k}),i&&m.jsx(SS,{children:i}),e&&m.jsx(r7,{})]});case"panel":return m.jsxs(Dt,{"data-testid":`${y}.${r}`,type:"menu",title:L,disabled:n,onClick:()=>c(y),children:[m.jsx(bi,{children:k}),e?m.jsx(r7,{}):l&&m.jsx(In,{icon:l})]});case"small-icons":case"icons":return m.jsx(Dt,{"data-testid":`${y}.${r}`,type:"icon",title:L,disabled:n,onClick:()=>c(y),children:m.jsx(In,{icon:l,small:g==="small-icons"})});case"keyboard-shortcuts":return i?m.jsxs("div",{className:"tlui-shortcuts-dialog__key-pair","data-testid":`${y}.${r}`,children:[m.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:k}),m.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:m.jsx(SS,{visibleOnMobileLayout:!0,children:i})})]}):(console.warn(`Menu item '${s}' isn't shown in the keyboard shortcuts dialog because it doesn't have a keyboard shortcut.`),null);case"helper-buttons":return m.jsxs(Dt,{type:"low",onClick:()=>c(y),children:[m.jsx(In,{icon:l}),m.jsx(bi,{children:k})]});case"toolbar":return m.jsx(Dt,{type:"tool","data-testid":`tools.${r}`,"aria-label":P,"data-value":r,onClick:()=>c("toolbar"),title:L,disabled:n,onTouchStart:O=>{mn(O),c("toolbar")},role:"radio","aria-checked":h?"true":"false",children:m.jsx(In,{icon:l})});case"toolbar-overflow":return m.jsx(xS,{"aria-label":s,children:m.jsx(Dt,{type:"icon",className:"tlui-button-grid__button",onClick:()=>{c("toolbar")},"data-testid":`tools.more.${r}`,title:L,disabled:n,role:"radio","aria-checked":h?"true":"false","data-value":r,children:m.jsx(In,{icon:l})})});default:throw Bi(g)}}function Ne({actionId:n="",...e}){const r=np()[n];return r?m.jsx(To,{...r,...e}):null}const i7=M.createContext(null);function Qfe({overrides:n,children:e}){const t=xe(),r=_o(),i=RM(),s=M.useMemo(()=>{const l=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect(d){if(t.isIn("select")){const h=t.root.getCurrent();h.exit({},h.id),h.enter({},h.id)}t.setCurrentTool("select"),r("select-tool",{source:d,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect(d){t.setCurrentTool("hand"),r("select-tool",{source:d,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",onSelect(d){t.setCurrentTool("eraser"),r("select-tool",{source:d,id:"eraser"})}},{id:"draw",label:"tool.draw",icon:"tool-pencil",kbd:"d,b,x",onSelect(d){t.setCurrentTool("draw"),r("select-tool",{source:d,id:"draw"})}},...[...ql.values].map(d=>({id:d,label:`tool.${d}`,meta:{geo:d},kbd:d==="rectangle"?"r":d==="ellipse"?"o":void 0,icon:"geo-"+d,onSelect(h){t.run(()=>{t.setStyleForNextShapes(ql,d),t.setCurrentTool("geo"),r("select-tool",{source:h,id:`geo-${d}`})})}})),{id:"arrow",label:"tool.arrow",icon:"tool-arrow",kbd:"a",onSelect(d){t.setCurrentTool("arrow"),r("select-tool",{source:d,id:"arrow"})}},{id:"line",label:"tool.line",icon:"tool-line",kbd:"l",onSelect(d){t.setCurrentTool("line"),r("select-tool",{source:d,id:"line"})}},{id:"frame",label:"tool.frame",icon:"tool-frame",kbd:"f",onSelect(d){t.setCurrentTool("frame"),r("select-tool",{source:d,id:"frame"})}},{id:"text",label:"tool.text",icon:"tool-text",kbd:"t",onSelect(d){t.setCurrentTool("text"),r("select-tool",{source:d,id:"text"})}},{id:"asset",label:"tool.asset",icon:"tool-media",kbd:"$u",onSelect(d){i.insertMedia(),r("select-tool",{source:d,id:"media"})}},{id:"note",label:"tool.note",icon:"tool-note",kbd:"n",onSelect(d){t.setCurrentTool("note"),r("select-tool",{source:d,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect(d){t.setCurrentTool("laser"),r("select-tool",{source:d,id:"laser"})}},{id:"embed",label:"tool.embed",icon:"dot",onSelect(d){i.addDialog({component:x9}),r("select-tool",{source:d,id:"embed"})}},{id:"highlight",label:"tool.highlight",icon:"tool-highlight",kbd:"!d",onSelect(d){t.setCurrentTool("highlight"),r("select-tool",{source:d,id:"highlight"})}}];l.push();const c=Object.fromEntries(l.map(d=>[d.id,d]));return n?n(t,c,i):c},[n,t,r,i]);return m.jsx(i7.Provider,{value:s,children:e})}function AM(){const n=M.useContext(i7);if(!n)throw new Error("useTools must be used within a ToolProvider");return n}function ua({toolId:n="",...e}){const r=AM()[n];return r?m.jsx(To,{...r,...e}):null}function Jfe({children:n}){const e=xe();return Pe("shouldDisplayHandles",()=>{if(e.isInAny("select.idle","select.pointing_handle","select.pointing_shape"))return!0;if(e.isInAny("select.editing_shape")){const r=e.getOnlySelectedShape();return r&&e.isShapeOfType(r,"note")}return!1},[e])?m.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:n}):null}const{PI:ehe}=Math,rm=ehe+1e-4;function o7(n,e={}){const{size:t=16,smoothing:r=.5}=e;if(n.length===0||t<=0)return{left:[],right:[]};const i=n[0],s=n[n.length-1],l=s.runningLength,c=Math.pow(t*r,2),d=[],h=[];let g=n[0].vector,y=n[0].point,v=y,w=y,C=v,E=!1,P;for(let I=0;I<n.length;I++){P=n[I];const{point:k,vector:L}=n[I],O=P.vector.dpr(g),z=(I<n.length-1?n[I+1]:n[I]).vector,F=I<n.length-1?z.dpr(P.vector):1,H=O<0&&!E,V=F!==null&&F<.2;if(H||V){if(F>-.62&&l-P.runningLength>P.radius){const q=g.clone().mul(P.radius);g.clone().cpr(z)<0?(w=R.Add(k,q),C=R.Sub(k,q)):(w=R.Sub(k,q),C=R.Add(k,q)),d.push(w),h.push(C)}else{const q=g.clone().mul(P.radius).per(),J=R.Sub(P.input,q);for(let ie=1/13,W=0;W<1;W+=ie)w=R.RotWith(J,P.input,rm*W),d.push(w),C=R.RotWith(J,P.input,rm+rm*-W),h.push(C)}y=w,v=C,V&&(E=!0);continue}if(E=!1,P===i||P===s){const q=R.Per(L).mul(P.radius);d.push(R.Sub(k,q)),h.push(R.Add(k,q));continue}const re=R.Lrp(z,L,F).per().mul(P.radius);w=R.Sub(k,re),(I<=1||R.Dist2(y,w)>c)&&(d.push(w),y=w),C=R.Add(k,re),(I<=1||R.Dist2(v,C)>c)&&(h.push(C),v=C),g=L}return{left:d,right:h}}function DM(n,e={}){const{size:t=16,start:r={},end:i={},last:s=!1}=e,{cap:l=!0}=r,{cap:c=!0}=i;if(n.length===0||t<=0)return[];const d=n[0],h=n[n.length-1],g=h.runningLength,y=r.taper===!1?0:r.taper===!0?Math.max(t,g):r.taper,v=i.taper===!1?0:i.taper===!0?Math.max(t,g):i.taper,{left:w,right:C}=o7(n,e),E=d.point,P=n.length>1?n[n.length-1].point:R.AddXY(d.point,1,1);if(n.length===1&&(!(y||v)||s)){const O=R.Add(E,R.Sub(E,P).uni().per().mul(-d.radius)),z=[];for(let F=1/13,H=F;H<=1;H+=F)z.push(R.RotWith(O,E,rm*2*H));return z}const I=[];if(!(y||v&&n.length===1))if(l)for(let O=1/8,z=O;z<=1;z+=O){const F=R.RotWith(C[0],E,rm*z);I.push(F)}else{const O=R.Sub(w[0],C[0]),z=R.Mul(O,.5),F=R.Mul(O,.51);I.push(R.Sub(E,z),R.Sub(E,F),R.Add(E,F),R.Add(E,z))}const k=[],L=h.vector.clone().per().neg();if(v||y&&n.length===1)k.push(P);else if(c){const O=R.Add(P,R.Mul(L,h.radius));for(let z=1/29,F=z;F<1;F+=z)k.push(R.RotWith(O,P,rm*3*F))}else k.push(R.Add(P,R.Mul(L,h.radius)),R.Add(P,R.Mul(L,h.radius*.99)),R.Sub(P,R.Mul(L,h.radius*.99)),R.Sub(P,R.Mul(L,h.radius)));return w.concat(k,C.reverse(),I)}const the=.025,nhe=.01;function eu(n,e={}){var P;const{streamline:t=.5,size:r=16,simulatePressure:i=!1}=e;if(n.length===0)return[];const s=.15+(1-t)*.85;let l=n.map(R.From),c=0;if(!i){let I=l[0];for(;I&&!(I.z>=the);)l.shift(),I=l[0]}if(!i){let I=l[l.length-1];for(;I&&!(I.z>=nhe);)l.pop(),I=l[l.length-1]}if(l.length===0)return[{point:R.From(n[0]),input:R.From(n[0]),pressure:i?.5:.15,vector:new R(1,1),distance:0,runningLength:0,radius:1}];let d=l[1];for(;d&&!(R.Dist2(d,l[0])>(r/3)**2);)l[0].z=Math.max(l[0].z,d.z),l.splice(1,1),d=l[1];const h=l.pop();for(d=l[l.length-1];d&&!(R.Dist2(d,h)>(r/3)**2);)l.pop(),d=l[l.length-1],c++;l.push(h);const g=e.last||!e.simulatePressure||l.length>1&&R.Dist2(l[l.length-1],l[l.length-2])<r**2||c>0;if(l.length===2&&e.simulatePressure){const I=l[1];l=l.slice(0,-1);for(let k=1;k<5;k++){const L=R.Lrp(l[0],I,k/4);L.z=(l[0].z+(I.z-l[0].z))*k/4,l.push(L)}}const y=[{point:l[0],input:l[0],pressure:i?.5:l[0].z,vector:new R(1,1),distance:0,runningLength:0,radius:1}];let v=0,w=y[0],C,E;g&&t>0&&l.push(l[l.length-1].clone());for(let I=1,k=l.length;I<k;I++)C=!s||e.last&&I===k-1?l[I].clone():l[I].clone().lrp(w.point,1-s),!w.point.equals(C)&&(E=R.Dist(C,w.point),v+=E,!(I<4&&v<r)&&(w={input:l[I],point:C,pressure:i?.5:l[I].z,vector:R.Sub(w.point,C).uni(),distance:E,runningLength:v,radius:1},y.push(w)));if((P=y[1])!=null&&P.vector&&(y[0].vector=y[1].vector.clone()),v<1){const I=Math.max(.5,...y.map(k=>k.pressure));y.forEach(k=>k.pressure=I)}return y}const{min:Mf}=Math,OM=.275;function d1(n,e){const{size:t=16,thinning:r=.5,simulatePressure:i=!0,easing:s=P=>P,start:l={},end:c={}}=e,{easing:d=ao.easeOutQuad}=l,{easing:h=ao.easeOutCubic}=c,g=n[n.length-1].runningLength;let y,v=n[0].pressure,w;if(!i&&g<t){const P=n.reduce((I,k)=>Math.max(I,k.pressure),.5);return n.forEach(I=>{I.pressure=P,I.radius=t*s(.5-r*(.5-I.pressure))}),n}else{let P;for(let I=0,k=n.length;I<k&&(w=n[I],!(w.runningLength>t*5));I++){const L=Mf(1,w.distance/t);if(i){const O=Mf(1,1-L);P=Mf(1,v+(O-v)*(L*OM))}else P=Mf(1,v+(w.pressure-v)*.5);v=v+(P-v)*.5}for(let I=0;I<n.length;I++){if(w=n[I],r){let{pressure:k}=w;const L=Mf(1,w.distance/t);if(i){const O=Mf(1,1-L);k=Mf(1,v+(O-v)*(L*OM))}else k=Mf(1,v+(k-v)*(L*OM));w.radius=t*s(.5-r*(.5-k)),v=k}else w.radius=t/2;y===void 0&&(y=w.radius)}}const C=l.taper===!1?0:l.taper===!0?Math.max(t,g):l.taper,E=c.taper===!1?0:c.taper===!0?Math.max(t,g):c.taper;if(C||E)for(let P=0;P<n.length;P++){w=n[P];const{runningLength:I}=w,k=I<C?d(I/C):1,L=g-I<E?h((g-I)/E):1;w.radius=Math.max(.01,w.radius*Math.min(k,L))}return n}function rhe(n,e={}){return DM(d1(eu(n,e),e),e)}function s7({scribble:n,zoom:e,color:t,opacity:r,className:i}){if(!n.points.length)return null;const s=rhe(n.points,{size:n.size/e,start:{taper:n.taper,easing:ao.linear},last:n.state==="stopping",simulatePressure:!1,streamline:.32});let l;if(s.length<4){const c=n.size/e/2,{x:d,y:h}=n.points[n.points.length-1];l=`M ${d-c},${h} a ${c},${c} 0 1,0 ${c*2},0 a ${c},${c} 0 1,0 ${-c*2},0`}else l=bk(s);return m.jsx("svg",{className:i&&It("tl-overlays__item",i),children:m.jsx("path",{className:"tl-scribble",d:l,fill:t??`var(--color-${n.color})`,opacity:r??n.opacity})})}const ihe=({bounds:n,rotation:e})=>{const t=xe();return Pe("should display",()=>t.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing"),[t])?m.jsx(zz,{bounds:n,rotation:e}):null};function ohe({size:n,width:e,height:t,hideAlternateHandles:r}){const i=Se(n/3),s=i/2;return m.jsxs("svg",{className:"tl-overlays__item",children:[m.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${Se(0-s)},${Se(n)} 
						${Se(0-s)},${Se(0-s)} 
						${Se(n)},${Se(0-s)}`,strokeWidth:i,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),m.jsx("line",{className:It("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Se(e/2-n),y1:Se(0-s),x2:Se(e/2+n),y2:Se(0-s),strokeWidth:i,"data-testid":"selection.crop.top","aria-label":"top handle"}),m.jsx("polyline",{className:It("tl-corner-crop-handle",{"tl-hidden":r}),points:`
						${Se(e-n)},${Se(0-s)} 
						${Se(e+s)},${Se(0-s)} 
						${Se(e+s)},${Se(n)}`,strokeWidth:i,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),m.jsx("line",{className:It("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Se(e+s),y1:Se(t/2-n),x2:Se(e+s),y2:Se(t/2+n),strokeWidth:i,"data-testid":"selection.crop.right","aria-label":"right handle"}),m.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${Se(e+s)},${Se(t-n)} 
						${Se(e+s)},${Se(t+s)}
						${Se(e-n)},${Se(t+s)}`,strokeWidth:i,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),m.jsx("line",{className:It("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Se(e/2-n),y1:Se(t+s),x2:Se(e/2+n),y2:Se(t+s),strokeWidth:i,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),m.jsx("polyline",{className:It("tl-corner-crop-handle",{"tl-hidden":r}),points:`
						${Se(0+n)},${Se(t+s)} 
						${Se(0-s)},${Se(t+s)}
						${Se(0-s)},${Se(t-n)}`,strokeWidth:i,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),m.jsx("line",{className:It("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Se(0-s),y1:Se(t/2-n),x2:Se(0-s),y2:Se(t/2+n),strokeWidth:i,"data-testid":"selection.crop.left","aria-label":"left handle"})]})}const she=bo(function({bounds:e,rotation:t}){const r=xe(),i=M.useRef(null),s=Ha(),l=Wc("top"),c=Wc("right"),d=Wc("bottom"),h=Wc("left"),g=Wc("top_left"),y=Wc("top_right"),v=Wc("bottom_right"),w=Wc("bottom_left"),C=r.getInstanceState().cursor.type==="default",E=r.getInstanceState().isCoarsePointer,P=r.getOnlySelectedShape(),I=P&&r.isShapeOrAncestorLocked(P),k=P?r.getShapeUtil(P).expandSelectionOutlinePx(P):0,L=k instanceof Xe?e.clone().expand(k).zeroFix():e.clone().expandBy(k).zeroFix();if(Ag(i,e==null?void 0:e.x,e==null?void 0:e.y,1,r.getSelectionRotation(),{x:L.x-e.x,y:L.y-e.y}),P&&r.isShapeHidden(P))return null;const O=r.getZoomLevel(),z=r.getInstanceState().isChangingStyle,F=L.width,H=L.height,V=8/O,re=F<V*2,q=H<V*2,J=F<V*4,ie=H<V*4,W=F<V*5,Y=H<V*5,oe=E?1.75:1,le=6/O*oe,ce=(J?le/2:le)*(oe*.75),Q=(ie?le/2:le)*(oe*.75),he=(P?!r.getShapeUtil(P).hideSelectionBoundsFg(P):!0)&&!z;let ke=he&&r.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.crop.pointing_crop_handle","select.pointing_resize_handle")||he&&r.isIn("select.resizing")&&P&&r.isShapeOfType(P,"text");P&&ke&&xr.isFirefox&&r.isShapeOfType(P,"embed")&&(ke=!1);const te=r.isInAny("select.crop.idle","select.crop.pointing_crop","select.crop.pointing_crop_handle")&&!z&&!s,me=r.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!z&&!s,Oe=!E&&!(re||q)&&(me||te)&&(P?!r.getShapeUtil(P).hideRotateHandle(P):!0)&&!I,Ze=E&&(!J||!ie)&&(me||te)&&(P?!r.getShapeUtil(P).hideRotateHandle(P):!0)&&!I,De=me&&(P?r.getShapeUtil(P).canResize(P)&&!r.getShapeUtil(P).hideResizeHandles(P):!0)&&!te&&!I,yt=re||q,ot=re&&q,We=W||Y,Qe=De||te,gt=!Oe,Pt=!me||!Ze,yn=!me||!Qe,Zt=!me||!Qe||yt,an=!me||!Qe||yt,ln=!me||!Qe||ot&&!te;let Yt=!0,Yn=!0;if(te)Yt=We,Yn=We;else if(De){Yt=yt||ot||E;const kr=E&&P&&P.type==="text";Yn=Yt&&!kr}const br=Math.min(24/O,H-Q*3),Wr=me&&E&&P&&r.isShapeOfType(P,"text")&&br*O>=4;return m.jsx("svg",{className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:m.jsxs("g",{ref:i,children:[ke&&m.jsx("rect",{className:"tl-selection__fg__outline",width:Se(F),height:Se(H)}),m.jsx(f1,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:le,corner:"top_left_rotate",cursor:C?za("nwse-rotate",t):void 0,isHidden:gt}),m.jsx(f1,{"data-testid":"selection.rotate.top-right",cx:F+le*3,cy:0,targetSize:le,corner:"top_right_rotate",cursor:C?za("nesw-rotate",t):void 0,isHidden:gt}),m.jsx(f1,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:H+le*3,targetSize:le,corner:"bottom_left_rotate",cursor:C?za("swne-rotate",t):void 0,isHidden:gt}),m.jsx(f1,{"data-testid":"selection.rotate.bottom-right",cx:F+le*3,cy:H+le*3,targetSize:le,corner:"bottom_right_rotate",cursor:C?za("senw-rotate",t):void 0,isHidden:gt}),m.jsx(lhe,{"data-testid":"selection.rotate.mobile",cx:J?-le*1.5:F/2,cy:J?H/2:-le*1.5,size:V,isHidden:Pt}),m.jsx("rect",{className:It("tl-transparent",{"tl-hidden":Yt}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:Se(0-(ie?Q*2:Q)),width:Se(F),height:Se(Math.max(1,Q*2)),style:C?{cursor:za("ns-resize",t)}:void 0,...l}),m.jsx("rect",{className:It("tl-transparent",{"tl-hidden":Yn}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:Se(F-(J?0:ce)),y:0,height:Se(H),width:Se(Math.max(1,ce*2)),style:C?{cursor:za("ew-resize",t)}:void 0,...c}),m.jsx("rect",{className:It("tl-transparent",{"tl-hidden":Yt}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:Se(H-(ie?0:Q)),width:Se(F),height:Se(Math.max(1,Q*2)),style:C?{cursor:za("ns-resize",t)}:void 0,...d}),m.jsx("rect",{className:It("tl-transparent",{"tl-hidden":Yn}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:Se(0-(J?ce*2:ce)),y:0,height:Se(H),width:Se(Math.max(1,ce*2)),style:C?{cursor:za("ew-resize",t)}:void 0,...h}),m.jsx("rect",{className:It("tl-transparent",{"tl-hidden":yn}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:Se(0-(J?ce*2:ce*1.5)),y:Se(0-(ie?Q*2:Q*1.5)),width:Se(ce*3),height:Se(Q*3),style:C?{cursor:za("nwse-resize",t)}:void 0,...g}),m.jsx("rect",{className:It("tl-transparent",{"tl-hidden":Zt}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:Se(F-(J?0:ce*1.5)),y:Se(0-(ie?Q*2:Q*1.5)),width:Se(ce*3),height:Se(Q*3),style:C?{cursor:za("nesw-resize",t)}:void 0,...y}),m.jsx("rect",{className:It("tl-transparent",{"tl-hidden":ln}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:Se(F-(J?ce:ce*1.5)),y:Se(H-(ie?Q:Q*1.5)),width:Se(ce*3),height:Se(Q*3),style:C?{cursor:za("nwse-resize",t)}:void 0,...v}),m.jsx("rect",{className:It("tl-transparent",{"tl-hidden":an}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:Se(0-(J?ce*3:ce*1.5)),y:Se(H-(ie?0:Q*1.5)),width:Se(ce*3),height:Se(Q*3),style:C?{cursor:za("nesw-resize",t)}:void 0,...w}),De&&m.jsxs(m.Fragment,{children:[m.jsx("rect",{"data-testid":"selection.resize.top-left",className:It("tl-corner-handle",{"tl-hidden":yn}),"aria-label":"top_left handle",x:Se(0-V/2),y:Se(0-V/2),width:Se(V),height:Se(V)}),m.jsx("rect",{"data-testid":"selection.resize.top-right",className:It("tl-corner-handle",{"tl-hidden":Zt}),"aria-label":"top_right handle",x:Se(F-V/2),y:Se(0-V/2),width:Se(V),height:Se(V)}),m.jsx("rect",{"data-testid":"selection.resize.bottom-right",className:It("tl-corner-handle",{"tl-hidden":ln}),"aria-label":"bottom_right handle",x:Se(F-V/2),y:Se(H-V/2),width:Se(V),height:Se(V)}),m.jsx("rect",{"data-testid":"selection.resize.bottom-left",className:It("tl-corner-handle",{"tl-hidden":an}),"aria-label":"bottom_left handle",x:Se(0-V/2),y:Se(H-V/2),width:Se(V),height:Se(V)})]}),Wr&&m.jsxs(m.Fragment,{children:[m.jsx("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:Se(0-V/4),y:Se(H/2-br/2),rx:V/4,width:Se(V/2),height:Se(br)}),m.jsx("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:V/4,x:Se(F-V/4),y:Se(H/2-br/2),width:Se(V/2),height:Se(br)})]}),te&&m.jsx(ohe,{size:V,width:F,height:H,hideAlternateHandles:We})]})})}),f1=function({cx:e,cy:t,targetSize:r,corner:i,cursor:s,isHidden:l,"data-testid":c}){const d=Wc(i);return m.jsx("rect",{className:It("tl-transparent","tl-rotate-corner",{"tl-hidden":l}),"data-testid":c,"aria-label":`${i} target`,pointerEvents:"all",x:Se(e-r*3),y:Se(t-r*3),width:Se(Math.max(1,r*3)),height:Se(Math.max(1,r*3)),cursor:s,...d})},ahe=Math.sqrt(Math.PI),lhe=function({cx:e,cy:t,size:r,isHidden:i,"data-testid":s}){const l=Wc("mobile_rotate"),c=xe(),d=Pe("zoom level",()=>c.getZoomLevel(),[c]),h=Math.max(14*(1/d),20/Math.max(1,d));return m.jsxs("g",{children:[m.jsx("circle",{"data-testid":s,pointerEvents:"all",className:It("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":i}),cx:e,cy:t,r:h,...l}),m.jsx("circle",{className:It("tl-mobile-rotate__fg",{"tl-hidden":i}),cx:e,cy:t,r:r/ahe})]})};function che(){const n=xe();return Pe("is in a valid select state",()=>n.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle"),[n])?m.jsx($z,{}):null}function jM(n,e,t){const{arrowheadStart:r,arrowheadEnd:i}=e.props,s=im(n,e,t),l=s.start.clone(),c=s.end.clone(),d=R.Med(l,c);if(R.Equals(l,c))return{bindings:t,isStraight:!0,start:{handle:l,point:l,arrowhead:e.props.arrowheadStart},end:{handle:c,point:c,arrowhead:e.props.arrowheadEnd},middle:d,isValid:!1,length:0};const h=R.Sub(c,l).uni(),g=h1(n,e,"start"),y=h1(n,e,"end"),v=n.getShapePageTransform(e);a7(c,s.start,v,y),a7(l,s.end,v,g);let w=0,C=0,E=0,P=0,I=bS*e.props.scale;const k=g&&y&&g.shape===y.shape,L=g&&y?LM(n,g.shape.id,y.shape.id):"safe";L==="safe"&&g&&y&&!k&&!g.isExact&&!y.isExact&&(y.didIntersect&&!g.didIntersect?g.isClosed&&l.setTo(c.clone().add(h.clone().mul(bS*e.props.scale))):y.didIntersect||y.isClosed&&c.setTo(l.clone().sub(h.clone().mul(bS*e.props.scale))));const O=R.Sub(c,l),z=R.Len(O)?O.uni():R.From(O),F=!R.Equals(z,h);k||(L!=="start-contains-end"&&g&&r!=="none"&&!g.isExact&&(E=nu[e.props.size]/2+("size"in g.shape.props?nu[g.shape.props.size]/2:0),w=(g1+E)*e.props.scale,I+=E*e.props.scale),L!=="end-contains-start"&&y&&i!=="none"&&!y.isExact&&(P=nu[e.props.size]/2+("size"in y.shape.props?nu[y.shape.props.size]/2:0),C=(g1+P)*e.props.scale,I+=P*e.props.scale));const H=l.clone().add(z.clone().mul(w*(F?-1:1))),V=c.clone().sub(z.clone().mul(C*(F?-1:1)));R.DistMin(H,V,I)&&(w!==0&&C!==0?(w*=-1.5,C*=-1.5):w!==0?w*=-1:C!==0&&(C*=-1)),l.add(z.clone().mul(w*(F?-1:1))),c.sub(z.clone().mul(C*(F?-1:1))),F?(g&&y&&c.setTo(R.Add(l,z.clone().mul(-10*e.props.scale))),d.setTo(R.Med(s.start,s.end))):d.setTo(R.Med(l,c));const re=R.Dist(l,c);return{bindings:t,isStraight:!0,start:{handle:s.start,point:l,arrowhead:e.props.arrowheadStart},end:{handle:s.end,point:c,arrowhead:e.props.arrowheadEnd},middle:d,isValid:re>0,length:re}}function a7(n,e,t,r){if(r===void 0||r.isExact)return;const i=qe.applyToPoint(t,e),s=qe.applyToPoint(t,n),l=qe.applyToPoint(qe.Inverse(r.transform),i),c=qe.applyToPoint(qe.Inverse(r.transform),s),d=r.isClosed,g=(d?Dk:Kne)(l,c,r.outline);let y;if(g!==null&&(y=g.sort((C,E)=>R.Dist2(C,l)-R.Dist2(E,l))[0]??(d?void 0:c)),y===void 0)return;const v=qe.applyToPoint(r.transform,y),w=qe.applyToPoint(qe.Inverse(t),v);n.setTo(w),r.didIntersect=!0}function uhe(n,e,t){const{arrowheadEnd:r,arrowheadStart:i}=e.props,s=e.props.bend;if(Math.abs(s)>Math.abs(e.props.bend*(ghe*e.props.scale)))return jM(n,e,t);const l=im(n,e,t),c=R.Med(l.start,l.end),d=R.Sub(l.end,l.start),h=R.Len(d)?d.uni():R.From(d),g=R.Add(c,h.per().mul(-s)),y=h1(n,e,"start"),v=h1(n,e,"end"),w=l.start.clone(),C=l.end.clone(),E=g.clone();if(R.Equals(w,C))return{bindings:t,isStraight:!0,start:{handle:w,point:w,arrowhead:e.props.arrowheadStart},end:{handle:C,point:C,arrowhead:e.props.arrowheadEnd},middle:E,isValid:!1,length:0};const P=e.props.bend<0,I=P?Fv:Q5,k=l7(w,C,E),L=R.Angle(k.center,w),O=R.Angle(k.center,C),z=I(L,O);if(k.length===0||k.size===0||!tz(k.length)||!tz(k.size))return jM(n,e,t);const F=w.clone(),H=C.clone(),V=E.clone(),re=n.getShapePageTransform(e);let q=0,J=0,ie=bS*e.props.scale;if(y&&!y.isExact){const ke=qe.applyToPoint(re,F),te=qe.applyToPoint(re,k.center),me=qe.applyToPoint(re,H),Oe=qe.Inverse(y.transform),Ze=qe.applyToPoint(Oe,ke),De=qe.applyToPoint(Oe,te),yt=qe.applyToPoint(Oe,me),{isClosed:ot}=y,We=ot?Ok:s4;let Qe,gt=We(De,k.radius,y.outline);if(gt){const Pt=De.angle(Ze),yn=De.angle(yt),Zt=I(Pt,yn);gt=gt.filter(ln=>I(Pt,De.angle(ln))<=Zt);const an=Zt*.25;gt.sort(ot?(ln,Yt)=>Math.abs(I(Pt,De.angle(ln))-an)<Math.abs(I(Pt,De.angle(Yt))-an)?-1:1:(ln,Yt)=>I(Pt,De.angle(ln))<I(Pt,De.angle(Yt))?-1:1),Qe=gt[0]??(ot?void 0:Ze)}else Qe=ot?void 0:Ze;if(Qe&&(F.setTo(n.getPointInShapeSpace(e,qe.applyToPoint(y.transform,Qe))),y.didIntersect=!0,i!=="none")){const Pt=nu[e.props.size]/2+("size"in y.shape.props?nu[y.shape.props.size]/2:0);q=(g1+Pt)*e.props.scale,ie+=Pt*e.props.scale}}if(v&&!v.isExact){const ke=qe.applyToPoint(re,F),te=qe.applyToPoint(re,H),me=qe.applyToPoint(re,k.center),Oe=qe.Inverse(v.transform),Ze=qe.applyToPoint(Oe,ke),De=qe.applyToPoint(Oe,me),yt=qe.applyToPoint(Oe,te),ot=v.isClosed,We=ot?Ok:s4;let Qe,gt=We(De,k.radius,v.outline);if(gt){const Pt=De.angle(Ze),yn=De.angle(yt),Zt=I(Pt,yn),an=Zt*.75;gt=gt.filter(ln=>I(Pt,De.angle(ln))<=Zt),gt.sort(ot?(ln,Yt)=>Math.abs(I(Pt,De.angle(ln))-an)<Math.abs(I(Pt,De.angle(Yt))-an)?-1:1:(ln,Yt)=>I(Pt,De.angle(ln))<I(Pt,De.angle(Yt))?-1:1),gt[0]?Qe=gt[0]:Qe=ot?void 0:yt}else Qe=ot?void 0:yt;if(Qe&&(H.setTo(n.getPointInShapeSpace(e,qe.applyToPoint(v.transform,Qe))),v.didIntersect=!0,r!=="none")){const Pt=nu[e.props.size]/2+("size"in v.shape.props?nu[v.shape.props.size]/2:0);J=(g1+Pt)*e.props.scale,ie+=Pt*e.props.scale}}let W=R.Angle(k.center,F),Y=R.Angle(k.center,H),oe=I(W,Y),le=oe*k.radius;const ce=F.clone(),Q=H.clone();if(q!==0&&ce.setTo(k.center).add(R.FromAngle(W+oe*(q/le*(P?1:-1))).mul(k.radius)),J!==0&&Q.setTo(k.center).add(R.FromAngle(Y+oe*(J/le*(P?-1:1))).mul(k.radius)),R.DistMin(ce,Q,ie)&&(q!==0&&J!==0?(q*=-1.5,J*=-1.5):q!==0?q*=-2:J!==0&&(J*=-2)),q!==0&&F.setTo(k.center).add(R.FromAngle(W+oe*(q/le*(P?1:-1))).mul(k.radius)),J!==0&&H.setTo(k.center).add(R.FromAngle(Y+oe*(J/le*(P?-1:1))).mul(k.radius)),y&&v&&!y.isExact&&!v.isExact){W=R.Angle(k.center,F),Y=R.Angle(k.center,H),oe=I(W,Y),le=oe*k.radius;const ke=LM(n,y.shape.id,v.shape.id);ke==="double-bound"&&le<30?(F.setTo(w),H.setTo(C),V.setTo(E)):ke==="safe"&&(y&&!y.didIntersect&&F.setTo(w),(v&&!v.didIntersect||I(L,W)>I(L,Y))&&H.setTo(k.center).add(R.FromAngle(W+oe*(Math.min(.9,bS*e.props.scale/le)*(P?1:-1))).mul(k.radius)))}dhe(k.center,k.radius,F,H,V,z,P),F.equals(H)&&(F.setTo(V.clone().addXY(1,1)),H.setTo(V.clone().subXY(1,1))),w.setTo(F),C.setTo(H),E.setTo(V);const he=l7(w,C,E);return{bindings:t,isStraight:!1,start:{point:w,handle:l.start,arrowhead:e.props.arrowheadStart},end:{point:C,handle:l.end,arrowhead:e.props.arrowheadEnd},middle:E,handleArc:k,bodyArc:he,isValid:he.length!==0&&isFinite(he.center.x)&&isFinite(he.center.y)}}function l7(n,e,t){const r=ck(n,e,t)??R.Med(n,e),i=R.Dist(r,n),s=+R.Clockwise(n,t,e),l=((n.y-e.y)**2+(n.x-e.x)**2)**.5,c=((e.y-t.y)**2+(e.x-t.x)**2)**.5,d=((t.y-n.y)**2+(t.x-n.x)**2)**.5,h=Math.acos((c*c+d*d-l*l)/(2*c*d))*2,g=+(qn>h),y=(sr-h)*(s?1:-1),v=y*i;return{center:r,radius:i,size:y,length:v,largeArcFlag:g,sweepFlag:s}}function dhe(n,e,t,r,i,s,l){const c=R.Angle(n,t),d=R.Angle(n,r);let h=Fv(c,d);if(l||(h=sr-h),i.setTo(n).add(R.FromAngle(c+h*(.5*(l?1:-1))).mul(e)),h>s){i.rotWith(n,qn);const g=r.clone();r.setTo(t),t.setTo(g)}}const fhe=8;function hhe(n){return Math.abs(n.props.bend)<fhe*n.props.scale}function h1(n,e,t){const r=n.getBindingsFromShape(e,"arrow").find(d=>d.props.terminal===t);if(!r)return;const i=n.getShape(r.toId);if(!i)return;const s=n.getShapePageTransform(i),l=n.getShapeGeometry(i),c=l instanceof hl?l.children[0].vertices:l.vertices;return{shape:i,transform:s,isClosed:l.isClosed,isExact:r.props.isExact,didIntersect:!1,outline:c}}function c7(n,e,t,r){const i=n.getShape(t.toId);if(i){const{point:s,size:l}=n.getShapeGeometry(i).bounds,c=R.Add(s,R.MulV(t.props.isPrecise||r?t.props.normalizedAnchor:{x:.5,y:.5},l)),d=qe.applyToPoint(n.getShapePageTransform(i),c);return qe.applyToPoint(qe.Inverse(e),d)}else return new R(0,0)}function da(n,e){const t=n.getBindingsFromShape(e,"arrow");return{start:t.find(r=>r.props.terminal==="start"),end:t.find(r=>r.props.terminal==="end")}}const phe=aZ("arrow info",(n,e)=>{const t=da(n,e);return hhe(e)?jM(n,e,t):uhe(n,e,t)});function tu(n,e){const t=typeof e=="string"?e:e.id;return phe.get(n,t)}function im(n,e,t){var c,d;const r=n.getShapePageTransform(e),i=LM(n,(c=t.start)==null?void 0:c.toId,(d=t.end)==null?void 0:d.toId),s=t.start?c7(n,r,t.start,i==="double-bound"||i==="start-contains-end"):R.From(e.props.start),l=t.end?c7(n,r,t.end,i==="double-bound"||i==="end-contains-start"):R.From(e.props.end);return{start:s,end:l}}function wS(n,e,t,r){const i=typeof e=="string"?e:e.id,s=typeof t=="string"?t:t.id,l=n.getBindingsFromShape(i,"arrow").filter(d=>d.props.terminal===r.terminal);l.length>1&&n.deleteBindings(l.slice(1));const c=l[0];c?n.updateBinding({...c,toId:s,props:r}):n.createBinding({type:"arrow",fromId:i,toId:s,props:r})}function p1(n,e,t){const r=n.getBindingsFromShape(e,"arrow").filter(i=>i.props.terminal===t);n.deleteBindings(r)}const bS=10,g1=10,ghe=10,nu={s:2,m:3.5,l:5,xl:10};function LM(n,e,t){if(!e||!t)return"safe";if(e===t)return"double-bound";const r=n.getShapePageBounds(e),i=n.getShapePageBounds(t);if(r&&i){if(r.contains(i))return"start-contains-end";if(i.contains(r))return"end-contains-start"}return"safe"}class m1 extends p0{getDefaultProps(){return{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.5,y:.5}}}onAfterCreate({binding:e}){const t=this.editor.getShape(e.fromId);t&&NM(this.editor,t)}onAfterChange({bindingAfter:e}){const t=this.editor.getShape(e.fromId);t&&NM(this.editor,t)}onAfterChangeFromShape({shapeAfter:e}){NM(this.editor,e)}onAfterChangeToShape({binding:e}){u7(this.editor,e.fromId)}onBeforeIsolateFromShape({binding:e}){const t=this.editor.getShape(e.fromId);t&&y1({editor:this.editor,arrow:t,terminal:e.props.terminal})}}U(m1,"type","arrow"),U(m1,"props",cN),U(m1,"migrations",uN);function u7(n,e){var P;const t=n.getShape(e);if(!t)return;const r=da(n,t),{start:i,end:s}=r,l=i?n.getShape(i.toId):void 0,c=s?n.getShape(s.toId):void 0,d=n.getAncestorPageId(t);if(!d)return;let h;if(l&&c)h=n.findCommonAncestor([l,c])??d;else if(l||c){const I=(P=l||c)==null?void 0:P.parentId;I&&I===t.parentId?h=t.parentId:h=d}else return;h&&h!==t.parentId&&n.reparentShapes([e],h);const g=n.getShape(e);if(!g)throw Error("no reparented arrow");const y=n.getShapeNearestSibling(g,l),v=n.getShapeNearestSibling(g,c);let w;if(y&&v)w=y.index>v.index?y:v;else if(y&&!v)w=y;else if(v&&!y)w=v;else return;let C;const E=n.getSortedChildIdsForParent(w.parentId).map(I=>n.getShape(I)).filter(I=>I.index>w.index);if(E.length){const I=E.find(k=>k.type!=="arrow");if(g.index>w.index&&(!I||g.index<I.index))return;C=cv(w.index,E[0].index)}else C=Fc(w.index);C!==g.index&&n.updateShapes([{id:e,type:"arrow",index:C}])}function NM(n,e){const t=da(n,e);for(const r of["start","end"]){const i=t[r];if(!i)continue;const s=n.getShape(i.toId),l=n.getAncestorPageId(e)===n.getAncestorPageId(s);(!s||!l)&&y1({editor:n,arrow:e,terminal:r,unbind:!0})}u7(n,e.id)}function y1({editor:n,arrow:e,terminal:t,unbind:r=!1,useHandle:i=!1}){const s=tu(n,e);if(!s)throw new Error("expected arrow info");const l=i?s.start.handle:s.start.point,c=i?s.end.handle:s.end.point,d=t==="start"?l:c,h={id:e.id,type:"arrow",props:{[t]:{x:d.x,y:d.y},bend:e.props.bend}};if(!s.isStraight){const g=t==="start"?l:s.start.handle,y=t==="end"?c:s.end.handle,v=R.Med(g,y),w=R.Sub(g,y).per().uni().mul(s.handleArc.radius*2*Math.sign(e.props.bend)),C=Kv(s.handleArc.center,R.Add(v,w),s.handleArc.center,s.handleArc.radius);rn((C==null?void 0:C.length)===1);const E=R.Dist(v,C[0])*Math.sign(e.props.bend);gf(E,h.props.bend)||(h.props.bend=E)}n.updateShape(h),r&&p1(n,e,t)}const d7=[m1],rs={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px"},is={s:2,m:3.5,l:5,xl:10},om={s:18,m:24,l:36,xl:44},od={s:18,m:22,l:26,xl:32},mhe={s:18,m:20,l:24,xl:28},sd={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"},yhe=20,FM=4.25,vl=16;function vhe(n,e){const t=n.w/e.w,r=n.h/e.h;return t<=1&&r<=1?n:t>r?{w:n.w/t,h:n.h/t}:{w:n.w/r,h:n.h/r}}/*!
 * MIT License
 * Adapted (mostly copied) the work of https://github.com/fregante/text-field-edit
 * Copyright (c) Federico Brigante <opensource@bfred.it> (bfred.it)
 */const sm="  ",Ms=class Ms{static insertTextFirefox(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}static insert(e,t){const r=e.ownerDocument,i=r.activeElement;i!==e&&e.focus(),r.execCommand("insertText",!1,t)||Ms.insertTextFirefox(e,t),i===r.body?e.blur():i instanceof HTMLElement&&i!==e&&i.focus()}static set(e,t){e.select(),Ms.insert(e,t)}static getSelection(e){const{selectionStart:t,selectionEnd:r}=e;return e.value.slice(t||void 0,r||void 0)}static wrapSelection(e,t,r){const{selectionStart:i,selectionEnd:s}=e,l=Ms.getSelection(e);Ms.insert(e,t+l+(r??t)),e.selectionStart=(i||0)+t.length,e.selectionEnd=(s||0)+t.length}static replace(e,t,r){let i=0;e.value.replace(t,(...s)=>{const l=i+s[s.length-2],c=s[0].length;e.selectionStart=l,e.selectionEnd=l+c;const d=typeof r=="string"?r:r(...s);return Ms.insert(e,d),e.selectionStart=l,i+=d.length-c,d})}static findLineEnd(e,t){const r=e.lastIndexOf(`
`,t-1)+1;return e.charAt(r)!=="	"?t:r+1}static indent(e){var c;const{selectionStart:t,selectionEnd:r,value:i}=e,s=i.slice(t,r),l=(c=/\n/g.exec(s))==null?void 0:c.length;if(l&&l>0){const d=i.lastIndexOf(`
`,t-1)+1,h=e.value.slice(d,r-1),g=h.replace(/^|\n/g,`$&${sm}`),y=g.length-h.length;e.setSelectionRange(d,r-1),Ms.insert(e,g),e.setSelectionRange(t+1,r+y)}else Ms.insert(e,sm)}static unindent(e){const{selectionStart:t,selectionEnd:r,value:i}=e,s=i.lastIndexOf(`
`,t-1)+1,l=Ms.findLineEnd(i,r),c=e.value.slice(s,l),d=c.replace(/(^|\n)(\t| {1,2})/g,"$1"),h=c.length-d.length;e.setSelectionRange(s,l),Ms.insert(e,d);const g=/\t| {1,2}/.exec(i.slice(s,t)),y=g?g[0].length:0,v=t-y;e.setSelectionRange(t-y,Math.max(v,r-h))}static indentCE(e){var d;const t=window.getSelection(),r=e.innerText,i=v1(e)??0,s=v1(e)??0,l=r.slice(i,s),c=(d=/\n/g.exec(l))==null?void 0:d.length;if(c&&c>0){const h=r.lastIndexOf(`
`,i-1)+1,g=r.slice(h,s-1),v=g.replace(/^|\n/g,`$&${sm}`).length-g.length;t&&t.setBaseAndExtent(e,i+1,e,s+v)}else{const h=window.getSelection();e.innerText=r.slice(0,i)+sm+r.slice(i),h==null||h.setBaseAndExtent(e,i+1,e,i+2)}}static unindentCE(e){const t=window.getSelection(),r=e.innerText,i=v1(e)??0,s=v1(e)??0,l=r.lastIndexOf(`
`,i-1)+1,c=Ms.findLineEnd(r,s),d=r.slice(l,c),h=d.replace(/(^|\n)(\t| {1,2})/g,"$1"),g=d.length-h.length;if(t){t.setBaseAndExtent(e,l,e,c);const y=/\t| {1,2}/.exec(r.slice(l,i)),v=y?y[0].length:0,w=i-v;t.setBaseAndExtent(e,i-v,e,Math.max(w,s-g))}}static normalizeText(e){return e.replace(Ms.fixNewLines,`
`)}static normalizeTextForDom(e){return e.replace(Ms.fixNewLines,`
`).split(`
`).map(t=>t||" ").join(`
`)}};U(Ms,"fixNewLines",/\r?\n|\r/g);let am=Ms;function v1(n){if(typeof window.getSelection>"u")return;const e=window.getSelection();if(!e)return;let t=0;if(e.rangeCount!==0){const r=e.getRangeAt(0),i=r.cloneRange();i.selectNodeContents(n),i.setEnd(r.endContainer,r.endOffset),t=i.toString().length}return t}const She=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function f7(n){return She.test(n)}function xhe(n){return n.replace(/\t/g,sm)}function whe(n){const e=n.split(`
`);for(;e[0]&&e[0].trim().length===0;)e.shift();let t=1/0;for(const r of e)if(r.trim().length>0){const i=r.length-r.trimStart().length;t=Math.min(t,i)}return e.map(r=>r.slice(t)).join(`
`)}const h7={"&amp;":"&","&quot;":'"',"&apos;":"'","&#34;":'"',"&#38;":"&","&#39;":"'","&#8211;":"","&#8212;":"","&#8216;":"","&#8217;":"","&#8220;":"","&#8221;":"","&#8230;":""},bhe=new RegExp(Object.keys(h7).join("|"),"g");function Che(n){return n.replace(bhe,e=>h7[e])}function Ehe(n){return n.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}function _he(n){return Ehe(whe(xhe(n)))}function Phe(n,{maxImageDimension:e,maxAssetSize:t,acceptedImageMimeTypes:r,acceptedVideoMimeTypes:i},{toasts:s,msg:l}){n.registerExternalAssetHandler("file",async({file:c,assetId:d})=>{const h=r.includes(c.type),g=i.includes(c.type);!h&&!g&&s.addToast({title:l("assets.files.type-not-allowed"),severity:"error"}),rn(h||g,`File type not allowed: ${c.type}`),c.size>t&&s.addToast({title:l("assets.files.size-too-big"),severity:"error"}),rn(c.size<=t,`File size too big: ${(c.size/1024).toFixed()}kb > ${(t/1024).toFixed()}kb`);const y=WL(await c.arrayBuffer());d=d??cf.createId(y);const v=await p7(c,d,h,g);if(isFinite(e)){const w={w:v.props.w,h:v.props.h},C=vhe(w,{w:e,h:e});w!==C&&Ra.isStaticImageType(c.type)&&(v.props.w=C.w,v.props.h=C.h)}return v.props.src=await n.uploadAsset(v,c),cf.create(v)}),n.registerExternalAssetHandler("url",async({url:c})=>{var h,g,y,v,w;let d;try{const E=await(await Lc(c,{method:"GET",mode:"no-cors"})).text(),P=new DOMParser().parseFromString(E,"text/html");d={image:((h=P.head.querySelector('meta[property="og:image"]'))==null?void 0:h.getAttribute("content"))??"",favicon:((g=P.head.querySelector('link[rel="apple-touch-icon"]'))==null?void 0:g.getAttribute("href"))??((y=P.head.querySelector('link[rel="icon"]'))==null?void 0:y.getAttribute("href"))??"",title:((v=P.head.querySelector('meta[property="og:title"]'))==null?void 0:v.getAttribute("content"))??c,description:((w=P.head.querySelector('meta[property="og:description"]'))==null?void 0:w.getAttribute("content"))??""},d.image.startsWith("http")||(d.image=new URL(d.image,c).href),d.favicon.startsWith("http")||(d.favicon=new URL(d.favicon,c).href)}catch(C){console.error(C),s.addToast({title:l("assets.url.failed"),severity:"error"}),d={image:"",favicon:"",title:"",description:""}}return{id:cf.createId(sP(c)),typeName:"asset",type:"bookmark",props:{src:c,description:d.description,image:d.image,favicon:d.favicon,title:d.title},meta:{}}}),n.registerExternalContentHandler("svg-text",async({point:c,text:d})=>{const h=c??(n.inputs.shiftKey?n.inputs.currentPagePoint:n.getViewportPageBounds().center),g=new DOMParser().parseFromString(d,"image/svg+xml").querySelector("svg");if(!g)throw new Error("No <svg/> element present");let y=parseFloat(g.getAttribute("width")||"0"),v=parseFloat(g.getAttribute("height")||"0");if(!(y&&v)){document.body.appendChild(g);const C=g.getBoundingClientRect();document.body.removeChild(g),y=C.width,v=C.height}const w=await n.getAssetForExternalContent({type:"file",file:new File([d],"asset.svg",{type:"image/svg+xml"})});if(!w)throw Error("Could not create an asset");g7(n,[w],h)}),n.registerExternalContentHandler("embed",({point:c,url:d,embed:h})=>{const g=c??(n.inputs.shiftKey?n.inputs.currentPagePoint:n.getViewportPageBounds().center),{width:y,height:v}=h,w=yr(),C={id:w,type:"embed",x:g.x-(y||450)/2,y:g.y-(v||450)/2,props:{w:y,h:v,url:d}};n.createShapes([C]).select(w)}),n.registerExternalContentHandler("files",async({point:c,files:d})=>{if(d.length>n.options.maxFilesAtOnce)throw Error("Too many files");const h=c??(n.inputs.shiftKey?n.inputs.currentPagePoint:n.getViewportPageBounds().center),g=new R(h.x,h.y),y=[];for(const w of d){if(w.size>t){s.addToast({title:l("assets.files.size-too-big"),severity:"error"}),console.warn(`File size too big: ${(w.size/1024).toFixed()}kb > ${(t/1024).toFixed()}kb`);continue}if(!w.type){s.addToast({title:l("assets.files.upload-failed"),severity:"error"}),console.error("No mime type");continue}if(!r.concat(i).includes(w.type)){s.addToast({title:l("assets.files.type-not-allowed"),severity:"error"}),console.warn(`${w.name} not loaded - Mime type not allowed ${w.type}.`);continue}const C=r.includes(w.type),E=i.includes(w.type),P=WL(await w.arrayBuffer()),I=cf.createId(P),k=await p7(w,I,C,E);let L;C&&(L=n.createTemporaryAssetPreview(I,w)),y.push({asset:k,file:w,temporaryAssetPreview:L})}const v=[];await Promise.allSettled(y.map(async w=>{try{const C=await n.getAssetForExternalContent({type:"file",file:w.file});if(!C)throw Error("Could not create an asset");const E={...C,id:w.asset.id};v.push(E),n.updateAssets([E])}catch(C){s.addToast({title:l("assets.files.upload-failed"),severity:"error"}),console.error(C);return}})),g7(n,v,g)}),n.registerExternalContentHandler("text",async({point:c,text:d})=>{const h=c??(n.inputs.shiftKey?n.inputs.currentPagePoint:n.getViewportPageBounds().center),g=n.getShapeUtil("text").getDefaultProps(),y=_he(d),v=n.getOnlySelectedShape();if(v&&"text"in v.props){n.updateShapes([{id:v.id,type:v.type,props:{text:y}}]);return}let w,C,E,P="middle";const I=y.split(`
`).length>1,k=f7(y);I&&(P=I?k?"end":"start":"middle");const L=n.textMeasure.measureText(y,{...rs,fontFamily:sd[g.font],fontSize:om[g.size],maxWidth:null}),O=Math.min(I?n.getViewportPageBounds().width*.9:920,Math.max(200,n.getViewportPageBounds().width*.9));if(L.w>O){const z=n.textMeasure.measureText(y,{...rs,fontFamily:sd[g.font],fontSize:om[g.size],maxWidth:O});w=z.w,C=z.h,E=!1,P=k?"end":"start"}else w=L.w,C=L.h,E=!0;h.y-C/2<n.getViewportPageBounds().minY+40&&(h.y=n.getViewportPageBounds().minY+40+C/2),n.createShapes([{id:yr(),type:"text",x:h.x-w/2,y:h.y-C/2,props:{text:y,textAlign:P,autoSize:E,w}}])}),n.registerExternalContentHandler("url",async({point:c,url:d})=>{const h=n.getShapeUtil("embed"),g=h==null?void 0:h.getEmbedDefinition(d);if(g)return n.putExternalContent({type:"embed",url:g.url,point:c,embed:g.definition});const y=c??(n.inputs.shiftKey?n.inputs.currentPagePoint:n.getViewportPageBounds().center),v=cf.createId(sP(d)),w=The(n,d,y);let C=n.getAsset(v),E=!1;if(!C){E=!0;try{const P=await n.getAssetForExternalContent({type:"url",url:d});if(!P)throw Error("Could not create an asset");C=P}catch{s.addToast({title:l("assets.url.failed"),severity:"error"});return}}n.run(()=>{E&&n.createAssets([C]),n.updateShapes([{id:w.id,type:w.type,props:{assetId:C.id}}])})})}async function p7(n,e,t,r){let i=n.type;n.type==="video/quicktime"&&(i="video/mp4");const s=t?await Ra.getImageSize(n):await Ra.getVideoSize(n),l=await Ra.isAnimated(n)||r;return{id:e,type:t?"image":"video",typeName:"asset",props:{name:n.name,src:"",w:s.w,h:s.h,fileSize:n.size,mimeType:i,isAnimated:l},meta:{}}}async function g7(n,e,t){if(!e.length)return[];const r=R.From(t),i=[];for(let s=0;s<e.length;s++){const l=e[s];switch(l.type){case"image":{i.push({id:yr(),type:"image",x:r.x,y:r.y,opacity:1,props:{assetId:l.id,w:l.props.w,h:l.props.h}}),r.x+=l.props.w;break}case"video":i.push({id:yr(),type:"video",x:r.x,y:r.y,opacity:1,props:{assetId:l.id,w:l.props.w,h:l.props.h}}),r.x+=l.props.w}}return n.run(()=>{const s=e.filter(l=>!n.getAsset(l.id));s.length&&n.createAssets(s),n.createShapes(i).select(...i.map(l=>l.id)),m7(n,t)}),i.map(s=>s.id)}function m7(n,e){const t=n.getViewportPageBounds();let r=n.getSelectionPageBounds();if(r){const i=r.center.sub(e);n.updateShapes(n.getSelectedShapes().map(s=>{const l=n.getShapeParentTransform(s).decompose().rotation,c=R.Rot(i,-l);return{id:s.id,type:s.type,x:s.x-c.x,y:s.y-c.y}}))}if(r=n.getSelectionPageBounds(),r&&n.getInstanceState().isGridMode){const i=n.getDocumentSettings().gridSize,s=new R(r.minX,r.minY),l=s.clone().snapToGrid(i),c=R.Sub(s,l);n.updateShapes(n.getSelectedShapes().map(d=>{const h={x:d.x-c.x,y:d.y-c.y};return{id:d.id,type:d.type,x:h.x,y:h.y}}))}r=n.getSelectionPageBounds(),r&&!t.contains(r)&&n.zoomToSelection({animation:{duration:n.options.animationMediumMs}})}function The(n,e,t){const r={id:yr(),type:"bookmark",x:t.x-150,y:t.y-160,opacity:1,props:{assetId:null,url:e}};return n.run(()=>{n.createShapes([r]).select(r.id),m7(n,t)}),n.getShape(r.id)}let Ihe=(BA=class extends Ct{onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onCancel(){this.editor.setCurrentTool("select")}onKeyUp(e){var t;if(e.key==="Enter"){if(this.editor.getIsReadonly())return null;const r=this.editor.getOnlySelectedShape();r&&this.editor.getShapeUtil(r).canEdit(r)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(r.id),(t=this.editor.root.getCurrent())==null||t.transition("editing_shape",{...e,target:"shape",shape:r}))}}},U(BA,"id","idle"),BA),khe=(HA=class extends Ct{constructor(){super(...arguments);U(this,"shape");U(this,"markId","");U(this,"preciseTimeout",-1);U(this,"didTimeout",!1)}onEnter(){this.markId="",this.didTimeout=!1;const t=this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{filter:r=>!r.isLocked&&this.editor.canBindShapes({fromShape:"arrow",toShape:r,binding:"arrow"}),margin:0,hitInside:!0,renderingOnly:!0});t?this.editor.setHintingShapes([t.id]):this.createArrowShape(),this.startPreciseTimeout()}onExit(){this.shape=void 0,this.editor.setHintingShapes([]),this.clearPreciseTimeout()}onPointerMove(){if(this.editor.inputs.isDragging){if(this.shape||this.createArrowShape(),!this.shape)throw Error("expected shape");this.updateArrowShapeEndHandle(),this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,handle:{id:"end",type:"vertex",index:"a3",x:0,y:0},isCreating:!0,creatingMarkId:this.markId||void 0,onInteractionEnd:"arrow"})}}onPointerUp(){this.cancel()}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.shape&&this.editor.bailToMark(this.markId),this.editor.setHintingShapes([]),this.parent.transition("idle")}createArrowShape(){var y;const{originPagePoint:t}=this.editor.inputs,r=yr();this.markId=this.editor.markHistoryStoppingPoint(`creating_arrow:${r}`);const i=ec(t,this.editor);this.editor.createShape({id:r,type:"arrow",x:i.x,y:i.y,props:{scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}});const s=this.editor.getShape(r);if(!s)throw Error("expected shape");const l=this.editor.getShapeHandles(s);if(!l)throw Error("expected handles for arrow");const c=this.editor.getShapeUtil("arrow"),d=this.shape,h=l.find(v=>v.id==="start"),g=(y=c.onHandleDrag)==null?void 0:y.call(c,s,{handle:{...h,x:0,y:0},isPrecise:!0,initial:d});g&&this.editor.updateShapes([g]),this.shape=this.editor.getShape(r),this.editor.select(r)}updateArrowShapeEndHandle(){var i,s;const t=this.shape;if(!t)throw Error("expected shape");const r=this.editor.getShapeHandles(t);if(!r)throw Error("expected handles for arrow");{const l=this.editor.getShapeUtil("arrow"),c=this.shape,d=r.find(g=>g.id==="start"),h=(i=l.onHandleDrag)==null?void 0:i.call(l,t,{handle:{...d,x:0,y:0},isPrecise:this.didTimeout,initial:c});h&&this.editor.updateShapes([h])}{const l=this.editor.getShapeUtil("arrow"),c=this.shape,d=this.editor.getPointInShapeSpace(t,this.editor.inputs.currentPagePoint),h=r.find(y=>y.id==="end"),g=(s=l.onHandleDrag)==null?void 0:s.call(l,this.editor.getShape(t),{handle:{...h,x:d.x,y:d.y},isPrecise:!1,initial:c});g&&this.editor.updateShapes([g])}this.shape=this.editor.getShape(t.id)}startPreciseTimeout(){this.preciseTimeout=this.editor.timers.setTimeout(()=>{this.getIsActive()&&(this.didTimeout=!0)},320)}clearPreciseTimeout(){clearTimeout(this.preciseTimeout)}},U(HA,"id","pointing"),HA);class zM extends Ct{constructor(){super(...arguments);U(this,"shapeType","arrow")}static children(){return[Ihe,khe]}}U(zM,"id","arrow"),U(zM,"initial","idle");class UM extends Ct{constructor(){super(...arguments);U(this,"info",{});U(this,"initialShape");U(this,"shapeType",this.parent.id==="highlight"?"highlight":"draw");U(this,"util",this.editor.getShapeUtil(this.shapeType));U(this,"isPen",!1);U(this,"isPenOrStylus",!1);U(this,"segmentMode","free");U(this,"didJustShiftClickToExtendPreviousShapeLine",!1);U(this,"pagePointWhereCurrentSegmentChanged",{});U(this,"pagePointWhereNextSegmentChanged",null);U(this,"lastRecordedPoint",{});U(this,"mergeNextPoint",!1);U(this,"currentLineLength",0);U(this,"markId",null)}onEnter(t){this.markId=null,this.info=t,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.startShape()}onPointerMove(){const{inputs:t}=this.editor;if(this.isPen&&!t.isPen&&this.markId){this.editor.bailToMark(this.markId),this.startShape();return}this.isPenOrStylus?R.Dist(t.currentPagePoint,this.lastRecordedPoint)>=1/this.editor.getZoomLevel()?(this.lastRecordedPoint=t.currentPagePoint.clone(),this.mergeNextPoint=!1):this.mergeNextPoint=!0:this.mergeNextPoint=!1,this.updateDrawingShape()}onKeyDown(t){if(t.key==="Shift")switch(this.segmentMode){case"free":{this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_free":this.segmentMode="starting_straight"}this.updateDrawingShape()}onKeyUp(t){if(t.key==="Shift")switch(this.editor.snaps.clearIndicators(),this.segmentMode){case"straight":{this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_straight":{this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";break}}this.updateDrawingShape()}onExit(){this.editor.snaps.clearIndicators(),this.pagePointWhereCurrentSegmentChanged=this.editor.inputs.currentPagePoint.clone()}canClose(){return this.shapeType!=="highlight"}getIsClosed(t,r,i){if(!this.canClose())return!1;const s=is[r],l=t[0].points[0],c=t[t.length-1],d=c.points[c.points.length-1];return l!==d&&this.currentLineLength>s*4*i&&R.DistMin(l,d,s*2*i)}startShape(){const{inputs:{originPagePoint:t,isPen:r}}=this.editor;this.markId=this.editor.markHistoryStoppingPoint("draw start");const{z:i=.5}=this.info.point;this.isPen=r,this.isPenOrStylus=r||i>0&&i<.5||i>.5&&i<1;const s=this.isPenOrStylus?i*1.25:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=t.clone(),this.initialShape){const c=this.editor.getShape(this.initialShape.id);if(c&&this.segmentMode==="straight"){this.didJustShiftClickToExtendPreviousShapeLine=!0;const d=yo(c.props.segments);if(!d)throw Error("Expected a previous segment!");const h=yo(d.points);if(!h)throw Error("Expected a previous point!");const{x:g,y}=this.editor.getPointInShapeSpace(c,t).toFixed(),v={type:this.segmentMode,points:[{x:h.x,y:h.y,z:+s.toFixed(2)},{x:g,y,z:+s.toFixed(2)}]},w=qe.applyToPoint(this.editor.getShapePageTransform(c.id),h);this.pagePointWhereCurrentSegmentChanged=w,this.pagePointWhereNextSegmentChanged=null;const C=[...c.props.segments,v];this.currentLineLength<is[c.props.size]*4&&(this.currentLineLength=this.getLineLength(C));const E={id:c.id,type:this.shapeType,props:{segments:C}};this.canClose()&&(E.props.isClosed=this.getIsClosed(C,c.props.size,c.props.scale)),this.editor.updateShapes([E]);return}}this.pagePointWhereCurrentSegmentChanged=t.clone();const l=yr();this.editor.createShapes([{id:l,type:this.shapeType,x:t.x,y:t.y,props:{isPen:this.isPenOrStylus,scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+s.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShape(l)}updateDrawingShape(){const{initialShape:t}=this,{inputs:r}=this.editor;if(!t)return;const{id:i,props:{size:s,scale:l}}=t,c=this.editor.getShape(i);if(!c)return;const{segments:d}=c.props,{x:h,y:g,z:y}=this.editor.getPointInShapeSpace(c,r.currentPagePoint).toFixed(),v=this.isPenOrStylus?+(r.currentPagePoint.z*1.25).toFixed(2):.5,w={x:h,y:g,z:v};switch(this.segmentMode){case"starting_straight":{const{pagePointWhereNextSegmentChanged:C}=this;if(C===null)throw Error("We should have a point where the segment changed");if(R.Dist2(C,r.currentPagePoint)>this.editor.options.dragDistanceSquared){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";const P=yo(d);if(!P)throw Error("Expected a previous segment!");const I=yo(P.points);if(!I)throw Error("Expected a previous last point!");let k;const L=this.editor.getPointInShapeSpace(c,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if(P.type==="straight"){this.currentLineLength+=R.Dist(I,L),k={type:"straight",points:[{...I},L]};const z=this.editor.getShapePageTransform(c);this.pagePointWhereCurrentSegmentChanged=qe.applyToPoint(z,I)}else k={type:"straight",points:[L,w]};const O={id:i,type:this.shapeType,props:{segments:[...d,k]}};this.canClose()&&(O.props.isClosed=this.getIsClosed(d,s,l)),this.editor.updateShapes([O])}break}case"starting_free":{const{pagePointWhereNextSegmentChanged:C}=this;if(C===null)throw Error("We should have a point where the segment changed");if(R.Dist2(C,r.currentPagePoint)>this.editor.options.dragDistanceSquared){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";const P=d.slice(),I=P[P.length-1],k=yo(I.points);if(!k)throw Error("No previous point!");const L={type:"free",points:[...R.PointsBetween(k,w,6).map(F=>({x:Yu(F.x),y:Yu(F.y),z:Yu(F.z)}))]},O=[...P,L];this.currentLineLength<is[c.props.size]*4&&(this.currentLineLength=this.getLineLength(O));const z={id:i,type:this.shapeType,props:{segments:O}};this.canClose()&&(z.props.isClosed=this.getIsClosed(O,s,l)),this.editor.updateShapes([z])}break}case"straight":{const C=d.slice(),E=C[C.length-1],{pagePointWhereCurrentSegmentChanged:P}=this,{ctrlKey:I,currentPagePoint:k}=this.editor.inputs;if(!P)throw Error("We should have a point where the segment changed");let L,O=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(O=!I,this.didJustShiftClickToExtendPreviousShapeLine=!1):O=!I;let z=this.editor.getPointInShapeSpace(c,k).toFixed().toJson(),F=!1,H;if((this.editor.user.getIsSnapMode()?!I:I)&&C.length>2){let q,J=8/this.editor.getZoomLevel();for(let ie=0,W=d.length-2;ie<W;ie++){const Y=d[ie];if(!Y)break;if(Y.type==="free")continue;const oe=Y.points[0],le=yo(Y.points);if(!(oe&&le))continue;const ce=R.NearestPointOnLineSegment(oe,le,z);if(R.DistMin(ce,z,J)){q=ce.toFixed().toJson(),J=R.Dist(ce,z),H=Y;break}}q&&(F=!0,z=q)}if(F&&H){const q=this.editor.getShapePageTransform(c),J=H.points[0],ie=yo(H.points);if(!ie)throw Error("Expected a last point!");const W=qe.applyToPoint(q,J),Y=qe.applyToPoint(q,ie),oe=qe.applyToPoint(q,z);this.editor.snaps.setIndicators([{id:nr(),type:"points",points:[W,oe,Y]}])}else{if(this.editor.snaps.clearIndicators(),O){const q=R.Angle(P,k),ie=zb(q,24)-q;L=R.RotWith(k,P,ie)}else L=k;z=this.editor.getPointInShapeSpace(c,L).toFixed().toJson()}this.currentLineLength+=R.Dist(E.points[0],z),C[C.length-1]={...E,type:"straight",points:[E.points[0],z]};const re={id:i,type:this.shapeType,props:{segments:C}};this.canClose()&&(re.props.isClosed=this.getIsClosed(d,s,l)),this.editor.updateShapes([re]);break}case"free":{const C=d.slice(),E=C[C.length-1],P=[...E.points];if(P.length&&this.mergeNextPoint){const{z:k}=P[P.length-1];P[P.length-1]={x:w.x,y:w.y,z:k?Math.max(k,w.z):w.z}}else this.currentLineLength+=R.Dist(P[P.length-1],w),P.push(w);C[C.length-1]={...E,points:P},this.currentLineLength<is[c.props.size]*4&&(this.currentLineLength=this.getLineLength(C));const I={id:i,type:this.shapeType,props:{segments:C}};if(this.canClose()&&(I.props.isClosed=this.getIsClosed(C,s,l)),this.editor.updateShapes([I]),P.length>this.editor.options.maxPointsPerDrawShape){this.editor.updateShapes([{id:i,type:this.shapeType,props:{isComplete:!0}}]);const k=yr(),L=this.editor.getShape(i).props;this.editor.createShapes([{id:k,type:this.shapeType,x:Yu(r.currentPagePoint.x),y:Yu(r.currentPagePoint.y),props:{isPen:this.isPenOrStylus,scale:L.scale,segments:[{type:"free",points:[{x:0,y:0,z:this.isPenOrStylus?+(y*1.25).toFixed():.5}]}]}}]),this.initialShape=Lr(this.editor.getShape(k)),this.mergeNextPoint=!1,this.lastRecordedPoint=r.currentPagePoint.clone(),this.currentLineLength=0}break}}}getLineLength(t){let r=0;for(const i of t)for(let s=0;s<i.points.length-1;s++){const l=i.points[s],c=i.points[s+1];r+=R.Dist2(c,l)}return Math.sqrt(r)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.editor.inputs.isDragging||(this.markId&&this.editor.bailToMark(this.markId),this.cancel())}complete(){const{initialShape:t}=this;t&&(this.editor.updateShapes([{id:t.id,type:t.type,props:{isComplete:!0}}]),this.parent.transition("idle"))}cancel(){this.parent.transition("idle",this.info)}}U(UM,"id","drawing");let y7=(VA=class extends Ct{onPointerDown(e){this.parent.transition("drawing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onCancel(){this.editor.setCurrentTool("select")}},U(VA,"id","idle"),VA);class S1 extends Ct{constructor(){super(...arguments);U(this,"shapeType","draw")}static children(){return[y7,UM]}onExit(){const t=this.children.drawing;t.initialShape=void 0}}U(S1,"id","draw"),U(S1,"initial","idle"),U(S1,"isLockable",!1);class $M extends aR{constructor(){super(...arguments);U(this,"shapeType","frame")}onCreate(t){if(!t)return;const r=this.editor.getShapePageBounds(t),i=[],s=this.editor.getShapeAncestors(t).map(l=>l.id);this.editor.getSortedChildIdsForParent(t.parentId).map(l=>{const c=this.editor.getShape(l);if(!c||c.id===t.id||c.isLocked)return;const d=this.editor.getShapePageBounds(c);d&&r.contains(d)&&Rhe(c,s,t)&&i.push(c.id)}),this.editor.reparentShapes(i,t.id),this.editor.getInstanceState().isToolLocked?this.editor.setCurrentTool("frame"):this.editor.setCurrentTool("select.idle")}}U($M,"id","frame"),U($M,"initial","idle");function Rhe(n,e,t){return e.includes(n.id)?!1:n.parentId===t.parentId}let Mhe=(KA=class extends Ct{onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onKeyUp(e){var t;if(e.key==="Enter"){if(this.editor.getIsReadonly())return null;const r=this.editor.getOnlySelectedShape();r&&this.editor.getShapeUtil(r).canEdit(r)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(r.id),(t=this.editor.root.getCurrent())==null||t.transition("editing_shape",{...e,target:"shape",shape:r}))}}onCancel(){this.editor.setCurrentTool("select")}},U(KA,"id","idle"),KA),Ahe=(WA=class extends Ct{onPointerUp(){this.complete()}onPointerMove(e){if(this.editor.inputs.isDragging){const{originPagePoint:t}=this.editor.inputs,r=yr(),i=this.editor.markHistoryStoppingPoint(`creating_geo:${r}`),s=ec(t,this.editor);this.editor.createShapes([{id:r,type:"geo",x:s.x,y:s.y,props:{w:1,h:1,geo:this.editor.getStyleForNextShape(ql),scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}}]).select(r).setCurrentTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creatingMarkId:i,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"})}}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.cancel()}complete(){const{originPagePoint:e}=this.editor.inputs,t=yr();this.editor.markHistoryStoppingPoint(`creating_geo:${t}`);const r=this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1,i=this.editor.getStyleForNextShape(ql),s=i==="star"?{w:200,h:190}:i==="cloud"?{w:300,h:180}:{w:200,h:200};this.editor.createShapes([{id:t,type:"geo",x:e.x,y:e.y,props:{geo:this.editor.getStyleForNextShape(ql),scale:r,...s}}]);const l=this.editor.getShape(t);if(!l)return;const{w:c,h:d}=l.props,h=new R(c/2,d/2).mul(r),g=this.editor.getShapeParentTransform(l);g&&h.rot(-g.rotation());const y=ec(new R(l.x-h.x,l.y-h.y),this.editor);this.editor.select(t),this.editor.updateShape({id:l.id,type:"geo",x:y.x,y:y.y,props:{geo:this.editor.getStyleForNextShape(ql),w:c*r,h:d*r}}),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select",{})}cancel(){this.parent.transition("idle")}},U(WA,"id","pointing"),WA);class BM extends Ct{constructor(){super(...arguments);U(this,"shapeType","geo")}static children(){return[Mhe,Ahe]}}U(BM,"id","geo"),U(BM,"initial","idle");class x1 extends Ct{constructor(){super(...arguments);U(this,"shapeType","highlight")}static children(){return[y7,UM]}onExit(){const t=this.children.drawing;t.initialShape=void 0}}U(x1,"id","highlight"),U(x1,"initial","idle"),U(x1,"isLockable",!1);let Dhe=(GA=class extends Ct{constructor(){super(...arguments);U(this,"shapeId","")}onEnter(t){this.shapeId=t.shapeId,this.editor.setCursor({type:"cross",rotation:0})}onPointerDown(){this.parent.transition("pointing",{shapeId:this.shapeId})}onCancel(){this.editor.setCurrentTool("select")}},U(GA,"id","idle"),GA);const v7=2;let Ohe=(qA=class extends Ct{constructor(){super(...arguments);U(this,"shape",{});U(this,"markId")}onEnter(t){const{inputs:r}=this.editor,{currentPagePoint:i}=r;this.markId=void 0;const s=t.shapeId&&this.editor.getShape(t.shapeId);if(s&&r.shiftKey){this.markId=this.editor.markHistoryStoppingPoint(`creating_line:${s.id}`),this.shape=s;const l=this.editor.getShapeHandles(this.shape);if(!l)return;const c=l.filter(C=>C.type==="vertex").sort(Go),d=c[c.length-1],h=c[c.length-2],g=qe.applyToPoint(this.editor.getShapeParentTransform(this.shape),new R(this.shape.x,this.shape.y)),y=R.Sub(i,g).addXY(.1,.1),v=ec(y,this.editor),w=Lr(this.shape.props.points);if(R.DistMin(d,h,v7)||R.DistMin(v,d,v7))w[d.id]={id:d.id,index:d.index,x:v.x,y:v.y};else{const C=Fc(d.index);w[C]={id:C,index:C,x:v.x,y:v.y}}this.editor.updateShapes([{id:this.shape.id,type:this.shape.type,props:{points:w}}])}else{const l=yr();this.markId=this.editor.markHistoryStoppingPoint(`creating_line:${l}`);const c=ec(i,this.editor);this.editor.createShapes([{id:l,type:"line",x:c.x,y:c.y,props:{scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}}]),this.editor.select(l),this.shape=this.editor.getShape(l)}}onPointerMove(){if(this.shape&&this.editor.inputs.isDragging){const t=this.editor.getShapeHandles(this.shape);if(!t)throw this.markId&&this.editor.bailToMark(this.markId),Error("No handles found");const r=yo(t);this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,isCreating:!0,creatingMarkId:this.markId,handle:{...r,x:r.x-.1,y:r.y-.1},onInteractionEnd:"line"})}}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.parent.transition("idle"),this.markId&&this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators()}complete(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}cancel(){this.markId&&this.editor.bailToMark(this.markId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}},U(qA,"id","pointing"),qA);class HM extends Ct{constructor(){super(...arguments);U(this,"shapeType","line")}static children(){return[Dhe,Ohe]}}U(HM,"id","line"),U(HM,"initial","idle");let jhe=(YA=class extends Ct{onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onCancel(){this.editor.setCurrentTool("select")}},U(YA,"id","idle"),YA);const Lhe=0,vr=200,w1=new R(vr/2,vr/2),S7=10,Nhe=n=>[[["a1"],new R(vr*.5,vr*-.5-n.options.adjacentShapeMargin)],[["a2"],new R(vr*1.5+n.options.adjacentShapeMargin,vr*.5)],[["a3"],new R(vr*.5,vr*1.5+n.options.adjacentShapeMargin)],[["a4"],new R(vr*-.5-n.options.adjacentShapeMargin,vr*.5)]];function Fhe(n,e){if(e===1)return Nhe(n);const t=vr*e,r=n.options.adjacentShapeMargin*e;return[[["a1"],new R(t*.5,t*-.5-r)],[["a2"],new R(t*1.5+r,t*.5)],[["a3"],new R(t*.5,t*1.5+r)],[["a4"],new R(t*-.5-r,t*.5)]]}function x7(n,e,t,r,i,s){return Object.fromEntries(Fhe(n,s).map(([l,c],d)=>{const h=c.clone();return d===0&&i?h.y-=i:d===2&&r&&(h.y+=r),[l,h.rot(t).add(e)]}))}function w7(n,e,t,r){const i=new Set(n.getSelectedShapeIds()),s=(vr+n.options.adjacentShapeMargin+r)**2,l=new Map,c=[];for(const g of n.getCurrentPageShapes()){if(!n.isShapeOfType(g,"note")||t!==g.props.scale||i.has(g.id))continue;const y=n.getShapePageTransform(g.id);e===y.rotation()&&(l.set(g,n.getShapePageBounds(g).center),c.push(...Object.values(x7(n,y.point(),e,g.props.growY,r,t))))}const d=c.length;let h;for(const[g,y]of l)for(let v=0;v<d;v++)h=c[v],h&&(R.Dist2(y,h)>s||n.isPointInShape(g,h)&&(c[v]=void 0));return on(c)}function b7(n,e,t,r,i=!1){let s;const l=n.getCurrentPageShapesSorted(),c=(vr+n.options.adjacentShapeMargin**2)**e.props.scale;for(let d=l.length-1;d>=0;d--){const h=l[d];if(h.type==="note"&&h.id!==e.id){const g=n.getShapePageBounds(h);if(g&&R.Dist2(g.center,t)<c&&n.isPointInShape(h,t)){s=h;break}}}if(n.complete(),!s||i){n.markHistoryStoppingPoint("creating note shape");const d=yr();n.createShape({id:d,type:"note",x:t.x,y:t.y,rotation:r,opacity:e.opacity,props:{...e.props,text:"",growY:0,fontSizeAdjustment:0,url:""}});const h=n.getShape(d);if(!h)return;const g=n.getPointInParentSpace(h,R.Sub(t,R.Rot(w1.clone().mul(h.props.scale),r)));n.updateShape({id:d,type:"note",x:g.x,y:g.y}),s=n.getShape(d)}return Uhe(n),s}const zhe=16;function Uhe(n){const e=n.getSelectionPageBounds(),t=n.getViewportPageBounds();if(e&&!t.contains(e)){const r=e.clone().expandBy(zhe/n.getZoomLevel()).expand(t),i=t.clone().translate({x:(r.center.x-t.center.x)*2,y:(r.center.y-t.center.y)*2});n.zoomToBounds(i,{animation:{duration:n.options.animationMediumMs},inset:0})}}let $he=(XA=class extends Ct{constructor(){super(...arguments);U(this,"dragged",!1);U(this,"info",{});U(this,"markId","");U(this,"shape",{})}onEnter(){const{editor:t}=this,r=yr();this.markId=t.markHistoryStoppingPoint(`creating_note:${r}`);const i=this.editor.inputs.originPagePoint.clone(),s=Bhe(this.editor,i,this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1);s&&i.sub(s),this.shape=Hhe(this.editor,r,i)}onPointerMove(t){this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.translating",{...t,target:"shape",shape:this.shape,onInteractionEnd:"note",isCreating:!0,creatingMarkId:this.markId,onCreate:()=>{this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape")}})}onPointerUp(){this.complete()}onInterrupt(){this.cancel()}onComplete(){this.complete()}onCancel(){this.cancel()}complete(){this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):(this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape",{...this.info,target:"shape",shape:this.shape}))}cancel(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}},U(XA,"id","pointing"),XA);function Bhe(n,e,t){let r=S7/n.getZoomLevel(),i;for(const s of w7(n,0,t,0)){const l=R.Sub(e,s),c=l.len();c<r&&(r=c,i=l)}return i}function Hhe(n,e,t){n.createShape({id:e,type:"note",x:t.x,y:t.y,props:{scale:n.user.getIsDynamicResizeMode()?1/n.getZoomLevel():1}}).select(e);const r=n.getShape(e),i=n.getShapeGeometry(r).bounds,s=ec(new R(r.x-i.width/2,r.y-i.height/2),n);return n.updateShapes([{id:e,type:"note",x:s.x,y:s.y}]),n.getShape(e)}class VM extends Ct{constructor(){super(...arguments);U(this,"shapeType","note")}static children(){return[jhe,$he]}}U(VM,"id","note"),U(VM,"initial","idle");var Vhe={};function Khe(n){const e=n.getShapeAtPoint(n.inputs.currentPagePoint,{hitInside:!1,hitLabels:!1,margin:n.options.hitTestMargin/n.getZoomLevel(),renderingOnly:!0});if(!e)return n.setHoveredShape(null);let t;const r=n.getOutermostSelectableShape(e);return r===e||r.id===n.getFocusedGroupId()||n.getSelectedShapeIds().includes(r.id)?t=e:t=r,n.setHoveredShape(t.id)}const ad=UL(Khe,Vhe.NODE_ENV==="test"?0:32);let Whe=(ZA=class extends Ct{onPointerMove(e){switch(e.target){case"shape":case"canvas":ad(this.editor)}}onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onExit(){ad.cancel()}onKeyDown(e){var t;if(e.key==="Enter"){if(this.editor.getIsReadonly())return null;const r=this.editor.getOnlySelectedShape();r&&this.editor.getShapeUtil(r).canEdit(r)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(r.id),(t=this.editor.root.getCurrent())==null||t.transition("editing_shape",{...e,target:"shape",shape:r}))}}onCancel(){this.editor.setCurrentTool("select")}},U(ZA,"id","idle"),ZA),Ghe=(QA=class extends Ct{constructor(){super(...arguments);U(this,"shape");U(this,"markId","");U(this,"enterTime",0)}onEnter(){this.enterTime=Date.now()}onExit(){this.editor.setHintingShapes([])}onPointerMove(t){if(Date.now()-this.enterTime<150)return;const{editor:r}=this,{isPointing:i}=r.inputs;if(!i)return;const{originPagePoint:s,currentPagePoint:l}=r.inputs,c=Math.abs(s.x-l.x),h=Math.sqrt(r.getInstanceState().isCoarsePointer?r.options.coarseDragDistanceSquared:r.options.dragDistanceSquared)*6/r.getZoomLevel();if(c>h){const g=yr();this.markId=r.markHistoryStoppingPoint(`creating_text:${g}`);const y=this.createTextShape(g,s,!1,c);if(!y){this.cancel();return}this.shape=r.getShape(y),r.select(g),r.setCurrentTool("select.resizing",{...t,target:"selection",handle:"right",isCreating:!0,creatingMarkId:this.markId,creationCursorOffset:{x:c,y:1},onInteractionEnd:"text",onCreate:()=>{r.setEditingShape(y.id)}})}}onPointerUp(){this.complete()}onComplete(){this.cancel()}onCancel(){this.cancel()}onInterrupt(){this.cancel()}complete(){this.editor.markHistoryStoppingPoint("creating text shape");const t=yr(),{originPagePoint:r}=this.editor.inputs;this.createTextShape(t,r,!0,20)&&(this.editor.select(t),this.editor.setEditingShape(t))}cancel(){this.parent.transition("idle"),this.editor.bailToMark(this.markId)}createTextShape(t,r,i,s){this.editor.createShape({id:t,type:"text",x:r.x,y:r.y,props:{text:"",autoSize:i,w:s,scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}});const l=this.editor.getShape(t);if(!l){this.cancel();return}const c=this.editor.getShapePageBounds(l),d=new R;if(i)switch(l.props.textAlign){case"start":{d.x=0;break}case"middle":{d.x=-c.width/2;break}case"end":{d.x=-c.width;break}}else d.x=0;if(d.y=-c.height/2,ia(l.parentId)){const y=this.editor.getShapeParentTransform(l);d.rot(-y.rotation())}const h=l.x+d.x,g=l.y+d.y;if(this.editor.getInstanceState().isGridMode){const y=new R(h,g),v=ec(y,this.editor),w=R.Sub(y,v);this.editor.updateShape({...l,x:h-w.x,y:g-w.y})}else this.editor.updateShape({...l,x:h,y:g});return l}},U(QA,"id","pointing"),QA);class KM extends Ct{constructor(){super(...arguments);U(this,"shapeType","text")}static children(){return[Whe,Ghe]}}U(KM,"id","text"),U(KM,"initial","idle");const qhe=[KM,S1,BM,VM,HM,$M,zM,x1];function Sl(){return Vu({isDarkMode:Qv()})}var Yhe={};function b1(n){return{key:`${Bc.id}:${n}`,async getElement(){const e=Xhe(n);if(!e)return null;const{url:t,fontFaceRule:r}=e,i=await(await Lc(t)).blob(),s=await Bl.blobToDataUrl(i),l=r.replace(t,s);return m.jsx("style",{children:l})}}}function Xhe(n){const e=oN[n];for(const t of document.fonts)if(e.includes(t.family)&&"$$_url"in t&&typeof t.$$_url=="string"&&"$$_fontface"in t&&typeof t.$$_fontface=="string")return{url:t.$$_url,fontFaceRule:t.$$_fontface};return null}function WM(n){return{key:`${Bc.id}:${n}`,async getElement(){return n!=="pattern"?null:m.jsx(Zhe,{})}}}function Zhe(){const n=YM(),e=Mg(),t=Sl(),r=8/12;return m.jsxs(m.Fragment,{children:[m.jsxs("mask",{id:e,children:[m.jsx("rect",{x:"0",y:"0",width:"8",height:"8",fill:"white"}),m.jsxs("g",{strokeLinecap:"round",stroke:"black",children:[m.jsx("line",{x1:r*1,y1:r*3,x2:r*3,y2:r*1}),m.jsx("line",{x1:r*5,y1:r*7,x2:r*7,y2:r*5}),m.jsx("line",{x1:r*9,y1:r*11,x2:r*11,y2:r*9})]})]}),m.jsx("pattern",{id:n(1,t.id),width:"8",height:"8",patternUnits:"userSpaceOnUse",children:m.jsx("rect",{x:"0",y:"0",width:"8",height:"8",fill:t.solid,mask:`url(#${e})`})})]})}function GM(){return{key:`${Bc.id}:pattern`,component:tpe}}const CS=8,C7=(n,e,t)=>new Promise((r,i)=>{const s=CS*e*n,l=document.createElement("canvas");l.width=s,l.height=s;const c=l.getContext("2d");if(!c)return;c.fillStyle=t?Sb.darkMode.solid:Sb.lightMode.solid,c.fillRect(0,0,s,s),c.globalCompositeOperation="destination-out",c.lineCap="round",c.lineWidth=1.25*e*n;const d=8/12,h=g=>g*e*n;c.beginPath(),c.moveTo(h(d*1),h(d*3)),c.lineTo(h(d*3),h(d*1)),c.moveTo(h(d*5),h(d*7)),c.lineTo(h(d*7),h(d*5)),c.moveTo(h(d*9),h(d*11)),c.lineTo(h(d*11),h(d*9)),c.stroke(),l.toBlob(g=>{!g||Si.throwToBlob.get()?i():r(g)})}),E7=(n,e)=>{const t=document.createElement("canvas");t.width=n[0],t.height=n[1];const r=t.getContext("2d");return r?(e(r),t.toDataURL()):""};let qM=null;function Qhe(){return qM||(qM={white:E7([1,1],n=>{n.fillStyle="#f8f9fa",n.fillRect(0,0,1,1)}),black:E7([1,1],n=>{n.fillStyle="#212529",n.fillRect(0,0,1,1)})}),qM}function _7(n){return Math.ceil(Math.log2(Math.max(1,n)))}function YM(){const n=Yl("hash_pattern");return M.useCallback((e,t)=>{const r=_7(e);return rk(n,`${t}_${r}`)},[n])}function P7(n){const e=[],r=_7(n);for(let i=0;i<=r;i++)e.push(Math.pow(2,i));return e}function Jhe(n){const e=Qhe();return P7(n).flatMap(t=>[{zoom:t,url:e.white,theme:"light"},{zoom:t,url:e.black,theme:"dark"}])}function epe(){const n=xe(),e=Pe("devicePixelRatio",()=>n.getInstanceState().devicePixelRatio,[n]),t=Pe("maxZoom",()=>Math.ceil(yo(n.getCameraOptions().zoomSteps)),[n]),[r,i]=M.useState(!1),[s,l]=M.useState(()=>Jhe(t)),c=YM();return M.useEffect(()=>{if(Yhe.NODE_ENV==="test"){i(!0);return}const h=Promise.all(P7(t).flatMap(y=>[C7(e,y,!1).then(v=>({zoom:y,theme:"light",url:URL.createObjectURL(v)})),C7(e,y,!0).then(v=>({zoom:y,theme:"dark",url:URL.createObjectURL(v)}))]));let g=!1;return h.then(y=>{g||(l(y),i(!0))}),()=>{g=!0,i(!1),h.then(y=>{for(const{url:v}of y)URL.revokeObjectURL(v)})}},[e,t]),{defs:m.jsx(m.Fragment,{children:s.map(h=>{const g=c(h.zoom,h.theme);return m.jsx("pattern",{id:g,width:CS,height:CS,patternUnits:"userSpaceOnUse",children:m.jsx("image",{href:h.url,width:CS,height:CS})},g)})}),isReady:r}}function tpe(){const n=xe(),e=M.useRef(null),{defs:t,isReady:r}=epe();return M.useEffect(()=>{if(r&&xr.isSafari){const i=T7(e.current);i&&n.timers.requestAnimationFrame(()=>{i.style.display="none",n.timers.requestAnimationFrame(()=>{i.style.display=""})})}},[n,r]),m.jsx("g",{ref:e,"data-testid":r?"ready-pattern-fill-defs":void 0,children:t})}function T7(n){return n.classList.contains("tl-html-layer")?n:n.parentElement?T7(n.parentElement):null}const os=zt.memo(function({theme:e,d:t,color:r,fill:i,scale:s}){switch(i){case"none":return null;case"solid":return m.jsx("path",{fill:e[r].semi,d:t});case"semi":return m.jsx("path",{fill:e.solid,d:t});case"fill":return m.jsx("path",{fill:e[r].fill,d:t});case"pattern":return m.jsx(npe,{theme:e,color:r,fill:i,d:t,scale:s})}});function npe({d:n,color:e,theme:t}){const r=xe(),i=Gv(),s=Pe("zoomLevel",()=>r.getZoomLevel(),[r]),l=YM(),c=r.getZoomLevel()<=.18;return m.jsxs(m.Fragment,{children:[m.jsx("path",{fill:t[e].pattern,d:n}),m.jsx("path",{fill:i?`url(#${l(1,t.id)})`:c?t[e].semi:`url(#${l(s,t.id)})`,d:n})]})}function rpe(n){return n.replace(/\s/g,"")}function XM(n,e,t){const{padding:r=0}=t;if(e.length===0)return null;const i=Xe.From(e[0].box);for(const{box:h}of e)i.union(h);const s=r+(t.offsetX??0),l=(t.offsetY??0)+t.fontSize/2+(t.verticalTextAlign==="start"?r:t.verticalTextAlign==="end"?t.height-r-i.height:(Math.ceil(t.height)-i.height)/2);let c=null;const d=[];for(const{text:h,box:g}of e)c!==null&&g.y>c&&d.push(m.jsx("tspan",{alignmentBaseline:"mathematical",x:s,y:g.y+l,children:`
`},d.length)),d.push(m.jsx("tspan",{alignmentBaseline:"mathematical",x:g.x+s,y:g.y+l,unicodeBidi:"plaintext",children:rpe(h)},d.length)),c=g.y;return m.jsx("text",{fontSize:t.fontSize,fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight,dominantBaseline:"mathematical",alignmentBaseline:"mathematical",stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,children:d})}function ipe(n,e,t,r){if((n==="start-legacy"||n==="end-legacy")&&t.length!==0){const i=Xe.From(t[0].box);for(const{box:s}of t)i.union(s);if(n==="start-legacy")return(r-2*e-i.width)/2;if(n==="end-legacy")return-(r-2*e-i.width)/2}}function ope(n){return n==="start-legacy"||n==="middle-legacy"||n==="end-legacy"}function C1({fontSize:n,font:e,align:t,verticalAlign:r,text:i,labelColor:s,bounds:l,padding:c=16,stroke:d=!0}){const h=xe(),g=Sl(),y={fontSize:n,fontFamily:oN[e],textAlign:t,verticalTextAlign:r,width:Math.ceil(l.width),height:Math.ceil(l.height),padding:c,lineHeight:rs.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0,offsetY:0,fill:s,stroke:void 0,strokeWidth:void 0},v=h.textMeasure.measureTextSpans(i,y),w=ipe(t,c,v,l.width);w&&(y.offsetX=w),y.offsetX+=l.x,y.offsetY+=l.y;const C=XM(h,v,y);let E=null;return d&&(y.fill=g.background,y.stroke=g.background,y.strokeWidth=2,E=XM(h,v,y)),m.jsxs(m.Fragment,{children:[E,C]})}const spe=M.forwardRef(function({isEditing:e,text:t,handleFocus:r,handleChange:i,handleKeyDown:s,handleBlur:l,handleInputPointerDown:c,handleDoubleClick:d},h){return m.jsx("textarea",{ref:h,className:"tl-text tl-text-input",name:"text",tabIndex:-1,readOnly:!e,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",autoSave:"off",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",defaultValue:t,onFocus:r,onChange:i,onKeyDown:s,onBlur:l,onTouchEnd:xi,onContextMenu:e?xi:void 0,onPointerDown:c,onDoubleClick:d,onDragStart:mn})});function ape(n,e,t){const r=xe(),i=M.useRef(null),s=Pe("isEditing",()=>r.getEditingShapeId()===n,[r]),l=Pe("isEditingAnything",()=>!!r.getEditingShapeId(),[r]);M.useEffect(()=>{function g(y){var v;y.shapeId===n&&((v=i.current)==null||v.select())}return r.on("select-all-text",g),()=>{r.off("select-all-text",g)}},[r,n,s]),M.useEffect(()=>{var g,y,v,w;s&&(document.activeElement!==i.current&&((g=i.current)==null||g.focus()),r.getInstanceState().isCoarsePointer&&((y=i.current)==null||y.select()),xr.isSafari&&((v=i.current)==null||v.blur(),(w=i.current)==null||w.focus()))},[r,s]);const c=M.useCallback(g=>{if(r.getEditingShapeId()===n)switch(g.key){case"Enter":{(g.ctrlKey||g.metaKey)&&r.complete();break}}},[r,n]),d=M.useCallback(g=>{if(r.getEditingShapeId()!==n)return;let y=am.normalizeText(g.currentTarget.value);const v=y.replace(/\t/g,sm);if(v!==y){const w=g.currentTarget.selectionStart;g.currentTarget.value=v,g.currentTarget.selectionStart=w+(v.length-y.length),g.currentTarget.selectionEnd=w+(v.length-y.length),y=v}r.updateShape({id:n,type:e,props:{text:y}})},[r,n,e]),h=M.useCallback(g=>{r.dispatch({...Fa(g),type:"pointer",name:"pointer_down",target:"shape",shape:r.getShape(n)}),xi(g)},[r,n]);return{rInput:i,handleFocus:iv,handleBlur:iv,handleKeyDown:c,handleChange:d,handleInputPointerDown:h,handleDoubleClick:xi,isEmpty:t.trim().length===0,isEditing:s,isEditingAnything:l}}const E1=zt.memo(function({shapeId:e,type:t,text:r,labelColor:i,font:s,fontSize:l,lineHeight:c,align:d,verticalAlign:h,wrap:g,isSelected:y,padding:v=0,onKeyDown:w,classNamePrefix:C,style:E,textWidth:P,textHeight:I}){const{rInput:k,isEmpty:L,isEditing:O,isEditingAnything:z,...F}=ape(e,t,r),[H,V]=M.useState(r);M.useEffect(()=>{O||V(r)},[O,r]);const re=am.normalizeTextForDom(r),q=re.length>0,J=ope(d);if(!O&&!q)return null;const ie=C||"tl-text";return m.jsx("div",{className:`${ie}-label tl-text-wrapper`,"data-font":s,"data-align":d,"data-hastext":!L,"data-isediting":O,"data-iseditinganything":z,"data-textwrap":!!g,"data-isselected":y,style:{justifyContent:d==="middle"||J?"center":d,alignItems:h==="middle"?"center":h,padding:v,...E},children:m.jsxs("div",{className:`${ie}-label__inner tl-text-content__wrapper`,style:{fontSize:l,lineHeight:Math.floor(l*c)+"px",minHeight:Math.floor(l*c)+"px",minWidth:Math.ceil(P||0),color:i,width:P?Math.ceil(P):void 0,height:I?Math.ceil(I):void 0},children:[m.jsx("div",{className:`${ie} tl-text tl-text-content`,dir:"auto",children:re.split(`
`).map((W,Y)=>m.jsx("div",{dir:"auto",children:W},Y))}),(z||y)&&m.jsx(spe,{ref:k,text:r,isEditing:O,...F,handleKeyDown:w??F.handleKeyDown},H)]})})}),lpe=new jc;function cpe(n){return lpe.get(n,()=>n.store.createComputedCache("arrowLabelSize",e=>{const t=tu(n,e);let r=0,i=0;const s=t.isStraight?new Qu({start:R.From(t.start.point),end:R.From(t.end.point)}):new Kg({center:R.Cast(t.handleArc.center),start:R.Cast(t.start.point),end:R.Cast(t.end.point),sweepFlag:t.bodyArc.sweepFlag,largeArcFlag:t.bodyArc.largeArcFlag});if(e.props.text.trim()){const l=s.bounds,c=QM(e),{w:d,h}=n.textMeasure.measureText(e.props.text,{...rs,fontFamily:sd[e.props.font],fontSize:c,maxWidth:null});r=d,i=h;let g=!1;if(l.width>l.height?(r=Math.max(Math.min(d,64),Math.min(l.width-64,d)),g=!0):r>16*c&&(r=16*c,g=!0),g){const{w:y,h:v}=n.textMeasure.measureText(e.props.text,{...rs,fontFamily:sd[e.props.font],fontSize:c,maxWidth:r});r=y,i=v}}return new R(r,i).addScalar(FM*2*e.props.scale)}))}function ZM(n,e){return e.props.text.trim()===""?new R(0,0).addScalar(FM*2*e.props.scale):cpe(n).get(e.id)??new R(0,0)}function I7(n){const e=is[n.props.size];return(yhe+(e-is.s)*2+(e===is.xl?20:0))*n.props.scale}function upe(n,e,t){const r=ZM(n,e),i=I7(e),s=R.Nudge(t.start.point,t.end.point,i),l=R.Nudge(t.end.point,t.start.point,i),c=Dk(s,l,Xe.FromCenter(t.middle,r).corners);if(!c||c.length!==2)return{start:.5,end:.5};let[d,h]=c;R.Dist2(d,s)>R.Dist2(h,s)&&([h,d]=c);const g=s.add(R.Sub(t.middle,d)),y=l.add(R.Sub(t.middle,h)),v=R.Dist(t.start.point,g)/t.length,w=R.Dist(t.start.point,y)/t.length;return{start:v,end:w}}function dpe(n,e,t){const r=ZM(n,e),i=I7(e),s=Math.sign(e.props.bend),l=i/t.handleArc.radius*s,c=R.Angle(t.bodyArc.center,t.start.point)-l,d=R.Angle(t.bodyArc.center,t.end.point)+l,h=qh(t.bodyArc.center,t.bodyArc.radius,c),g=qh(t.bodyArc.center,t.bodyArc.radius,d),y=[],v=R7(t.bodyArc.center,t.bodyArc.radius,c,d,s,Xe.FromCenter(h,r).corners);y.push(new wi({points:Xe.FromCenter(h,r).corners,debugColor:"lime",isFilled:!1,ignore:!0}));const w=R7(t.bodyArc.center,t.bodyArc.radius,c,d,s,Xe.FromCenter(g,r).corners);y.push(new wi({points:Xe.FromCenter(g,r).corners,debugColor:"lime",isFilled:!1,ignore:!0}));for(const H of[...v??[],...w??[],h,g])y.push(new cR({x:H.x-3,y:H.y-3,radius:3,isFilled:!1,debugColor:"magenta",ignore:!0}));const C=(v&&M7(t.start.point,v))??t.middle,E=(w&&M7(t.end.point,w))??t.middle,P=R.Angle(t.bodyArc.center,t.start.point),I=R.Angle(t.bodyArc.center,t.end.point),k=R.Angle(t.bodyArc.center,C),L=R.Angle(t.bodyArc.center,E);if(mf(P,k,s)>mf(P,L,s))return{start:.5,end:.5,dbg:y};const O=mf(P,I,s),z=mf(P,k,s)/O,F=mf(P,L,s)/O;return{start:z,end:F,dbg:y}}function _1(n,e){let t;const r=[],i=tu(n,e),s={hasStartBinding:!!i.bindings.start,hasEndBinding:!!i.bindings.end,hasStartArrowhead:i.start.arrowhead!=="none",hasEndArrowhead:i.end.arrowhead!=="none"};if(i.isStraight){const c=upe(n,e,i),d=k7(n,e,c,s);t=R.Lrp(i.start.point,i.end.point,d)}else{const c=dpe(n,e,i);c.dbg&&r.push(...c.dbg);const d=k7(n,e,c,s),h=fpe(R.Angle(i.bodyArc.center,i.start.point),R.Angle(i.bodyArc.center,i.end.point),Math.sign(e.props.bend),d);t=qh(i.bodyArc.center,i.bodyArc.radius,h)}const l=ZM(n,e);return{box:Xe.FromCenter(t,l),debugGeom:r}}function k7(n,e,t,r){const{hasEndArrowhead:i,hasEndBinding:s,hasStartBinding:l,hasStartArrowhead:c}=r,d=j7(n,e);let h=Co(e.props.labelPosition,c||l?t.start:0,i||s?t.end:1);const g=Math.min(.02,500/d*.02);return h=h>=.5-g&&h<=.5+g?.5:h,h}function R7(n,e,t,r,i,s){const l=Ok(n,e,s),c=mf(t,r,i);return l==null?void 0:l.filter(d=>{const h=mf(t,R.Angle(n,d),i);return h>=0&&h<=c})}function M7(n,e){let t=null,r=-1/0;for(const i of e){const s=R.Dist2(n,i);s>r&&(t=i,r=s)}return t}function fpe(n,e,t,r){const i=mf(n,e,t);return n+i*r*t*-1}function QM(n){return mhe[n.props.size]*n.props.scale}function hpe(n,e,t){const r=e==="end"?n.end.point:n.start.point,i=e==="end"?n.start.point:n.end.point,s=n.isStraight?R.Dist(i,r):Math.abs(n.bodyArc.length),l=Math.max(Math.min(s/5,t*3),t);let c;if(n.isStraight)c=R.Nudge(r,i,l);else{const d=Wne(r,l,n.handleArc.center,n.handleArc.radius);c=e==="end"?n.handleArc.sweepFlag?d[0]:d[1]:n.handleArc.sweepFlag?d[1]:d[0]}return R.IsNaN(c)&&(c=n.start.point),{point:r,int:c}}function ppe({point:n,int:e}){const t=R.RotWith(e,n,qn/6),r=R.RotWith(e,n,-qn/6);return`M ${t.x} ${t.y} L ${n.x} ${n.y} L ${r.x} ${r.y}`}function gpe({point:n,int:e}){const t=R.RotWith(e,n,qn/6),r=R.RotWith(e,n,-qn/6);return`M ${t.x} ${t.y} L ${r.x} ${r.y} L ${n.x} ${n.y} Z`}function mpe({point:n,int:e}){const t=R.Sub(e,n).div(2),r=R.Add(n,R.Rot(t,Pr)),i=R.Sub(n,R.Rot(t,Pr));return`M ${r.x} ${r.y} L ${e.x} ${e.y} L ${i.x} ${i.y} Z`}function ype({point:n,int:e}){const t=R.Lrp(n,e,.45),r=R.Dist(t,n);return`M ${t.x-r},${t.y}
  a ${r},${r} 0 1,0 ${r*2},0
  a ${r},${r} 0 1,0 -${r*2},0 `}function vpe({point:n,int:e}){const t=R.Lrp(n,e,.75),r=R.RotWith(t,n,qn/4),i=R.RotWith(t,n,-qn/4),s=R.Lrp(r,i,.5);return s.add(R.Sub(s,n)),`M ${s.x} ${s.y} L ${i.x} ${i.y} ${n.x} ${n.y} L ${r.x} ${r.y} Z`}function Spe({int:n,point:e}){const t=R.Lrp(e,n,.85),r=R.Sub(t,e).div(2),i=R.Add(e,R.Rot(r,Pr)),s=R.Sub(e,R.Rot(r,Pr)),l=R.Add(t,R.Rot(r,Pr)),c=R.Sub(t,R.Rot(r,Pr));return`M ${i.x} ${i.y} L ${l.x} ${l.y} L ${c.x} ${c.y} L ${s.x} ${s.y} Z`}function xpe({int:n,point:e}){const t=R.Sub(n,e).div(2),r=R.Add(e,R.Rot(t,Pr)),i=R.Sub(e,R.Rot(t,Pr));return`M ${r.x} ${r.y} L ${i.x} ${i.y}`}function P1(n,e,t){const r=e==="end"?n.end.arrowhead:n.start.arrowhead;if(r==="none")return;const i=hpe(n,e,t);if(i){switch(r){case"bar":return xpe(i);case"square":return Spe(i);case"diamond":return vpe(i);case"dot":return ype(i);case"inverted":return mpe(i);case"arrow":return ppe(i);case"triangle":return gpe(i)}return""}}function wpe(n){const{start:e,end:t,handleArc:{radius:r,largeArcFlag:i,sweepFlag:s}}=n;return`M${e.handle.x},${e.handle.y} A${r} ${r} 0 ${i} ${s} ${t.handle.x},${t.handle.y}`}function A7(n){const{start:e,end:t,bodyArc:{radius:r,largeArcFlag:i,sweepFlag:s}}=n;return`M${e.point.x},${e.point.y} A${r} ${r} 0 ${i} ${s} ${t.point.x},${t.point.y}`}function D7(n,e){return`M${n.x},${n.y}L${e.x},${e.y}`}function bpe(n){return D7(n.start.handle,n.end.handle)}function O7(n){return D7(n.start.point,n.end.point)}class T1 extends Zl{constructor(){super(...arguments);U(this,"_resizeInitialBindings",new jc)}canEdit(){return!0}canBind({toShapeType:t}){return t!=="arrow"}canSnap(){return!1}hideResizeHandles(){return!0}hideRotateHandle(){return!0}hideSelectionBoundsBg(){return!0}hideSelectionBoundsFg(){return!0}canBeLaidOut(t){const r=da(this.editor,t);return!r.start&&!r.end}getDefaultProps(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{x:0,y:0},end:{x:2,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",scale:1}}getGeometry(t){const r=tu(this.editor,t),i=[],s=r.isStraight?new Qu({start:R.From(r.start.point),end:R.From(r.end.point)}):new Kg({center:R.Cast(r.handleArc.center),start:R.Cast(r.start.point),end:R.Cast(r.end.point),sweepFlag:r.bodyArc.sweepFlag,largeArcFlag:r.bodyArc.largeArcFlag});let l;if(t.props.text.trim()){const c=_1(this.editor,t);i.push(...c.debugGeom),l=new Vc({x:c.box.x,y:c.box.y,width:c.box.w,height:c.box.h,isFilled:!0,isLabel:!0})}return new hl({children:[...l?[s,l]:[s],...i]})}getHandles(t){const r=tu(this.editor,t);return[{id:"start",type:"vertex",index:"a0",x:r.start.handle.x,y:r.start.handle.y},{id:"middle",type:"virtual",index:"a2",x:r.middle.x,y:r.middle.y},{id:"end",type:"vertex",index:"a3",x:r.end.handle.x,y:r.end.handle.y}].filter(Boolean)}getText(t){return t.props.text}onHandleDrag(t,{handle:r,isPrecise:i}){const s=r.id,l=da(this.editor,t);if(s==="middle"){const{start:F,end:H}=im(this.editor,t,l),V=R.Sub(H,F),re=R.Per(V),q=R.Med(H,F),J=R.Sub(q,re),ie=R.Add(q,re),W=R.NearestPointOnLineSegment(J,ie,r,!1);let Y=R.Dist(W,q);return R.Clockwise(W,H,q)&&(Y*=-1),{id:t.id,type:t.type,props:{bend:Y}}}const c={id:t.id,type:"arrow",props:{}},d=l[s],g=l[s==="start"?"end":"start"];if(this.editor.inputs.ctrlKey)return p1(this.editor,t,s),c.props[s]={x:r.x,y:r.y},c;const y=this.editor.getShapePageTransform(t.id).applyToPoint(r),v=this.editor.getShapeAtPoint(y,{hitInside:!0,hitFrameInside:!0,margin:0,filter:F=>!F.isLocked&&this.editor.canBindShapes({fromShape:t,toShape:F,binding:"arrow"})});if(!v){p1(this.editor,t,s);const F=ec(new R(r.x,r.y),this.editor);return c.props[s]={x:F.x,y:F.y},c}const w=this.editor.getShapeGeometry(v),C=Xe.ZeroFix(w.bounds),P=this.editor.getShapePageTransform(c.id).applyToPoint(r),I=this.editor.getPointInShapeSpace(v,P);let k=i;k||(!d||d&&v.id!==d.toId)&&(k=this.editor.inputs.pointerVelocity.len()<.5),i||(w.isClosed||(k=!0),g&&v.id===g.toId&&g.props.isPrecise&&(k=!0));const L={x:(I.x-C.minX)/C.width,y:(I.y-C.minY)/C.height};k&&R.Dist(I,C.center)<Math.max(4,Math.min(Math.min(C.width,C.height)*.15,16))/this.editor.getZoomLevel()&&(L.x=.5,L.y=.5);const O={terminal:s,normalizedAnchor:L,isPrecise:k,isExact:this.editor.inputs.altKey};wS(this.editor,t,v.id,O),this.editor.setHintingShapes([v.id]);const z=da(this.editor,t);return z.start&&z.end&&z.start.toId===z.end.toId&&R.Equals(z.start.props.normalizedAnchor,z.end.props.normalizedAnchor)&&wS(this.editor,t,z.end.toId,{...z.end.props,normalizedAnchor:{x:z.end.props.normalizedAnchor.x+.05,y:z.end.props.normalizedAnchor.y}}),c}onTranslateStart(t){const r=da(this.editor,t),i=im(this.editor,t,r),s=this.editor.getShapePageTransform(t.id),l=this.editor.getSelectedShapeIds();if(!(r.start&&(l.includes(r.start.toId)||this.editor.isAncestorSelected(r.start.toId))||r.end&&(l.includes(r.end.toId)||this.editor.isAncestorSelected(r.end.toId)))){F7.set(t,{pagePosition:s.applyToPoint(t),terminalBindings:lv(i,(c,d)=>{const h=r[c];return h?{binding:h,shapePosition:d,pagePosition:s.applyToPoint(d)}:null})}),r.start&&(y1({editor:this.editor,arrow:t,terminal:"start",useHandle:!0}),t=this.editor.getShape(t.id)),r.end&&y1({editor:this.editor,arrow:t,terminal:"end",useHandle:!0});for(const c of["start","end"]){const d=r[c];d&&this.editor.updateBinding({...d,props:{...d.props,isPrecise:!0}})}}}onTranslate(t,r){const i=F7.get(t);if(!i)return;const s=this.editor.getShapePageTransform(r.id),l=R.Sub(s.applyToPoint(r),i.pagePosition);for(const c of Object.values(i.terminalBindings)){if(!c)continue;const d=R.Add(c.pagePosition,R.Mul(l,.5)),h=this.editor.getShapeAtPoint(d,{hitInside:!0,hitFrameInside:!0,margin:0,filter:g=>!g.isLocked&&this.editor.canBindShapes({fromShape:r,toShape:g,binding:"arrow"})});if((h==null?void 0:h.id)===c.binding.toId){const g=Xe.ZeroFix(this.editor.getShapeGeometry(h).bounds),y=this.editor.getPointInShapeSpace(h,d),v={x:(y.x-g.minX)/g.width,y:(y.y-g.minY)/g.height};wS(this.editor,r,h.id,{...c.binding.props,normalizedAnchor:v,isPrecise:!0})}else p1(this.editor,r,c.binding.props.terminal)}}onResize(t,r){const{scaleX:i,scaleY:s}=r,l=this._resizeInitialBindings.get(t,()=>da(this.editor,t)),c=im(this.editor,t,l),{start:d,end:h}=Lr(t.props);let{bend:g}=t.props;l.start||(d.x=c.start.x*i,d.y=c.start.y*s),l.end||(h.x=c.end.x*i,h.y=c.end.y*s);const y=Math.abs(i),v=Math.abs(s),w=l!=null&&l.start?R.From(l.start.props.normalizedAnchor):null,C=l!=null&&l.end?R.From(l.end.props.normalizedAnchor):null;return i<0&&s>=0?(g!==0&&(g*=-1,g*=Math.max(y,v)),w&&(w.x=1-w.x),C&&(C.x=1-C.x)):i>=0&&s<0?(g!==0&&(g*=-1,g*=Math.max(y,v)),w&&(w.y=1-w.y),C&&(C.y=1-C.y)):i>=0&&s>=0?g!==0&&(g*=Math.max(y,v)):i<0&&s<0&&(g!==0&&(g*=Math.max(y,v)),w&&(w.x=1-w.x,w.y=1-w.y),C&&(C.x=1-C.x,C.y=1-C.y)),l.start&&w&&wS(this.editor,t,l.start.toId,{...l.start.props,normalizedAnchor:w.toJson()}),l.end&&C&&wS(this.editor,t,l.end.toId,{...l.end.props,normalizedAnchor:C.toJson()}),{props:{start:d,end:h,bend:g}}}onDoubleClickHandle(t,r){switch(r.id){case"start":return{id:t.id,type:t.type,props:{...t.props,arrowheadStart:t.props.arrowheadStart==="none"?"arrow":"none"}};case"end":return{id:t.id,type:t.type,props:{...t.props,arrowheadEnd:t.props.arrowheadEnd==="none"?"arrow":"none"}}}}component(t){const r=Sl(),i=this.editor.getOnlySelectedShape(),s=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","select.translating","arrow.dragging")&&!this.editor.getIsReadonly(),l=tu(this.editor,t);if(!(l!=null&&l.isValid))return null;const c=_1(this.editor,t),d=t.id===this.editor.getOnlySelectedShapeId(),g=this.editor.getEditingShapeId()===t.id||t.props.text;return m.jsxs(m.Fragment,{children:[m.jsx(Sf,{style:{minWidth:50,minHeight:50},children:m.jsx(L7,{shape:t,shouldDisplayHandles:s&&(i==null?void 0:i.id)===t.id})}),g&&m.jsx(E1,{shapeId:t.id,classNamePrefix:"tl-arrow",type:"arrow",font:t.props.font,fontSize:QM(t),lineHeight:rs.lineHeight,align:"middle",verticalAlign:"middle",text:t.props.text,labelColor:r[t.props.labelColor].solid,textWidth:c.box.w-FM*2*t.props.scale,isSelected:d,padding:0,style:{transform:`translate(${c.box.center.x}px, ${c.box.center.y}px)`}})]})}indicator(t){const r=m0(t.id),i=Yl(t.id+"_clip"),s=tu(this.editor,t);if(!s)return null;const{start:l,end:c}=im(this.editor,t,s==null?void 0:s.bindings),d=this.editor.getShapeGeometry(t),h=d.bounds,g=t.props.text.trim()?d.children[1]:null;if(R.Equals(l,c))return null;const y=is[t.props.size]*t.props.scale,v=s.start.arrowhead&&P1(s,"start",y),w=s.end.arrowhead&&P1(s,"end",y),C=s.isStraight?O7(s):A7(s),E=v&&s.start.arrowhead!=="arrow"||w&&s.end.arrowhead!=="arrow"||!!g;if(r&&g)return m.jsx("rect",{x:Se(g.x),y:Se(g.y),width:g.w,height:g.h,rx:3.5*t.props.scale,ry:3.5*t.props.scale});const P=!(s.start.arrowhead==="none"||s.start.arrowhead==="arrow"),I=!(s.end.arrowhead==="none"||s.end.arrowhead==="arrow");return m.jsxs("g",{children:[E&&m.jsx("defs",{children:m.jsx(N7,{hasText:t.props.text.trim().length>0,bounds:h,labelBounds:g?g.getBounds():new Xe(0,0,0,0),as:P&&v?v:"",ae:I&&w?w:""})}),m.jsxs("g",{style:{clipPath:E?`url(#${i})`:void 0,WebkitClipPath:E?`url(#${i})`:void 0},children:[E&&m.jsx("rect",{x:h.minX-100,y:h.minY-100,width:h.width+200,height:h.height+200,opacity:0}),m.jsx("path",{d:C})]}),v&&m.jsx("path",{d:v}),w&&m.jsx("path",{d:w}),g&&m.jsx("rect",{x:Se(g.x),y:Se(g.y),width:g.w,height:g.h,rx:3.5,ry:3.5})]})}onEditEnd(t){const{id:r,type:i,props:{text:s}}=t;s.trimEnd()!==t.props.text&&this.editor.updateShapes([{id:r,type:i,props:{text:s.trimEnd()}}])}toSvg(t,r){r.addExportDef(WM(t.props.fill)),t.props.text&&r.addExportDef(b1(t.props.font));const i=Vu(r),s=1/t.props.scale;return m.jsxs("g",{transform:`scale(${s})`,children:[m.jsx(L7,{shape:t,shouldDisplayHandles:!1}),m.jsx(C1,{fontSize:QM(t),font:t.props.font,align:"middle",verticalAlign:"middle",text:t.props.text,labelColor:i[t.props.labelColor].solid,bounds:_1(this.editor,t).box.clone().expandBy(-4.25*t.props.scale),padding:0})]})}getCanvasSvgDefs(){return[GM(),{key:"arrow:dot",component:Cpe},{key:"arrow:cross",component:Epe}]}getInterpolatedProps(t,r,i){return{...i>.5?r.props:t.props,scale:Rn(t.props.scale,r.props.scale,i),start:{x:Rn(t.props.start.x,r.props.start.x,i),y:Rn(t.props.start.y,r.props.start.y,i)},end:{x:Rn(t.props.end.x,r.props.end.x,i),y:Rn(t.props.end.y,r.props.end.y,i)},bend:Rn(t.props.bend,r.props.bend,i),labelPosition:Rn(t.props.labelPosition,r.props.labelPosition,i)}}}U(T1,"type","arrow"),U(T1,"props",aN),U(T1,"migrations",lN);function j7(n,e){const t=tu(n,e);return t.isStraight?R.Dist(t.start.handle,t.end.handle):Math.abs(t.handleArc.length)}const L7=bo(function({shape:e,shouldDisplayHandles:t}){const r=xe(),i=Sl(),s=tu(r,e),l=Xe.ZeroFix(r.getShapeGeometry(e).bounds),c=da(r,e),d=Pe("force solid",()=>r.getZoomLevel()<.2,[r]),h=Yl(e.id+"_clip"),g=Yl("arrowhead-dot"),y=Yl("arrowhead-cross");if(!(s!=null&&s.isValid))return null;const v=is[e.props.size]*e.props.scale,w=s.start.arrowhead&&P1(s,"start",v),C=s.end.arrowhead&&P1(s,"end",v),E=s.isStraight?O7(s):A7(s);let P=null;if(t){const F=2/r.getZoomLevel(),{strokeDasharray:H,strokeDashoffset:V}=Ql(j7(r,e),F,{end:"skip",start:"skip",lengthRatio:2.5});P=c.start||c.end?m.jsx("path",{className:"tl-arrow-hint",d:s.isStraight?bpe(s):wpe(s),strokeDasharray:H,strokeDashoffset:V,strokeWidth:F,markerStart:c.start?c.start.props.isExact?"":c.start.props.isPrecise?`url(#${y})`:`url(#${g})`:"",markerEnd:c.end?c.end.props.isExact?"":c.end.props.isPrecise?`url(#${y})`:`url(#${g})`:"",opacity:.16}):null}const{strokeDasharray:I,strokeDashoffset:k}=Ql(s.isStraight?s.length:Math.abs(s.bodyArc.length),v,{style:e.props.dash,forceSolid:d}),L=_1(r,e),O=!(s.start.arrowhead==="none"||s.start.arrowhead==="arrow"),z=!(s.end.arrowhead==="none"||s.end.arrowhead==="arrow");return m.jsxs(m.Fragment,{children:[m.jsx("defs",{children:m.jsx("clipPath",{id:h,children:m.jsx(N7,{hasText:e.props.text.trim().length>0,bounds:l,labelBounds:L.box,as:O&&w?w:"",ae:z&&C?C:""})})}),m.jsxs("g",{fill:"none",stroke:i[e.props.color].solid,strokeWidth:v,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[P,m.jsxs("g",{style:{clipPath:`url(#${h})`,WebkitClipPath:`url(#${h})`},children:[m.jsx("rect",{x:Se(l.minX-100),y:Se(l.minY-100),width:Se(l.width+200),height:Se(l.height+200),opacity:0}),m.jsx("path",{d:E,strokeDasharray:I,strokeDashoffset:k})]}),w&&O&&e.props.fill!=="none"&&m.jsx(os,{theme:i,d:w,color:e.props.color,fill:e.props.fill,scale:e.props.scale}),C&&z&&e.props.fill!=="none"&&m.jsx(os,{theme:i,d:C,color:e.props.color,fill:e.props.fill,scale:e.props.scale}),w&&m.jsx("path",{d:w}),C&&m.jsx("path",{d:C})]})]})});function N7({hasText:n,bounds:e,labelBounds:t,as:r,ae:i}){const s=`M${Se(e.minX-100)},${Se(e.minY-100)} h${e.width+200} v${e.height+200} h-${e.width+200} Z`,l=`M${Se(t.minX)},${Se(t.minY)} v${t.height} h${t.width} v-${t.height} Z`;return m.jsx("path",{d:`${s}${n?l:""}${r}${i}`})}const F7=new WeakMap;function Cpe(){const n=Yl("arrowhead-dot");return m.jsx("marker",{id:n,className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:m.jsx("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function Epe(){const n=Yl("arrowhead-cross");return m.jsxs("marker",{id:n,className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[m.jsx("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),m.jsx("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}const z7="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function lm({url:n}){const e=xe(),t=Pe("zoomLevel",()=>e.getZoomLevel()<.32,[e]);return m.jsx("a",{className:It("tl-hyperlink-button",{"tl-hyperlink-button__hidden":t}),href:n,target:"_blank",rel:"noopener noreferrer",onPointerDown:xi,onPointerUp:xi,title:n,draggable:!1,children:m.jsx("div",{className:"tl-hyperlink__icon",style:{mask:`url("${z7}") center 100% / 100% no-repeat`,WebkitMask:`url("${z7}") center 100% / 100% no-repeat`}})})}const U7="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E",_pe=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function I1(n){return _pe.map(t=>{const{offsetX:r,offsetY:i,blur:s,spread:l,color:c}=t,d=new R(r,i),{x:h,y:g}=d.rot(-n);return`${h}px ${g}px ${s}px ${l}px ${c}`}).join(", ")}const Ppe=300,$7=320,Tpe=46,Ipe=101;class k1 extends Vg{canResize(){return!1}hideSelectionBoundsFg(){return!0}getText(e){return e.props.url}getDefaultProps(){return{url:"",w:Ppe,h:$7,assetId:null}}component(e){return m.jsx(kpe,{shape:e,util:this})}indicator(e){return m.jsx("rect",{width:Se(e.props.w),height:Se(e.props.h),rx:"6",ry:"6"})}onBeforeCreate(e){return B7(this.editor,e)}onBeforeUpdate(e,t){if(e.props.url!==t.props.url)if(Da.isValid(t.props.url))Mpe(this.editor,t);else return{...t,props:{...t.props,url:e.props.url}};if(e.props.assetId!==t.props.assetId)return B7(this.editor,t)}getInterpolatedProps(e,t,r){return{...r>.5?t.props:e.props,w:Rn(e.props.w,t.props.w,r),h:Rn(e.props.h,t.props.h,r)}}}U(k1,"type","bookmark"),U(k1,"props",yN),U(k1,"migrations",SN);function kpe({shape:n,util:e}){const t=n.props.assetId?e.editor.getAsset(n.props.assetId):null,r=!!Gv()&&xr.isSafari,i=e.editor.getShapePageTransform(n).rotation(),s=Rpe(n),[l,c]=M.useState(!0),d=()=>c(!1);return m.jsx(Cf,{children:m.jsxs("div",{className:It("tl-bookmark__container",r&&"tl-bookmark__container--safariExport"),style:{boxShadow:r?void 0:I1(i),maxHeight:n.props.h},children:[(!t||t.props.image)&&m.jsxs("div",{className:"tl-bookmark__image_container",children:[t?m.jsx("img",{className:"tl-bookmark__image",draggable:!1,referrerPolicy:"strict-origin-when-cross-origin",src:t==null?void 0:t.props.image,alt:(t==null?void 0:t.props.title)||""}):m.jsx("div",{className:"tl-bookmark__placeholder"}),(t==null?void 0:t.props.image)&&m.jsx(lm,{url:n.props.url})]}),m.jsxs("div",{className:"tl-bookmark__copy_container",children:[t!=null&&t.props.title?m.jsx("h2",{className:"tl-bookmark__heading",children:Che(t.props.title)}):null,t!=null&&t.props.description&&(t!=null&&t.props.image)?m.jsx("p",{className:"tl-bookmark__description",children:t.props.description}):null,m.jsxs("a",{className:"tl-bookmark__link",href:n.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:xi,onPointerUp:xi,onClick:xi,children:[l&&(t!=null&&t.props.favicon)?m.jsx("img",{className:"tl-bookmark__favicon",src:t==null?void 0:t.props.favicon,referrerPolicy:"strict-origin-when-cross-origin",onError:d,alt:`favicon of ${s}`}):m.jsx("div",{className:"tl-hyperlink__icon",style:{mask:`url("${U7}") center 100% / 100% no-repeat`,WebkitMask:`url("${U7}") center 100% / 100% no-repeat`}}),m.jsx("span",{children:s})]})]})]})})}function B7(n,e){const t=e.props.assetId?n.getAsset(e.props.assetId):null;let r=$7;return t&&(t.props.image||(t.props.title?r=Ipe:r=Tpe)),{...e,props:{...e.props,h:r}}}const Rpe=n=>{try{return new URL(n.props.url).hostname.replace(/^www\./,"")}catch{return n.props.url}};function Mpe(n,e){const{url:t}=e.props,r=cf.createId(sP(t));n.getAsset(r)?e.props.assetId!==r&&n.updateShapes([{id:e.id,type:e.type,props:{assetId:r}}]):(n.updateShapes([{id:e.id,type:e.type,props:{assetId:null}}]),Ape(n,e))}const Ape=Kw(async(n,e)=>{if(n.isDisposed)return;const{url:t}=e.props,r=await n.getAssetForExternalContent({type:"url",url:t});r&&n.run(()=>{n.createAssets([r]),n.updateShapes([{id:e.id,type:e.type,props:{assetId:r.id}}])})},500);function sp(n,e=!1){const t=n.length;if(t<2)return"";let r=n[0].point,i=n[1].point;if(t===2)return`M${Gn(r)}L${Gn(i)}`;let s="";for(let l=2,c=t-1;l<c;l++)r=n[l].point,i=n[l+1].point,s+=sa(r,i);return e?`M${sa(n[0].point,n[1].point)}Q${Gn(n[1].point)}${sa(n[1].point,n[2].point)}T${s}${sa(n[t-1].point,n[0].point)}${sa(n[0].point,n[1].point)}Z`:`M${Gn(n[0].point)}Q${Gn(n[1].point)}${sa(n[1].point,n[2].point)}${n.length>3?"T":""}${s}L${Gn(n[t-1].point)}`}function Dpe(n,e={}){const{start:t={},end:r={}}=e,{cap:i=!0}=t,{cap:s=!0}=r;rn(!t.taper&&!r.taper,"cap taper not supported here"),rn(!t.easing&&!r.easing,"cap easing not supported here"),rn(i&&s,"cap must be true");const l=eu(n,e);d1(l,e);const c=Ope(l);let d="";for(const h of c)d+=Lpe(h,e);return d}function Ope(n){if(n.length<=2)return[n];const e=[];let t=[n[0]],r=R.Sub(n[1].point,n[0].point).uni(),i,s,l,c,d;for(let h=1,g=n.length;h<g-1;h++){if(l=n[h-1],c=n[h],d=n[h+1],i=R.Sub(d.point,c.point).uni(),s=R.Dpr(r,i),r=i,s<-.8){const y={...c,point:c.input};t.push(y),e.push(JM(t)),t=[y];continue}if(t.push(c),!(s>.7)&&(R.Dist2(l.point,c.point)+R.Dist2(c.point,d.point))/((l.radius+c.radius+d.radius)/3)**2<1.5){t.push(c),e.push(JM(t)),t=[c];continue}}return t.push(n[n.length-1]),e.push(JM(t)),e}function JM(n){const e=n[0];let t;for(;n.length>2&&(t=n[1],R.Dist2(e.point,t.point)<((e.radius+t.radius)/2*.5)**2);)n.splice(1,1);const r=n[n.length-1];let i;for(;n.length>2&&(i=n[n.length-2],R.Dist2(r.point,i.point)<((r.radius+i.radius)/2*.5)**2);)n.splice(n.length-2,1);return n.length>1&&(n[0]={...n[0],vector:R.Sub(n[0].point,n[1].point).uni()},n[n.length-1]={...n[n.length-1],vector:R.Sub(n[n.length-2].point,n[n.length-1].point).uni()}),n}function jpe(n,e,t){return"M "+n+" "+e+" m -"+t+", 0 a "+t+","+t+" 0 1,1 "+t*2+",0 a "+t+","+t+" 0 1,1 -"+t*2+",0"}function Lpe(n,e={}){if(n.length===0)return"";if(n.length===1)return jpe(n[0].point.x,n[0].point.y,n[0].radius);const{left:t,right:r}=o7(n,e);r.reverse();let i=`M${Gn(t[0])}T`;for(let s=1;s<t.length;s++)i+=sa(t[s-1],t[s]);{const s=n[n.length-1],l=s.radius,c=s.vector.clone().per().neg(),d=R.Add(s.point,R.Mul(c,l)),h=R.Add(s.point,R.Mul(c,-l));i+=`${Gn(d)}A${Se(l)},${Se(l)} 0 0 1 ${Gn(h)}T`}for(let s=1;s<r.length;s++)i+=sa(r[s-1],r[s]);{const s=n[0],l=s.radius,c=s.vector.clone().per(),d=R.Add(s.point,R.Mul(c,l)),h=R.Add(s.point,R.Mul(c,-l));i+=`${Gn(d)}A${Se(l)},${Se(l)} 0 0 1 ${Gn(h)}Z`}return i}const H7=(n,e,t)=>{const r=[],i=[];n.forEach(h=>r.push(...h.points)),e.forEach(h=>i.push(...h.points));const s=Math.max(r.length,i.length),l=[],c=[];for(let h=0;h<s;h++)l.push(r[h]||r[r.length-1]),c.push(i[h]||i[i.length-1]);return[{type:"free",points:l.map((h,g)=>{let y=.5;return c[g].z!==void 0&&h.z!==void 0&&(y=Rn(h.z,c[g].z,t)),{x:Rn(h.x,c[g].x,t),y:Rn(h.y,c[g].y,t),z:y}})}]},Npe=n=>n*.65+uee(n*qn/2)*.35,Fpe=n=>({size:n,thinning:.5,streamline:xg(n,[9,16],[.64,.74],!0),smoothing:.62,easing:ao.easeOutSine,simulatePressure:!0}),zpe=n=>({size:1+n*1.2,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:Npe}),V7=n=>({size:n,thinning:0,streamline:xg(n,[9,16],[.64,.74],!0),smoothing:.62,simulatePressure:!1,easing:ao.linear}),Upe=n=>({size:n,thinning:0,streamline:.62,smoothing:.62,simulatePressure:!1,easing:ao.linear});function eA({strokeWidth:n,showAsComplete:e}){return{size:1+n,thinning:0,streamline:.5,smoothing:.5,simulatePressure:!1,easing:ao.easeOutSine,last:e}}function tA(n,e,t,r){const i=n.isComplete||t;return r?n.isPen?{...Upe(e),last:i}:{...V7(e),last:i}:n.dash==="draw"?n.isPen?{...zpe(e),last:i}:{...Fpe(e),last:i}:{...V7(e),last:i}}function cm(n){const e=[];for(const t of n)if(t.type==="free"||t.points.length<2)e.push(...t.points.map(R.Cast));else{const r=Math.max(4,Math.floor(R.Dist(t.points[0],t.points[1])/16));e.push(...R.PointsBetween(t.points[0],t.points[1],r))}return e}function $pe(n,e,t){return{draw:"none",solid:"none",dotted:`${t} ${e*2}`,dashed:`${e*2} ${e*2}`}[n.props.dash]}class R1 extends Zl{hideResizeHandles(e){return nA(e)}hideRotateHandle(e){return nA(e)}hideSelectionBoundsFg(e){return nA(e)}getDefaultProps(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1,scale:1}}getGeometry(e){const t=cm(e.props.segments),r=(is[e.props.size]+1)*e.props.scale;if(e.props.segments.length===1){const s=Xe.FromPoints(t);if(s.width<r*2&&s.height<r*2)return new cR({x:-r,y:-r,radius:r,isFilled:!0})}const i=eu(t,tA(e.props,r,e.props.isPen,!0)).map(s=>s.point);return e.props.isClosed?new wi({points:i,isFilled:e.props.fill!=="none"}):new Fg({points:i})}component(e){return m.jsx(Sf,{children:m.jsx(W7,{shape:e})})}indicator(e){var g;const t=cm(e.props.segments);let r=(is[e.props.size]+1)*e.props.scale;const i=this.editor.getZoomLevel();!(i<.5&&i<1.5/r)&&!e.props.isPen&&e.props.dash==="draw"&&t.length===1&&(r+=Hl(e.id)()*(r/6));const l=e.props.isComplete||((g=yo(e.props.segments))==null?void 0:g.type)==="straight",c=tA(e.props,r,l,!0),d=eu(t,c),h=d.length>1?sp(d,e.props.isClosed):K7(t[0],r);return m.jsx("path",{d:h})}toSvg(e,t){t.addExportDef(WM(e.props.fill));const r=1/e.props.scale;return m.jsx("g",{transform:`scale(${r})`,children:m.jsx(W7,{shape:e,zoomOverride:1})})}getCanvasSvgDefs(){return[GM()]}onResize(e,t){const{scaleX:r,scaleY:i}=t,s=[];for(const l of e.props.segments)s.push({...l,points:l.points.map(({x:c,y:d,z:h})=>({x:Yu(r*c),y:Yu(i*d),z:h}))});return{props:{segments:s}}}expandSelectionOutlinePx(e){const t=e.props.dash==="draw"?1.6:1;return is[e.props.size]*t/2*e.props.scale}getInterpolatedProps(e,t,r){return{...r>.5?t.props:e.props,segments:H7(e.props.segments,t.props.segments,r),scale:Rn(e.props.scale,t.props.scale,r)}}}U(R1,"type","draw"),U(R1,"props",wN),U(R1,"migrations",CN);function K7(n,e){const t=(e+1)*.5;return`M ${n.x} ${n.y} m -${t}, 0 a ${t},${t} 0 1,0 ${t*2},0 a ${t},${t} 0 1,0 -${t*2},0`}function nA(n){return n.props.segments.length===1&&n.props.segments[0].points.length<2}function W7({shape:n,zoomOverride:e}){var w;const t=Sl(),r=xe(),i=cm(n.props.segments),s=n.props.isComplete||((w=yo(n.props.segments))==null?void 0:w.type)==="straight";let l=(is[n.props.size]+1)*n.props.scale;const c=Pe("force solid",()=>{const C=e??r.getZoomLevel();return C<.5&&C<1.5/l},[r,l,e]),d=Pe("dot adjustment",()=>(e??r.getZoomLevel())<.2?0:.1,[r,e]);!c&&!n.props.isPen&&n.props.dash==="draw"&&i.length===1&&(l+=Hl(n.id)()*(l/6));const h=tA(n.props,l,s,c);if(!c&&n.props.dash==="draw")return m.jsxs(m.Fragment,{children:[n.props.isClosed&&n.props.fill&&i.length>1?m.jsx(os,{d:sp(eu(i,h),n.props.isClosed),theme:t,color:n.props.color,fill:n.props.isClosed?n.props.fill:"none",scale:n.props.scale}):null,m.jsx("path",{d:Dpe(i,h),strokeLinecap:"round",fill:t[n.props.color].solid})]});const g=eu(i,h),y=g.length<2,v=y?K7(i[0],0):sp(g,n.props.isClosed);return m.jsxs(m.Fragment,{children:[m.jsx(os,{d:v,theme:t,color:n.props.color,fill:y||n.props.isClosed?n.props.fill:"none",scale:n.props.scale}),m.jsx("path",{d:v,strokeLinecap:"round",fill:y?t[n.props.color].solid:"none",stroke:t[n.props.color].solid,strokeWidth:l,strokeDasharray:y?"none":$pe(n,l,d),strokeDashoffset:"0"})]})}function Bpe(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Hpe(n,e){const t=Wt(e);if(!t)return;const r=t.host.replace("www.","");for(const i of n)if(G7(i.hostnames,r)){const s=i.fromEmbedUrl(e);if(s)return{definition:i,url:s,embedUrl:e}}}const Vpe=n=>n.split("*").map(e=>Bpe(e)).join(".+"),G7=(n,e)=>!!n.find(t=>{const r=new RegExp(Vpe(t));return e.match(r)});function Kpe(n,e){const t=Wt(e);if(!t)return;const r=t.host.replace("www.","");for(const i of n)if(G7(i.hostnames,r)){const s=i.toEmbedUrl(e);if(s)return{definition:i,embedUrl:s,url:e}}}function Wpe(n,e){try{return Kpe(n,e)??Hpe(n,e)}catch{return}}const Gpe=n=>Object.entries(n).filter(([e,t])=>t).map(([e])=>e).join(" "),dd=class dd extends Vg{static setEmbedDefinitions(e){dd.embedDefinitions=e}getEmbedDefinitions(){return dd.embedDefinitions}getEmbedDefinition(e){return Wpe(dd.embedDefinitions,e)}getText(e){return e.props.url}hideSelectionBoundsFg(e){return!this.canResize(e)}canEdit(){return!0}canResize(e){var t,r;return!!((r=(t=this.getEmbedDefinition(e.props.url))==null?void 0:t.definition)!=null&&r.doesResize)}canEditInReadOnly(){return!0}getDefaultProps(){return{w:300,h:300,url:""}}isAspectRatioLocked(e){const t=this.getEmbedDefinition(e.props.url);return(t==null?void 0:t.definition.isAspectRatioLocked)??!1}onResize(e,t){const r=this.isAspectRatioLocked(e),i=this.getEmbedDefinition(e.props.url);let s=(i==null?void 0:i.definition.minWidth)??200,l=(i==null?void 0:i.definition.minHeight)??200;if(r){const c=e.props.w/e.props.h;c>1?s*=c:l/=c}return g0(e,t,{minWidth:s,minHeight:l})}component(e){const t=Gv(),{w:r,h:i,url:s}=e.props,l=m0(e.id),c=this.getEmbedDefinition(s),d=Pe("is hovering",()=>{const{editingShapeId:w,hoveredShapeId:C}=this.editor.getCurrentPageState();if(w&&C!==w){const E=this.editor.getShape(w);if(E&&this.editor.isShapeOfType(E,"embed"))return!0}return!1},[]),h=this.editor.getShapePageTransform(e).rotation();if(t)return m.jsx(Cf,{className:"tl-embed-container",id:e.id,children:m.jsx("div",{className:"tl-embed",style:{border:0,boxShadow:I1(h),borderRadius:(c==null?void 0:c.definition.overrideOutlineRadius)??8,background:(c==null?void 0:c.definition.backgroundColor)??"var(--color-background)",width:r,height:i}})});const g=l||d;if(typeof window<"u"&&(window!==window.top||window.self!==window.parent)&&(c==null?void 0:c.definition.type)==="tldraw")return null;if((c==null?void 0:c.definition.type)==="github_gist"){const w=c.url.split("/").pop();if(!w)throw Error("No gist id!");return m.jsx(Cf,{className:"tl-embed-container",id:e.id,children:m.jsx(qpe,{id:w,width:Se(r),height:Se(i),isInteractive:g,pageRotation:h})})}const v=Gpe({...Zue,...(c==null?void 0:c.definition.overridePermissions)??{}});return m.jsx(Cf,{className:"tl-embed-container",id:e.id,children:c!=null&&c.definition?m.jsx("iframe",{className:"tl-embed",sandbox:v,src:c.embedUrl,width:Se(r),height:Se(i),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:g?"auto":"none",zIndex:g?"":"-1",boxShadow:I1(h),borderRadius:(c==null?void 0:c.definition.overrideOutlineRadius)??8,background:c==null?void 0:c.definition.backgroundColor}}):null})}indicator(e){const t=this.getEmbedDefinition(e.props.url);return m.jsx("rect",{width:Se(e.props.w),height:Se(e.props.h),rx:(t==null?void 0:t.definition.overrideOutlineRadius)??8,ry:(t==null?void 0:t.definition.overrideOutlineRadius)??8})}getInterpolatedProps(e,t,r){return{...r>.5?t.props:e.props,w:Rn(e.props.w,t.props.w,r),h:Rn(e.props.h,t.props.h,r)}}};U(dd,"type","embed"),U(dd,"props",EN),U(dd,"migrations",_N),U(dd,"embedDefinitions",uM);let M1=dd;function qpe({id:n,isInteractive:e,width:t,height:r,style:i,pageRotation:s}){if(!n.match(/^[0-9a-f]+$/))throw Error("No gist id!");return m.jsx("iframe",{className:"tl-embed",draggable:!1,width:Se(t),height:Se(r),frameBorder:"0",scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",style:{...i,pointerEvents:e?"all":"none",zIndex:e?"":"-1",boxShadow:I1(s)},srcDoc:`
			<html>
				<head>
					<base target="_blank">
				</head>
				<body>
					<script src=${`https://gist.github.com/${n}.js`}><\/script>
					<style type="text/css">
						* { margin: 0px; }
						table { height: 100%; background-color: red; }
						.gist { background-color: none; height: 100%;  }
						.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
					</style>
				</body>
			</html>`})}var Ype={};function rA(n,e){const i=((Gh(n.getShapePageTransform(e.id).rotation())+Math.PI/4)*(2/Math.PI)+4)%4;return Math.floor(i)}function q7(n,e,t){if(Ype.NODE_ENV==="test")return{box:new Xe(0,-t.height,e.props.w,t.height),spans:[]};const r=n.textMeasure.measureTextSpans(Z7(e.props.name,"Frame")+"",t),i=r[0],s=yo(r),l=s.box.w+s.box.x-i.box.x;return{box:new Xe(0,-t.height,l,t.height),spans:r}}function Y7(n,e){return{fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:n.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle",fill:e,offsetY:-34,offsetX:2}}function X7(n,e,t){const r=t?"":"px",i=t?"":"deg";let s;switch(e){case 0:s="";break;case 3:s=`translate(${Se(n.props.w)}${r}, 0${r}) rotate(90${i})`;break;case 2:s=`translate(${Se(n.props.w)}${r}, ${Se(n.props.h)}${r}) rotate(180${i})`;break;case 1:s=`translate(0${r}, ${Se(n.props.h)}${r}) rotate(270${i})`;break;default:throw Error("labelSide out of bounds")}return s}const Xpe=M.forwardRef(({id:n,name:e,isEditing:t},r)=>{const i=xe(),s=M.useCallback(d=>{d.key==="Enter"&&!d.nativeEvent.isComposing&&(xi(d),d.currentTarget.blur(),i.setEditingShape(null))},[i]),l=M.useCallback(d=>{const h=i.getShape(n);if(!h)return;const g=h.props.name,y=d.currentTarget.value.trim();g!==y&&i.updateShapes([{id:n,type:"frame",props:{name:y}}])},[n,i]),c=M.useCallback(d=>{const h=i.getShape(n);if(!h)return;const g=h.props.name,y=d.currentTarget.value;g!==y&&i.updateShapes([{id:n,type:"frame",props:{name:y}}])},[n,i]);return m.jsxs("div",{className:`tl-frame-label ${t?"tl-frame-label__editing":""}`,children:[m.jsx("input",{className:"tl-frame-name-input",ref:r,style:{display:t?void 0:"none"},value:e,autoFocus:!0,onKeyDown:s,onBlur:l,onChange:c}),Z7(e,"Frame")+""]})});function Zpe({id:n,name:e,width:t,height:r}){const i=xe(),{side:s,translation:l}=Pe("shape rotation",()=>{const h=i.getShape(n);if(!h)return{side:0,translation:"translate(0, 0)"};const g=rA(i,h);return{side:g,translation:X7(h,g,!1)}},[i,n]),c=M.useRef(null),d=m0(n);return M.useEffect(()=>{const h=c.current;h&&d&&(h.focus(),h.select())},[c,d]),m.jsx("div",{className:"tl-frame-heading",style:{overflow:d?"visible":"hidden",maxWidth:`calc(var(--tl-zoom) * ${Math.ceil(s===0||s===2?t:r)}px + var(--space-5))`,bottom:"100%",transform:`${l} scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))`},children:m.jsx("div",{className:"tl-frame-heading-hit-area",children:m.jsx(Xpe,{ref:c,id:n,name:e,isEditing:d})})})}function Z7(n,e){return n.match(/^\s*$/)?e:n}class A1 extends Vg{canEdit(){return!0}getDefaultProps(){return{w:160*2,h:90*2,name:""}}getGeometry(e){const{editor:t}=this,r=t.getZoomLevel(),i=Y7(e,"black"),s=q7(t,e,i),l=rA(t,e);let c,d,h,g;const{w:y,h:v}=s.box,w=Math.min(y,e.props.w*r),C=Math.min(v,e.props.h*r);switch(l){case 0:{c=-8/r,d=(-v-4)/r,h=(w+16)/r,g=v/r;break}case 1:{c=(-v-4)/r,g=(C+16)/r,d=e.props.h-g+8/r,h=v/r;break}case 2:{c=e.props.w-(w+8)/r,d=e.props.h+4/r,h=(C+16)/r,g=v/r;break}case 3:{c=e.props.w+4/r,g=(C+16)/r,d=-8/r,h=v/r;break}}return new hl({children:[new Vc({width:e.props.w,height:e.props.h,isFilled:!1}),new Vc({x:c,y:d,width:h,height:g,isFilled:!0,isLabel:!0})]})}getText(e){return e.props.name}component(e){const t=this.editor.getShapeGeometry(e).bounds,r=Sl(),i=Pe("is creating this shape",()=>{const s=this.editor.getStateDescendant("select.resizing");if(!s||!s.getIsActive())return!1;const l=s==null?void 0:s.info;return l?l.isCreating&&this.editor.getOnlySelectedShapeId()===e.id:!1},[e.id]);return m.jsxs(m.Fragment,{children:[m.jsx(Sf,{children:m.jsx("rect",{className:It("tl-frame__body",{"tl-frame__creating":i}),width:t.width,height:t.height,fill:r.solid,stroke:r.text})}),i?null:m.jsx(Zpe,{id:e.id,name:e.props.name,width:t.width,height:t.height})]})}toSvg(e,t){const r=Vu({isDarkMode:t.isDarkMode}),i=rA(this.editor,e),s=X7(e,i,!0),l=Y7(e,r.text),{box:c,spans:d}=q7(this.editor,e,l),h=XM(this.editor,d,l);return m.jsxs(m.Fragment,{children:[m.jsx("rect",{width:e.props.w,height:e.props.h,fill:r.solid,stroke:r.black.solid,strokeWidth:1,rx:1,ry:1}),m.jsxs("g",{transform:s,children:[m.jsx("rect",{x:c.x-8,y:c.y-4,width:c.width+20,height:c.height,fill:r.background,rx:4,ry:4}),h]})]})}indicator(e){const t=this.editor.getShapeGeometry(e).bounds;return m.jsx("rect",{width:Se(t.width),height:Se(t.height),className:"tl-frame-indicator"})}canReceiveNewChildrenOfType(e,t){return!e.isLocked}providesBackgroundForChildren(){return!0}canDropShapes(e,t){return!e.isLocked}onDragShapesOver(e,t){t.every(r=>r.parentId===e.id)||this.editor.reparentShapes(t,e.id)}onDragShapesOut(e,t){const r=this.editor.getShape(e.parentId);r&&this.editor.isShapeOfType(r,"group")?this.editor.reparentShapes(t,r.id):this.editor.reparentShapes(t,this.editor.getCurrentPageId())}onResize(e,t){return g0(e,t)}getInterpolatedProps(e,t,r){return{...r>.5?t.props:e.props,w:Rn(e.props.w,t.props.w,r),h:Rn(e.props.h,t.props.h,r)}}}U(A1,"type","frame"),U(A1,"props",PN),U(A1,"migrations",TN);function Q7(n,e){return n>e?(qn*(e/2)+(n-e))*2:(qn*(n/2)+(e-n))*2}function J7(n,e){return iA(n,e).map((t,r)=>t.getSvgPathData(r===0)).join(" ")+" Z"}function Qpe(n,e,t,r){const i=n/4,s=e/4,l=Hl(r),c=t*.75,d=k=>k.addXY(l()*c,l()*c),h=new R(n/2,e),g=new R(0,s*1.2),y=new R(n/2,s*.9),v=new R(n,s*1.2),w=d(new R(n/2,e)),C=d(new R(0,s*1.2)),E=d(new R(n/2,s*.9)),P=d(new R(n,s*1.2));return[new es({start:h,cp1:new R(i*1.5,s*3),cp2:new R(0,s*2.5),end:g}),new es({start:g,cp1:new R(0,-s*.32),cp2:new R(i*1.85,-s*.32),end:y}),new es({start:y,cp1:new R(i*2.15,-s*.32),cp2:new R(n,-s*.32),end:v}),new es({start:v,cp1:new R(n,s*2.5),cp2:new R(i*2.5,s*3),end:w}),new es({start:w,cp1:new R(i*1.5,s*3),cp2:new R(0,s*2.5),end:C}),new es({start:C,cp1:new R(0,-s*.32),cp2:new R(i*1.85,-s*.32),end:E}),new es({start:E,cp1:new R(i*2.15,-s*.32),cp2:new R(n,-s*.32),end:P}),new es({start:P,cp1:new R(n,s*2.5),cp2:new R(i*2.5,s*3),end:h})].map((k,L)=>k.getSvgPathData(L===0)).join(" ")+" Z"}function iA(n,e){const t=n/4,r=e/4;return[new es({start:new R(n/2,e),cp1:new R(t*1.5,r*3),cp2:new R(0,r*2.5),end:new R(0,r*1.2)}),new es({start:new R(0,r*1.2),cp1:new R(0,-r*.32),cp2:new R(t*1.85,-r*.32),end:new R(n/2,r*.9)}),new es({start:new R(n/2,r*.9),cp1:new R(t*2.15,-r*.32),cp2:new R(n,-r*.32),end:new R(n,r*1.2)}),new es({start:new R(n,r*1.2),cp1:new R(n,r*2.5),cp2:new R(t*2.5,r*3),end:new R(n/2,e)})]}function Jpe(n){return{size:1+n,thinning:.25,end:{taper:n},start:{taper:n},streamline:0,smoothing:1,simulatePressure:!1}}function ege(n,e,t,r){const i=Hl(n),s=e/2,l=t/2,c=Z5(s,l),d=[],h=sr*i(),g=sr+Pr/2+Math.abs(i())*Pr,y=Math.max(16,c/10);for(let v=0;v<y;v++){const w=v/(y-1),C=h+w*g,E=Math.cos(C),P=Math.sin(C);d.push(new R(s*E+e*.5+.05*i(),l*P+t/2+.05*i(),Math.min(1,.5+Math.abs(.5-(i()>0?ao.easeInOutSine(w):ao.easeInExpo(w)))/2)))}return eu(d,Jpe(r))}function tge(n,e,t,r){return sp(ege(n,e,t,r))}function oA(n){let e="M";const t=n.length;let r,i,s;for(let l=0,c=t;l<c;l+=3)r=n[l],i=n[l+1],s=n[l+2],e+=`${Gn(r)}L${Gn(i)}Q${Gn(s)}`;return e+=`${Gn(n[0])}`,e}function sA(n,e,t,r,i){const s=[],l=Hl(n);let c=e[0],d;const h=e.length;for(let g=0,y=h*i;g<y;g++){d=R.AddXY(e[(g+1)%h],l()*t,l()*t);const v=R.Sub(d,c),w=R.Len(v),C=R.Div(v,w).mul(Math.min(w/4,r));s.push(R.Add(c,C),R.Add(d,C.neg()),d),c=d}return s}function nge(n,e,t){const r=Math.min(n,e)/2,i=Math.max(n,e)-r*2,l=(Math.PI*(r*2)+2*i)/t,c=n>e?[{type:"straight",start:new R(r,0),delta:new R(1,0)},{type:"arc",center:new R(n-r,r),startAngle:-qn/2},{type:"straight",start:new R(n-r,e),delta:new R(-1,0)},{type:"arc",center:new R(r,r),startAngle:qn/2}]:[{type:"straight",start:new R(n,r),delta:new R(0,1)},{type:"arc",center:new R(r,e-r),startAngle:0},{type:"straight",start:new R(0,e-r),delta:new R(0,-1)},{type:"arc",center:new R(r,r),startAngle:qn}];let d=0;const h=[];for(let g=0;g<t;g++){const y=c[0];y.type==="straight"?h.push(R.Add(y.start,R.Mul(y.delta,d))):h.push(qh(y.center,r,y.startAngle+d/r)),d+=l;let v=y.type==="straight"?i:qn*r;for(;d>v;)d-=v,c.push(c.shift()),v=c[0].type==="straight"?i:qn*r}return h}const rge={s:50,m:70,l:100,xl:130},ige=.2;function D1(n,e,t,r,i){const s=Hl(t),l=Q7(n,e),c=Math.max(Math.ceil(l/rge[r]),6,Math.ceil(l/Math.min(n,e))),d=l/c*ige,h=Math.max(n-d*2,1),g=Math.max(e-d*2,1),v=Q7(h,g)/c,w=(n-h)/2,C=(e-g)/2,E=nge(h,g,c).map(O=>O.addXY(w,C)),P=n<20?0:d*.3,I=e<20?0:d*.3,k=E.slice(0);for(let O=0;O<Math.floor(c/2);O++)k[O]=R.AddXY(k[O],s()*P*i,s()*I*i),k[c-O-1]=R.AddXY(k[c-O-1],s()*P*i,s()*I*i);const L=[];for(let O=0;O<k.length;O++){const z=O===k.length-1?0:O+1,F=k[O],H=k[z],V=E[O],re=E[z],q=R.Dist(V,re),J=v-q,W=R.Dist(F,H)/q,Y=(Math.max(w,C)+J)*W,oe=R.Lrp(V,re,.5).add(R.Sub(re,V).uni().per().mul(Y));oe.x<0?oe.x=0:oe.x>n&&(oe.x=n),oe.y<0?oe.y=0:oe.y>e&&(oe.y=e);const le=ck(F,H,oe),ce=R.Dist(le||R.Average([F,H]),F);L.push({leftPoint:F,rightPoint:H,arcPoint:oe,center:le,radius:ce})}return L}function oge(n,e,t,r,i){const s=[],l=D1(n,e,t,r,i);for(const{center:c,radius:d,leftPoint:h,rightPoint:g}of l)s.push(...pee(h,g,c,d,10));return s}function aA(n,e,t,r,i){const s=D1(n,e,t,r,i);let l=`M${s[0].leftPoint.toFixed()}`;for(const{leftPoint:c,rightPoint:d,radius:h,center:g}of s){if(g===null){l+=` L${d.toFixed()}`;continue}const y=R.Clockwise(c,d,g)?"0":"1";l+=` A${Se(h)},${Se(h)} 0 ${y},1 ${d.toFixed()}`}return l+=" Z",l}const sge={s:.5,m:.7,l:.9,xl:1.6};function age(n,e,t,r,i){const s=Hl(t),l=sge[r]*i,c=D1(n,e,t,r,i),g=c.reduce((C,E)=>C+R.Dist2(E.leftPoint,E.rightPoint),0)/c.length>(l*15)**2?C=>R.AddXY(C,s()*l*2,s()*l*2):C=>C;let y=`M${c[0].leftPoint.toFixed()}`,v=g(c[0].leftPoint),w=`M${v.toFixed()}`;for(const{leftPoint:C,center:E,rightPoint:P,radius:I,arcPoint:k}of c){if(E===null){y+=` L${P.toFixed()}`;const V=g(P);w+=` L${V.toFixed()}`,v=V;continue}const L=R.Clockwise(C,P,E)?"0":"1";y+=` A${Se(I)},${Se(I)} 0 ${L},1 ${P.toFixed()}`;const O=g(P),z=g(k),F=ck(v,O,z);if(!F){w+=` L${O.toFixed()}`,v=O;continue}const H=Math.abs(R.Dist(F,v));w+=` A${Se(H)},${Se(H)} 0 ${L},1 ${O.toFixed()}`,v=O}return y+w+" Z"}function lA(n,e){switch(n.geo){case"x-box":return lge(n.w,n.h,e,n.dash);case"check-box":return cge(n.w,n.h);default:return}}function lge(n,e,t,r){const i=r==="draw"?.62:0;if(r==="dashed")return[[new R(0,0),new R(n/2,e/2)],[new R(n,e),new R(n/2,e/2)],[new R(0,e),new R(n/2,e/2)],[new R(n,0),new R(n/2,e/2)]];const s=c=>Math.max(0,Math.min(n,c)),l=c=>Math.max(0,Math.min(e,c));return[[new R(s(t*i),l(t*i)),new R(s(n-t*i),l(e-t*i))],[new R(s(t*i),l(e-t*i)),new R(s(n-t*i),l(t*i))]]}function cge(n,e){const t=Math.min(n,e)*.82,r=(n-t)/2,i=(e-t)/2,s=c=>Math.max(0,Math.min(n,c)),l=c=>Math.max(0,Math.min(e,c));return[[new R(s(r+t*.25),l(i+t*.52)),new R(s(r+t*.45),l(i+t*.82))],[new R(s(r+t*.45),l(i+t*.82)),new R(s(r+t*.82),l(i+t*.22))]]}function eH({shape:n,shouldScale:e,forceSolid:t}){const r=e?n.props.scale:1,i=xe(),s=Sl(),{id:l,props:c}=n,{w:d,color:h,fill:g,dash:y,growY:v,size:w,scale:C}=c,E=is[w]*r,P=c.h+v;switch(c.geo){case"cloud":if(y==="solid"){const I=aA(d,P,l,w,C);return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:I,color:h,fill:g,scale:r}),m.jsx("path",{d:I,stroke:s[h].solid,strokeWidth:E,fill:"none"})]})}else if(y==="draw"){const I=age(d,P,l,w,C);return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:I,color:h,fill:g,scale:r}),m.jsx("path",{d:I,stroke:s[h].solid,strokeWidth:E,fill:"none"})]})}else{const I=aA(d,P,l,w,C),k=D1(d,P,l,w,C);return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:I,color:h,fill:g,scale:r}),m.jsx("g",{strokeWidth:E,stroke:s[h].solid,fill:"none",pointerEvents:"all",children:k.map(({leftPoint:L,rightPoint:O,center:z,radius:F},H)=>{const V=z?F*Gh(Gh(R.Angle(z,O))-Gh(R.Angle(z,L))):R.Dist(L,O),{strokeDasharray:re,strokeDashoffset:q}=Ql(V,E,{style:y,start:"outset",end:"outset",forceSolid:t});return m.jsx("path",{d:z?`M${L.x},${L.y}A${F},${F},0,0,1,${O.x},${O.y}`:`M${L.x},${L.y}L${O.x},${O.y}`,strokeDasharray:re,strokeDashoffset:q},H)})})]})}case"ellipse":{const I=e?i.getShapeGeometry(n):i.getShapeUtil(n).getGeometry(n),k=I.getSvgPathData(!0);if(y==="dashed"||y==="dotted"){const L=I.length,{strokeDasharray:O,strokeDashoffset:z}=Ql(L<64?L*2:L,E,{style:y,snap:4,closed:!0,forceSolid:t});return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:k,color:h,fill:g,scale:r}),m.jsx("path",{d:k,strokeWidth:E,fill:"none",stroke:s[h].solid,strokeDasharray:O,strokeDashoffset:z})]})}else{const O=(e?i.getShapeGeometry(n):i.getShapeUtil(n).getGeometry(n)).getSvgPathData(!0);return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:O,color:h,fill:g,scale:r}),m.jsx("path",{d:O,stroke:s[h].solid,strokeWidth:E,fill:"none"})]})}}case"oval":{const I=e?i.getShapeGeometry(n):i.getShapeUtil(n).getGeometry(n),k=I.getSvgPathData(!0);if(y==="dashed"||y==="dotted"){const L=I.getLength(),{strokeDasharray:O,strokeDashoffset:z}=Ql(L<64?L*2:L,E,{style:y,snap:4,start:"outset",end:"outset",closed:!0,forceSolid:t});return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:k,color:h,fill:g,scale:r}),m.jsx("path",{d:k,strokeWidth:E,fill:"none",stroke:s[h].solid,strokeDasharray:O,strokeDashoffset:z})]})}else return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:k,color:h,fill:g,scale:r}),m.jsx("path",{d:k,stroke:s[h].solid,strokeWidth:E,fill:"none"})]})}case"heart":if(y==="dashed"||y==="dotted"||y==="solid"){const I=J7(d,P),k=iA(d,P);return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:I,color:h,fill:g,scale:r}),k.map((L,O)=>{const{strokeDasharray:z,strokeDashoffset:F}=Ql(L.length,E,{style:y,snap:1,start:"outset",end:"outset",closed:!0,forceSolid:t});return m.jsx("path",{d:L.getSvgPathData(),strokeWidth:E,fill:"none",stroke:s[h].solid,strokeDasharray:z,strokeDashoffset:F,pointerEvents:"all"},`curve_${O}`)})]})}else{const I=Qpe(d,P,E,n.id);return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:I,color:h,fill:g,scale:r}),m.jsx("path",{d:I,stroke:s[h].solid,strokeWidth:E,fill:"none"})]})}default:{const I=e?i.getShapeGeometry(n):i.getShapeUtil(n).getGeometry(n),k=I instanceof hl?I.children[0].vertices:I.vertices,L=lA(n.props,E);if(y==="solid"){let O="M"+k[0]+"L"+k.slice(1)+"Z";if(L)for(const[z,F]of L)O+=`M${z.x},${z.y}L${F.x},${F.y}`;return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:O,color:h,fill:g,scale:r}),m.jsx("path",{d:O,stroke:s[h].solid,strokeWidth:E,fill:"none"})]})}else if(y==="dashed"||y==="dotted"){const O="M"+k[0]+"L"+k.slice(1)+"Z";return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:O,color:h,fill:g,scale:r}),m.jsxs("g",{strokeWidth:E,stroke:s[h].solid,fill:"none",pointerEvents:"all",children:[Array.from(Array(k.length)).map((z,F)=>{const H=R.ToFixed(k[F]),V=R.ToFixed(k[(F+1)%k.length]),re=R.Dist(H,V),{strokeDasharray:q,strokeDashoffset:J}=Ql(re,E,{style:y,start:"outset",end:"outset",forceSolid:t});return m.jsx("line",{x1:H.x,y1:H.y,x2:V.x,y2:V.y,strokeDasharray:q,strokeDashoffset:J},F)}),L&&L.map(([z,F],H)=>{const V=R.Dist(z,F),{strokeDasharray:re,strokeDashoffset:q}=Ql(V,E,{style:y,start:"skip",end:"skip",snap:y==="dotted"?4:void 0,forceSolid:t});return m.jsx("path",{d:`M${z.x},${z.y}L${F.x},${F.y}`,stroke:s[h].solid,strokeWidth:E,fill:"none",strokeDasharray:re,strokeDashoffset:q},`line_fg_${H}`)})]})]})}else if(y==="draw"){let O=oA(sA(l,k,E/3,E*2,2));if(L)for(const[F,H]of L)O+=`M${F.toFixed()}L${H.toFixed()}`;const z=oA(sA(l,k,0,E*2,1));return m.jsxs(m.Fragment,{children:[m.jsx(os,{theme:s,d:z,color:h,fill:g,scale:r}),m.jsx("path",{d:O,stroke:s[h].solid,strokeWidth:E,fill:"none"})]})}}}}const tH=17*3;class O1 extends Vg{canEdit(){return!0}getDefaultProps(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",scale:1}}getGeometry(e){const t=Math.max(1,e.props.w),r=Math.max(1,e.props.h+e.props.growY),i=t/2,s=r/2,l=e.props.fill!=="none";let c;switch(e.props.geo){case"cloud":{c=new wi({points:oge(t,r,e.id,e.props.size,e.props.scale),isFilled:l});break}case"triangle":{c=new wi({points:[new R(i,0),new R(t,r),new R(0,r)],isFilled:l});break}case"diamond":{c=new wi({points:[new R(i,0),new R(t,s),new R(i,r),new R(0,s)],isFilled:l});break}case"pentagon":{c=new wi({points:ak(t,r,5),isFilled:l});break}case"hexagon":{c=new wi({points:ak(t,r,6),isFilled:l});break}case"octagon":{c=new wi({points:ak(t,r,8),isFilled:l});break}case"ellipse":{c=new yse({width:t,height:r,isFilled:l});break}case"oval":{c=new vse({width:t,height:r,isFilled:l});break}case"star":{const k=sr/5/2,L=Math.floor(5/4)*2,O=5*2-L,z=0,F=Math.floor(5/2)*2,H=Math.cos(-Pr+L*k)*t/2,V=Math.cos(-Pr+O*k)*t/2,re=Math.sin(-Pr+z*k)*r/2,q=Math.sin(-Pr+F*k)*r/2,J=t-Math.abs(H-V),ie=r-Math.abs(q-re),W=t/2+V-(t/2-H),Y=r/2+re-(r/2-q),oe=1,le=(t-W)/2,ce=(r-Y)/2,Q=(t+J)/2,he=(r+ie)/2,ke=Q*oe/2,te=he*oe/2;c=new wi({points:Array.from(Array(5*2)).map((me,Oe)=>{const Ze=-Pr+Oe*k;return new R(le+(Oe%2?ke:Q)*Math.cos(Ze),ce+(Oe%2?te:he)*Math.sin(Ze))}),isFilled:l});break}case"rhombus":{const I=Math.min(t*.38,r*.38);c=new wi({points:[new R(I,0),new R(t,0),new R(t-I,r),new R(0,r)],isFilled:l});break}case"rhombus-2":{const I=Math.min(t*.38,r*.38);c=new wi({points:[new R(0,0),new R(t-I,0),new R(t,r),new R(I,r)],isFilled:l});break}case"trapezoid":{const I=Math.min(t*.38,r*.38);c=new wi({points:[new R(I,0),new R(t-I,0),new R(t,r),new R(0,r)],isFilled:l});break}case"arrow-right":{const I=Math.min(t,r)*.38,k=r*.16;c=new wi({points:[new R(0,k),new R(t-I,k),new R(t-I,0),new R(t,r/2),new R(t-I,r),new R(t-I,r-k),new R(0,r-k)],isFilled:l});break}case"arrow-left":{const I=Math.min(t,r)*.38,k=r*.16;c=new wi({points:[new R(I,0),new R(I,k),new R(t,k),new R(t,r-k),new R(I,r-k),new R(I,r),new R(0,r/2)],isFilled:l});break}case"arrow-up":{const I=t*.16,k=Math.min(t,r)*.38;c=new wi({points:[new R(t/2,0),new R(t,k),new R(t-I,k),new R(t-I,r),new R(I,r),new R(I,k),new R(0,k)],isFilled:l});break}case"arrow-down":{const I=t*.16,k=Math.min(t,r)*.38;c=new wi({points:[new R(I,0),new R(t-I,0),new R(t-I,r-k),new R(t,r-k),new R(t/2,r),new R(0,r-k),new R(I,r-k)],isFilled:l});break}case"check-box":case"x-box":case"rectangle":{c=new Vc({width:t,height:r,isFilled:l});break}case"heart":{const k=iA(t,r).reduce((L,O)=>(L.push(...O.vertices),L),[]);c=new wi({points:k,isFilled:l});break}default:Bi(e.props.geo)}const d=j1(this.editor,e),h=t/e.props.scale,g=r/e.props.scale,y=Math.min(100,h/2),v=Math.min(od[e.props.size]*rs.lineHeight+vl*2,g/2),w=Math.min(h,Math.max(d.w,Math.min(y,Math.max(1,h-8)))),C=Math.min(g,Math.max(d.h,Math.min(v,Math.max(1,g-8)))),E=lA(e.props,is[e.props.size]*e.props.scale),P=E?E.map(I=>new Fg({points:I})):[];return new hl({children:[c,new Vc({x:e.props.align==="start"?0:e.props.align==="end"?(h-w)*e.props.scale:(h-w)/2*e.props.scale,y:e.props.verticalAlign==="start"?0:e.props.verticalAlign==="end"?(g-C)*e.props.scale:(g-C)/2*e.props.scale,width:w*e.props.scale,height:C*e.props.scale,isFilled:!0,isLabel:!0}),...P]})}getHandleSnapGeometry(e){const t=this.getGeometry(e),r=t.children[0];switch(e.props.geo){case"arrow-down":case"arrow-left":case"arrow-right":case"arrow-up":case"check-box":case"diamond":case"hexagon":case"octagon":case"pentagon":case"rectangle":case"rhombus":case"rhombus-2":case"star":case"trapezoid":case"triangle":case"x-box":return{outline:r,points:[...r.getVertices(),t.bounds.center]};case"cloud":case"ellipse":case"heart":case"oval":return{outline:r,points:[t.bounds.center]};default:Bi(e.props.geo)}}getText(e){return e.props.text}onEditEnd(e){const{id:t,type:r,props:{text:i}}=e;i.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:t,type:r,props:{text:i.trimEnd()}}])}component(e){const{id:t,type:r,props:i}=e,{fill:s,font:l,align:c,verticalAlign:d,size:h,text:g}=i,y=Sl(),{editor:v}=this,w=Pe("isGeoOnlySelected",()=>e.id===v.getOnlySelectedShapeId(),[]),E=v.getEditingShapeId()!==null||e.props.text,P=Pe("force solid",()=>v.getZoomLevel()<.2,[v]);return m.jsxs(m.Fragment,{children:[m.jsx(Sf,{children:m.jsx(eH,{shape:e,shouldScale:!0,forceSolid:P})}),E&&m.jsx(Cf,{style:{overflow:"hidden",width:e.props.w,height:e.props.h+i.growY},children:m.jsx(E1,{shapeId:t,type:r,font:l,fontSize:od[h]*e.props.scale,lineHeight:rs.lineHeight,padding:vl*e.props.scale,fill:s,align:c,verticalAlign:d,text:g,isSelected:w,labelColor:y[i.labelColor].solid,wrap:!0})}),e.props.url&&m.jsx(lm,{url:e.props.url})]})}indicator(e){const{id:t,props:r}=e,{w:i,size:s}=r,l=r.h+r.growY,c=is[s],d=this.editor.getShapeGeometry(e);switch(r.geo){case"ellipse":return r.dash==="draw"?m.jsx("path",{d:tge(t,i,l,c)}):m.jsx("path",{d:d.getSvgPathData(!0)});case"heart":return m.jsx("path",{d:J7(i,l)});case"oval":return m.jsx("path",{d:d.getSvgPathData(!0)});case"cloud":return m.jsx("path",{d:aA(i,l,t,s,e.props.scale)});default:{const h=this.editor.getShapeGeometry(e),g=h instanceof hl?h.children[0].vertices:h.vertices;let y;if(r.dash==="draw"){const w=sA(t,g,0,c*2*e.props.scale,1);y=oA(w)}else y="M"+g[0]+"L"+g.slice(1)+"Z";const v=lA(e.props,c);if(v)for(const[w,C]of v)y+=`M${w.x},${w.y}L${C.x},${C.y}`;return m.jsx("path",{d:y})}}}toSvg(e,t){const r={...e,props:{...e.props,w:e.props.w/e.props.scale,h:e.props.h/e.props.scale}},i=r.props;t.addExportDef(WM(i.fill));let s;if(i.text){t.addExportDef(b1(i.font));const l=Vu(t),c=new Xe(0,0,i.w,i.h+i.growY);s=m.jsx(C1,{fontSize:od[i.size],font:i.font,align:i.align,verticalAlign:i.verticalAlign,text:i.text,labelColor:l[i.labelColor].solid,bounds:c,padding:16})}return m.jsxs(m.Fragment,{children:[m.jsx(eH,{shouldScale:!1,shape:r,forceSolid:!1}),s]})}getCanvasSvgDefs(){return[GM()]}onResize(e,{handle:t,newPoint:r,scaleX:i,scaleY:s,initialShape:l}){const c=l.props.w/l.props.scale,d=l.props.h/l.props.scale,h=l.props.growY/l.props.scale;let g=c*i,y=(d+h)*s,v=0,w=0;const C=tH;if(e.props.text.trim()){let O=Math.max(Math.abs(g),C),z=Math.max(Math.abs(y),C);O<C&&z===C&&(O=C),O===C&&z<C&&(z=C);const F=j1(this.editor,{...e,props:{...e.props,w:O*e.props.scale,h:z*e.props.scale}}),H=Math.max(Math.abs(g),F.w)*Math.sign(g),V=Math.max(Math.abs(y),F.h)*Math.sign(y);v=Math.abs(H)-Math.abs(g),w=Math.abs(V)-Math.abs(y),g=H,y=V}const E=g*e.props.scale,P=y*e.props.scale,I=new R(0,0);i<0&&(I.x+=E),(t==="left"||t==="top_left"||t==="bottom_left")&&(I.x+=i<0?v:-v),s<0&&(I.y+=P),(t==="top"||t==="top_left"||t==="top_right")&&(I.y+=s<0?w:-w);const{x:k,y:L}=I.rot(e.rotation).add(r);return{x:k,y:L,props:{w:Math.max(Math.abs(E),1),h:Math.max(Math.abs(P),1),growY:0}}}onBeforeCreate(e){if(!e.props.text)return e.props.growY?{...e,props:{...e.props,growY:0}}:void 0;const t=e.props.h/e.props.scale,r=j1(this.editor,e).h;let i=null;if(r>t?i=r-t:e.props.growY&&(i=0),i!==null)return{...e,props:{...e.props,growY:i*e.props.scale}}}onBeforeUpdate(e,t){const r=e.props.text,i=t.props.text;if(r===i&&e.props.font===t.props.font&&e.props.size===t.props.size)return;if(r&&!i)return{...t,props:{...t.props,growY:0}};const s=e.props.w/e.props.scale,l=e.props.h/e.props.scale,c=e.props.growY/e.props.scale,d=j1(this.editor,t);if(!r&&i&&i.length===1){let g=Math.max(s,d.w),y=Math.max(l,d.h);const v=tH;return s<v&&l<v&&(g=Math.max(g,v),y=Math.max(y,v),g=Math.max(g,y),y=Math.max(g,y)),{...t,props:{...t.props,w:g*t.props.scale,h:y*t.props.scale,growY:0}}}let h=null;if(d.h>l?h=d.h-l:c&&(h=0),h!==null){const g=t.props.w/t.props.scale;return{...t,props:{...t.props,growY:h*t.props.scale,w:Math.max(g,d.w)*t.props.scale}}}if(d.w>s)return{...t,props:{...t.props,w:d.w*t.props.scale}}}onDoubleClick(e){if(this.editor.inputs.altKey)switch(e.props.geo){case"rectangle":return{...e,props:{geo:"check-box"}};case"check-box":return{...e,props:{geo:"rectangle"}}}}getInterpolatedProps(e,t,r){return{...r>.5?t.props:e.props,w:Rn(e.props.w,t.props.w,r),h:Rn(e.props.h,t.props.h,r),scale:Rn(e.props.scale,t.props.scale,r)}}}U(O1,"type","geo"),U(O1,"props",IN),U(O1,"migrations",kN);function j1(n,e){const{text:t,font:r,size:i,w:s}=e.props;if(!t)return{w:0,h:0};const l=n.textMeasure.measureText("w",{...rs,fontFamily:sd[r],fontSize:od[i],maxWidth:100}),c={s:2,m:3.5,l:5,xl:10},d=n.textMeasure.measureText(t,{...rs,fontFamily:sd[r],fontSize:od[i],minWidth:l.w,maxWidth:Math.max(0,Math.ceil(l.w+c[i]),Math.ceil(s/e.props.scale-vl*2))});return{w:d.w+vl*2,h:d.h+vl*2}}function uge(){const[n,e]=M.useState(!1);return M.useEffect(()=>{const r=CSS.supports("color","color(display-p3 1 1 1)"),i=matchMedia("(color-gamut: p3)");e(r&&i.matches);const s=()=>e(r&&i.matches);return i.addEventListener("change",s),()=>i.removeEventListener("change",s)},[]),Pe(Si.forceSrgb)||!n?"srgb":"p3"}const nH=.35,rH=.82;class L1 extends Zl{hideResizeHandles(e){return N1(e)}hideRotateHandle(e){return N1(e)}hideSelectionBoundsFg(e){return N1(e)}getDefaultProps(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1,scale:1}}getGeometry(e){const t=ap(e);if(N1(e))return new cR({x:-t/2,y:-t/2,radius:t/2,isFilled:!0});const{strokePoints:r,sw:i}=iH(e,t,!0),s=eA({strokeWidth:i,showAsComplete:!0});return d1(r,s),new wi({points:DM(r,s),isFilled:!0})}component(e){const t=cA(this.editor,e),r=ap(e);return m.jsx(Sf,{children:m.jsx(F1,{shape:e,forceSolid:t,strokeWidth:r,opacity:nH})})}backgroundComponent(e){const t=cA(this.editor,e),r=ap(e);return m.jsx(Sf,{children:m.jsx(F1,{shape:e,forceSolid:t,strokeWidth:r,opacity:rH})})}indicator(e){const t=cA(this.editor,e),r=ap(e),{strokePoints:i,sw:s}=iH(e,r,t),l=cm(e.props.segments);let c;return i.length<2?c=fge(l[0],s):c=sp(i,!1),m.jsx("path",{d:c})}toSvg(e){const t=ap(e),r=t<1.5,i=1/e.props.scale;return m.jsx("g",{transform:`scale(${i})`,children:m.jsx(F1,{forceSolid:r,strokeWidth:t,shape:e,opacity:nH})})}toBackgroundSvg(e){const t=ap(e),r=t<1.5,i=1/e.props.scale;return m.jsx("g",{transform:`scale(${i})`,children:m.jsx(F1,{forceSolid:r,strokeWidth:t,shape:e,opacity:rH})})}onResize(e,t){const{scaleX:r,scaleY:i}=t,s=[];for(const l of e.props.segments)s.push({...l,points:l.points.map(({x:c,y:d,z:h})=>({x:r*c,y:i*d,z:h}))});return{props:{segments:s}}}getInterpolatedProps(e,t,r){return{...r>.5?t.props:e.props,...t.props,segments:H7(e.props.segments,t.props.segments,r),scale:Rn(e.props.scale,t.props.scale,r)}}}U(L1,"type","highlight"),U(L1,"props",AN),U(L1,"migrations",DN);function dge(n){return`M ${n.x} ${n.y} m -${.1}, 0 a ${.1},${.1} 0 1,0 ${.1*2},0 a ${.1},${.1} 0 1,0 -${.1*2},0`}function fge(n,e){const t=e/2;return`M ${n.x} ${n.y} m -${t}, 0 a ${t},${t} 0 1,0 ${t*2},0 a ${t},${t} 0 1,0 -${t*2},0`}function iH(n,e,t){var d;const r=cm(n.props.segments),i=n.props.isComplete||((d=yo(n.props.segments))==null?void 0:d.type)==="straight";let s=e;!t&&!n.props.isPen&&r.length===1&&(s+=Hl(n.id)()*(e/6));const l=eA({strokeWidth:s,showAsComplete:i});return{strokePoints:eu(r,l),sw:s}}function ap(n){return om[n.props.size]*1.12*n.props.scale}function N1(n){return n.props.segments.length===1&&n.props.segments[0].points.length<2}function F1({strokeWidth:n,forceSolid:e,shape:t,opacity:r}){var v;const i=Sl(),s=cm(t.props.segments);let l=n;!e&&!t.props.isPen&&s.length===1&&(l+=Hl(t.id)()*(l/6));const c=eA({strokeWidth:l,showAsComplete:t.props.isComplete||((v=yo(t.props.segments))==null?void 0:v.type)==="straight"}),d=eu(s,c),h=d.length>1?sp(d,!1):dge(t.props.segments[0].points[0]),g=uge(),y=i[t.props.color].highlight[g];return m.jsx("path",{d:h,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:y,strokeWidth:l,opacity:r})}function cA(n,e){return Pe("forceSolid",()=>{const t=ap(e),r=n.getZoomLevel();return t/r<1.5},[n])}function oH(){return m.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M3,11 L3,3 11,3",strokeWidth:"2"}),m.jsx("path",{d:"M19,27 L27,27 L27,19",strokeWidth:"2"}),m.jsx("path",{d:"M27,3 L3,27",strokeWidth:"2"})]})}function sH({shapeId:n,assetId:e}){const t=xe(),r=!!Gv(),i=kre(),s=M.useMemo(()=>Kw(aH,500),[]),[l,c]=M.useState(()=>({asset:e?t.getAsset(e)??null:null,url:null})),d=M.useRef(!1),h=M.useRef(null);return M.useEffect(()=>{if(!e)return;let g=!1,y;const v=Kl("update state",()=>{if(!r&&t.getCulledShapes().has(n))return;const w=t.getAsset(e);if(!w)return;const C=t.getShape(n);if(!C)return;if(!w.props.src){const I=t.getTemporaryAssetPreview(w.id);if(I){h.current!==I&&(h.current=I,c(k=>({...k,isPlaceholder:!0,url:I})),i());return}}const E=t.getZoomLevel()*(C.props.w/w.props.w);function P(I,k){g||h.current!==k&&(d.current=!0,h.current=k,c({asset:I,url:k}),i())}d.current?(s(t,e,E,r,I=>P(w,I)),y=s.cancel):aH(t,e,E,r,I=>P(w,I))});return()=>{v(),y==null||y(),g=!0}},[t,e,r,i,n,s]),l}function aH(n,e,t,r,i){n.resolveAssetUrl(e,{screenScale:t,shouldResolveToOriginal:r}).then(s=>{i(s)})}async function hge(n){const t=await(await Lc(n)).blob();return Bl.blobToDataUrl(t)}class z1 extends Vg{isAspectRatioLocked(){return!0}canCrop(){return!0}getDefaultProps(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null,flipX:!1,flipY:!1}}onResize(e,t){let r=g0(e,t);const{flipX:i,flipY:s}=t.initialShape.props,{scaleX:l,scaleY:c,mode:d}=t;if(r={...r,props:{...r.props,flipX:l<0!==i,flipY:c<0!==s}},!e.props.crop)return r;const h=d==="scale_shape"&&l===-1||d==="resize_bounds"&&i!==r.props.flipX,g=d==="scale_shape"&&c===-1||d==="resize_bounds"&&s!==r.props.flipY,{topLeft:y,bottomRight:v}=e.props.crop;return r.props.crop={topLeft:{x:h?1-v.x:y.x,y:g?1-v.y:y.y},bottomRight:{x:h?1-y.x:v.x,y:g?1-y.y:v.y}},r}component(e){return m.jsx(pge,{shape:e})}indicator(e){return this.editor.getCroppingShapeId()===e.id?null:m.jsx("rect",{width:Se(e.props.w),height:Se(e.props.h)})}async toSvg(e){if(!e.props.assetId||!this.editor.getAsset(e.props.assetId))return null;let r=await this.editor.resolveAssetUrl(e.props.assetId,{shouldResolveToOriginal:!0});return r?((r.startsWith("blob:")||r.startsWith("http")||r.startsWith("/")||r.startsWith("./"))&&(r=await hge(r)||""),m.jsx(mge,{shape:e,src:r})):null}onDoubleClickEdge(e){const t=e.props;if(!t||this.editor.getCroppingShapeId()!==e.id)return;const r=Lr(t.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},i=1/(r.bottomRight.x-r.topLeft.x)*e.props.w,s=1/(r.bottomRight.y-r.topLeft.y)*e.props.h,l=new R(r.topLeft.x*i,r.topLeft.y*s).rot(e.rotation),c={id:e.id,type:e.type,x:e.x-l.x,y:e.y-l.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:i,h:s}};this.editor.updateShapes([c])}getInterpolatedProps(e,t,r){function i(s,l){var y,v,w,C;if(s.props.crop===null&&l.props.crop===null)return null;const c=((y=s.props.crop)==null?void 0:y.topLeft)||{x:0,y:0},d=((v=s.props.crop)==null?void 0:v.bottomRight)||{x:1,y:1},h=((w=l.props.crop)==null?void 0:w.topLeft)||{x:0,y:0},g=((C=l.props.crop)==null?void 0:C.bottomRight)||{x:1,y:1};return{topLeft:{x:Rn(c.x,h.x,r),y:Rn(c.y,h.y,r)},bottomRight:{x:Rn(d.x,g.x,r),y:Rn(d.y,g.y,r)}}}return{...r>.5?t.props:e.props,w:Rn(e.props.w,t.props.w,r),h:Rn(e.props.h,t.props.h,r),crop:i(e,t)}}}U(z1,"type","image"),U(z1,"props",ON),U(z1,"migrations",jN);const pge=M.memo(function({shape:e}){var I;const t=xe(),{asset:r,url:i}=sH({shapeId:e.id,assetId:e.props.assetId}),s=M6(),[l,c]=M.useState(""),[d,h]=M.useState(null),g=gge(t,e);M.useEffect(()=>{if(i&&g){let k=!1;const L=sv();return L.onload=()=>{if(k)return;const O=document.createElement("canvas");O.width=L.width,O.height=L.height;const z=O.getContext("2d");z&&(z.drawImage(L,0,0),c(O.toDataURL()),h(i))},L.crossOrigin="anonymous",L.src=i,()=>{k=!0}}},[t,g,s,i]);const y=Pe("show crop preview",()=>e.id===t.getOnlySelectedShapeId()&&t.getCroppingShapeId()===e.id&&t.isIn("select.crop"),[t,e.id]),v=s&&(((I=r==null?void 0:r.props.mimeType)==null?void 0:I.includes("video"))||g),w=lH(e),C=i===d?null:i,E=v?l:d;if(!i&&!(r!=null&&r.props.src))return m.jsxs(Cf,{id:e.id,style:{overflow:"hidden",width:e.props.w,height:e.props.h,color:"var(--color-text-3)",backgroundColor:"var(--color-low)",border:"1px solid var(--color-low-border)"},children:[m.jsx("div",{className:It("tl-image-container",r&&"tl-image-container-loading"),style:w,children:r?null:m.jsx(oH,{})}),"url"in e.props&&e.props.url&&m.jsx(lm,{url:e.props.url})]});const P=g?"anonymous":void 0;return m.jsxs(m.Fragment,{children:[y&&E&&m.jsx("div",{style:w,children:m.jsx("img",{className:"tl-image",style:{...ES(e),opacity:.1},crossOrigin:P,src:E,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1})}),m.jsxs(Cf,{id:e.id,style:{overflow:"hidden",width:e.props.w,height:e.props.h},children:[m.jsxs("div",{className:It("tl-image-container"),style:w,children:[E&&m.jsx("img",{className:"tl-image",style:ES(e),crossOrigin:P,src:E,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1},E),C&&m.jsx("img",{className:"tl-image",style:ES(e),crossOrigin:P,src:C,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1,onLoad:()=>h(C)},C)]}),e.props.url&&m.jsx(lm,{url:e.props.url})]})]})});function gge(n,e){const t=e.props.assetId?n.getAsset(e.props.assetId):void 0;return t?"mimeType"in t.props&&Ra.isAnimatedImageType(t==null?void 0:t.props.mimeType)||"isAnimated"in t.props&&t.props.isAnimated:!1}function lH(n){const e=n.props.crop,t=e==null?void 0:e.topLeft;if(!t)return{width:n.props.w,height:n.props.h};const r=1/(e.bottomRight.x-e.topLeft.x)*n.props.w,i=1/(e.bottomRight.y-e.topLeft.y)*n.props.h,s=-t.x*r,l=-t.y*i;return{transform:`translate(${s}px, ${l}px)`,width:r,height:i}}function ES(n,e){const{flipX:t,flipY:r}=n.props;if(!t&&!r)return;const i=`scale(${t?-1:1}, ${r?-1:1})`;return{transform:`${e?`translate(${t?e.width:0}px, ${r?e.height:0}px)`:""} ${i}`,transformOrigin:e?"0 0":"center center"}}function mge({shape:n,src:e}){const t=Mg(),r=lH(n),i=n.props.crop;if(r.transform&&i){const{transform:s,width:l,height:c}=r,d=(i.bottomRight.x-i.topLeft.x)*l,h=(i.bottomRight.y-i.topLeft.y)*c,g=[new R(0,0),new R(d,0),new R(d,h),new R(0,h)],y=ES(n,{width:l,height:c});return m.jsxs(m.Fragment,{children:[m.jsx("defs",{children:m.jsx("clipPath",{id:t,children:m.jsx("polygon",{points:g.map(v=>`${v.x},${v.y}`).join(" ")})})}),m.jsx("g",{clipPath:`url(#${t})`,children:m.jsx("image",{href:e,width:l,height:c,style:y?{...y,transform:`${s} ${y.transform}`}:{transform:s}})})]})}else return m.jsx("image",{href:e,width:n.props.w,height:n.props.h,style:ES(n,{width:n.props.w,height:n.props.h})})}function cH(n){return{size:n,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function uH(n,e,t){const r=e.vertices,i=cH(t);return eu(r,i)}function yge(n,e,t){const r=cH(t);return DM(d1(uH(n,e,t),r),r)}function vge(n,e,t){const r=yge(n,e,t);return bk(r)}function Sge(n,e,t){if(n.props.dash==="draw"){const r=uH(n,e,t);return sp(r)}return e.getSvgPathData()}function dH(n,e,t){let r=`M ${Gn(e[0])}L`,i=`M ${Gn(e[0])}L`;const s=t/3,l=t*2,c=Hl(n);let d=e[0],h,g=e[0],y;const v=e.length;for(let w=0,C=v-1;w<C;w++){h=e[w+1],y=R.AddXY(e[w+1],c()*s,c()*s);const E=R.Sub(h,d),P=R.Len(E),I=R.Div(E,P).mul(Math.min(P/4,l)),k=R.Add(d,I),L=R.Add(h,I.neg()),O=R.Sub(y,g),z=R.Len(O),F=R.Div(O,z).mul(Math.min(z/4,l)),H=R.Add(g,F),V=R.Add(y,F.neg());w===C-1?(r+=`${Gn(k)}L ${Gn(h)}`,i+=`${Gn(H)}L ${Gn(y)}`):(r+=`${Gn(k)}L ${Gn(L)}Q ${Gn(h)}`,i+=`${Gn(H)}L ${Gn(V)}Q ${Gn(y)}`,d=h,g=y)}return[r,r+i]}const xge=new jc;class U1 extends Zl{hideResizeHandles(){return!0}hideRotateHandle(){return!0}hideSelectionBoundsFg(){return!0}hideSelectionBoundsBg(){return!0}getDefaultProps(){const[e,t]=uv(2);return{dash:"draw",size:"m",color:"black",spline:"line",points:{[e]:{id:e,index:e,x:0,y:0},[t]:{id:t,index:t,x:.1,y:.1}},scale:1}}getGeometry(e){return PS(e)}getHandles(e){return xge.get(e.props,()=>{const t=PS(e),r=_S(e),i=r.map(s=>({...s,id:s.index,type:"vertex",canSnap:!0}));for(let s=0;s<r.length-1;s++){const l=cv(r[s].index,r[s+1].index),d=t.segments[s].midPoint();i.push({id:l,type:"create",index:l,x:d.x,y:d.y,canSnap:!0})}return i.sort(Go)})}onResize(e,t){const{scaleX:r,scaleY:i}=t;return{props:{points:lv(e.props.points,(s,{id:l,index:c,x:d,y:h})=>({id:l,index:c,x:d*r,y:h*i}))}}}onBeforeCreate(e){const{props:{points:t}}=e,r=Object.keys(t);if(r.length<2)return;const i=t[r[0]];if(r.every(l=>{const c=t[l];return c.x===i.x&&c.y===i.y})){const l=r[r.length-1];return t[l]={...t[l],x:t[l].x+.1,y:t[l].y+.1},e}}onHandleDrag(e,{handle:t}){if(t.type!=="vertex")return;const r=ec(new R(t.x,t.y),this.editor);return{...e,props:{...e.props,points:{...e.props.points,[t.id]:{id:t.id,index:t.index,x:r.x,y:r.y}}}}}component(e){return m.jsx(Sf,{children:m.jsx(fH,{shape:e})})}indicator(e){const t=nu[e.props.size]*e.props.scale,r=PS(e),{dash:i}=e.props;let s;if(e.props.spline==="line"){const l=r.points;if(i==="solid"||i==="dotted"||i==="dashed")s="M"+l[0]+"L"+l.slice(1);else{const[c]=dH(e.id,l,t);s=c}}else s=Sge(e,r,t);return m.jsx("path",{d:s})}toSvg(e){return m.jsx(fH,{shouldScale:!0,shape:e})}getHandleSnapGeometry(e){const t=_S(e);return{points:t,getSelfSnapPoints:r=>{const i=this.getHandles(e).filter(s=>s.type==="vertex").findIndex(s=>s.id===r.id);return t.filter((s,l)=>Math.abs(l-i)>1).map(R.From)},getSelfSnapOutline:r=>{const i=this.getHandles(e).filter(l=>l.type==="vertex").findIndex(l=>l.id===r.id),s=PS(e).segments.filter((l,c)=>c!==i-1&&c!==i);return s.length?new hl({children:s}):null}}}getInterpolatedProps(e,t,r){const i=_S(e),s=_S(t),l=[],c=[];let d=y2;if(i.length>s.length)for(let h=0;h<i.length;h++)l[h]={...i[h]},s[h]===void 0?c[h]={...s[s.length-1],id:d}:c[h]={...s[h],id:d},d=Fc(d);else if(s.length>i.length)for(let h=0;h<s.length;h++)c[h]={...s[h]},i[h]===void 0?l[h]={...i[i.length-1],id:d}:l[h]={...i[h],id:d},d=Fc(d);else for(let h=0;h<s.length;h++)l[h]=i[h],c[h]=s[h];return{...r>.5?t.props:e.props,points:Object.fromEntries(l.map((h,g)=>{const y=c[g];return[h.id,{...h,x:Rn(h.x,y.x,r),y:Rn(h.y,y.y,r)}]})),scale:Rn(e.props.scale,t.props.scale,r)}}}U(U1,"type","line"),U(U1,"props",LN),U(U1,"migrations",NN);function _S(n){return Object.values(n.props.points).sort(Go)}function PS(n){const e=_S(n).map(R.From);switch(n.props.spline){case"cubic":return new mse({points:e});case"line":return new Fg({points:e})}}function fH({shape:n,shouldScale:e=!1,forceSolid:t=!1}){const r=Sl(),i=PS(n),{dash:s,color:l,size:c}=n.props,d=1/n.props.scale,h=e?d:1,g=nu[c]*n.props.scale;if(n.props.spline==="line"){if(s==="solid"){const y=i.points,v="M"+y[0]+"L"+y.slice(1);return m.jsx("path",{d:v,stroke:r[l].solid,strokeWidth:g,fill:"none",transform:`scale(${h})`})}if(s==="dashed"||s==="dotted")return m.jsx("g",{stroke:r[l].solid,strokeWidth:g,transform:`scale(${h})`,children:i.segments.map((y,v)=>{const{strokeDasharray:w,strokeDashoffset:C}=t?{strokeDasharray:"none",strokeDashoffset:"none"}:Ql(y.length,g,{style:s,start:v>0?"outset":"none",end:v<i.segments.length-1?"outset":"none"});return m.jsx("path",{strokeDasharray:w,strokeDashoffset:C,d:y.getSvgPathData(!0),fill:"none"},v)})});if(s==="draw"){const y=i.points,[v,w]=dH(n.id,y,g);return m.jsx("path",{d:w,stroke:r[l].solid,strokeWidth:g,fill:"none",transform:`scale(${h})`})}}if(n.props.spline==="cubic"){const y=i.getSvgPathData();if(s==="solid")return m.jsx("path",{strokeWidth:g,stroke:r[l].solid,fill:"none",d:y,transform:`scale(${h})`});if(s==="dashed"||s==="dotted")return m.jsx("g",{stroke:r[l].solid,strokeWidth:g,transform:`scale(${h})`,children:i.segments.map((v,w)=>{const{strokeDasharray:C,strokeDashoffset:E}=Ql(v.length,g,{style:s,start:w>0?"outset":"none",end:w<i.segments.length-1?"outset":"none",forceSolid:t});return m.jsx("path",{strokeDasharray:C,strokeDashoffset:E,d:v.getSvgPathData(),fill:"none"},w)})});if(s==="draw")return m.jsx("path",{d:vge(n,i,g),strokeWidth:1,stroke:r[l].solid,fill:r[l].solid,transform:`scale(${h})`})}}class $1 extends Zl{canEdit(){return!0}hideResizeHandles(){return!0}hideSelectionBoundsFg(){return!1}getDefaultProps(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",labelColor:"black",growY:0,fontSizeAdjustment:0,url:"",scale:1}}getGeometry(e){const{labelHeight:t,labelWidth:r}=pH(this.editor,e),{scale:i}=e.props,s=t*i,l=r*i,c=vr*i,d=B1(e);return new hl({children:[new Vc({width:c,height:d,isFilled:!0}),new Vc({x:e.props.align==="start"?0:e.props.align==="end"?c-l:(c-l)/2,y:e.props.verticalAlign==="start"?0:e.props.verticalAlign==="end"?d-s:(d-s)/2,width:l,height:s,isFilled:!0,isLabel:!0})]})}getHandles(e){const{scale:t}=e.props;if(this.editor.getInstanceState().isCoarsePointer)return[];const i=this.editor.getZoomLevel();if(i*t<.25)return[];const s=B1(e),l=vr*t,c=Lhe/i*t;return i*t<.5?[{id:"bottom",index:"a3",type:"clone",x:l/2,y:s+c}]:[{id:"top",index:"a1",type:"clone",x:l/2,y:-c},{id:"right",index:"a2",type:"clone",x:l+c,y:s/2},{id:"bottom",index:"a3",type:"clone",x:l/2,y:s+c},{id:"left",index:"a4",type:"clone",x:-c,y:s/2}]}getText(e){return e.props.text}component(e){const{id:t,type:r,props:{labelColor:i,scale:s,color:l,font:c,size:d,align:h,text:g,verticalAlign:y,fontSizeAdjustment:v}}=e,w=Cge(t),C=Sl(),E=vr*s,P=B1(e),I=Pe("shape rotation",()=>{var z;return((z=this.editor.getShapePageTransform(t))==null?void 0:z.rotation())??0},[this.editor]),k=Pe("zoom",()=>this.editor.getZoomLevel()<.35/s,[s,this.editor]),L=Pe("dark mode",()=>this.editor.user.getIsDarkMode(),[this.editor]),O=e.id===this.editor.getOnlySelectedShapeId();return m.jsxs(m.Fragment,{children:[m.jsx("div",{id:t,className:"tl-note__container",style:{width:E,height:P,backgroundColor:C[l].note.fill,borderBottom:k?L?`${2*s}px solid rgb(20, 20, 20)`:`${2*s}px solid rgb(144, 144, 144)`:"none",boxShadow:k?"none":Ege(e.id,I,s)},children:m.jsx(E1,{shapeId:t,type:r,font:c,fontSize:(v||od[d])*s,lineHeight:rs.lineHeight,align:h,verticalAlign:y,text:g,isNote:!0,isSelected:O,labelColor:i==="black"?C[l].note.text:C[i].fill,wrap:!0,padding:16*s,onKeyDown:w})}),"url"in e.props&&e.props.url&&m.jsx(lm,{url:e.props.url})]})}indicator(e){const{scale:t}=e.props;return m.jsx("rect",{rx:t,width:Se(vr*t),height:Se(B1(e))})}toSvg(e,t){e.props.text&&t.addExportDef(b1(e.props.font));const r=Vu({isDarkMode:t.isDarkMode}),i=_ge(e);return m.jsxs(m.Fragment,{children:[m.jsx("rect",{x:5,y:5,rx:1,width:vr-10,height:i.h,fill:"rgba(0,0,0,.1)"}),m.jsx("rect",{rx:1,width:vr,height:i.h,fill:r[e.props.color].note.fill}),m.jsx(C1,{fontSize:e.props.fontSizeAdjustment||od[e.props.size],font:e.props.font,align:e.props.align,verticalAlign:e.props.verticalAlign,text:e.props.text,labelColor:r[e.props.color].note.text,bounds:i,stroke:!1})]})}onBeforeCreate(e){return hH(this.editor,e)}onBeforeUpdate(e,t){if(!(e.props.text===t.props.text&&e.props.font===t.props.font&&e.props.size===t.props.size))return hH(this.editor,t)}onEditEnd(e){const{id:t,type:r,props:{text:i}}=e;i.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:t,type:r,props:{text:i.trimEnd()}}])}getInterpolatedProps(e,t,r){return{...r>.5?t.props:e.props,scale:Rn(e.props.scale,t.props.scale,r)}}}U($1,"type","note"),U($1,"props",FN),U($1,"migrations",zN);function hH(n,e){const{labelHeight:t,fontSizeAdjustment:r}=pH(n,e),i=Math.max(0,t-vr);if(i!==e.props.growY||r!==e.props.fontSizeAdjustment)return{...e,props:{...e.props,growY:i,fontSizeAdjustment:r}}}function wge(n,e){const{text:t}=e.props;if(!t)return{labelHeight:od[e.props.size]*rs.lineHeight+vl*2,labelWidth:100,fontSizeAdjustment:0};const r=od[e.props.size];let i=0,s=0,l=vr,c=vr;const d=1;do{i=Math.min(r,r-s);const h=n.textMeasure.measureText(t,{...rs,fontFamily:sd[e.props.font],fontSize:i,maxWidth:vr-vl*2-d,disableOverflowWrapBreaking:!0});if(l=h.h+vl*2,c=h.w+vl*2,i<=14){const g=n.textMeasure.measureText(t,{...rs,fontFamily:sd[e.props.font],fontSize:i,maxWidth:vr-vl*2-d});l=g.h+vl*2,c=g.w+vl*2;break}if(h.scrollWidth.toFixed(0)===h.w.toFixed(0))break}while(s++<50);return{labelHeight:l,labelWidth:c,fontSizeAdjustment:i}}const bge=new jc;function pH(n,e){return bge.get(e,()=>wge(n,e))}function Cge(n){const e=xe(),t=n9();return M.useCallback(r=>{const i=e.getShape(n);if(!i)return;const s=r.key==="Tab",l=(r.metaKey||r.ctrlKey)&&r.key==="Enter";if(s||l){r.preventDefault();const c=e.getShapePageTransform(n),d=c.rotation(),h=!!(t.dir==="rtl"||f7(i.props.text)),g=(vr+e.options.adjacentShapeMargin+(l&&!r.shiftKey?i.props.growY:0))*i.props.scale,y=new R(s?r.shiftKey!=h?-1:1:0,l?r.shiftKey?-1:1:0).mul(g).add(w1.clone().mul(i.props.scale)).rot(d).add(c.point()),v=b7(e,i,y,d);v&&(e.markHistoryStoppingPoint("editing adjacent shape"),W0(e,v,!0))}},[n,e,t.dir])}function B1(n){return(vr+n.props.growY)*n.props.scale}function Ege(n,e,t){const r=Hl(n),i=Math.abs(r())+.5,s=Math.cos(e),l=5*t,c=4*t,d=6*t,h=7*t;return`0px ${l-i}px ${l}px -${l}px rgba(15, 23, 31, .6),
	0px ${(c+i*h)*Math.max(0,s)}px ${d+i*h}px -${c+i*d}px rgba(15, 23, 31, ${(.3+i*.1).toFixed(2)}), 
	0px ${48*t}px ${10*t}px -${10*t}px inset rgba(15, 23, 44, ${((.022+r()*.005)*((1+s)/2)).toFixed(2)})`}function _ge(n){return new Xe(0,0,vr,vr+n.props.growY)}function Pge(n,{initialBounds:e,scaleX:t,scaleY:r,newPoint:i}){const s=Math.max(.01,Math.min(Math.abs(t),Math.abs(r))),l=new R(0,0);t<0&&(l.x=-(e.width*s)),r<0&&(l.y=-(e.height*s));const{x:c,y:d}=R.Add(i,l.rot(n.rotation));return{x:c,y:d,props:{scale:s*n.props.scale}}}const Tge=new jc;class H1 extends Zl{getDefaultProps(){return{color:"black",size:"m",w:8,text:"",font:"draw",textAlign:"start",autoSize:!0,scale:1}}getMinDimensions(e){return Tge.get(e.props,t=>gH(this.editor,t))}getGeometry(e){const{scale:t}=e.props,{width:r,height:i}=this.getMinDimensions(e);return new Vc({width:r*t,height:i*t,isFilled:!0,isLabel:!0})}getText(e){return e.props.text}canEdit(){return!0}isAspectRatioLocked(){return!0}component(e){const{id:t,props:{font:r,size:i,text:s,color:l,scale:c,textAlign:d}}=e,{width:h,height:g}=this.getMinDimensions(e),y=e.id===this.editor.getOnlySelectedShapeId(),v=Sl(),w=Ige(t);return m.jsx(E1,{shapeId:t,classNamePrefix:"tl-text-shape",type:"text",font:r,fontSize:om[i],lineHeight:rs.lineHeight,align:d,verticalAlign:"middle",text:s,labelColor:v[l].solid,isSelected:y,textWidth:h,textHeight:g,style:{transform:`scale(${c})`,transformOrigin:"top left"},wrap:!0,onKeyDown:w})}indicator(e){const t=this.editor.getShapeGeometry(e).bounds,r=xe();return e.props.autoSize&&r.getEditingShapeId()===e.id?null:m.jsx("rect",{width:Se(t.width),height:Se(t.height)})}toSvg(e,t){e.props.text&&t.addExportDef(b1(e.props.font));const r=this.editor.getShapeGeometry(e).bounds,i=r.width/(e.props.scale??1),s=r.height/(e.props.scale??1),l=Vu(t);return m.jsx(C1,{fontSize:om[e.props.size],font:e.props.font,align:e.props.textAlign,verticalAlign:"middle",text:e.props.text,labelColor:l[e.props.color].solid,bounds:new Xe(0,0,i,s),padding:0})}onResize(e,t){const{newPoint:r,initialBounds:i,initialShape:s,scaleX:l,handle:c}=t;if(t.mode==="scale_shape"||c!=="right"&&c!=="left")return{id:e.id,type:e.type,...Pge(e,t)};{const d=Math.max(1,Math.abs(i.width*l)),{x:h,y:g}=l<0?R.Sub(r,R.FromAngle(e.rotation).mul(d)):r;return{id:e.id,type:e.type,x:h,y:g,props:{w:d/s.props.scale,autoSize:!1}}}}onEditEnd(e){const{id:t,type:r,props:{text:i}}=e,s=e.props.text.trimEnd();s.length===0?this.editor.deleteShapes([e.id]):s!==e.props.text&&this.editor.updateShapes([{id:t,type:r,props:{text:i.trimEnd()}}])}onBeforeUpdate(e,t){if(!t.props.autoSize)return;const r=e.props.size!==t.props.size||e.props.textAlign!==t.props.textAlign||e.props.font!==t.props.font||e.props.scale!==1&&t.props.scale===1,i=e.props.text!==t.props.text;if(!r&&!i)return;const s=this.getMinDimensions(e),l=gH(this.editor,t.props),c=s.width*e.props.scale,d=s.height*e.props.scale,h=l.width*t.props.scale,g=l.height*t.props.scale;let y;switch(t.props.textAlign){case"middle":{y=new R((h-c)/2,i?0:(g-d)/2);break}case"end":{y=new R(h-c,i?0:(g-d)/2);break}default:{if(i)break;y=new R(0,(g-d)/2);break}}if(y){y.rot(t.rotation);const{x:v,y:w}=t;return{...t,x:v-y.x,y:w-y.y,props:{...t.props,w:h}}}else return{...t,props:{...t.props,w:h}}}}U(H1,"type","text"),U(H1,"props",UN),U(H1,"migrations",BN);function gH(n,e){const{font:t,text:r,autoSize:i,size:s,w:l}=e,c=i?16:Math.max(16,l),d=om[s],h=i?null:Math.floor(Math.max(c,l)),g=n.textMeasure.measureText(r,{...rs,fontFamily:sd[t],fontSize:d,maxWidth:h});return i&&(g.w+=1),{width:Math.max(c,g.w),height:Math.max(d,g.h)}}function Ige(n){const e=xe();return M.useCallback(t=>{if(e.getEditingShapeId()===n)switch(t.key){case"Enter":{(t.ctrlKey||t.metaKey)&&e.complete();break}case"Tab":{mn(t),t.shiftKey?am.unindent(t.currentTarget):am.indent(t.currentTarget);break}}},[e,n])}class V1 extends Vg{canEdit(){return!0}isAspectRatioLocked(){return!0}getDefaultProps(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}component(e){return m.jsx(kge,{shape:e})}indicator(e){return m.jsx("rect",{width:Se(e.props.w),height:Se(e.props.h)})}async toSvg(e){const t=await Rge(this.editor,e);return t?m.jsx("image",{href:t,width:e.props.w,height:e.props.h}):null}}U(V1,"type","video"),U(V1,"props",HN),U(V1,"migrations",KN);const kge=M.memo(function({shape:e}){const t=xe(),r=t.getShapeGeometry(e).bounds.w*t.getZoomLevel()>=110,i=m0(e.id),s=M6(),{Spinner:l}=zr(),{asset:c,url:d}=sH({shapeId:e.id,assetId:e.props.assetId}),h=M.useRef(null),[g,y]=M.useState(!1),[v,w]=M.useState(!1);M.useEffect(()=>{const E=()=>w(document.fullscreenElement===h.current);return document.addEventListener("fullscreenchange",E),()=>document.removeEventListener("fullscreenchange",E)});const C=M.useCallback(E=>{E.currentTarget&&y(!0)},[]);return M.useEffect(()=>{const E=h.current;E&&i&&document.activeElement!==E&&E.focus()},[i,g]),M.useEffect(()=>{if(s){const E=h.current;if(!E)return;E.pause(),E.currentTime=0}},[h,s]),m.jsxs(m.Fragment,{children:[m.jsx(Cf,{id:e.id,style:{color:"var(--color-text-3)",backgroundColor:c?"transparent":"var(--color-low)",border:c?"none":"1px solid var(--color-low-border)"},children:m.jsx("div",{className:"tl-counter-scaled",children:m.jsx("div",{className:"tl-video-container",children:c?l&&!c.props.src?m.jsx(l,{}):d?m.jsxs(m.Fragment,{children:[m.jsx("video",{ref:h,style:i?{pointerEvents:"all"}:g?void 0:{display:"none"},className:It("tl-video",`tl-video-shape-${e.id.split(":")[1]}`,{"tl-video-is-fullscreen":v}),width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:i&&r,onLoadedData:C,hidden:!g,children:m.jsx("source",{src:d})}),!g&&l&&m.jsx(l,{})]}):null:m.jsx(oH,{})})})}),"url"in e.props&&e.props.url&&m.jsx(lm,{url:e.props.url})]})});async function Rge(n,e){const t=await n.resolveAssetUrl(e.props.assetId,{shouldResolveToOriginal:!0});if(!t)return null;const r=await Ra.loadVideo(t);return Ra.getVideoFrameAsDataUrl(r,0)}const mH=[H1,k1,R1,O1,$1,U1,A1,T1,L1,M1,z1,V1];function Mge(n){return n.sideEffects.register({instance_page_state:{afterChange:(e,t)=>{if(e.croppingShapeId!==t.croppingShapeId){const r=n.isIn("select.crop");!e.croppingShapeId&&t.croppingShapeId?r||n.setCurrentTool("select.crop.idle"):e.croppingShapeId&&!t.croppingShapeId&&r&&n.setCurrentTool("select.idle")}if(e.editingShapeId!==t.editingShapeId)if(!e.editingShapeId&&t.editingShapeId){if(!n.isIn("select.editing_shape")){const r=n.getEditingShape();r&&r.type==="text"&&n.isInAny("text.pointing","select.resizing")&&n.getInstanceState().isToolLocked?n.setCurrentTool("select.editing_shape",{isCreatingTextWhileToolLocked:!0}):n.setCurrentTool("select.editing_shape")}}else e.editingShapeId&&!t.editingShapeId&&n.isIn("select.editing_shape")&&n.setCurrentTool("select.idle")}}})}class yH extends Ct{constructor(){super(...arguments);U(this,"info",{});U(this,"scribbleId","id");U(this,"markId","");U(this,"excludedShapeIds",new Set)}onEnter(t){this.markId=this.editor.markHistoryStoppingPoint("erase scribble begin"),this.info=t;const{originPagePoint:r}=this.editor.inputs;this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter(s=>{if(this.editor.isShapeOrAncestorLocked(s))return!0;if(this.editor.isShapeOfType(s,"group")||this.editor.isShapeOfType(s,"frame")){const l=this.editor.getPointInShapeSpace(s,r);return this.editor.getShapeGeometry(s).bounds.containsPoint(l)}return!1}).map(s=>s.id));const i=this.editor.scribbles.addScribble({color:"muted-1",size:12});this.scribbleId=i.id,this.update()}pushPointToScribble(){const{x:t,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,t,r)}onExit(){this.editor.setErasingShapes([]),this.editor.scribbles.stop(this.scribbleId)}onPointerMove(){this.update()}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}update(){const{editor:t,excludedShapeIds:r}=this,i=t.getErasingShapeIds(),s=t.getZoomLevel(),l=t.getCurrentPageRenderingShapesSorted(),{inputs:{currentPagePoint:c,previousPagePoint:d}}=t;this.pushPointToScribble();const h=new Set(i),g=this.editor.options.hitTestMargin/s;for(const y of l){if(t.isShapeOfType(y,"group"))continue;const v=t.getShapeMask(y.id);if(v&&!Na(c,v))continue;const w=t.getShapeGeometry(y),C=t.getShapePageTransform(y);if(!w||!C)continue;const E=C.clone().invert(),P=E.applyToPoint(d),I=E.applyToPoint(c),{bounds:k}=w;k.minX-g>Math.max(P.x,I.x)||k.minY-g>Math.max(P.y,I.y)||k.maxX+g<Math.min(P.x,I.x)||k.maxY+g<Math.min(P.y,I.y)||w.hitTestLineSegment(P,I,g)&&h.add(t.getOutermostSelectableShape(y).id)}this.editor.setErasingShapes([...h].filter(y=>!r.has(y)))}complete(){const{editor:t}=this;t.deleteShapes(t.getCurrentPageState().erasingShapeIds),this.parent.transition("idle")}cancel(){const{editor:t}=this;t.bailToMark(this.markId),this.parent.transition("idle",this.info)}}U(yH,"id","erasing");let Age=(JA=class extends Ct{onPointerDown(e){this.parent.transition("pointing",e)}onCancel(){this.editor.setCurrentTool("select")}},U(JA,"id","idle"),JA),Dge=(eD=class extends Ct{onEnter(){const e=this.editor.getZoomLevel(),t=this.editor.getCurrentPageRenderingShapesSorted(),{inputs:{currentPagePoint:r}}=this.editor,i=new Set,s=i.size;for(let l=t.length,c=l-1;c>=0;c--){const d=t[c];if(!(this.editor.isShapeOrAncestorLocked(d)||this.editor.isShapeOfType(d,"group"))&&this.editor.isPointInShape(d,r,{hitInside:!1,margin:this.editor.options.hitTestMargin/e})){const h=this.editor.getOutermostSelectableShape(d);if(this.editor.isShapeOfType(h,"frame")&&i.size>s)break;i.add(h.id)}}this.editor.setErasingShapes([...i])}onLongPress(e){this.startErasing(e)}onExit(e,t){t!=="erasing"&&this.editor.setErasingShapes([])}onPointerMove(e){this.editor.inputs.isDragging&&this.startErasing(e)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.cancel()}startErasing(e){this.parent.transition("erasing",e)}complete(){const e=this.editor.getErasingShapeIds();e.length&&(this.editor.markHistoryStoppingPoint("erase end"),this.editor.deleteShapes(e)),this.parent.transition("idle")}cancel(){this.parent.transition("idle")}},U(eD,"id","pointing"),eD);class K1 extends Ct{static children(){return[Age,Dge,yH]}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}}U(K1,"id","eraser"),U(K1,"initial","idle"),U(K1,"isLockable",!1);class vH extends Ct{constructor(){super(...arguments);U(this,"initialCamera",new R)}onEnter(){this.initialCamera=R.From(this.editor.getCamera()),this.update()}onPointerMove(){this.update()}onPointerUp(){this.complete()}onCancel(){this.parent.transition("idle")}onComplete(){this.complete()}update(){const{initialCamera:t,editor:r}=this,{currentScreenPoint:i,originScreenPoint:s}=r.inputs,l=R.Sub(i,s).div(r.getZoomLevel());l.len2()!==0&&r.setCamera(t.clone().add(l))}complete(){const{editor:t}=this,{pointerVelocity:r}=t.inputs,i=Math.min(r.len(),2);i>.1&&this.editor.slideCamera({speed:i,direction:r}),this.parent.transition("idle")}}U(vH,"id","dragging");let Oge=(tD=class extends Ct{onEnter(){this.editor.setCursor({type:"grab",rotation:0})}onPointerDown(e){this.parent.transition("pointing",e)}onCancel(){this.editor.setCurrentTool("select")}},U(tD,"id","idle"),tD),jge=(nD=class extends Ct{onEnter(){this.editor.stopCameraAnimation(),this.editor.setCursor({type:"grabbing",rotation:0})}onLongPress(){this.startDragging()}onPointerMove(){this.editor.inputs.isDragging&&this.startDragging()}startDragging(){this.parent.transition("dragging")}onPointerUp(){this.complete()}onCancel(){this.complete()}onComplete(){this.complete()}onInterrupt(){this.complete()}complete(){this.parent.transition("idle")}},U(nD,"id","pointing"),nD);class W1 extends Ct{static children(){return[Oge,jge,vH]}onDoubleClick(e){if(e.phase==="settle"){const{currentScreenPoint:t}=this.editor.inputs;this.editor.zoomIn(t,{animation:{duration:220,easing:ao.easeOutQuint}})}}onTripleClick(e){if(e.phase==="settle"){const{currentScreenPoint:t}=this.editor.inputs;this.editor.zoomOut(t,{animation:{duration:320,easing:ao.easeOutQuint}})}}onQuadrupleClick(e){if(e.phase==="settle"){const t=this.editor.getZoomLevel(),{inputs:{currentScreenPoint:r}}=this.editor;t===1?this.editor.zoomToFit({animation:{duration:400,easing:ao.easeOutQuint}}):this.editor.resetZoom(r,{animation:{duration:320,easing:ao.easeOutQuint}})}}}U(W1,"id","hand"),U(W1,"initial","idle"),U(W1,"isLockable",!1);let Lge=(rD=class extends Ct{onPointerDown(e){this.parent.transition("lasering",e)}},U(rD,"id","idle"),rD);class SH extends Ct{constructor(){super(...arguments);U(this,"scribbleId","id")}onEnter(){const t=this.editor.scribbles.addScribble({color:"laser",opacity:.7,size:4,delay:this.editor.options.laserDelayMs,shrink:.05,taper:!0});this.scribbleId=t.id,this.pushPointToScribble()}onExit(){this.editor.scribbles.stop(this.scribbleId)}onPointerMove(){this.pushPointToScribble()}onPointerUp(){this.complete()}pushPointToScribble(){const{x:t,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,t,r)}onCancel(){this.cancel()}onComplete(){this.complete()}complete(){this.parent.transition("idle")}cancel(){this.parent.transition("idle")}}U(SH,"id","lasering");class G1 extends Ct{static children(){return[Lge,SH]}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}}U(G1,"id","laser"),U(G1,"initial","idle"),U(G1,"isLockable",!1);class xH extends Ct{constructor(){super(...arguments);U(this,"info",{});U(this,"initialSelectedShapeIds",[]);U(this,"excludedShapeIds",new Set);U(this,"isWrapMode",!1);U(this,"initialStartShape",null)}onEnter(t){const{altKey:r,currentPagePoint:i}=this.editor.inputs;if(this.isWrapMode=this.editor.user.getIsWrapMode(),r){this.parent.transition("scribble_brushing",t);return}this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter(s=>this.editor.isShapeOfType(s,"group")||this.editor.isShapeOrAncestorLocked(s)).map(s=>s.id)),this.info=t,this.initialSelectedShapeIds=this.editor.getSelectedShapeIds().slice(),this.initialStartShape=this.editor.getShapesAtPoint(i)[0],this.hitTestShapes()}onExit(){this.initialSelectedShapeIds=[],this.editor.updateInstanceState({brush:null})}onTick({elapsed:t}){const{editor:r}=this;r.edgeScrollManager.updateEdgeScrolling(t)}onPointerMove(){this.hitTestShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(t){this.editor.setSelectedShapes(this.initialSelectedShapeIds),this.parent.transition("idle",t)}onKeyDown(t){this.editor.inputs.altKey?this.parent.transition("scribble_brushing",t):this.hitTestShapes()}onKeyUp(){this.hitTestShapes()}complete(){this.hitTestShapes(),this.parent.transition("idle")}hitTestShapes(){const{editor:t,excludedShapeIds:r,isWrapMode:i}=this,{inputs:{originPagePoint:s,currentPagePoint:l,shiftKey:c,ctrlKey:d}}=t,h=new Set(c?this.initialSelectedShapeIds:[]),g=i?!d:d,y=Xe.FromPoints([s,l]),{corners:v}=y;let w,C,E,P,I,k;const L=t.getCurrentPageRenderingShapesSorted(),O=t.getCurrentPageId();e:for(let H=0,V=L.length;H<V;H++){if(E=L[H],r.has(E.id)||h.has(E.id)||(P=t.getShapePageBounds(E),!P))continue e;if(y.contains(P)){this.handleHit(E,l,O,h,v);continue e}if(g||t.isShapeOfType(E,"frame"))continue e;if(y.collides(P)){if(I=t.getShapePageTransform(E),!I)continue e;k=I.clone().invert().applyToPoints(v);const re=t.getShapeGeometry(E);t:for(let q=0;q<4;q++)if(w=k[q],C=k[(q+1)%4],re.hitTestLineSegment(w,C,0)){this.handleHit(E,l,O,h,v);break t}}}const z=t.getInstanceState().brush;(!z||!y.equals(z))&&t.updateInstanceState({brush:{...y.toJson()}});const F=t.getSelectedShapeIds();(F.length!==h.size||F.some(H=>!h.has(H)))&&t.setSelectedShapes(Array.from(h))}onInterrupt(){this.editor.updateInstanceState({brush:null})}handleHit(t,r,i,s,l){if(t.parentId===i){s.add(t.id);return}const c=this.editor.getOutermostSelectableShape(t),d=this.editor.getShapeMask(c.id);d&&!Nk(d,l)&&!Na(r,d)||s.add(c.id)}}U(xH,"id","brushing");const um={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"};class wH extends Ct{constructor(){super(...arguments);U(this,"info",{})}updateCursor(){const t=this.editor.getSelectedShapes(),r=um[this.info.handle];this.editor.setCursor({type:r,rotation:t.length===1?this.editor.getSelectionRotation():0})}onEnter(t){this.info=t,this.updateCursor()}onPointerMove(){this.editor.inputs.isDragging&&this.startResizing()}onLongPress(){this.startResizing()}startResizing(){this.editor.getIsReadonly()||this.parent.transition("resizing",this.info)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}U(wH,"id","pointing_resize_handle");const xl=8;class uA extends Ct{constructor(){super(...arguments);U(this,"info",{});U(this,"markId","");U(this,"snapshot",{})}onEnter(t){this.info=t,this.markId=this.editor.markHistoryStoppingPoint("cropping"),this.snapshot=this.createSnapshot(),this.updateShapes()}onPointerMove(){this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}updateCursor(){if(!this.editor.getSelectedShapes()[0])return;const r=um[this.info.handle];this.editor.setCursor({type:r,rotation:this.editor.getSelectionRotation()})}getDefaultCrop(){return{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}}}updateShapes(){const{shape:t,cursorHandleOffset:r}=this.snapshot;if(!t||!this.editor.getShapeUtil("image"))return;const s=t.props,l=this.editor.inputs.currentPagePoint.clone().sub(r),c=this.editor.inputs.originPagePoint.clone().sub(r),d=l.clone().sub(c).rot(-t.rotation),h=s.crop??this.getDefaultCrop(),g=Lr(h),y=new R(t.x,t.y),v=new R(0,0),w=1/(h.bottomRight.x-h.topLeft.x)*s.w,C=1/(h.bottomRight.y-h.topLeft.y)*s.h;let E=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":{if(C<xl)break;E=!0,g.topLeft.y=g.topLeft.y+d.y/C,C*(g.bottomRight.y-g.topLeft.y)<xl?(g.topLeft.y=g.bottomRight.y-xl/C,v.y=(g.topLeft.y-h.topLeft.y)*C):g.topLeft.y<=0?(g.topLeft.y=0,v.y=(g.topLeft.y-h.topLeft.y)*C):v.y=d.y;break}case"bottom":case"bottom_left":case"bottom_right":{if(C<xl)break;E=!0,g.bottomRight.y=Math.min(1,g.bottomRight.y+d.y/C),C*(g.bottomRight.y-g.topLeft.y)<xl&&(g.bottomRight.y=g.topLeft.y+xl/C);break}}switch(this.info.handle){case"left":case"top_left":case"bottom_left":{if(w<xl)break;E=!0,g.topLeft.x=g.topLeft.x+d.x/w,w*(g.bottomRight.x-g.topLeft.x)<xl?(g.topLeft.x=g.bottomRight.x-xl/w,v.x=(g.topLeft.x-h.topLeft.x)*w):g.topLeft.x<=0?(g.topLeft.x=0,v.x=(g.topLeft.x-h.topLeft.x)*w):v.x=d.x;break}case"right":case"top_right":case"bottom_right":{if(w<xl)break;E=!0,g.bottomRight.x=Math.min(1,g.bottomRight.x+d.x/w),w*(g.bottomRight.x-g.topLeft.x)<xl&&(g.bottomRight.x=g.topLeft.x+xl/w);break}}if(!E)return;y.add(v.rot(t.rotation));const P={id:t.id,type:t.type,x:y.x,y:y.y,props:{crop:g,w:(g.bottomRight.x-g.topLeft.x)*w,h:(g.bottomRight.y-g.topLeft.y)*C}};this.editor.updateShapes([P]),this.updateCursor()}complete(){this.updateShapes(),Ir(this.editor,[this.snapshot.shape.id]),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}createSnapshot(){const t=this.editor.getSelectionRotation(),{inputs:{originPagePoint:r}}=this.editor,i=this.editor.getOnlySelectedShape(),s=this.editor.getSelectionRotatedPageBounds(),l=R.RotWith(s.getHandlePoint(this.info.handle),s.point,t),c=R.Sub(r,l);return{shape:i,cursorHandleOffset:c}}}U(uA,"id","cropping");function bH(n,e=!1){const t=n.getZoomLevel(),{inputs:{currentPagePoint:r}}=n;return n.getShapeAtPoint(r,{hitInside:!1,hitLabels:e,margin:n.options.hitTestMargin/t,renderingOnly:!0})??n.getSelectedShapeAtPoint(r)}function CH(n,e,t){if(!e)throw Error("Needs to translate a cropped shape!");const{crop:r}=e.props;if(!r)return;const i=n.inputs.shiftKey?Math.abs(t.x)<Math.abs(t.y)?"x":"y":null;i==="x"?t.x=0:i==="y"&&(t.y=0),t.rot(-e.rotation);const s=1/(r.bottomRight.x-r.topLeft.x)*e.props.w,l=1/(r.bottomRight.y-r.topLeft.y)*e.props.h,c=r.bottomRight.y-r.topLeft.y,d=r.bottomRight.x-r.topLeft.x,h=Lr(r);return h.topLeft.x=Math.min(1-d,Math.max(0,h.topLeft.x-t.x/s)),h.topLeft.y=Math.min(1-c,Math.max(0,h.topLeft.y-t.y/l)),h.bottomRight.x=h.topLeft.x+d,h.bottomRight.y=h.topLeft.y+c,{id:e.id,type:e.type,props:{crop:h}}}let Nge=(iD=class extends Ct{onEnter(){this.editor.setCursor({type:"default",rotation:0});const e=this.editor.getOnlySelectedShape();e&&this.editor.setCroppingShape(e.id)}onExit(){this.editor.setCursor({type:"default",rotation:0})}onCancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}onPointerDown(e){var t;if(e.accelKey){this.cancel(),this.editor.root.handleEvent(e);return}switch(e.target){case"canvas":{const r=bH(this.editor);if(r&&!this.editor.isShapeOfType(r,"group")){this.onPointerDown({...e,shape:r,target:"shape"});return}this.cancel(),this.editor.root.handleEvent(e);break}case"shape":{if(e.shape.id===this.editor.getCroppingShapeId()){this.editor.setCurrentTool("select.crop.pointing_crop",e);return}else(t=this.editor.getShapeUtil(e.shape))!=null&&t.canCrop(e.shape)?(this.editor.setCroppingShape(e.shape.id),this.editor.setSelectedShapes([e.shape.id]),this.editor.setCurrentTool("select.crop.pointing_crop",e)):(this.cancel(),this.editor.root.handleEvent(e));break}case"selection":{switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.editor.setCurrentTool("select.pointing_rotate_handle",{...e,onInteractionEnd:"select.crop.idle"});break}case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":{this.editor.setCurrentTool("select.crop.pointing_crop_handle",{...e,onInteractionEnd:"select.crop.idle"});break}default:this.cancel()}break}}}onDoubleClick(e){var s;if(this.editor.inputs.shiftKey||e.phase!=="up")return;const t=this.editor.getCroppingShapeId();if(!t)return;const r=this.editor.getShape(t);if(!r)return;const i=this.editor.getShapeUtil(r);if(i){if(e.target==="selection"){(s=i.onDoubleClickEdge)==null||s.call(i,r);return}this.cancel(),this.editor.root.handleEvent(e)}}onKeyDown(){this.nudgeCroppingImage(!1)}onKeyRepeat(){this.nudgeCroppingImage(!0)}onKeyUp(e){switch(e.code){case"Enter":{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{});break}}}cancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}nudgeCroppingImage(e=!1){const{editor:{inputs:{keys:t}}}=this,r=t.has("ShiftLeft"),i=new R(0,0);if(t.has("ArrowLeft")&&(i.x+=1),t.has("ArrowRight")&&(i.x-=1),t.has("ArrowUp")&&(i.y+=1),t.has("ArrowDown")&&(i.y-=1),i.equals(new R(0,0)))return;r&&i.mul(10);const s=this.editor.getShape(this.editor.getCroppingShapeId());if(!s)return;const l=CH(this.editor,s,i);l&&(e||this.editor.markHistoryStoppingPoint("translate crop"),this.editor.updateShapes([l]))}},U(iD,"id","idle"),iD);class EH extends Ct{onCancel(){this.editor.setCurrentTool("select.crop.idle",{})}onPointerMove(e){this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.crop.translating_crop",e)}onPointerUp(e){this.editor.setCurrentTool("select.crop.idle",e)}}U(EH,"id","pointing_crop");class dA extends Ct{constructor(){super(...arguments);U(this,"info",{})}onEnter(t){this.info=t,this.parent.setCurrentToolIdMask(t.onInteractionEnd);const r=this.editor.getSelectedShapes()[0];if(!r)return;const i=um[this.info.handle];this.editor.setCursor({type:i,rotation:this.editor.getSelectionRotation()}),this.editor.setCroppingShape(r.id)}onExit(){this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0)}onPointerMove(){this.editor.inputs.isDragging&&this.startCropping()}onLongPress(){this.startCropping()}startCropping(){this.editor.getIsReadonly()||this.parent.transition("cropping",{...this.info,onInteractionEnd:this.info.onInteractionEnd})}onPointerUp(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}}U(dA,"id","pointing_crop_handle");class _H extends Ct{constructor(){super(...arguments);U(this,"info",{});U(this,"markId","");U(this,"snapshot",{})}onEnter(t){this.info=t,this.snapshot=this.createSnapshot(),this.markId=this.editor.markHistoryStoppingPoint("translating_crop"),this.editor.setCursor({type:"move",rotation:0}),this.updateShapes()}onExit(){this.editor.setCursor({type:"default",rotation:0})}onPointerMove(){this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}onKeyDown(t){switch(t.key){case"Alt":case"Shift":{this.updateShapes();return}}}onKeyUp(t){switch(t.key){case"Enter":{this.complete();return}case"Alt":case"Shift":this.updateShapes()}}complete(){this.updateShapes(),this.editor.setCurrentTool("select.crop.idle",this.info)}cancel(){this.editor.bailToMark(this.markId),this.editor.setCurrentTool("select.crop.idle",this.info)}createSnapshot(){return{shape:this.editor.getOnlySelectedShape()}}updateShapes(){const t=this.snapshot.shape;if(!t)return;const{originPagePoint:r,currentPagePoint:i}=this.editor.inputs,s=i.clone().sub(r),l=CH(this.editor,t,s);l&&this.editor.updateShapes([l])}}U(_H,"id","translating_crop");class fA extends Ct{constructor(){super(...arguments);U(this,"markId","");U(this,"didExit",!1)}static children(){return[Nge,_H,EH,dA,uA]}onEnter(){this.didExit=!1,this.markId=this.editor.markHistoryStoppingPoint("crop")}onExit(){this.didExit||(this.didExit=!0,this.editor.squashToMark(this.markId))}onCancel(){this.didExit||(this.didExit=!0,this.editor.bailToMark(this.markId))}}U(fA,"id","crop"),U(fA,"initial","idle");class PH extends Ct{constructor(){super(...arguments);U(this,"shapeId","");U(this,"initialHandle",{});U(this,"initialAdjacentHandle",null);U(this,"initialPagePoint",{});U(this,"markId","");U(this,"initialPageTransform");U(this,"initialPageRotation");U(this,"info",{});U(this,"isPrecise",!1);U(this,"isPreciseId",null);U(this,"pointingId",null);U(this,"exactTimeout",-1)}onEnter(t){const{shape:r,isCreating:i,creatingMarkId:s,handle:l}=t;if(this.info=t,this.parent.setCurrentToolIdMask(t.onInteractionEnd),this.shapeId=r.id,this.markId="",i)if(s)this.markId=s;else{const h=this.editor.getMarkIdMatching(`creating:${this.editor.getOnlySelectedShapeId()}`);h&&(this.markId=h)}else this.markId=this.editor.markHistoryStoppingPoint("dragging handle");if(this.initialHandle=Lr(l),this.editor.isShapeOfType(r,"line")&&this.initialHandle.type==="create"){this.editor.updateShape({...r,props:{points:{...r.props.points,[l.index]:{id:l.index,index:l.index,x:l.x,y:l.y}}}});const g=this.editor.getShapeHandles(r).find(y=>y.index===l.index);this.initialHandle=Lr(g)}this.initialPageTransform=this.editor.getShapePageTransform(r),this.initialPageRotation=this.initialPageTransform.rotation(),this.initialPagePoint=this.editor.inputs.originPagePoint.clone(),this.editor.setCursor({type:i?"cross":"grabbing",rotation:0});const c=this.editor.getShapeHandles(r).sort(Go),d=c.findIndex(h=>h.id===t.handle.id);this.initialAdjacentHandle=null;for(let h=d+1;h<c.length;h++){const g=c[h];if(g.type==="vertex"&&g.id!=="middle"&&g.id!==t.handle.id){this.initialAdjacentHandle=g;break}}if(!this.initialAdjacentHandle)for(let h=c.length-1;h>=0;h--){const g=c[h];if(g.type==="vertex"&&g.id!=="middle"&&g.id!==t.handle.id){this.initialAdjacentHandle=g;break}}if(this.editor.isShapeOfType(r,"arrow")){const h=da(this.editor,r)[t.handle.id];this.isPrecise=!1,h?(this.editor.setHintingShapes([h.toId]),this.isPrecise=h.props.isPrecise,this.isPrecise?this.isPreciseId=h.toId:this.resetExactTimeout()):this.editor.setHintingShapes([])}this.update(),this.editor.select(this.shapeId)}resetExactTimeout(){this.exactTimeout!==-1&&this.clearExactTimeout(),this.exactTimeout=this.editor.timers.setTimeout(()=>{this.getIsActive()&&!this.isPrecise&&(this.isPrecise=!0,this.isPreciseId=this.pointingId,this.update()),this.exactTimeout=-1},750)}clearExactTimeout(){this.exactTimeout!==-1&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}onPointerMove(){this.update()}onKeyDown(){this.update()}onKeyUp(){this.update()}onPointerUp(){this.complete()}onComplete(){this.update(),this.complete()}onCancel(){this.cancel()}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.setHintingShapes([]),this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0})}complete(){this.editor.snaps.clearIndicators(),Ir(this.editor,[this.shapeId]);const{onInteractionEnd:t}=this.info;if(this.editor.getInstanceState().isToolLocked&&t){this.editor.setCurrentTool(t,{shapeId:this.shapeId});return}this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators();const{onInteractionEnd:t}=this.info;if(t){this.editor.setCurrentTool(t,{shapeId:this.shapeId});return}this.parent.transition("idle")}update(){var H;const{editor:t,shapeId:r,initialPagePoint:i}=this,{initialHandle:s,initialPageRotation:l,initialAdjacentHandle:c}=this,d=this.editor.getHintingShapeIds(),h=this.editor.user.getIsSnapMode(),{snaps:g,inputs:{currentPagePoint:y,shiftKey:v,ctrlKey:w,altKey:C,pointerVelocity:E}}=t,P=this.info.shape,I=t.getShape(r);if(!I)return;const k=t.getShapeUtil(I);let L=y.clone().sub(i).rot(-l).add(s);if(v&&c&&s.id!=="middle"){const V=R.Angle(c,L),q=zb(V,24)-V;L=R.RotWith(L,c,q)}t.snaps.clearIndicators();let O={...s,x:L.x,y:L.y};if(s.canSnap&&(h?!w:w)){if(!t.getShapePageTransform(I.id))throw Error("Expected a page transform");const re=g.handles.snapHandle({currentShapeId:r,handle:O});re&&(re.nudge.rot(-t.getShapeParentTransform(I).rotation()),L.add(re.nudge),O={...s,x:L.x,y:L.y})}const z=(H=k.onHandleDrag)==null?void 0:H.call(k,I,{handle:O,isPrecise:this.isPrecise||C,initial:P}),F={id:I.id,type:I.type,...z};if(s.type==="vertex"&&this.editor.isShapeOfType(I,"arrow")){const V=da(t,I)[s.id];V?d[0]!==V.toId&&(t.setHintingShapes([V.toId]),this.pointingId=V.toId,this.isPrecise=E.len()<.5||C,this.isPreciseId=this.isPrecise?V.toId:null,this.resetExactTimeout()):d.length>0&&(t.setHintingShapes([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}z&&t.updateShapes([F])}}U(PH,"id","dragging_handle");function TH(n){return n.isLabel?[n]:n instanceof hl?n.children.filter(e=>e.isLabel):[]}class IH extends Ct{constructor(){super(...arguments);U(this,"hitShapeForPointerUp",null);U(this,"info",{})}onEnter(t){const r=this.editor.getEditingShape();if(!r)throw Error("Entered editing state without an editing shape");this.hitShapeForPointerUp=null,this.info=t,t.isCreatingTextWhileToolLocked&&this.parent.setCurrentToolIdMask("text"),ad(this.editor),this.editor.select(r)}onExit(){var s;const{editingShapeId:t}=this.editor.getCurrentPageState();if(!t)return;this.editor.setEditingShape(null),ad.cancel();const r=this.editor.getShape(t),i=this.editor.getShapeUtil(r);(s=i.onEditEnd)==null||s.call(i,r),this.info.isCreatingTextWhileToolLocked&&(this.parent.setCurrentToolIdMask(void 0),this.editor.setCurrentTool("text",{}))}onPointerMove(t){if(this.hitShapeForPointerUp&&this.editor.inputs.isDragging){if(this.editor.getIsReadonly()||this.hitShapeForPointerUp.isLocked)return;this.editor.select(this.hitShapeForPointerUp),this.parent.transition("translating",t),this.hitShapeForPointerUp=null;return}switch(t.target){case"shape":case"canvas":{ad(this.editor);return}}}onPointerDown(t){switch(this.hitShapeForPointerUp=null,t.target){case"shape":{const{shape:r}=t,i=this.editor.getEditingShape();if(!i)throw Error("Expected an editing shape!");const s=this.editor.getShapeUtil(r).getGeometry(r),l=TH(s),c=l.length===1?l[0]:void 0,d=this.editor.isShapeOfType(i,"text")&&i.props.text.trim()==="";if(c&&!d){const h=this.editor.getPointInShapeSpace(r,this.editor.inputs.currentPagePoint);if(c.bounds.containsPoint(h,0)&&c.hitTestPoint(h)){if(r.id===i.id)return;this.hitShapeForPointerUp=r,this.editor.markHistoryStoppingPoint("editing on pointer up"),this.editor.select(r.id);return}}else{if(r.id===i.id)this.editor.isShapeOfType(r,"frame")&&(this.editor.setEditingShape(null),this.parent.transition("idle",t));else{this.parent.transition("pointing_shape",t);return}return}break}}this.parent.transition("idle",t),this.editor.root.handleEvent(t)}onPointerUp(t){const r=this.hitShapeForPointerUp;if(!r)return;this.hitShapeForPointerUp=null;const i=this.editor.getShapeUtil(r);if(!r.isLocked){if(this.editor.getIsReadonly()&&!i.canEditInReadOnly(r)){this.parent.transition("pointing_shape",t);return}this.editor.select(r.id),this.editor.setEditingShape(r.id),ad(this.editor)}}onComplete(t){this.parent.transition("idle",t)}onCancel(t){this.parent.transition("idle",t)}}U(IH,"id","editing_shape");function kH(n){const e=n.getOnlySelectedShape();return!!(e&&!n.isShapeOrAncestorLocked(e)&&n.getShapeUtil(e).canCrop(e))}function q1(n,e){const t=n.getSelectedShapeIds(),{currentPagePoint:r}=n.inputs,{shiftKey:i,altKey:s,accelKey:l}=e,c=i||l,d=n.getShapeAtPoint(r,{hitInside:!1,margin:n.options.hitTestMargin/n.getZoomLevel(),hitLabels:!0,renderingOnly:!0,filter:h=>!h.isLocked});if(d){const h=n.getOutermostSelectableShape(d);if(c&&!s)n.cancelDoubleClick(),t.includes(h.id)?(n.markHistoryStoppingPoint("deselecting shape"),n.deselect(h)):(n.markHistoryStoppingPoint("shift selecting shape"),n.setSelectedShapes([...t,h.id]));else{let g;h===d||h.id===n.getFocusedGroupId()||t.includes(h.id)?g=d:g=h,g&&!t.includes(g.id)&&(n.markHistoryStoppingPoint("selecting shape"),n.select(g.id))}}else{if(c)return;{t.length>0&&(n.markHistoryStoppingPoint("selecting none"),n.selectNone());const h=n.getFocusedGroupId();if(ia(h)){const g=n.getShape(h);n.isPointInShape(g,r,{margin:0,hitInside:!0})||n.setFocusedGroup(null)}}}}const Fge=["Delete","Backspace","[","]","Enter"," ","Shift","Tab"];let zge=(oD=class extends Ct{onEnter(){this.parent.setCurrentToolIdMask(void 0),ad(this.editor),this.editor.setCursor({type:"default",rotation:0})}onExit(){ad.cancel()}onPointerMove(){ad(this.editor)}onPointerDown(e){const t=e.ctrlKey&&kH(this.editor);switch(e.target){case"canvas":{const r=bH(this.editor);if(r&&!r.isLocked){this.onPointerDown({...e,shape:r,target:"shape"});return}const i=this.editor.getSelectedShapeIds(),s=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:l}}=this.editor;if((i.length>1||s&&!this.editor.getShapeUtil(s).hideSelectionBoundsBg(s))&&RH(this.editor,l)){this.onPointerDown({...e,target:"selection"});return}this.parent.transition("pointing_canvas",e);break}case"shape":{const{shape:r}=e;if(this.isOverArrowLabelTest(r)){this.parent.transition("pointing_arrow_label",e);break}if(this.editor.isShapeOrAncestorLocked(r)){this.parent.transition("pointing_canvas",e);break}this.parent.transition("pointing_shape",e);break}case"handle":{if(this.editor.getIsReadonly())break;this.editor.inputs.altKey?this.parent.transition("pointing_shape",e):this.parent.transition("pointing_handle",e);break}case"selection":{switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{if(e.accelKey){this.parent.transition("brushing",e);break}this.parent.transition("pointing_rotate_handle",e);break}case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":{if(t)this.parent.transition("crop.pointing_crop_handle",e);else{if(e.accelKey){this.parent.transition("brushing",e);break}this.parent.transition("pointing_resize_handle",e)}break}default:{const r=this.editor.getHoveredShape();if(r&&!this.editor.getSelectedShapeIds().includes(r.id)&&!r.isLocked){this.onPointerDown({...e,shape:r,target:"shape"});return}this.parent.transition("pointing_selection",e)}}break}}}onDoubleClick(e){var t,r,i,s;if(!(this.editor.inputs.shiftKey||e.phase!=="up")&&!(e.ctrlKey||e.shiftKey))switch(e.target){case"canvas":{const l=this.editor.getHoveredShape(),c=l&&!this.editor.isShapeOfType(l,"group")?l:this.editor.getSelectedShapeAtPoint(this.editor.inputs.currentPagePoint)??this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:this.editor.options.hitTestMargin/this.editor.getZoomLevel(),hitInside:!1}),d=this.editor.getFocusedGroupId();if(c){if(this.editor.isShapeOfType(c,"group")){q1(this.editor,e);return}else{const h=this.editor.getShape(c.parentId);if(h&&this.editor.isShapeOfType(h,"group")&&!(d&&h.id===d)){q1(this.editor,e);return}}this.onDoubleClick({...e,shape:c,target:"shape"});return}this.editor.inputs.shiftKey||this.handleDoubleClickOnCanvas(e);break}case"selection":{if(this.editor.getIsReadonly())break;const l=this.editor.getOnlySelectedShape();if(l){const c=this.editor.getShapeUtil(l);if(!this.canInteractWithShapeInReadOnly(l))return;if(e.handle==="right"||e.handle==="left"||e.handle==="top"||e.handle==="bottom"){const d=(t=c.onDoubleClickEdge)==null?void 0:t.call(c,l);if(d){this.editor.markHistoryStoppingPoint("double click edge"),this.editor.updateShapes([d]),Ir(this.editor,[l.id]);return}}if(c.canCrop(l)&&!this.editor.isShapeOrAncestorLocked(l)){this.parent.transition("crop",e);return}this.shouldStartEditingShape(l)&&this.startEditingShape(l,e,!0)}break}case"shape":{const{shape:l}=e,c=this.editor.getShapeUtil(l);if(l.type!=="video"&&l.type!=="embed"&&this.editor.getIsReadonly())break;if(c.onDoubleClick){const d=(r=c.onDoubleClick)==null?void 0:r.call(c,l);if(d){this.editor.updateShapes([d]);return}}if(c.canCrop(l)&&!this.editor.isShapeOrAncestorLocked(l)){this.editor.markHistoryStoppingPoint("select and crop"),this.editor.select((i=e.shape)==null?void 0:i.id),this.parent.transition("crop",e);return}this.shouldStartEditingShape(l)?this.startEditingShape(l,e,!0):this.handleDoubleClickOnCanvas(e);break}case"handle":{if(this.editor.getIsReadonly())break;const{shape:l,handle:c}=e,d=this.editor.getShapeUtil(l),h=(s=d.onDoubleClickHandle)==null?void 0:s.call(d,l,c);h?this.editor.updateShapes([h]):this.shouldStartEditingShape(l)&&this.startEditingShape(l,e,!0)}}}onRightClick(e){switch(e.target){case"canvas":{const t=this.editor.getHoveredShape(),r=t&&!this.editor.isShapeOfType(t,"group")?t:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:this.editor.options.hitTestMargin/this.editor.getZoomLevel(),hitInside:!1,hitLabels:!0,hitLocked:!0,hitFrameInside:!0,renderingOnly:!0});if(r){this.onRightClick({...e,shape:r,target:"shape"});return}const i=this.editor.getSelectedShapeIds(),s=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:l}}=this.editor;if((i.length>1||s&&!this.editor.getShapeUtil(s).hideSelectionBoundsBg(s))&&RH(this.editor,l)){this.onRightClick({...e,target:"selection"});return}this.editor.selectNone();break}case"shape":{const{selectedShapeIds:t}=this.editor.getCurrentPageState(),{shape:r}=e,i=this.editor.getOutermostSelectableShape(r,s=>!t.includes(s.id));!t.includes(i.id)&&!this.editor.findShapeAncestor(i,s=>t.includes(s.id))&&(this.editor.markHistoryStoppingPoint("selecting shape"),this.editor.setSelectedShapes([i.id]));break}}}onCancel(){this.editor.getFocusedGroupId()!==this.editor.getCurrentPageId()&&this.editor.getSelectedShapeIds().length>0?this.editor.popFocusedGroupId():(this.editor.markHistoryStoppingPoint("clearing selection"),this.editor.selectNone())}onKeyDown(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{this.nudgeSelectedShapes(!1);return}}if(Si.editOnType.get()&&!Fge.includes(e.key)&&!e.altKey&&!e.ctrlKey){const t=this.editor.getOnlySelectedShape();if(t&&this.editor.isShapeOfType(t,"note")&&this.shouldStartEditingShape(t)){this.startEditingShape(t,{...e,target:"shape",shape:t},!0);return}}}onKeyRepeat(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{this.nudgeSelectedShapes(!0);break}}}onKeyUp(e){switch(e.code){case"Enter":{const t=this.editor.getSelectedShapes();if(t.every(i=>this.editor.isShapeOfType(i,"group"))){this.editor.setSelectedShapes(t.flatMap(i=>this.editor.getSortedChildIdsForParent(i.id)));return}const r=this.editor.getOnlySelectedShape();if(r&&this.shouldStartEditingShape(r)){this.startEditingShape(r,{...e,target:"shape",shape:r},!0);return}kH(this.editor)&&this.parent.transition("crop",e);break}}}shouldStartEditingShape(e=this.editor.getOnlySelectedShape()){return!e||this.editor.isShapeOrAncestorLocked(e)&&e.type!=="embed"||!this.canInteractWithShapeInReadOnly(e)?!1:this.editor.getShapeUtil(e).canEdit(e)}startEditingShape(e,t,r){this.editor.isShapeOrAncestorLocked(e)&&e.type!=="embed"||(this.editor.markHistoryStoppingPoint("editing shape"),W0(this.editor,e,r),this.parent.transition("editing_shape",t))}isOverArrowLabelTest(e){if(!e)return!1;const t=this.editor.getPointInShapeSpace(e,this.editor.inputs.currentPagePoint);if(this.editor.isShapeOfType(e,"arrow")){const r=this.editor.getShapeGeometry(e).children[1];if(r&&Na(t,r.vertices))return!0}return!1}handleDoubleClickOnCanvas(e){if(this.editor.getIsReadonly()||!this.editor.options.createTextOnCanvasDoubleClick)return;this.editor.markHistoryStoppingPoint("creating text shape");const t=yr(),{x:r,y:i}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:t,type:"text",x:r,y:i,props:{text:"",autoSize:!0}}]);const s=this.editor.getShape(t);if(!s)return;const l=this.editor.getShapeUtil(s);this.editor.getIsReadonly()&&!l.canEditInReadOnly(s)||(this.editor.setEditingShape(t),this.editor.select(t),this.parent.transition("editing_shape",e))}nudgeSelectedShapes(e=!1){const{editor:{inputs:{keys:t}}}=this,r=t.has("ShiftLeft"),i=new R(0,0);if(t.has("ArrowLeft")&&(i.x-=1),t.has("ArrowRight")&&(i.x+=1),t.has("ArrowUp")&&(i.y-=1),t.has("ArrowDown")&&(i.y+=1),i.equals(new R(0,0)))return;e||this.editor.markHistoryStoppingPoint("nudge shapes");const{gridSize:s}=this.editor.getDocumentSettings(),l=this.editor.getInstanceState().isGridMode?r?s*Bge:s:r?Uge:$ge,c=this.editor.getSelectedShapeIds();this.editor.nudgeShapes(c,i.mul(l)),Ir(this.editor,c)}canInteractWithShapeInReadOnly(e){return!!(!this.editor.getIsReadonly()||this.editor.getShapeUtil(e).canEditInReadOnly(e))}},U(oD,"id","idle"),oD);const Uge=10,$ge=1,Bge=5;function RH(n,e){const t=n.getSelectionRotatedPageBounds();if(!t)return!1;const r=n.getSelectionRotation();return r?Na(e,t.corners.map(i=>R.RotWith(i,t.point,r))):t.containsPoint(e)}class MH extends Ct{constructor(){super(...arguments);U(this,"shapeId","");U(this,"markId","");U(this,"wasAlreadySelected",!1);U(this,"didDrag",!1);U(this,"didCtrlOnEnter",!1);U(this,"info",{});U(this,"_labelDragOffset",new R(0,0))}updateCursor(){this.editor.setCursor({type:"grabbing",rotation:0})}onEnter(t){const{shape:r}=t;this.parent.setCurrentToolIdMask(t.onInteractionEnd),this.info=t,this.shapeId=r.id,this.didDrag=!1,this.didCtrlOnEnter=t.accelKey,this.wasAlreadySelected=this.editor.getOnlySelectedShapeId()===r.id,this.updateCursor();const s=this.editor.getShapeGeometry(r).children[1];if(!s)throw Error(`Expected to find an arrow label geometry for shape: ${r.id}`);const{currentPagePoint:l}=this.editor.inputs,c=this.editor.getPointInShapeSpace(r,l);this._labelDragOffset=R.Sub(s.center,c),this.markId=this.editor.markHistoryStoppingPoint("label-drag start"),this.editor.setSelectedShapes([this.shapeId])}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0})}onPointerMove(){const{isDragging:t}=this.editor.inputs;if(!t)return;if(this.didCtrlOnEnter){this.parent.transition("brushing",this.info);return}const r=this.editor.getShape(this.shapeId);if(!r)return;const i=tu(this.editor,r),s=this.editor.getShapeGeometry(r),l=s.children[0],c=this.editor.getPointInShapeSpace(r,this.editor.inputs.currentPagePoint),d=l.nearestPoint(R.Add(c,this._labelDragOffset));let h;if(i.isStraight){const g=R.Dist(i.start.point,i.end.point);h=1-R.Dist(i.end.point,d)/g}else{const{_center:g,measure:y,angleEnd:v,angleStart:w}=s.children[0];h=lk(y,w,v,g.angle(d))}isNaN(h)&&(h=.5),this.didDrag=!0,this.editor.updateShape({id:r.id,type:r.type,props:{labelPosition:h}})}onPointerUp(){const t=this.editor.getShape(this.shapeId);t&&(this.didDrag||!this.wasAlreadySelected?this.complete():this.editor.getIsReadonly()||(this.editor.setEditingShape(t.id),this.editor.setCurrentTool("select.editing_shape")))}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}U(MH,"id","pointing_arrow_label");class AH extends Ct{onEnter(e){e.shiftKey||e.accelKey||this.editor.getSelectedShapeIds().length>0&&(this.editor.markHistoryStoppingPoint("selecting none"),this.editor.selectNone())}onPointerMove(e){this.editor.inputs.isDragging&&this.parent.transition("brushing",e)}onPointerUp(e){q1(this.editor,e),this.complete()}onComplete(){this.complete()}onInterrupt(){this.parent.transition("idle")}complete(){this.parent.transition("idle")}}U(AH,"id","pointing_canvas");class DH extends Ct{constructor(){super(...arguments);U(this,"didCtrlOnEnter",!1);U(this,"info",{})}onEnter(t){this.info=t,this.didCtrlOnEnter=t.accelKey;const{shape:r}=t;if(this.editor.isShapeOfType(r,"arrow")){const i=da(this.editor,r)[t.handle.id];i&&this.editor.setHintingShapes([i.toId])}this.editor.setCursor({type:"grabbing",rotation:0})}onExit(){this.editor.setHintingShapes([]),this.editor.setCursor({type:"default",rotation:0})}onPointerUp(){const{shape:t,handle:r}=this.info;if(this.editor.isShapeOfType(t,"note")){const{editor:i}=this,s=OH(i,t,r,!1);if(s){W0(i,s,!0);return}}this.parent.transition("idle",this.info)}onPointerMove(t){const{editor:r}=this;r.inputs.isDragging&&(this.didCtrlOnEnter?this.parent.transition("brushing",t):this.startDraggingHandle())}onLongPress(){this.startDraggingHandle()}startDraggingHandle(){const{editor:t}=this;if(t.getIsReadonly())return;const{shape:r,handle:i}=this.info;if(t.isShapeOfType(r,"note")){const s=OH(t,r,i,!0);if(s){const l=t.getPointInParentSpace(s,t.inputs.originPagePoint).sub(R.Rot(w1.clone().mul(r.props.scale),s.rotation));t.updateShape({...s,x:l.x,y:l.y}),t.setHoveredShape(s.id).select(s.id).setCurrentTool("select.translating",{...this.info,target:"shape",shape:t.getShape(s),onInteractionEnd:"note",isCreating:!0,onCreate:()=>{W0(t,s,!0)}});return}}this.parent.transition("dragging_handle",this.info)}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.parent.transition("idle")}}U(DH,"id","pointing_handle");function OH(n,e,t,r){const i=n.getShapePageTransform(e.id),s=i.point(),l=i.rotation(),d=x7(n,s,l,e.props.growY,0,e.props.scale)[t.index];if(d)return b7(n,e,d,l,r)}class jH extends Ct{constructor(){super(...arguments);U(this,"info",{})}updateCursor(){this.editor.setCursor({type:um[this.info.handle],rotation:this.editor.getSelectionRotation()})}onEnter(t){this.parent.setCurrentToolIdMask(t.onInteractionEnd),this.info=t,this.updateCursor()}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0})}onPointerMove(){this.editor.inputs.isDragging&&this.startRotating()}onLongPress(){this.startRotating()}startRotating(){this.editor.getIsReadonly()||this.parent.transition("rotating",this.info)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}U(jH,"id","pointing_rotate_handle");class LH extends Ct{constructor(){super(...arguments);U(this,"info",{})}onEnter(t){this.info=t}onPointerUp(t){q1(this.editor,t),this.parent.transition("idle",t)}onPointerMove(t){this.editor.inputs.isDragging&&this.startTranslating(t)}onLongPress(t){this.startTranslating(t)}startTranslating(t){this.editor.getIsReadonly()||this.parent.transition("translating",t)}onDoubleClick(t){var s,l;const r=this.editor.getHoveredShape(),i=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{hitInside:!0,margin:0,renderingOnly:!0});if(i){this.parent.transition("idle"),(l=(s=this.parent).onDoubleClick)==null||l.call(s,{...t,target:"shape",shape:this.editor.getShape(i)});return}}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.parent.transition("idle")}}U(LH,"id","pointing_selection");class NH extends Ct{constructor(){super(...arguments);U(this,"hitShape",{});U(this,"hitShapeForPointerUp",{});U(this,"isDoubleClick",!1);U(this,"didCtrlOnEnter",!1);U(this,"didSelectOnEnter",!1)}onEnter(t){const r=this.editor.getSelectedShapeIds(),i=this.editor.getSelectionRotatedPageBounds(),s=this.editor.getFocusedGroupId(),{inputs:{currentPagePoint:l}}=this.editor,{shiftKey:c,altKey:d,accelKey:h}=t;this.hitShape=t.shape,this.isDoubleClick=!1,this.didCtrlOnEnter=h;const g=this.editor.getOutermostSelectableShape(t.shape),y=this.editor.findShapeAncestor(g,v=>r.includes(v.id));if(this.didCtrlOnEnter||this.editor.getShapeUtil(t.shape).onClick||g.id===s||r.includes(g.id)||y||r.length>1&&(i!=null&&i.containsPoint(l))){this.didSelectOnEnter=!1,this.hitShapeForPointerUp=g;return}this.didSelectOnEnter=!0,c&&!d?(this.editor.cancelDoubleClick(),r.includes(g.id)||(this.editor.markHistoryStoppingPoint("shift selecting shape"),this.editor.setSelectedShapes([...r,g.id]))):(this.editor.markHistoryStoppingPoint("selecting shape"),this.editor.setSelectedShapes([g.id]))}onPointerUp(t){var g;const r=this.editor.getSelectedShapeIds(),i=this.editor.getFocusedGroupId(),s=this.editor.getZoomLevel(),{inputs:{currentPagePoint:l}}=this.editor,c=t.shiftKey||t.accelKey,d=this.editor.getShapeAtPoint(l,{margin:this.editor.options.hitTestMargin/s,hitInside:!0,renderingOnly:!0})??this.hitShape,h=d?this.editor.getOutermostSelectableShape(d):this.hitShapeForPointerUp;if(h){const y=this.editor.getShapeUtil(h);if(y.onClick){const v=(g=y.onClick)==null?void 0:g.call(y,h);if(v){this.editor.markHistoryStoppingPoint("shape on click"),this.editor.updateShapes([v]),this.parent.transition("idle",t);return}}if(h.id===i){r.length>0?(this.editor.markHistoryStoppingPoint("clearing shape ids"),this.editor.setSelectedShapes([])):this.editor.popFocusedGroupId(),this.parent.transition("idle",t);return}}if(!this.didSelectOnEnter){const y=this.editor.getOutermostSelectableShape(d,v=>!r.includes(v.id));if(r.includes(y.id))if(c)this.editor.markHistoryStoppingPoint("deselecting on pointer up"),this.editor.deselect(h);else if(r.includes(h.id)){if(r.length===1){const v=this.editor.getShapeUtil(h).getGeometry(h),w=TH(v),C=w.length===1?w[0]:void 0;if(C){const E=this.editor.getPointInShapeSpace(h,l);if(C.bounds.containsPoint(E,0)&&C.hitTestPoint(E)){this.editor.run(()=>{this.editor.markHistoryStoppingPoint("editing on pointer up"),this.editor.select(h.id);const P=this.editor.getShapeUtil(h);this.editor.getIsReadonly()&&!P.canEditInReadOnly(h)||(this.editor.setEditingShape(h.id),this.editor.setCurrentTool("select.editing_shape"),this.isDoubleClick&&this.editor.emit("select-all-text",{shapeId:h.id}))});return}}}this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.select(h.id)}else this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.select(h);else if(c){const v=this.editor.getShapeAncestors(y);this.editor.markHistoryStoppingPoint("shift deselecting on pointer up"),this.editor.setSelectedShapes([...this.editor.getSelectedShapeIds().filter(w=>!v.find(C=>C.id===w)),y.id])}else this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.setSelectedShapes([y.id])}this.parent.transition("idle",t)}onDoubleClick(){this.isDoubleClick=!0}onPointerMove(t){this.editor.inputs.isDragging&&(this.didCtrlOnEnter?this.parent.transition("brushing",t):this.startTranslating(t))}onLongPress(t){this.startTranslating(t)}startTranslating(t){this.editor.getIsReadonly()||(this.editor.focus(),this.parent.transition("translating",t))}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.parent.transition("idle")}}U(NH,"id","pointing_shape");class FH extends Ct{constructor(){super(...arguments);U(this,"info",{});U(this,"markId","");U(this,"didHoldCommand",!1);U(this,"creationCursorOffset",{x:0,y:0});U(this,"snapshot",{})}onEnter(t){const{isCreating:r=!1,creatingMarkId:i,creationCursorOffset:s={x:0,y:0}}=t;if(this.info=t,this.didHoldCommand=!1,this.parent.setCurrentToolIdMask(t.onInteractionEnd),this.creationCursorOffset=s,this.snapshot=this._createSnapshot(),this.markId="",r)if(i)this.markId=i;else{const l=this.editor.getMarkIdMatching(`creating:${this.editor.getOnlySelectedShapeId()}`);l&&(this.markId=l)}else this.markId=this.editor.markHistoryStoppingPoint("starting resizing");r&&this.editor.setCursor({type:"cross",rotation:0}),this.handleResizeStart(),this.updateShapes()}onTick({elapsed:t}){const{editor:r}=this;r.edgeScrollManager.updateEdgeScrolling(t)}onPointerMove(){this.updateShapes()}onKeyDown(){this.updateShapes()}onKeyUp(){this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}complete(){var t,r;if(Ir(this.editor,this.snapshot.selectedShapeIds),this.handleResizeEnd(),this.info.isCreating&&this.info.onCreate){(r=(t=this.info).onCreate)==null||r.call(t,this.editor.getOnlySelectedShape());return}if(this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd){this.editor.setCurrentTool(this.info.onInteractionEnd,{});return}this.parent.transition("idle")}handleResizeStart(){const{shapeSnapshots:t}=this.snapshot,r=[];t.forEach(({shape:i})=>{var c;const s=this.editor.getShapeUtil(i),l=(c=s.onResizeStart)==null?void 0:c.call(s,i);l&&r.push(l)}),r.length>0&&this.editor.updateShapes(r)}handleResizeEnd(){const{shapeSnapshots:t}=this.snapshot,r=[];t.forEach(({shape:i})=>{var d;const s=this.editor.getShape(i.id),l=this.editor.getShapeUtil(i),c=(d=l.onResizeEnd)==null?void 0:d.call(l,i,s);c&&r.push(c)}),r.length>0&&this.editor.updateShapes(r)}updateShapes(){const{altKey:t,shiftKey:r}=this.editor.inputs,{frames:i,shapeSnapshots:s,selectionBounds:l,cursorHandleOffset:c,selectedShapeIds:d,selectionRotation:h,canShapesDeform:g}=this.snapshot;let y=r||!g;if(s.size===1){const V=[...s.values()][0];this.editor.isShapeOfType(V.shape,"text")&&(y=!(this.info.handle==="left"||this.info.handle==="right"))}const{ctrlKey:v}=this.editor.inputs,w=this.editor.inputs.currentPagePoint.clone().sub(c).sub(this.creationCursorOffset),C=this.editor.inputs.originPagePoint.clone().sub(c);if(this.editor.getInstanceState().isGridMode&&!v){const{gridSize:V}=this.editor.getDocumentSettings();w.snapToGrid(V)}const E=this.info.handle,P=zH(E,Math.PI);if(this.editor.snaps.clearIndicators(),(this.editor.user.getIsSnapMode()?!v:v)&&h%Pr===0){const{nudge:V}=this.editor.snaps.shapeBounds.snapResizeShapes({dragDelta:R.Sub(w,C),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:zH(E,h),isAspectRatioLocked:y,isResizingFromCenter:t});w.add(V)}const k=R.RotWith(t?l.center:l.getHandlePoint(P),l.point,h),L=R.Sub(w,k).rot(-h),O=R.Sub(C,k).rot(-h),z=R.DivV(L,O);Number.isFinite(z.x)||(z.x=1),Number.isFinite(z.y)||(z.y=1);const F=E==="top"||E==="bottom",H=E==="left"||E==="right";y?H?z.y=Math.abs(z.x):F?z.x=Math.abs(z.y):Math.abs(z.x)>Math.abs(z.y)?z.y=Math.abs(z.x)*(z.y<0?-1:1):z.x=Math.abs(z.y)*(z.x<0?-1:1):(F&&(z.x=1),H&&(z.y=1)),this.info.isCreating||this.updateCursor({dragHandle:E,isFlippedX:z.x<0,isFlippedY:z.y<0,rotation:h});for(const V of s.keys()){const re=s.get(V);this.editor.resizeShape(V,z,{initialShape:re.shape,initialBounds:re.bounds,initialPageTransform:re.pageTransform,dragHandle:E,mode:d.length===1&&V===d[0]?"resize_bounds":"scale_shape",scaleOrigin:k,isAspectRatioLocked:y,scaleAxisRotation:h,skipStartAndEndCallbacks:!0})}if(this.editor.inputs.ctrlKey){this.didHoldCommand=!0;for(const{id:V,children:re}of i){if(!re.length)continue;const q=s.get(V).shape,J=this.editor.getShape(V);if(!(q&&J))continue;const ie=J.x-q.x,W=J.y-q.y,Y=new R(ie,W).rot(-q.rotation);if(Y.x!==0||Y.y!==0)for(const oe of re)this.editor.updateShape({id:oe.id,type:oe.type,x:oe.x-Y.x,y:oe.y-Y.y})}}else if(this.didHoldCommand){this.didHoldCommand=!1;for(const{children:V}of i)if(V.length)for(const re of V)this.editor.updateShape({id:re.id,type:re.type,x:re.x,y:re.y})}}updateCursor({dragHandle:t,isFlippedX:r,isFlippedY:i,rotation:s}){const l={...this.editor.getInstanceState().cursor};switch(t){case"top_left":case"bottom_right":{l.type="nwse-resize",r!==i&&(l.type="nesw-resize");break}case"top_right":case"bottom_left":{l.type="nesw-resize",r!==i&&(l.type="nwse-resize");break}}l.rotation=s,this.editor.setCursor(l)}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0}),this.editor.snaps.clearIndicators()}_createSnapshot(){const t=this.editor.getSelectedShapeIds(),r=this.editor.getSelectionRotation(),{inputs:{originPagePoint:i}}=this.editor,s=this.editor.getSelectionRotatedPageBounds(),l=R.RotWith(s.getHandlePoint(this.info.handle),s.point,r),c=R.Sub(i,l),d=new Map,h=[];t.forEach(y=>{const v=this.editor.getShape(y);if(v){if(v.type==="frame"&&h.push({id:y,children:on(this.editor.getSortedChildIdsForParent(v).map(w=>this.editor.getShape(w)))}),d.set(v.id,this._createShapeSnapshot(v)),this.editor.isShapeOfType(v,"frame")&&t.length===1)return;this.editor.visitDescendants(v.id,w=>{const C=this.editor.getShape(w);if(C&&(d.set(C.id,this._createShapeSnapshot(C)),this.editor.isShapeOfType(C,"frame")))return!1})}});const g=![...d.values()].some(y=>!J5(y.pageRotation,r)||y.isAspectRatioLocked);return{shapeSnapshots:d,selectionBounds:s,cursorHandleOffset:c,selectionRotation:r,selectedShapeIds:t,canShapesDeform:g,initialSelectionPageBounds:this.editor.getSelectionPageBounds(),frames:h}}_createShapeSnapshot(t){const r=this.editor.getShapePageTransform(t),i=this.editor.getShapeUtil(t);return{shape:t,bounds:this.editor.getShapeGeometry(t).bounds,pageTransform:r,pageRotation:qe.Decompose(r).rotation,isAspectRatioLocked:i.isAspectRatioLocked(t)}}}U(FH,"id","resizing");const hA=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function zH(n,e){e=e%sr;const t=Math.round(e/(qn/4)),r=hA.indexOf(n);return hA[(r+t)%hA.length]}const UH=Math.PI/180;class $H extends Ct{constructor(){super(...arguments);U(this,"snapshot",{});U(this,"info",{});U(this,"markId","")}onEnter(t){this.info=t,this.parent.setCurrentToolIdMask(t.onInteractionEnd),this.markId=this.editor.markHistoryStoppingPoint("rotate start");const r=$4({editor:this.editor,ids:this.editor.getSelectedShapeIds()});if(!r)return this.parent.transition("idle",this.info);this.snapshot=r;const i=this._getRotationFromPointerPosition({snapToNearestDegree:!1});o0({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.setCursor({type:um[this.info.handle],rotation:i+this.snapshot.initialShapesRotation})}onExit(){this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0),this.snapshot={}}onPointerMove(){this.update()}onKeyDown(){this.update()}onKeyUp(){this.update()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}update(){const t=this._getRotationFromPointerPosition({snapToNearestDegree:!1});o0({editor:this.editor,delta:t,snapshot:this.snapshot,stage:"update"}),this.editor.setCursor({type:um[this.info.handle],rotation:t+this.snapshot.initialShapesRotation})}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)}complete(){o0({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),Ir(this.editor,this.snapshot.shapeSnapshots.map(t=>t.shape.id)),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)}_getRotationFromPointerPosition({snapToNearestDegree:t}){const r=this.editor.getSelectionRotation(),i=this.editor.getSelectionRotatedPageBounds(),{inputs:{shiftKey:s,currentPagePoint:l}}=this.editor,{initialCursorAngle:c,initialShapesRotation:d}=this.snapshot;if(!i)return d;const g=i.center.clone().rotWith(i.point,r).angle(l)-c;let y=d+g;if(s)y=zb(y,24);else if(t&&(y=Math.round(y/UH)*UH,this.editor.getInstanceState().isCoarsePointer)){const v=zb(y,4),w=Fb(y,v);Math.abs(w)<dee(5)&&(y=v)}return y-d}}U($H,"id","rotating");class BH extends Ct{constructor(){super(...arguments);U(this,"hits",new Set);U(this,"size",0);U(this,"scribbleId","id");U(this,"initialSelectedShapeIds",new Set);U(this,"newlySelectedShapeIds",new Set)}onEnter(){this.initialSelectedShapeIds=new Set(this.editor.inputs.shiftKey?this.editor.getSelectedShapeIds():[]),this.newlySelectedShapeIds=new Set,this.size=0,this.hits.clear();const t=this.editor.scribbles.addScribble({color:"selection-stroke",opacity:.32,size:12});this.scribbleId=t.id,this.updateScribbleSelection(!0),this.editor.updateInstanceState({brush:null})}onExit(){this.editor.scribbles.stop(this.scribbleId)}onPointerMove(){this.updateScribbleSelection(!0)}onPointerUp(){this.complete()}onKeyDown(){this.updateScribbleSelection(!1)}onKeyUp(){this.editor.inputs.altKey?this.updateScribbleSelection(!1):this.parent.transition("brushing")}onCancel(){this.cancel()}onComplete(){this.complete()}pushPointToScribble(){const{x:t,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,t,r)}updateScribbleSelection(t){const{editor:r}=this,i=this.editor.getCurrentPageRenderingShapesSorted(),{inputs:{shiftKey:s,originPagePoint:l,previousPagePoint:c,currentPagePoint:d}}=this.editor,{newlySelectedShapeIds:h,initialSelectedShapeIds:g}=this;t&&this.pushPointToScribble();const y=i;let v,w,C,E;const P=0;for(let L=0,O=y.length;L<O;L++){if(v=y[L],r.isShapeOfType(v,"group")||h.has(v.id)||r.isShapeOrAncestorLocked(v)||(w=r.getShapeGeometry(v),r.isShapeOfType(v,"frame")&&w.bounds.containsPoint(r.getPointInShapeSpace(v,l))))continue;const z=r.getShapePageTransform(v);if(!w||!z)continue;const F=z.clone().invert();C=F.applyToPoint(c),E=F.applyToPoint(d);const{bounds:H}=w;if(!(H.minX-P>Math.max(C.x,E.x)||H.minY-P>Math.max(C.y,E.y)||H.maxX+P<Math.min(C.x,E.x)||H.maxY+P<Math.min(C.y,E.y))&&w.hitTestLineSegment(C,E,P)){const V=this.editor.getOutermostSelectableShape(v),re=this.editor.getShapeMask(V.id);if(re&&Dk(c,d,re)!==null&&!Na(d,re))continue;h.add(V.id)}}const I=r.getSelectedShapeIds(),k=new Set(s?[...h,...g]:[...h]);(I.length!==k.size||I.some(L=>!k.has(L)))&&this.editor.setSelectedShapes(Array.from(k))}complete(){this.updateScribbleSelection(!0),this.parent.transition("idle")}cancel(){this.editor.setSelectedShapes([...this.initialSelectedShapeIds]),this.parent.transition("idle")}}U(BH,"id","scribble_brushing");var Hge=Object.create,HH=Object.defineProperty,Vge=Object.getOwnPropertyDescriptor,Kge=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),VH=n=>{throw TypeError(n)},KH=(n,e,t)=>e in n?HH(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wge=n=>[,,,Hge(null)],WH=["class","method","getter","setter","accessor","field","value","get","set"],GH=n=>n!==void 0&&typeof n!="function"?VH("Function expected"):n,Gge=(n,e,t,r,i)=>({kind:WH[n],name:e,metadata:r,addInitializer:s=>t._?VH("Already initialized"):i.push(GH(s||null))}),qge=(n,e)=>KH(e,Kge("metadata"),n[3]),Yge=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},Xge=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=WH[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,Vge(i,t)),I=r.length-1;I>=0;I--)d=Gge(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,GH(l)&&(P[C]=l);return P&&HH(i,t,P),i},pA=(n,e,t)=>KH(n,typeof e!="symbol"?e+"":e,t),qH,Y1;const Zge=20,Qge=100;qH=[ea];class gA{constructor(e){this.editor=e,Yge(Y1,5,this),pA(this,"prevDroppingShapeId",null),pA(this,"droppingNodeTimer",null),pA(this,"first",!0),e.disposables.add(this.dispose)}updateDroppingNode(e,t){var r;this.first&&(this.editor.setHintingShapes(e.map(i=>this.editor.findShapeAncestor(i,s=>s.type!=="group")).filter(i=>i)),this.prevDroppingShapeId=((r=this.editor.getDroppingOverShape(this.editor.inputs.originPagePoint,e))==null?void 0:r.id)??null,this.first=!1),this.droppingNodeTimer===null?this.setDragTimer(e,Zge,t):this.editor.inputs.pointerVelocity.len()>.5&&(clearTimeout(this.droppingNodeTimer),this.setDragTimer(e,Qge,t))}setDragTimer(e,t,r){this.droppingNodeTimer=this.editor.timers.setTimeout(()=>{this.editor.run(()=>{this.handleDrag(this.editor.inputs.currentPagePoint,e,r)}),this.droppingNodeTimer=null},t)}handleDrag(e,t,r){var d,h,g,y,v;t=on(t.map(w=>this.editor.getShape(w.id)));const i=((d=this.editor.getDroppingOverShape(e,t))==null?void 0:d.id)??null;if(i===this.prevDroppingShapeId){this.hintParents(t);return}const{prevDroppingShapeId:s}=this,l=s&&this.editor.getShape(s),c=i&&this.editor.getShape(i);l&&((g=(h=this.editor.getShapeUtil(l)).onDragShapesOut)==null||g.call(h,l,t)),c&&((v=(y=this.editor.getShapeUtil(c)).onDragShapesOver)==null||v.call(y,c,t)),this.hintParents(t),r==null||r(),this.prevDroppingShapeId=i}hintParents(e){const t=new Map;for(const i of e){const s=this.editor.findShapeAncestor(i,l=>l.type!=="group");s&&(t.has(s.id)||t.set(s.id,[]),t.get(s.id).push(i.id))}const r=[];for(const[i,s]of t){const l=this.editor.getShape(i);l&&JB(this.editor,l).length<s.length&&r.push(l.id)}this.editor.setHintingShapes(r)}dropShapes(e){var r,i;const{prevDroppingShapeId:t}=this;if(this.handleDrag(this.editor.inputs.currentPagePoint,e),t){const s=this.editor.getShape(t);if(!s)return;(i=(r=this.editor.getShapeUtil(s)).onDropShapesOver)==null||i.call(r,s,e)}}clear(){this.prevDroppingShapeId=null,this.droppingNodeTimer!==null&&clearTimeout(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingShapes([]),this.first=!0}dispose(){this.clear()}}Y1=Wge(),Xge(Y1,1,"dispose",qH,gA),qge(Y1,gA);var Jge=Object.create,YH=Object.defineProperty,eme=Object.getOwnPropertyDescriptor,XH=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),ZH=n=>{throw TypeError(n)},QH=(n,e,t)=>e in n?YH(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tme=n=>[,,,Jge((n==null?void 0:n[XH("metadata")])??null)],JH=["class","method","getter","setter","accessor","field","value","get","set"],eV=n=>n!==void 0&&typeof n!="function"?ZH("Function expected"):n,nme=(n,e,t,r,i)=>({kind:JH[n],name:e,metadata:r,addInitializer:s=>t._?ZH("Already initialized"):i.push(eV(s||null))}),rme=(n,e)=>QH(e,XH("metadata"),n[3]),ime=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},ome=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=JH[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,eme(i,t)),I=r.length-1;I>=0;I--)d=nme(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,eV(l)&&(P[C]=l);return P&&YH(i,t,P),i},Af=(n,e,t)=>QH(n,typeof e!="symbol"?e+"":e,t),tV,mA,X1;class Z1 extends(mA=Ct,tV=[ea],mA){constructor(){super(...arguments),ime(X1,5,this),Af(this,"info",{}),Af(this,"selectionSnapshot",{}),Af(this,"snapshot",{}),Af(this,"markId",""),Af(this,"isCloning",!1),Af(this,"isCreating",!1),Af(this,"dragAndDropManager",new gA(this.editor))}onCreate(e){}onEnter(e){var s;const{isCreating:t=!1,creatingMarkId:r,onCreate:i=()=>{}}=e;if(!((s=this.editor.getSelectedShapeIds())!=null&&s.length)){this.parent.transition("idle");return}if(this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.isCreating=t,this.markId="",t)if(r)this.markId=r;else{const l=this.editor.getMarkIdMatching(`creating:${this.editor.getOnlySelectedShapeId()}`);l&&(this.markId=l)}else this.markId=this.editor.markHistoryStoppingPoint("translating");if(this.onCreate=i,this.isCloning=!1,this.info=e,this.editor.setCursor({type:"move",rotation:0}),this.selectionSnapshot=nV(this.editor),!this.isCreating&&this.editor.inputs.altKey){this.startCloning();return}this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()}onExit(){this.parent.setCurrentToolIdMask(void 0),this.selectionSnapshot={},this.snapshot={},this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0}),this.dragAndDropManager.clear()}onTick({elapsed:e}){const{editor:t}=this;this.dragAndDropManager.updateDroppingNode(this.snapshot.movingShapes,this.updateParentTransforms),t.edgeScrollManager.updateEdgeScrolling(e)}onPointerMove(){this.updateShapes()}onKeyDown(){if(this.editor.inputs.altKey&&!this.isCloning){this.startCloning();return}this.updateShapes()}onKeyUp(){if(!this.editor.inputs.altKey&&this.isCloning){this.stopCloning();return}this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}startCloning(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId=this.editor.markHistoryStoppingPoint("translate cloning"),this.editor.duplicateShapes(Array.from(this.editor.getSelectedShapeIds())),this.snapshot=nV(this.editor),this.handleStart(),this.updateShapes())}stopCloning(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId=this.editor.markHistoryStoppingPoint("translate"),this.updateShapes()}reset(){this.editor.bailToMark(this.markId)}complete(){var e;this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),Ir(this.editor,this.snapshot.movingShapes.map(t=>t.id)),this.handleEnd(),this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.isCreating?(e=this.onCreate)==null||e.call(this,this.editor.getOnlySelectedShape()):this.parent.transition("idle")}cancel(){this.reset(),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}handleStart(){const{movingShapes:e}=this.snapshot,t=[];e.forEach(r=>{var l;const i=this.editor.getShapeUtil(r),s=(l=i.onTranslateStart)==null?void 0:l.call(i,r);s&&t.push(s)}),t.length>0&&this.editor.updateShapes(t),this.editor.setHoveredShape(null)}handleEnd(){const{movingShapes:e}=this.snapshot;if(this.isCloning&&e.length>0){const r=R.Average(e.map(s=>this.editor.getShapePageTransform(s.id).point())),i=R.Sub(r,this.selectionSnapshot.averagePagePoint);R.IsNaN(i)||this.editor.updateInstanceState({duplicateProps:{shapeIds:e.map(s=>s.id),offset:{x:i.x,y:i.y}}})}const t=[];e.forEach(r=>{var c;const i=this.editor.getShape(r.id),s=this.editor.getShapeUtil(r),l=(c=s.onTranslateEnd)==null?void 0:c.call(s,r,i);l&&t.push(l)}),t.length>0&&this.editor.updateShapes(t)}updateShapes(){const{snapshot:e}=this;this.dragAndDropManager.updateDroppingNode(e.movingShapes,this.updateParentTransforms),sme({editor:this.editor,snapshot:e});const{movingShapes:t}=e,r=[];t.forEach(i=>{var d;const s=this.editor.getShape(i.id),l=this.editor.getShapeUtil(i),c=(d=l.onTranslate)==null?void 0:d.call(l,i,s);c&&r.push(c)}),r.length>0&&this.editor.updateShapes(r)}updateParentTransforms(){const{editor:e,snapshot:{shapeSnapshots:t}}=this;t.forEach(r=>{const i=e.getShape(r.shape.id);if(!i)return null;const s=oa(i.parentId)?null:qe.Inverse(e.getShapePageTransform(i.parentId));r.parentTransform=s})}}X1=tme(mA),ome(X1,1,"updateParentTransforms",tV,Z1),rme(X1,Z1),Af(Z1,"id","translating");function nV(n){var y;const e=[],t=[],r=n.getSelectedShapeIds(),i=on(r.map(v=>{const w=n.getShape(v);if(!w)return null;e.push(w);const C=n.getShapePageTransform(v),E=C.point(),P=C.rotation();t.push(E);const I=La.isId(w.parentId)?null:qe.Inverse(n.getShapePageTransform(w.parentId));return{shape:w,pagePoint:E,pageRotation:P,parentTransform:I}})),s=n.getOnlySelectedShape();let l=[];if(s)l=n.snaps.shapeBounds.getSnapPoints(s.id);else{const v=n.getSelectionPageBounds();v&&(l=v.cornersAndCenter.map((w,C)=>({id:"selection:"+C,x:w.x,y:w.y})))}let c,d;const{originPagePoint:h}=n.inputs,g=i.filter(v=>n.isShapeOfType(v.shape,"note")&&n.isPointInShape(v.shape,h));if(g.length!==0)if(g.length===1)d=g[0];else{const v=n.getCurrentPageShapesSorted();d=(y=g.map(w=>({snapshot:w,index:v.findIndex(C=>C.id===w.shape.id)})).sort((w,C)=>C.index-w.index)[0])==null?void 0:y.snapshot}return d&&(c=w7(n,d.pageRotation,d.shape.props.scale,d.shape.props.growY??0)),{averagePagePoint:R.Average(t),movingShapes:e,shapeSnapshots:i,initialPageBounds:n.getSelectionPageBounds(),initialSnapPoints:l,noteAdjacentPositions:c,noteSnapshot:d}}function sme({editor:n,snapshot:e}){const{inputs:t}=n,{noteSnapshot:r,noteAdjacentPositions:i,initialPageBounds:s,initialSnapPoints:l,shapeSnapshots:c,averagePagePoint:d}=e,h=n.getInstanceState().isGridMode,g=n.getDocumentSettings().gridSize,y=R.Sub(t.currentPagePoint,t.originPagePoint),v=n.inputs.shiftKey?Math.abs(y.x)<Math.abs(y.y)?"x":"y":null;v==="x"?y.x=0:v==="y"&&(y.y=0),n.snaps.clearIndicators();const w=n.user.getIsSnapMode()?!t.ctrlKey:t.ctrlKey;let C=!1;if(w&&n.inputs.pointerVelocity.len()<.5){const{nudge:k}=n.snaps.shapeBounds.snapTranslateShapes({dragDelta:y,initialSelectionPageBounds:s,lockedAxis:v,initialSelectionSnapPoints:l});y.add(k)}else if(r&&i){const{scale:k}=r.shape.props,L=r.pagePoint.clone().add(y).add(w1.clone().mul(k).rot(r.pageRotation));let O=S7/n.getZoomLevel(),z=new R(0,0);for(const F of i){const H=R.Sub(L,F),V=H.len();V<O&&(C=!0,O=V,z=H)}y.sub(z)}const E=R.Add(d,y),P=n.snaps.getIndicators();h&&!t.ctrlKey&&!C&&P.length===0&&E.snapToGrid(g);const I=R.Sub(E,d);n.updateShapes(on(c.map(({shape:k,pagePoint:L,parentTransform:O})=>{const z=R.Add(L,I),F=O?qe.applyToPoint(O,z):z;return{id:k.id,type:k.type,x:F.x,y:F.y}})))}var ame={};class Q1 extends Ct{constructor(){super(...arguments);U(this,"reactor")}static children(){return[fA,uA,zge,AH,NH,Z1,xH,BH,dA,LH,wH,IH,FH,$H,jH,MH,DH,PH]}cleanUpDuplicateProps(){const t=this.editor.getSelectedShapeIds(),r=this.editor.getInstanceState();if(!r.duplicateProps)return;const i=new Set(r.duplicateProps.shapeIds);t.length===i.size&&t.every(s=>i.has(s))||this.editor.updateInstanceState({duplicateProps:null})}onEnter(){this.reactor=Kl("clean duplicate props",()=>{try{this.cleanUpDuplicateProps()}catch(t){typeof process<"u"&&ame.NODE_ENV==="test"||console.error(t)}})}onExit(){var t;(t=this.reactor)==null||t.call(this),this.editor.getCurrentPageState().editingShapeId&&this.editor.setEditingShape(null)}}U(Q1,"id","select"),U(Q1,"initial","idle"),U(Q1,"isLockable",!1);class rV extends Ct{constructor(){super(...arguments);U(this,"info",{})}onEnter(t){this.info=t}onPointerDown(){this.parent.transition("pointing",this.info)}}U(rV,"id","idle");class iV extends Ct{constructor(){super(...arguments);U(this,"info",{})}onEnter(t){this.info=t}onPointerUp(){this.complete()}onPointerMove(){this.editor.inputs.isDragging&&this.parent.transition("zoom_brushing",this.info)}onCancel(){this.cancel()}complete(){const{currentScreenPoint:t}=this.editor.inputs;this.editor.inputs.altKey?this.editor.zoomOut(t,{animation:{duration:220}}):this.editor.zoomIn(t,{animation:{duration:220}}),this.parent.transition("idle",this.info)}cancel(){this.parent.transition("idle",this.info)}}U(iV,"id","pointing");class oV extends Ct{constructor(){super(...arguments);U(this,"info",{});U(this,"zoomBrush",new Xe)}onEnter(t){this.info=t,this.update()}onExit(){this.editor.updateInstanceState({zoomBrush:null})}onPointerMove(){this.update()}onPointerUp(){this.complete()}onCancel(){this.cancel()}update(){const{inputs:{originPagePoint:t,currentPagePoint:r}}=this.editor;this.zoomBrush.setTo(Xe.FromPoints([t,r])),this.editor.updateInstanceState({zoomBrush:this.zoomBrush.toJson()})}cancel(){this.parent.transition("idle",this.info)}complete(){const{zoomBrush:t}=this,r=8/this.editor.getZoomLevel();if(t.width<r&&t.height<r){const i=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(i,{animation:{duration:220}}):this.editor.zoomIn(i,{animation:{duration:220}})}else{const i=this.editor.inputs.altKey?this.editor.getZoomLevel()/2:void 0;this.editor.zoomToBounds(t,{targetZoom:i,animation:{duration:220}})}this.parent.transition("idle",this.info)}}U(oV,"id","zoom_brushing");class J1 extends Ct{constructor(){super(...arguments);U(this,"info",{})}static children(){return[rV,oV,iV]}onEnter(t){this.info=t,this.parent.setCurrentToolIdMask(t.onInteractionEnd),this.updateCursor()}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({zoomBrush:null,cursor:{type:"default",rotation:0}}),this.parent.setCurrentToolIdMask(void 0)}onKeyDown(){this.updateCursor()}onKeyUp(t){this.updateCursor(),t.code==="KeyZ"&&this.complete()}onInterrupt(){this.complete()}complete(){this.info.onInteractionEnd&&this.info.onInteractionEnd!=="select"?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("select")}updateCursor(){this.editor.inputs.altKey?this.editor.setCursor({type:"zoom-out",rotation:0}):this.editor.setCursor({type:"zoom-in",rotation:0})}}U(J1,"id","zoom"),U(J1,"initial","idle"),U(J1,"isLockable",!1);const lme=[K1,W1,G1,J1,Q1];function cme(){const n=xe(),e=Pe("follow",()=>n.getInstanceState().followingUserId,[n]);return e?m.jsx(ume,{userId:e}):null}function ume({userId:n}){const e=Wb(n);return e?m.jsx("div",{className:"tlui-following-indicator",style:{borderColor:e.color}}):null}let yA={fonts:{draw:`${xf()}/fonts/Shantell_Sans-Tldrawish.woff2`,serif:`${xf()}/fonts/IBMPlexSerif-Medium.woff2`,sansSerif:`${xf()}/fonts/IBMPlexSans-Medium.woff2`,monospace:`${xf()}/fonts/IBMPlexMono-Medium.woff2`}};function sV(n){return M.useMemo(()=>n?{fonts:{...yA.fonts,...n==null?void 0:n.fonts}}:yA,[n])}let TS={...yA,icons:Object.fromEntries(["align-bottom","align-center-horizontal","align-center-vertical","align-left","align-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","blob","bring-forward","bring-to-front","broken","check-circle","check","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","color","cross-2","cross-circle","dash-dashed","dash-dotted","dash-draw","dash-solid","disconnected","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","fill-fill","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-cloud","geo-diamond","geo-ellipse","geo-heart","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","horizontal-align-end","horizontal-align-middle","horizontal-align-start","info-circle","leading","link","lock","menu","minus","mixed","pack","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","send-backward","send-to-back","share-1","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","status-offline","stretch-horizontal","stretch-vertical","text-align-center","text-align-left","text-align-right","toggle-off","toggle-on","tool-arrow","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-screenshot","tool-text","trash","twitter","undo","ungroup","unlock","vertical-align-end","vertical-align-middle","vertical-align-start","warning-triangle","zoom-in","zoom-out"].map(n=>[n,`${xf()}/icons/icon/0_merged.svg#${n}`])),translations:Object.fromEntries(Tv.map(n=>[n.locale,`${xf()}/translations/${n.locale}.json`])),embedIcons:Object.fromEntries(uM.map(n=>[n.type,`${xf()}/embed-icons/${n.type}.png`]))};function dme(n){return n?{fonts:Object.assign({...TS.fonts},{...n==null?void 0:n.fonts}),icons:Object.assign({...TS.icons},{...n==null?void 0:n.icons}),embedIcons:Object.assign({...TS.embedIcons},{...n==null?void 0:n.embedIcons}),translations:Object.assign({...TS.translations},{...n==null?void 0:n.translations})}:TS}var vA="Popover",[aV,gEe]=Gc(vA,[k0]),IS=k0(),[fme,Df]=aV(vA),lV=n=>{const{__scopePopover:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:l=!1}=n,c=IS(e),d=M.useRef(null),[h,g]=M.useState(!1),[y=!1,v]=kf({prop:r,defaultProp:i,onChange:s});return m.jsx(AR,{...c,children:m.jsx(fme,{scope:e,contentId:ed(),triggerRef:d,open:y,onOpenChange:v,onOpenToggle:M.useCallback(()=>v(w=>!w),[v]),hasCustomAnchor:h,onCustomAnchorAdd:M.useCallback(()=>g(!0),[]),onCustomAnchorRemove:M.useCallback(()=>g(!1),[]),modal:l,children:t})})};lV.displayName=vA;var cV="PopoverAnchor",hme=M.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,i=Df(cV,t),s=IS(t),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=i;return M.useEffect(()=>(l(),()=>c()),[l,c]),m.jsx(DR,{...s,...r,ref:e})});hme.displayName=cV;var uV="PopoverTrigger",dV=M.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,i=Df(uV,t),s=IS(t),l=Tr(e,i.triggerRef),c=m.jsx(Vn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":mV(i.open),...r,ref:l,onClick:bt(n.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:m.jsx(DR,{asChild:!0,...s,children:c})});dV.displayName=uV;var SA="PopoverPortal",[pme,gme]=aV(SA,{forceMount:void 0}),fV=n=>{const{__scopePopover:e,forceMount:t,children:r,container:i}=n,s=Df(SA,e);return m.jsx(pme,{scope:e,forceMount:t,children:m.jsx(rc,{present:t||s.open,children:m.jsx(sS,{asChild:!0,container:i,children:r})})})};fV.displayName=SA;var dm="PopoverContent",hV=M.forwardRef((n,e)=>{const t=gme(dm,n.__scopePopover),{forceMount:r=t.forceMount,...i}=n,s=Df(dm,n.__scopePopover);return m.jsx(rc,{present:r||s.open,children:s.modal?m.jsx(mme,{...i,ref:e}):m.jsx(yme,{...i,ref:e})})});hV.displayName=dm;var mme=M.forwardRef((n,e)=>{const t=Df(dm,n.__scopePopover),r=M.useRef(null),i=Tr(e,r),s=M.useRef(!1);return M.useEffect(()=>{const l=r.current;if(l)return NR(l)},[]),m.jsx(z0,{as:Qh,allowPinchZoom:!0,children:m.jsx(pV,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bt(n.onCloseAutoFocus,l=>{var c;l.preventDefault(),s.current||(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:bt(n.onPointerDownOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;s.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:bt(n.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),yme=M.forwardRef((n,e)=>{const t=Df(dm,n.__scopePopover),r=M.useRef(!1),i=M.useRef(!1);return m.jsx(pV,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var l,c;(l=n.onCloseAutoFocus)==null||l.call(n,s),s.defaultPrevented||(r.current||(c=t.triggerRef.current)==null||c.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var d,h;(d=n.onInteractOutside)==null||d.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((h=t.triggerRef.current)==null?void 0:h.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),pV=M.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:g,...y}=n,v=Df(dm,t),w=IS(t);return gR(),m.jsx(S0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(nS,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:g,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onDismiss:()=>v.onOpenChange(!1),children:m.jsx(w8,{"data-state":mV(v.open),role:"dialog",id:v.contentId,...w,...y,ref:e,style:{...y.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),gV="PopoverClose",vme=M.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,i=Df(gV,t);return m.jsx(Vn.button,{type:"button",...r,ref:e,onClick:bt(n.onClick,()=>i.onOpenChange(!1))})});vme.displayName=gV;var Sme="PopoverArrow",xme=M.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,i=IS(t);return m.jsx(b8,{...i,...r,ref:e})});xme.displayName=Sme;function mV(n){return n?"open":"closed"}var xA=lV,wA=dV,bA=fV,CA=hV;function EA({id:n,children:e,onOpenChange:t,open:r}){const[i,s]=id(n,t);return m.jsx(xA,{onOpenChange:s,open:r||i,children:m.jsx("div",{className:"tlui-popover",children:e})})}function _A({children:n}){return m.jsx(wA,{asChild:!0,dir:"ltr",children:n})}function PA({side:n,children:e,align:t="center",sideOffset:r=8,alignOffset:i=0,disableEscapeKeyDown:s=!1}){const l=Hi();return m.jsx(bA,{container:l,children:m.jsx(CA,{className:"tlui-popover__content",side:n,sideOffset:r,align:t,alignOffset:i,dir:"ltr",onEscapeKeyDown:c=>s&&c.preventDefault(),children:e})})}function wme(n){return n.getSelectedShapeIds().map(r=>n.getShape(r)).filter(r=>{if(!r)return!1;if(n.isShapeOfType(r,"arrow")){const i=da(n,r);if(i.start||i.end)return!1}return!0})}const yV=()=>{const n=xe();return Pe("threeStackableItems",()=>wme(n).length>2,[n])},ld=()=>{const n=xe();return Pe("isInSelectState",()=>n.isIn("select"),[n])},vV=()=>{const n=xe();return Pe("allow group",()=>{const e=n.getSelectedShapes();if(e.length<2)return!1;for(const t of e)if(n.isShapeOfType(t,"arrow")){const r=da(n,t);if(r.start&&!e.some(i=>i.id===r.start.toId)||r.end&&!e.some(i=>i.id===r.end.toId))return!1}return!0},[n])},SV=()=>{const n=xe();return Pe("allowUngroup",()=>n.getSelectedShapeIds().some(e=>{var t;return((t=n.getShape(e))==null?void 0:t.type)==="group"}),[n])},bme=typeof window<"u"&&"navigator"in window&&!!navigator.clipboard&&!!navigator.clipboard.read;function xV(n,e){const t=xe();return Pe("selectedShapes",()=>t.getSelectedShapes().length>=n,[t,n,e])}function Rs(n,e){const t=xe();return Pe("selectedShapes",()=>{const r=t.getSelectedShapes().filter(i=>!t.isShapeOrAncestorLocked(i)).length;return n===void 0?r:r>=n},[t])}function Cme(){const n=xe();return Pe("showAutoSizeToggle",()=>{const e=n.getSelectedShapes();return e.length===1&&n.isShapeOfType(e[0],"text")&&e[0].props.autoSize===!1},[n])}function wV(){const n=xe();return Pe("hasLinkShapeSelected",()=>{const e=n.getOnlySelectedShape();return!!(e&&e.type!=="embed"&&"url"in e.props&&!e.isLocked)},[n])}function Eme(){const n=xe();return Pe("onlyFlippableShape",()=>{const e=n.getOnlySelectedShape();return e&&(n.isShapeOfType(e,"group")||n.isShapeOfType(e,"image")||n.isShapeOfType(e,"arrow")||n.isShapeOfType(e,"line")||n.isShapeOfType(e,"draw"))},[n])}function bV(){const n=xe();return Pe("useCanRedo",()=>n.getCanRedo(),[n])}function CV(){const n=xe();return Pe("useCanUndo",()=>n.getCanUndo(),[n])}function _me(){return m.jsxs(m.Fragment,{children:[m.jsx(Pme,{}),m.jsx(Tme,{}),m.jsx(Ime,{}),m.jsx(kme,{}),m.jsx(Rme,{}),m.jsx(Dme,{}),m.jsx(Ome,{}),m.jsx(jme,{})]})}function Pme(){const n=Rs(2),e=ld(),t=n&&e;return m.jsxs(m.Fragment,{children:[m.jsx(Ne,{actionId:"align-left",disabled:!t}),m.jsx(Ne,{actionId:"align-center-horizontal",disabled:!t}),m.jsx(Ne,{actionId:"align-right",disabled:!t}),m.jsx(Ne,{actionId:"stretch-horizontal",disabled:!t}),m.jsx(Ne,{actionId:"align-top",disabled:!t}),m.jsx(Ne,{actionId:"align-center-vertical",disabled:!t}),m.jsx(Ne,{actionId:"align-bottom",disabled:!t}),m.jsx(Ne,{actionId:"stretch-vertical",disabled:!t})]})}function Tme(){const n=Rs(3),e=ld(),t=n&&e;return m.jsxs(m.Fragment,{children:[m.jsx(Ne,{actionId:"distribute-horizontal",disabled:!t}),m.jsx(Ne,{actionId:"distribute-vertical",disabled:!t})]})}function Ime(){const n=yV(),e=ld(),t=n&&e;return m.jsxs(m.Fragment,{children:[m.jsx(Ne,{actionId:"stack-horizontal",disabled:!t}),m.jsx(Ne,{actionId:"stack-vertical",disabled:!t})]})}function kme(){const n=Rs(1),e=ld(),t=n&&e;return m.jsxs(m.Fragment,{children:[m.jsx(Ne,{actionId:"send-to-back",disabled:!t}),m.jsx(Ne,{actionId:"send-backward",disabled:!t}),m.jsx(Ne,{actionId:"bring-forward",disabled:!t}),m.jsx(Ne,{actionId:"bring-to-front",disabled:!t})]})}function Rme(){return ks()<ai.TABLET_SM?m.jsx(Mme,{}):m.jsx(Ame,{})}function Mme(){const n=xe(),e=Pe("zoom is 1",()=>n.getZoomLevel()===1,[n]);return m.jsx(Ne,{actionId:"zoom-to-100",disabled:e})}function Ame(){const n=Rs(1),e=ld(),t=n&&e;return m.jsx(Ne,{actionId:"rotate-ccw",disabled:!t})}function Dme(){const n=Rs(1),e=ld(),t=n&&e;return m.jsx(Ne,{actionId:"rotate-cw",disabled:!t})}function Ome(){const n=wV(),e=ld(),t=n&&e;return m.jsx(Ne,{actionId:"edit-link",disabled:!t})}function jme(){const n=vV(),e=SV();return n?m.jsx(EV,{}):e?m.jsx(Lme,{}):m.jsx(EV,{})}function EV(){const n=Rs(2),e=ld(),t=n&&e;return m.jsx(Ne,{actionId:"group",disabled:!t})}function Lme(){return m.jsx(Ne,{actionId:"ungroup"})}const Nme=M.memo(function({children:e}){const t=An(),r=ks(),i=Ha(),s=M.useRef(null);bf(s);const l=xe(),c=Pe("should display quick actions when in readonly",()=>l.isInAny("hand","zoom"),[l]),d=e??m.jsx(_me,{});if(!(i&&!c))return m.jsxs(EA,{id:"actions-menu",children:[m.jsx(_A,{children:m.jsx(Dt,{type:"icon","data-testid":"actions-menu.button",title:t("actions-menu.title"),children:m.jsx(In,{icon:"dots-vertical",small:!0})})}),m.jsx(PA,{side:r>=ai.TABLET?"bottom":"top",sideOffset:6,children:m.jsx("div",{ref:s,className:"tlui-actions-menu tlui-buttons__grid","data-testid":"actions-menu.content",children:m.jsx(yl,{type:"icons",sourceId:"actions-menu",children:d})})})]})});function _V(){return Cme()?m.jsx(Ne,{actionId:"toggle-auto-size"}):null}function PV(){return wV()?m.jsx(Ne,{actionId:"edit-link"}):null}function Fme(){return Rs(1)?m.jsx(Ne,{actionId:"duplicate"}):null}function TV(){const n=xe();return Pe("should display flatten option",()=>{if(n.getSelectedShapeIds().length===0)return!1;const r=n.getOnlySelectedShape();return!(r&&n.isShapeOfType(r,"image"))},[n])?m.jsx(Ne,{actionId:"flatten-to-image"}):null}function IV(){return vV()?m.jsx(Ne,{actionId:"group"}):null}function kV(){return SV()?m.jsx(Ne,{actionId:"ungroup"}):null}function RV(){const n=xe();return Pe("allow unframe",()=>{const t=n.getSelectedShapes();return t.length===0?!1:t.every(r=>n.isShapeOfType(r,"frame"))},[n])?m.jsx(Ne,{actionId:"remove-frame"}):null}function MV(){const n=xe();return Pe("allow fit frame to content",()=>{const t=n.getOnlySelectedShape();return t?n.isShapeOfType(t,"frame")&&n.getSortedChildIdsForParent(t).length>0:!1},[n])?m.jsx(Ne,{actionId:"fit-frame-to-content"}):null}function AV(){const n=xe();return Pe("selected shapes",()=>n.getSelectedShapes().length>0,[n])?m.jsx(Ne,{actionId:"toggle-lock"}):null}function TA(){const n=xe(),e=Pe("isTransparentBg",()=>!n.getInstanceState().exportBackground,[n]);return m.jsx(oc,{actionId:"toggle-transparent",checked:e,toggle:!0})}function zme(){const n=xe(),e=Pe("any shapes",()=>n.getCurrentPageShapeIds().size>0,[n]);return m.jsx(Ne,{actionId:"unlock-all",disabled:!e})}function DV(){const n=xe(),e=Pe("zoomed to 100",()=>n.getZoomLevel()===1,[n]);return m.jsx(Ne,{actionId:"zoom-to-100",noClose:!0,disabled:e})}function OV(){const n=xe(),e=Pe("has shapes",()=>n.getCurrentPageShapeIds().size>0,[n]);return m.jsx(Ne,{actionId:"zoom-to-fit",disabled:!e,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0})}function jV(){const n=xe(),e=Pe("has shapes",()=>n.getSelectedShapeIds().length>0,[n]);return m.jsx(Ne,{actionId:"zoom-to-selection",disabled:!e,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})}function LV(){return m.jsxs(fn,{id:"clipboard",children:[m.jsx($me,{}),m.jsx(Bme,{}),m.jsx(Hme,{}),m.jsx(Fme,{}),m.jsx(Vme,{})]})}function Ume(){var t;const n=xe(),e=Pe("atLeastOneShapeOnPage",()=>n.getCurrentPageShapeIds().size>0,[n]);return m.jsxs(ca,{id:"copy-as",label:"context-menu.copy-as",size:"small",disabled:!e,children:[m.jsxs(fn,{id:"copy-as-group",children:[m.jsx(Ne,{actionId:"copy-as-svg"}),!!((t=window.navigator.clipboard)!=null&&t.write)&&m.jsx(Ne,{actionId:"copy-as-png"}),m.jsx(Ne,{actionId:"copy-as-json"})]}),m.jsx(fn,{id:"copy-as-bg",children:m.jsx(TA,{})})]})}function $me(){const n=Rs(1);return m.jsx(Ne,{actionId:"cut",disabled:!n})}function Bme(){const n=xV(1);return m.jsx(Ne,{actionId:"copy",disabled:!n})}function Hme(){const n=bme;return m.jsx(Ne,{actionId:"paste",disabled:!n})}function NV(){const n=xe();return Pe("atLeastOneShapeOnPage",()=>n.getCurrentPageShapeIds().size>0,[n])?m.jsxs(fn,{id:"conversions",children:[m.jsx(Ume,{}),m.jsxs(ca,{id:"export-as",label:"context-menu.export-as",size:"small",children:[m.jsxs(fn,{id:"export-as-group",children:[m.jsx(Ne,{actionId:"export-as-svg"}),m.jsx(Ne,{actionId:"export-as-png"}),m.jsx(Ne,{actionId:"export-as-json"})]}),m.jsx(fn,{id:"export-as-bg",children:m.jsx(TA,{})})]})]}):null}function FV(){const n=xe(),e=Pe("atLeastOneShapeOnPage",()=>n.getCurrentPageShapeIds().size>0,[n]);return m.jsx(Ne,{actionId:"select-all",disabled:!e})}function Vme(){const n=Rs(1);return m.jsx(Ne,{actionId:"delete",disabled:!n})}function Kme(){const n=Ha();return!xV(1)||n?null:m.jsxs(ca,{id:"edit",label:"context-menu.edit",size:"small",children:[m.jsx(IV,{}),m.jsx(kV,{}),m.jsx(TV,{}),m.jsx(PV,{}),m.jsx(MV,{}),m.jsx(RV,{}),m.jsx(UV,{}),m.jsx(zV,{}),m.jsx(_V,{}),m.jsx(AV,{})]})}function Wme(){const n=Rs(2),e=Eme();return Ha()||!(n||e)?null:m.jsxs(ca,{id:"arrange",label:"context-menu.arrange",size:"small",children:[n&&m.jsxs(fn,{id:"align",children:[m.jsx(Ne,{actionId:"align-left"}),m.jsx(Ne,{actionId:"align-center-horizontal"}),m.jsx(Ne,{actionId:"align-right"}),m.jsx(Ne,{actionId:"align-top"}),m.jsx(Ne,{actionId:"align-center-vertical"}),m.jsx(Ne,{actionId:"align-bottom"})]}),m.jsx(Gme,{}),n&&m.jsxs(fn,{id:"stretch",children:[m.jsx(Ne,{actionId:"stretch-horizontal"}),m.jsx(Ne,{actionId:"stretch-vertical"})]}),(n||e)&&m.jsxs(fn,{id:"flip",children:[m.jsx(Ne,{actionId:"flip-horizontal"}),m.jsx(Ne,{actionId:"flip-vertical"})]}),m.jsx(qme,{})]})}function Gme(){return Rs(3)?m.jsxs(fn,{id:"distribute",children:[m.jsx(Ne,{actionId:"distribute-horizontal"}),m.jsx(Ne,{actionId:"distribute-vertical"})]}):null}function qme(){const n=Rs(2),e=yV();return n?m.jsxs(fn,{id:"order",children:[m.jsx(Ne,{actionId:"pack"}),e&&m.jsx(Ne,{actionId:"stack-horizontal"}),e&&m.jsx(Ne,{actionId:"stack-vertical"})]}):null}function Yme(){const n=Ha(),e=Rs(1);return n||!e?null:m.jsx(ca,{id:"reorder",label:"context-menu.reorder",size:"small",children:m.jsxs(fn,{id:"reorder",children:[m.jsx(Ne,{actionId:"bring-to-front"}),m.jsx(Ne,{actionId:"bring-forward"}),m.jsx(Ne,{actionId:"send-backward"}),m.jsx(Ne,{actionId:"send-to-back"})]})})}function Xme(){const n=xe(),e=Pe("pages",()=>n.getPages(),[n]),t=Pe("current page id",()=>n.getCurrentPageId(),[n]),{addToast:r}=rd(),i=_o(),s=Ha();return!Rs(1)||s?null:m.jsxs(ca,{id:"move-to-page",label:"context-menu.move-to-page",size:"small",children:[m.jsx(fn,{id:"pages",children:e.map(c=>m.jsx(To,{id:c.id,disabled:t===c.id,label:c.name.length>30?`${c.name.slice(0,30)}`:c.name,onSelect:()=>{n.markHistoryStoppingPoint("move_shapes_to_page"),n.moveShapesToPage(n.getSelectedShapeIds(),c.id);const d=n.getPage(c.id);d&&r({title:"Changed Page",description:`Moved to ${d.name}.`,actions:[{label:"Go Back",type:"primary",onClick:()=>{n.markHistoryStoppingPoint("change-page"),n.setCurrentPage(t)}}]}),i("move-to-page",{source:"context-menu"})}},c.id))}),m.jsx(fn,{id:"new-page",children:m.jsx(Ne,{actionId:"move-to-new-page"})})]})}function zV(){const n=xe();return Pe("oneEmbedSelected",()=>{const t=n.getOnlySelectedShape();return t?!!(n.isShapeOfType(t,"embed")&&t.props.url&&!n.isShapeOrAncestorLocked(t)):!1},[n])?m.jsx(Ne,{actionId:"convert-to-bookmark"}):null}function UV(){const n=xe(),e=dM();return Pe("oneEmbeddableBookmarkSelected",()=>{const r=n.getOnlySelectedShape();return r?!!(n.isShapeOfType(r,"bookmark")&&r.props.url&&e(r.props.url)&&!n.isShapeOrAncestorLocked(r)):!1},[n])?m.jsx(Ne,{actionId:"convert-to-embed"}):null}function Zme(){const n=xe(),e=Pe("isSnapMode",()=>n.user.getIsSnapMode(),[n]);return m.jsx(oc,{actionId:"toggle-snap-mode",checked:e})}function Qme(){const n=xe(),e=Pe("isToolLock",()=>n.getInstanceState().isToolLocked,[n]);return m.jsx(oc,{actionId:"toggle-tool-lock",checked:e})}function Jme(){const n=xe(),e=Pe("isGridMode",()=>n.getInstanceState().isGridMode,[n]);return m.jsx(oc,{actionId:"toggle-grid",checked:e})}function eye(){const n=xe(),e=Pe("isWrapMode",()=>n.user.getIsWrapMode(),[n]);return m.jsx(oc,{actionId:"toggle-wrap-mode",checked:e})}function tye(){const n=xe(),e=Pe("isFocusMode",()=>n.getInstanceState().isFocusMode,[n]);return m.jsx(oc,{actionId:"toggle-focus-mode",checked:e})}function nye(){const n=xe(),e=Pe("edgeScrollSpeed",()=>n.user.getEdgeScrollSpeed(),[n]);return m.jsx(oc,{actionId:"toggle-edge-scrolling",checked:e===1})}function rye(){const n=xe(),e=Pe("animationSpeed",()=>n.user.getAnimationSpeed(),[n]);return m.jsx(oc,{actionId:"toggle-reduce-motion",checked:e===0})}function iye(){const n=xe(),e=Pe("isDebugMode",()=>n.getInstanceState().isDebugMode,[n]);return m.jsx(oc,{actionId:"toggle-debug-mode",checked:e})}function oye(){const n=xe(),e=Pe("dynamic resize",()=>n.user.getIsDynamicResizeMode(),[n]);return m.jsx(oc,{actionId:"toggle-dynamic-size-mode",checked:e})}function sye(){const n=xe(),e=Pe("paste at cursor",()=>n.user.getIsPasteAtCursorMode(),[n]);return m.jsx(oc,{actionId:"toggle-paste-at-cursor",checked:e})}function aye(){const n=xe();return Pe("show cursor chat",()=>n.getCurrentToolId()==="select"&&!n.getInstanceState().isCoarsePointer,[n])?m.jsx(Ne,{actionId:"open-cursor-chat"}):null}function lye(){const n=xe(),e=Q0(),t=Pe("isSelectToolActive",()=>n.getCurrentToolId()==="select",[n]),r=Pe("isSinglePageMode",()=>n.options.maxPages<=1,[n]);return t?m.jsxs(m.Fragment,{children:[e&&m.jsx(aye,{}),m.jsxs(fn,{id:"modify",children:[m.jsx(Kme,{}),m.jsx(Wme,{}),m.jsx(Yme,{}),!r&&m.jsx(Xme,{})]}),m.jsx(LV,{}),m.jsx(NV,{}),m.jsx(fn,{id:"select-all",children:m.jsx(FV,{})})]}):null}const cye=M.memo(function({children:e,disabled:t=!1}){const r=xe(),{Canvas:i}=zr(),s=M.useCallback(g=>{if(g){if(r.getInstanceState().isCoarsePointer){const y=r.getSelectedShapes(),{inputs:{currentPagePoint:v}}=r,w=r.getShapesAtPoint(v);if(!r.getSelectedShapes().length||!w.some(C=>y.includes(C))){const C=w.filter(E=>r.isShapeOrAncestorLocked(E));C.length&&r.select(...C.map(E=>E.id))}}}else{const y=r.getOnlySelectedShape();y&&r.isShapeOrAncestorLocked(y)&&r.setSelectedShapes([])}},[r]),l=Hi(),[c,d]=id("context menu",s),h=e??m.jsx(lye,{});return m.jsxs(qce,{dir:"ltr",onOpenChange:d,modal:!1,children:[m.jsx(Yce,{onContextMenu:void 0,dir:"ltr",disabled:t,children:i?m.jsx(i,{}):null}),c&&m.jsx(Xce,{container:l,children:m.jsx(Zce,{className:"tlui-menu scrollable","data-testid":"context-menu",alignOffset:-4,collisionPadding:4,onContextMenu:mn,children:m.jsx(yl,{type:"context-menu",sourceId:"context-menu",children:h})})})]})}),uye=2e3,dye=5e3,fye=bo(function(){const e=xe(),{isChatting:t,chatMessage:r}=e.getInstanceState(),i=M.useRef(-1),[s,l]=M.useState("");return M.useEffect(()=>{if(!t&&r||t){const d=t?dye:uye;i.current=e.timers.setTimeout(()=>{e.updateInstanceState({chatMessage:"",isChatting:!1}),l(""),e.focus()},d)}return()=>{clearTimeout(i.current)}},[e,r,t]),t?m.jsx(pye,{value:s,setValue:l,chatMessage:r}):r.trim()?m.jsx(hye,{chatMessage:r}):null});function $V(n){const e=xe();M.useLayoutEffect(()=>{var l;if(!n.current)return;const{x:r,y:i}=e.inputs.currentScreenPoint;(l=n.current)==null||l.style.setProperty("transform",`translate(${r}px, ${i}px)`);function s(c){var g;const{minX:d,minY:h}=e.getViewportScreenBounds();(g=n.current)==null||g.style.setProperty("transform",`translate(${c.clientX-d}px, ${c.clientY-h}px)`)}return window.addEventListener("pointermove",s),()=>{window.removeEventListener("pointermove",s)}},[n,e])}const hye=({chatMessage:n})=>{const e=xe(),t=M.useRef(null);return $V(t),m.jsx("div",{ref:t,className:"tl-cursor-chat tl-cursor-chat__bubble",style:{backgroundColor:e.user.getColor()},children:n})},pye=bo(function({chatMessage:e,value:t,setValue:r}){const i=xe(),s=An(),l=M.useRef(null),c=e||s("cursor-chat.type-to-chat");$V(l),M.useLayoutEffect(()=>{const v=l.current;if(!v)return;const w=i.textMeasure.measureText(t||c,{fontFamily:"var(--font-body)",fontSize:12,fontWeight:"500",fontStyle:"normal",maxWidth:null,lineHeight:1,padding:"6px"});v.style.setProperty("width",w.w+"px")},[i,t,c]),M.useLayoutEffect(()=>{const v=i.timers.requestAnimationFrame(()=>{var w;(w=l.current)==null||w.focus()});return()=>{cancelAnimationFrame(v)}},[i]);const d=M.useCallback(()=>{i.updateInstanceState({isChatting:!1}),i.focus()},[i]),h=M.useCallback(v=>{const{value:w}=v.target;r(w.slice(0,64)),i.updateInstanceState({chatMessage:w})},[i,r]),g=M.useCallback(v=>{const w=l.current;if(!w)return;const{value:C}=w;switch(v.key){case"Enter":{if(mn(v),v.stopPropagation(),!C){d();return}r("");break}case"Escape":{mn(v),v.stopPropagation(),d();break}}},[d,r]),y=M.useCallback(v=>{v.stopPropagation()},[]);return m.jsx("input",{ref:l,className:"tl-cursor-chat",style:{backgroundColor:i.user.getColor()},onBlur:d,onChange:h,onKeyDown:g,onPaste:y,value:t,placeholder:c,spellCheck:!1})});function IA({checked:n}){return m.jsx(Qc,{icon:n?"check":"none",className:"tlui-button__icon",small:!0})}function gye(){const n=xe(),{addToast:e}=rd(),{addDialog:t}=pS(),[r,i]=zt.useState(!1);return m.jsxs(m.Fragment,{children:[m.jsxs(fn,{id:"items",children:[m.jsx(To,{id:"add-toast",onSelect:()=>{e({id:nr(),title:"Something good happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"success"}),e({id:nr(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"info",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),e({id:nr(),title:"Something maybe bad happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"warning",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),e({id:nr(),title:"Something bad happened",severity:"error",keepOpen:!0})},label:"Show toast"}),m.jsx(To,{id:"show-dialog",label:"Show dialog",onSelect:()=>{t({component:({onClose:s})=>m.jsx(vye,{displayDontShowAgain:!0,onCancel:()=>s(),onContinue:()=>s()}),onClose:()=>{}})}}),m.jsx(To,{id:"create-shapes",label:"Create 100 shapes",onSelect:()=>Sye(n,100)}),m.jsx(To,{id:"count-nodes",label:"Count shapes / nodes",onSelect:()=>{var c;const s=n.getSelectedShapes(),l=s.length===0?n.getRenderingShapes():s;window.alert(`Shapes ${l.length}, DOM nodes:${(c=document.querySelector(".tl-shapes").querySelectorAll("*"))==null?void 0:c.length}`)}}),(()=>{if(r)throw Error("oh no!");return null})(),m.jsx(To,{id:"throw-error",onSelect:()=>i(!0),label:"Throw error"}),m.jsx(To,{id:"hard-reset",onSelect:Vz,label:"Hard reset"})]}),m.jsxs(fn,{id:"flags",children:[m.jsx(mye,{}),m.jsx(yye,{})]})]})}function mye(){const n=Object.values(Si);return n.length?m.jsx(ca,{id:"debug flags",label:"Debug Flags",children:m.jsx(fn,{id:"debug flags",children:n.map(e=>m.jsx(BV,{flag:e},e.name))})}):null}function yye(){const n=Object.values(yee);return n.length?m.jsx(ca,{id:"feature flags",label:"Feature Flags",children:m.jsx(fn,{id:"feature flags",children:n.map(e=>m.jsx(BV,{flag:e},e.name))})}):null}function vye({title:n="title",body:e="hello hello hello",cancel:t="Cancel",confirm:r="Continue",displayDontShowAgain:i=!1,onCancel:s,onContinue:l}){const[c,d]=zt.useState(!1);return m.jsxs(m.Fragment,{children:[m.jsxs(q0,{children:[m.jsx(Y0,{children:n}),m.jsx(X0,{})]}),m.jsx(hS,{style:{maxWidth:350},children:e}),m.jsxs(cM,{className:"tlui-dialog__footer__actions",children:[i&&m.jsxs(Dt,{type:"normal",onClick:()=>d(!c),style:{marginRight:"auto"},children:[m.jsx(IA,{checked:c}),m.jsx(bi,{children:"Dont show again"})]}),m.jsx(Dt,{type:"normal",onClick:s,children:m.jsx(bi,{children:t})}),m.jsx(Dt,{type:"primary",onClick:async()=>l(),children:m.jsx(bi,{children:r})})]})]})}const BV=bo(function({flag:e,onChange:t}){const r=e.get();return m.jsx(u1,{id:e.name,title:e.name,label:e.name.replace(/([a-z0-9])([A-Z])/g,i=>`${i[0]} ${i[1].toLowerCase()}`).replace(/^[a-z]/,i=>i.toUpperCase()),checked:r,onSelect:()=>{e.set(!r),t==null||t(!r)}})});let HV=0;function Sye(n,e){const t=Array(e),r=Math.floor(Math.sqrt(e));for(let i=0;i<e;i++)HV++,t[i]={id:yr("box"+HV),type:"geo",x:i%r*132,y:Math.floor(i/r)*132};n.run(()=>{n.createShapes(t).setSelectedShapes(t.map(i=>i.id))})}function xye({children:n}){const e=n??m.jsx(gye,{});return m.jsxs(rp,{id:"debug",children:[m.jsx(ip,{children:m.jsx(Dt,{type:"icon",title:"Debug menu",children:m.jsx(In,{icon:"dots-horizontal"})})}),m.jsx(op,{side:"top",align:"end",alignOffset:0,children:m.jsx(yl,{type:"menu",sourceId:"debug-panel",children:e})})]})}const wye=M.memo(function(){const{DebugMenu:e}=Of(),t=M.useRef(null);return bf(t),m.jsxs("div",{ref:t,className:"tlui-debug-panel",children:[m.jsx(Cye,{}),m.jsx(Eye,{}),e&&m.jsx(e,{})]})});function bye(n=!0){const[e,t]=M.useState(0),r=xe();M.useEffect(()=>{if(!n)return;const i=()=>t(s=>s+1);return r.on("tick",i),()=>{r.off("tick",i)}},[r,n])}const Cye=bo(function(){bye();const e=xe(),t=e.getPath(),r=e.getHoveredShape(),i=e.getOnlySelectedShape(),s=t==="select.idle"||!t.includes("select.")?r:i,l=s&&t.includes("select.")?` / ${s.type||""}${"geo"in s.props?" / "+s.props.geo:""} / [${R.ToInt(e.getPointInShapeSpace(s,e.inputs.currentPagePoint))}]`:"",c=t.startsWith("select.")&&!t.includes(".idle")?` / [${R.ToInt(e.inputs.originPagePoint)}]  [${R.ToInt(e.inputs.currentPagePoint)}] = ${R.Dist(e.inputs.originPagePoint,e.inputs.currentPagePoint).toFixed(0)}`:"";return m.jsx("div",{className:"tlui-debug-panel__current-state",children:`${t}${l}${c}`})});function Eye(){const n=xe(),e=Pe("show_fps",()=>Si.showFps.get(),[Si]),t=M.useRef(null);return M.useEffect(()=>{if(!e)return;const r=250;let i=0,s=-1,l=performance.now(),c=0,d=0,h=!1;function g(){if(d++,c=performance.now()-l,c>r){const y=Math.round(d*(r/c)*(1e3/r));y>i&&(i=y);const v=i*.75;(y<v&&!h||y>=v&&h)&&(h=!h),t.current.innerHTML=`FPS ${y.toString()}`,t.current.className="tlui-debug-panel__fps"+(h?" tlui-debug-panel__fps__slow":""),c-=r,d=0,l=performance.now()}s=n.timers.requestAnimationFrame(g)}return g(),()=>{cancelAnimationFrame(s)}},[e,n]),e?m.jsx("div",{ref:t}):null}const _ye=M.memo(function(){const e=ks(),t=M.useRef(null);bf(t);const{MainMenu:r,QuickActions:i,ActionsMenu:s,PageMenu:l}=Of(),c=xe(),d=Pe("isSinglePageMode",()=>c.options.maxPages<=1,[c]),h=c.options.actionShortcutsLocation==="menu"?!0:c.options.actionShortcutsLocation==="toolbar"?!1:e>=ai.TABLET;return!r&&!l&&!h?null:m.jsx("div",{ref:t,className:"tlui-menu-zone",children:m.jsxs("div",{className:"tlui-buttons__horizontal",children:[r&&m.jsx(r,{}),l&&!d&&m.jsx(l,{}),h?m.jsxs(m.Fragment,{children:[i&&m.jsx(i,{}),s&&m.jsx(s,{})]}):null]})})});function Pye(){const n=xe(),e=np(),[t,r]=M.useState(!1),i=M.useRef(!1);return df("toggle showback to content",()=>{const s=i.current,l=n.getCurrentPageShapeIds();let c=!1;l.size&&(c=l.size===n.getCulledShapes().size),s!==c&&(r(c),i.current=c)},[n]),t?m.jsx(Ne,{actionId:"back-to-content",onSelect:()=>{e["back-to-content"].onSelect("helper-buttons"),r(!1)}}):null}function Tye(){const n=xe();return Pe("is pen mode",()=>n.getInstanceState().isPenMode,[n])?m.jsx(Ne,{actionId:"exit-pen-mode"}):null}function Iye(){const n=xe(),e=np();return Pe("is following user",()=>!!n.getInstanceState().followingUserId,[n])?m.jsx(To,{...e["stop-following"]}):null}function kye(){return m.jsxs(m.Fragment,{children:[m.jsx(Tye,{}),m.jsx(Pye,{}),m.jsx(Iye,{})]})}function Rye({children:n}){const e=n??m.jsx(kye,{});return m.jsx("div",{className:"tlui-helper-buttons",children:m.jsx(yl,{type:"helper-buttons",sourceId:"helper-buttons",children:e})})}function Mye(){const n=Q0();return m.jsxs(m.Fragment,{children:[m.jsxs(fn,{label:"shortcuts-dialog.tools",id:"tools",children:[m.jsx(Ne,{actionId:"toggle-tool-lock"}),m.jsx(Ne,{actionId:"insert-media"}),m.jsx(ua,{toolId:"select"}),m.jsx(ua,{toolId:"draw"}),m.jsx(ua,{toolId:"eraser"}),m.jsx(ua,{toolId:"hand"}),m.jsx(ua,{toolId:"rectangle"}),m.jsx(ua,{toolId:"ellipse"}),m.jsx(ua,{toolId:"arrow"}),m.jsx(ua,{toolId:"line"}),m.jsx(ua,{toolId:"text"}),m.jsx(ua,{toolId:"frame"}),m.jsx(ua,{toolId:"note"}),m.jsx(ua,{toolId:"laser"}),m.jsx(To,{id:"pointer-down",label:"tool.pointer-down",kbd:",",onSelect:()=>{}})]}),m.jsxs(fn,{label:"shortcuts-dialog.preferences",id:"preferences",children:[m.jsx(Ne,{actionId:"toggle-dark-mode"}),m.jsx(Ne,{actionId:"toggle-focus-mode"}),m.jsx(Ne,{actionId:"toggle-grid"})]}),m.jsxs(fn,{label:"shortcuts-dialog.edit",id:"edit",children:[m.jsx(Ne,{actionId:"undo"}),m.jsx(Ne,{actionId:"redo"}),m.jsx(Ne,{actionId:"cut"}),m.jsx(Ne,{actionId:"copy"}),m.jsx(Ne,{actionId:"paste"}),m.jsx(Ne,{actionId:"select-all"}),m.jsx(Ne,{actionId:"delete"}),m.jsx(Ne,{actionId:"duplicate"})]}),m.jsxs(fn,{label:"shortcuts-dialog.view",id:"view",children:[m.jsx(Ne,{actionId:"zoom-in"}),m.jsx(Ne,{actionId:"zoom-out"}),m.jsx(Ne,{actionId:"zoom-to-100"}),m.jsx(Ne,{actionId:"zoom-to-fit"}),m.jsx(Ne,{actionId:"zoom-to-selection"})]}),m.jsxs(fn,{label:"shortcuts-dialog.transform",id:"transform",children:[m.jsx(Ne,{actionId:"bring-to-front"}),m.jsx(Ne,{actionId:"bring-forward"}),m.jsx(Ne,{actionId:"send-backward"}),m.jsx(Ne,{actionId:"send-to-back"}),m.jsx(Ne,{actionId:"group"}),m.jsx(Ne,{actionId:"ungroup"}),m.jsx(Ne,{actionId:"flip-horizontal"}),m.jsx(Ne,{actionId:"flip-vertical"}),m.jsx(Ne,{actionId:"align-top"}),m.jsx(Ne,{actionId:"align-center-vertical"}),m.jsx(Ne,{actionId:"align-bottom"}),m.jsx(Ne,{actionId:"align-left"}),m.jsx(Ne,{actionId:"align-center-horizontal"}),m.jsx(Ne,{actionId:"align-right"})]}),n&&m.jsx(fn,{label:"shortcuts-dialog.collaboration",id:"collaboration",children:m.jsx(Ne,{actionId:"open-cursor-chat"})})]})}const Aye=M.memo(function({children:e}){const t=An(),r=ks(),i=e??m.jsx(Mye,{});return m.jsxs(m.Fragment,{children:[m.jsxs(q0,{className:"tlui-shortcuts-dialog__header",children:[m.jsx(Y0,{children:t("shortcuts-dialog.title")}),m.jsx(X0,{})]}),m.jsx(hS,{className:It("tlui-shortcuts-dialog__body",{"tlui-shortcuts-dialog__body__mobile":r<=ai.MOBILE_XS,"tlui-shortcuts-dialog__body__tablet":r<=ai.TABLET}),children:m.jsx(yl,{type:"keyboard-shortcuts",sourceId:"kbd",children:i})}),m.jsx("div",{className:"tlui-dialog__scrim"})]})});function VV(){const n=pf(),e=_o(),t=Pe("locale",()=>n==null?void 0:n.user.getLocale(),[n]);return n?m.jsx(ca,{id:"help menu language",label:"menu.language",children:m.jsx(fn,{id:"languages",children:Tv.map(({locale:r,label:i})=>m.jsx(u1,{id:`language-${r}`,title:r,label:i,checked:r===t,readonlyOk:!0,onSelect:()=>{n.user.updateUserPreferences({locale:r}),e("change-language",{source:"menu",locale:r})}},r))})}):null}function Dye(){return m.jsxs(m.Fragment,{children:[m.jsx(VV,{}),m.jsx(KV,{})]})}function KV(){const{KeyboardShortcutsDialog:n}=Of(),{addDialog:e}=pS(),t=M.useCallback(()=>{n&&e({component:n})},[e,n]);return n?m.jsx(To,{id:"keyboard-shortcuts-button",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:t}):null}function Oye(){return m.jsxs(m.Fragment,{children:[m.jsxs(fn,{id:"basic",children:[m.jsx(Lye,{}),m.jsx(Uye,{}),m.jsx(jye,{}),m.jsx($ye,{})]}),m.jsx(Bye,{})]})}function jye(){return m.jsxs(ca,{id:"export-all-as",label:"context-menu.export-all-as",size:"small",children:[m.jsxs(fn,{id:"export-all-as-group",children:[m.jsx(Ne,{actionId:"export-all-as-svg"}),m.jsx(Ne,{actionId:"export-all-as-png"}),m.jsx(Ne,{actionId:"export-all-as-json"})]}),m.jsx(fn,{id:"export-all-as-bg",children:m.jsx(TA,{})})]})}function Lye(){const n=xe(),e=Pe("isSelectToolActive",()=>n.getCurrentToolId()==="select",[n]);return m.jsxs(ca,{id:"edit",label:"menu.edit",disabled:!e,children:[m.jsx(zye,{}),m.jsx(LV,{}),m.jsx(NV,{}),m.jsx(Nye,{}),m.jsx(Fye,{}),m.jsx(fn,{id:"select-all",children:m.jsx(FV,{})})]})}function Nye(){return m.jsxs(fn,{id:"misc",children:[m.jsx(IV,{}),m.jsx(kV,{}),m.jsx(PV,{}),m.jsx(_V,{}),m.jsx(RV,{}),m.jsx(MV,{}),m.jsx(UV,{}),m.jsx(zV,{}),m.jsx(TV,{})]})}function Fye(){return m.jsxs(fn,{id:"lock",children:[m.jsx(AV,{}),m.jsx(zme,{})]})}function zye(){const n=CV(),e=bV();return m.jsxs(fn,{id:"undo-redo",children:[m.jsx(Ne,{actionId:"undo",disabled:!n}),m.jsx(Ne,{actionId:"redo",disabled:!e})]})}function Uye(){return m.jsx(ca,{id:"view",label:"menu.view",children:m.jsxs(fn,{id:"view-actions",children:[m.jsx(Ne,{actionId:"zoom-in"}),m.jsx(Ne,{actionId:"zoom-out"}),m.jsx(DV,{}),m.jsx(OV,{}),m.jsx(jV,{})]})})}function $ye(){return m.jsxs(m.Fragment,{children:[m.jsx(Ne,{actionId:"insert-embed"}),m.jsx(Ne,{actionId:"insert-media"})]})}function Bye(){return m.jsxs(fn,{id:"preferences",children:[m.jsxs(ca,{id:"preferences",label:"menu.preferences",children:[m.jsxs(fn,{id:"preferences-actions",children:[m.jsx(Zme,{}),m.jsx(Qme,{}),m.jsx(Jme,{}),m.jsx(eye,{}),m.jsx(tye,{}),m.jsx(nye,{}),m.jsx(rye,{}),m.jsx(oye,{}),m.jsx(sye,{}),m.jsx(iye,{})]}),m.jsx(fn,{id:"color-scheme",children:m.jsx(Kfe,{})})]}),m.jsx(VV,{}),m.jsx(KV,{})]})}const Hye=M.memo(function({children:e}){const t=Hi(),[r,i]=id("main menu"),s=An(),l=e??m.jsx(Oye,{});return m.jsxs(eM,{dir:"ltr",open:r,onOpenChange:i,modal:!1,children:[m.jsx(tM,{asChild:!0,dir:"ltr",children:m.jsx(Dt,{type:"icon","data-testid":"main-menu.button",title:s("menu.title"),children:m.jsx(In,{icon:"menu",small:!0})})}),m.jsx(K0,{container:t,children:m.jsx(nM,{className:"tlui-menu",side:"bottom",align:"start",collisionPadding:4,alignOffset:0,sideOffset:6,children:m.jsx(yl,{type:"menu",sourceId:"main-menu",children:l})})})]})}),kA={};function kS(n){if(kA[n])return kA[n];const t=document.createElement("canvas").getContext("2d");t.fillStyle=n,t.fillRect(0,0,1,1);const[r,i,s,l]=t.getImageData(0,0,1,1).data,c=new Float32Array([r/255,i/255,s/255,l/255]);return kA[n]=c,c}const eC=10,WV=4*6*eC+12+4*12;function fm(n,{center:e,radius:t,numArcSegments:r=20,startAngle:i=0,endAngle:s=sr,offset:l=0}){const c=(s-i)/r;let d=l;for(let h=i;h<s;h+=c)n[d++]=e.x,n[d++]=e.y,n[d++]=e.x+Math.cos(h)*t,n[d++]=e.y+Math.sin(h)*t,n[d++]=e.x+Math.cos(h+c)*t,n[d++]=e.y+Math.sin(h+c)*t;return n}function hm(n,e,t,r,i,s){n[e++]=t,n[e++]=r,n[e++]=t,n[e++]=r+s,n[e++]=t+i,n[e++]=r,n[e++]=t+i,n[e++]=r,n[e++]=t,n[e++]=r+s,n[e++]=t+i,n[e++]=r+s}function Vye(n,e,t){const r=eC;t=Math.min(t,Math.min(e.w,e.h)/2);const i=Xe.ExpandBy(e,-t);if(i.w<=0||i.h<=0)return fm(n,{center:e.center,radius:t,numArcSegments:eC*4}),eC*4*6;let s=0;return hm(n,s,i.minX,i.minY,i.w,i.h),s+=12,hm(n,s,i.minX,e.minY,i.w,t),s+=12,hm(n,s,i.maxX,i.minY,t,i.h),s+=12,hm(n,s,i.minX,i.maxY,i.w,t),s+=12,hm(n,s,e.minX,i.minY,t,i.h),s+=12,fm(n,{numArcSegments:r,offset:s,center:i.point,radius:t,startAngle:qn,endAngle:qn*1.5}),s+=r*6,fm(n,{numArcSegments:r,offset:s,center:R.Add(i.point,new R(i.w,0)),radius:t,startAngle:qn*1.5,endAngle:sr}),s+=r*6,fm(n,{numArcSegments:r,offset:s,center:R.Add(i.point,i.size),radius:t,startAngle:0,endAngle:Pr}),s+=r*6,fm(n,{numArcSegments:r,offset:s,center:R.Add(i.point,new R(0,i.h)),radius:t,startAngle:Pr,endAngle:qn}),WV}function Kye(n){if(!n)throw new Error("Canvas element not found");const e=n.getContext("webgl2",{premultipliedAlpha:!1});if(!e)throw new Error("Failed to get webgl2 context");const t=`#version 300 es
  precision mediump float;
  
  in vec2 shapeVertexPosition;

	uniform vec4 canvasPageBounds;

	// taken (with thanks) from
	// https://webglfundamentals.org/webgl/lessons/webgl-2d-matrices.html
  void main() {
		// convert the position from pixels to 0.0 to 1.0
		vec2 zeroToOne = (shapeVertexPosition - canvasPageBounds.xy) / canvasPageBounds.zw;
	
		// convert from 0->1 to 0->2
		vec2 zeroToTwo = zeroToOne * 2.0;
	
		// convert from 0->2 to -1->+1 (clipspace)
		vec2 clipSpace = zeroToTwo - 1.0;
	
		gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
  }`,r=e.createShader(e.VERTEX_SHADER);if(!r)throw new Error("Failed to create vertex shader");if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Failed to compile vertex shader");const i=`#version 300 es
  precision mediump float;
  
	uniform vec4 fillColor;
  out vec4 outputColor;

  void main() {
	outputColor = fillColor;
  }`,s=e.createShader(e.FRAGMENT_SHADER);if(!s)throw new Error("Failed to create fragment shader");if(e.shaderSource(s,i),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Error("Failed to compile fragment shader");const l=e.createProgram();if(!l)throw new Error("Failed to create program");if(e.attachShader(l,r),e.attachShader(l,s),e.linkProgram(l),!e.getProgramParameter(l,e.LINK_STATUS))throw new Error("Failed to link program");e.useProgram(l);const c=e.getAttribLocation(l,"shapeVertexPosition");if(c<0)throw new Error("Failed to get shapeVertexPosition attribute location");e.enableVertexAttribArray(c);const d=e.getUniformLocation(l,"canvasPageBounds"),h=e.getUniformLocation(l,"fillColor");if(!e.createBuffer())throw new Error("Failed to create buffer");if(!e.createBuffer())throw new Error("Failed to create buffer");return{context:e,selectedShapes:tC(e,1024),unselectedShapes:tC(e,4096),viewport:tC(e,WV),collaborators:tC(e,1024),prepareTriangles(v,w){e.bindBuffer(e.ARRAY_BUFFER,v.buffer),e.bufferData(e.ARRAY_BUFFER,v.vertices,e.STATIC_DRAW,0,w),e.enableVertexAttribArray(c),e.vertexAttribPointer(c,2,e.FLOAT,!1,0,0)},drawTrianglesTransparently(v){e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.drawArrays(e.TRIANGLES,0,v/2),e.disable(e.BLEND)},drawTriangles(v){e.drawArrays(e.TRIANGLES,0,v/2)},setFillColor(v){e.uniform4fv(h,v)},setCanvasPageBounds(v){e.uniform4fv(d,v)}}}function tC(n,e){const t=n.createBuffer();if(!t)throw new Error("Failed to create buffer");return{buffer:t,vertices:new Float32Array(e)}}function GV(n,e,t){let r=n.vertices.length;for(;r<e+t.length;)r*=2;if(r!=n.vertices.length){const i=new Float32Array(r);i.set(n.vertices),n.vertices=i}n.vertices.set(t,e)}var Wye=Object.create,qV=Object.defineProperty,Gye=Object.getOwnPropertyDescriptor,qye=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),YV=n=>{throw TypeError(n)},XV=(n,e,t)=>e in n?qV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Yye=n=>[,,,Wye(null)],ZV=["class","method","getter","setter","accessor","field","value","get","set"],QV=n=>n!==void 0&&typeof n!="function"?YV("Function expected"):n,Xye=(n,e,t,r,i)=>({kind:ZV[n],name:e,metadata:r,addInitializer:s=>t._?YV("Already initialized"):i.push(QV(s||null))}),Zye=(n,e)=>XV(e,qye("metadata"),n[3]),Qye=(n,e,t,r)=>{for(var i=0,s=n[e>>1],l=s&&s.length;i<l;i++)s[i].call(t);return r},ru=(n,e,t,r,i,s)=>{for(var l,c,d,h,g=e&7,y=!1,v=!1,w=2,C=ZV[g+5],E=n[w]||(n[w]=[]),P=(i=i.prototype,Gye(i,t)),I=r.length-1;I>=0;I--)d=Xye(g,t,c={},n[3],E),d.static=y,d.private=v,h=d.access={has:k=>t in k},h.get=k=>k[t],l=(0,r[I])(P[C],d),c._=1,QV(l)&&(P[C]=l);return P&&qV(i,t,P),i},cd=(n,e,t)=>XV(n,typeof e!="symbol"?e+"":e,t),JV,eK,tK,nK,rK,iK,oK,sK,aK,lK,Va;lK=[ea],aK=[Le],sK=[Le],oK=[Le],iK=[Le],rK=[Le],nK=[Le],tK=[Le],eK=[Le],JV=[ea];class wl{constructor(e,t,r){this.editor=e,this.elem=t,this.container=r,Qye(Va,5,this),cd(this,"disposables",[]),cd(this,"gl"),cd(this,"shapeGeometryCache"),cd(this,"colors"),cd(this,"id",nr()),cd(this,"canvasBoundingClientRect",si("canvasBoundingClientRect",new Xe)),cd(this,"originPagePoint",new R),cd(this,"originPageCenter",new R),cd(this,"isInViewport",!1),this.gl=Kye(t),this.shapeGeometryCache=e.store.createComputedCache("webgl-geometry",i=>{const s=e.getShapeMaskedPageBounds(i.id);if(!s)return null;const l=new Float32Array(12);return hm(l,0,s.x,s.y,s.w,s.h),l}),this.colors=this._getColors(),this.disposables.push(this._listenForCanvasResize(),Kl("minimap render",this.render))}close(){return this.disposables.forEach(e=>e())}_getColors(){const e=getComputedStyle(this.editor.getContainer());return{shapeFill:kS(e.getPropertyValue("--color-text-3").trim()),selectFill:kS(e.getPropertyValue("--color-selected").trim()),viewportFill:kS(e.getPropertyValue("--color-muted-1").trim()),background:kS(e.getPropertyValue("--color-low").trim())}}updateColors(){this.colors=this._getColors()}getDpr(){return this.editor.getInstanceState().devicePixelRatio}getContentPageBounds(){const e=this.editor.getViewportPageBounds(),t=this.editor.getCurrentPageBounds();return t?Xe.Expand(t,e):e}getContentScreenBounds(){const e=this.getContentPageBounds(),t=this.editor.pageToScreen(e.point),r=this.editor.pageToScreen(new R(e.maxX,e.maxY));return new Xe(t.x,t.y,r.x-t.x,r.y-t.y)}_getCanvasBoundingRect(){const{x:e,y:t,width:r,height:i}=this.elem.getBoundingClientRect();return new Xe(e,t,r,i)}getCanvasScreenBounds(){return this.canvasBoundingClientRect.get()}_listenForCanvasResize(){const e=new ResizeObserver(()=>{const t=this._getCanvasBoundingRect();this.canvasBoundingClientRect.set(t)});return e.observe(this.elem),e.observe(this.container),()=>e.disconnect()}getCanvasSize(){const e=this.canvasBoundingClientRect.get(),t=this.getDpr();return new R(e.width*t,e.height*t)}getCanvasClientPosition(){return this.canvasBoundingClientRect.get().point}getCanvasPageBounds(){const e=this.getCanvasScreenBounds(),t=this.getContentPageBounds(),r=e.width/e.height;let i=t.width,s=i/r;s<t.height&&(s=t.height,i=s*r);const l=new Xe(0,0,i,s);return l.center=t.center,l}getZoom(){return this.getCanvasPageBounds().width/this.getCanvasScreenBounds().width}getCanvasPageBoundsArray(){const{x:e,y:t,w:r,h:i}=this.getCanvasPageBounds();return new Float32Array([e,t,r,i])}getMinimapPagePoint(e,t){const r=this.getCanvasPageBounds(),i=this.getCanvasScreenBounds();let s=e-i.x,l=t-i.y;return s*=r.width/i.width,l*=r.height/i.height,s+=r.minX,l+=r.minY,new R(s,l,1)}minimapScreenPointToPagePoint(e,t,r=!1,i=!1){const{editor:s}=this,l=s.getViewportPageBounds();let{x:c,y:d}=this.getMinimapPagePoint(e,t);if(i){const h=this.editor.getCurrentPageBounds()??new Xe,g=h.minX-l.width/2,y=h.maxX+l.width/2,v=h.minY-l.height/2,w=h.maxY+l.height/2,C=Math.max(0,g+l.width-c),E=Math.max(0,-(y-l.width-c)),P=Math.max(0,v+l.height-d),I=Math.max(0,-(w-l.height-d));c+=(C-E)/2,d+=(P-I)/2,c=Co(c,g,y),d=Co(d,v,w)}if(r){const{originPagePoint:h}=this,g=Math.abs(c-h.x),y=Math.abs(d-h.y);g>y?d=h.y:c=h.x}return new R(c,d)}render(){const e=this.gl.context,t=this.getCanvasSize();this.gl.setCanvasPageBounds(this.getCanvasPageBoundsArray()),this.elem.width=t.x,this.elem.height=t.y,e.viewport(0,0,t.x,t.y),e.clearColor(this.colors.background[0],this.colors.background[1],this.colors.background[2],1),e.clear(e.COLOR_BUFFER_BIT);const r=new Set(this.editor.getSelectedShapeIds()),i=this.colors;let s=0,l=0;const c=this.editor.getCurrentPageShapeIdsSorted();for(let d=0,h=c.length;d<h;d++){const g=c[d],y=this.shapeGeometryCache.get(g);if(!y)continue;const v=y.length;r.has(g)?(GV(this.gl.selectedShapes,s,y),s+=v):(GV(this.gl.unselectedShapes,l,y),l+=v)}this.drawShapes(this.gl.unselectedShapes,l,i.shapeFill),this.drawShapes(this.gl.selectedShapes,s,i.selectFill),this.drawViewport(),this.drawCollaborators()}drawShapes(e,t,r){this.gl.prepareTriangles(e,t),this.gl.setFillColor(r),this.gl.drawTriangles(t)}drawViewport(){const e=this.editor.getViewportPageBounds(),t=Vye(this.gl.viewport.vertices,e,4*this.getZoom());this.gl.prepareTriangles(this.gl.viewport,t),this.gl.setFillColor(this.colors.viewportFill),this.gl.drawTrianglesTransparently(t),xr.isSafari&&(this.gl.drawTrianglesTransparently(t),this.gl.drawTrianglesTransparently(t),this.gl.drawTrianglesTransparently(t))}drawCollaborators(){const e=this.editor.getCollaboratorsOnCurrentPage();if(!e.length)return;const t=20,r=t*6,i=r*e.length;this.gl.collaborators.vertices.length<i&&(this.gl.collaborators.vertices=new Float32Array(i));const s=this.gl.collaborators.vertices;let l=0;const c=this.getZoom();for(const{cursor:d}of e)d&&(fm(s,{center:R.From(d),radius:3*c,offset:l,numArcSegments:t}),l+=r);this.gl.prepareTriangles(this.gl.collaborators,i),l=0;for(const{color:d}of e)this.gl.setFillColor(kS(d)),this.gl.context.drawArrays(this.gl.context.TRIANGLES,l/2,r/2),l+=r}}Va=Yye(),ru(Va,1,"close",lK,wl),ru(Va,1,"getDpr",aK,wl),ru(Va,1,"getContentPageBounds",sK,wl),ru(Va,1,"getContentScreenBounds",oK,wl),ru(Va,1,"getCanvasSize",iK,wl),ru(Va,1,"getCanvasClientPosition",rK,wl),ru(Va,1,"getCanvasPageBounds",nK,wl),ru(Va,1,"getZoom",tK,wl),ru(Va,1,"getCanvasPageBoundsArray",eK,wl),ru(Va,1,"render",JV,wl),Zye(Va,wl);function Jye(){const n=xe(),e=Hi(),t=M.useRef(null),r=M.useRef(!1),i=M.useRef();M.useEffect(()=>{try{const g=new wl(n,t.current,e);return i.current=g,i.current.close}catch(g){n.annotateError(g,{origin:"minimap",willCrashApp:!1}),n.timers.setTimeout(()=>{throw g})}},[n,e]);const s=M.useCallback(g=>{if(!n.getCurrentPageShapeIds().size||!i.current)return;const y=i.current.minimapScreenPointToPagePoint(g.clientX,g.clientY,!1,!1),v=i.current.minimapScreenPointToPagePoint(g.clientX,g.clientY,!1,!0);i.current.originPagePoint.setTo(v),i.current.originPageCenter.setTo(n.getViewportPageBounds().center),n.centerOnPoint(y,{animation:{duration:n.options.animationMediumMs}})},[n]),l=M.useCallback(g=>{if(!i.current)return;const y=g.currentTarget;if(Uv(y,g),!n.getCurrentPageShapeIds().size)return;r.current=!0,i.current.isInViewport=!1;const v=i.current.minimapScreenPointToPagePoint(g.clientX,g.clientY,!1,!1),w=n.getViewportPageBounds(),C=i.current.getContentPageBounds();if(new Xe(C.x-w.width/2,C.y-w.height/2,C.width+w.width,C.height+w.height).containsPoint(v)&&!w.containsPoint(v)){i.current.isInViewport=w.containsPoint(v);const I=R.Sub(w.center,w.point),k=R.Add(v,I);i.current.originPagePoint.setTo(k),i.current.originPageCenter.setTo(v),n.centerOnPoint(v,{animation:{duration:n.options.animationMediumMs}})}else{const I=i.current.minimapScreenPointToPagePoint(g.clientX,g.clientY,!1,!0);i.current.isInViewport=w.containsPoint(I),i.current.originPagePoint.setTo(I),i.current.originPageCenter.setTo(w.center)}function P(I){y&&$v(y,I),r.current=!1,document.body.removeEventListener("pointerup",P)}document.body.addEventListener("pointerup",P)},[n]),c=M.useCallback(g=>{if(!i.current)return;const y=i.current.minimapScreenPointToPagePoint(g.clientX,g.clientY,g.shiftKey,!0);if(r.current){if(i.current.isInViewport){const E=i.current.originPagePoint.clone().sub(i.current.originPageCenter);n.centerOnPoint(R.Sub(y,E));return}n.centerOnPoint(y)}const v=i.current.getMinimapPagePoint(g.clientX,g.clientY),w=n.pageToScreen(v),C={type:"pointer",target:"canvas",name:"pointer_move",...Fa(g),point:w,isPen:n.getInstanceState().isPenMode};n.dispatch(C)},[n]),d=M.useCallback(g=>{const y=kz(g);n.dispatch({type:"wheel",name:"wheel",delta:y,point:new R(g.clientX,g.clientY),shiftKey:g.shiftKey,altKey:g.altKey,ctrlKey:g.metaKey||g.ctrlKey,metaKey:g.metaKey,accelKey:Qo(g)})},[n]),h=Qv();return M.useEffect(()=>{n.timers.setTimeout(()=>{var g,y;(g=i.current)==null||g.updateColors(),(y=i.current)==null||y.render()})},[h,n]),m.jsx("div",{className:"tlui-minimap",children:m.jsx("canvas",{role:"img","aria-label":"minimap",ref:t,className:"tlui-minimap__canvas",onDoubleClick:s,onPointerMove:c,onPointerDown:l,onWheelCapture:d})})}function eve(n,e){const[t,r]=zt.useState(e);zt.useLayoutEffect(()=>{const s=yP(n);if(s)try{r(JSON.parse(s))}catch{console.error(`Could not restore value ${n} from local storage.`)}},[n]);const i=zt.useCallback(s=>{r(l=>{const c=typeof s=="function"?s(l):s;return vP(n,JSON.stringify(c)),c})},[n]);return[t,i]}const tve=M.memo(function(){const e=np(),t=An(),r=ks(),i=M.useRef(null);bf(i);const[s,l]=eve("minimap",!0),c=M.useCallback(()=>{l(g=>!g)},[l]),{ZoomMenu:d,Minimap:h}=Of();return r<ai.MOBILE?null:m.jsxs("div",{ref:i,className:"tlui-navigation-panel",children:[m.jsx("div",{className:"tlui-buttons__horizontal",children:d&&r<ai.TABLET?m.jsx(d,{}):s?m.jsxs(m.Fragment,{children:[d&&m.jsx(d,{}),h&&m.jsx(Dt,{type:"icon","data-testid":"minimap.toggle-button",title:t("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:c,children:m.jsx(In,{icon:s?"chevrons-ne":"chevrons-sw"})})]}):m.jsxs(m.Fragment,{children:[m.jsx(Dt,{type:"icon","data-testid":"minimap.zoom-out",title:`${t(vS(e["zoom-out"].label))} ${MM(e["zoom-out"].kbd)}`,onClick:()=>e["zoom-out"].onSelect("navigation-zone"),children:m.jsx(In,{icon:"minus"})}),d&&m.jsx(d,{}),m.jsx(Dt,{type:"icon","data-testid":"minimap.zoom-in",title:`${t(vS(e["zoom-in"].label))} ${MM(e["zoom-in"].kbd)}`,onClick:()=>e["zoom-in"].onSelect("navigation-zone"),children:m.jsx(In,{icon:"plus"})}),h&&m.jsx(Dt,{type:"icon","data-testid":"minimap.toggle-button",title:t("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:c,children:m.jsx(In,{icon:s?"chevrons-ne":"chevrons-sw"})})]})}),h&&r>=ai.TABLET&&!s&&m.jsx(h,{})]})}),nve=function({name:e,id:t,isCurrentPage:r,onCancel:i}){const s=xe(),l=_o(),c=M.useRef(null),d=M.useRef(null),h=M.useCallback(()=>{d.current=s.markHistoryStoppingPoint("rename page")},[s]),g=M.useCallback(v=>{s.renamePage(t,v||"New Page"),l("rename-page",{source:"page-menu"})},[s,t,l]),y=M.useCallback(()=>{d.current&&s.bailToMark(d.current),i()},[s,i]);return m.jsx(Z0,{className:"tlui-page-menu__item__input",ref:v=>c.current=v,defaultValue:e,onValueChange:g,onCancel:y,onFocus:h,shouldManuallyMaintainScrollPositionWhenFocused:!0,autoFocus:r,autoSelect:!0})},RA=(n,e,t,r,i)=>{let s;const l=n.getPages(),c=t>r?l[r-1]:l[r],d=t>r?l[r]:l[r+1];c&&!d?s=Fc(c.index):!c&&d?s=EX(l[0].index):s=cv(c.index,d.index),s!==l[t].index&&(n.markHistoryStoppingPoint("moving page"),n.updatePage({id:e,index:s}),i("move-page",{source:"page-menu"}))},cK=bo(function({index:e,listSize:t,item:r,onRename:i}){const s=xe(),l=An(),c=s.getPages(),d=_o(),h=M.useCallback(()=>{s.markHistoryStoppingPoint("creating page");const w=La.createId();s.duplicatePage(r.id,w),d("duplicate-page",{source:"page-menu"})},[s,r,d]),g=M.useCallback(()=>{RA(s,r.id,e,e-1,d)},[s,r,e,d]),y=M.useCallback(()=>{RA(s,r.id,e,e+1,d)},[s,r,e,d]),v=M.useCallback(()=>{s.markHistoryStoppingPoint("deleting page"),s.deletePage(r.id),d("delete-page",{source:"page-menu"})},[s,r,d]);return m.jsxs(rp,{id:`page item submenu ${e}`,children:[m.jsx(ip,{children:m.jsx(Dt,{type:"icon",title:l("page-menu.submenu.title"),children:m.jsx(In,{icon:"dots-vertical",small:!0})})}),m.jsx(op,{alignOffset:0,side:"right",sideOffset:-4,children:m.jsxs(yl,{type:"menu",sourceId:"page-menu",children:[m.jsxs(fn,{id:"modify",children:[i&&m.jsx(To,{id:"rename",label:"page-menu.submenu.rename",onSelect:i}),m.jsx(To,{id:"duplicate",label:"page-menu.submenu.duplicate-page",onSelect:h,disabled:c.length>=s.options.maxPages}),e>0&&m.jsx(To,{id:"move-up",onSelect:g,label:"page-menu.submenu.move-up"}),e<t-1&&m.jsx(To,{id:"move-down",label:"page-menu.submenu.move-down",onSelect:y})]}),t>1&&m.jsx(fn,{id:"delete",children:m.jsx(To,{id:"delete",onSelect:v,label:"page-menu.submenu.delete"})})]})})]})}),rve=M.memo(function(){const e=xe(),t=_o(),r=An(),i=ks(),s=M.useCallback(()=>I(!1),[]),[l,c]=id("page-menu",s),d=36,h=M.useRef(null),g=Pe("pages",()=>e.getPages(),[e]),y=Pe("currentPage",()=>e.getCurrentPage(),[e]),v=Pe("currentPageId",()=>e.getCurrentPageId(),[e]),w=Ha(),C=Pe("maxPageCountReached",()=>e.getPages().length>=e.options.maxPages,[e]),E=Pe("isCoarsePointer",()=>e.getInstanceState().isCoarsePointer,[e]),[P,I]=M.useState(!1),k=M.useCallback(()=>{w||I(W=>!W)},[w]),L=M.useRef({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),[O,z]=M.useState(Object.fromEntries(g.map((W,Y)=>[W.id,{y:Y*d,offsetY:0,isSelected:!1}])));M.useLayoutEffect(()=>{z(Object.fromEntries(g.map((W,Y)=>[W.id,{y:Y*d,offsetY:0,isSelected:!1}])))},[d,g]),M.useEffect(()=>{l&&e.timers.requestAnimationFrame(()=>{const W=document.querySelector(`[data-testid="page-menu-item-${v}"]`);if(W){const Y=h.current;if(!Y)return;const oe=W.offsetTop,le=Y.scrollTop;oe<le&&Y.scrollTo({top:oe});const ce=oe+d,Q=Y.scrollTop+Y.offsetHeight;ce>Q&&Y.scrollTo({top:ce-Y.offsetHeight})}})},[d,v,l,e]);const F=M.useCallback(W=>{const{clientY:Y,currentTarget:oe}=W,{dataset:{id:le,index:ce}}=oe;if(!le||!ce)return;const Q=L.current;Uv(W.currentTarget,W),Q.status="pointing",Q.pointing={id:le,index:+ce};const ke=O[le].y;Q.startY=Y,Q.startIndex=Math.max(0,Math.min(Math.round(ke/d),g.length-1))},[d,g.length,O]),H=M.useCallback(W=>{const Y=L.current;if(Y.status==="pointing"){const{clientY:oe}=W,le=oe-Y.startY;Math.abs(le)>5&&(Y.status="dragging")}if(Y.status==="dragging"){const{clientY:oe}=W,le=oe-Y.startY,ce=O[Y.pointing.id],{startIndex:Q,pointing:he}=Y,ke=ce.y+le,te=Math.max(0,Math.min(Math.round(ke/d),g.length-1)),me={...O};if(me[he.id]={y:ce.y,offsetY:le,isSelected:!0},te!==Y.dragIndex){Y.dragIndex=te;for(let Oe=0;Oe<g.length;Oe++){const Ze=g[Oe];if(Ze.id===Y.pointing.id)continue;let{y:De}=me[Ze.id];te===Q?De=Oe*d:te<Q?te<=Oe&&Oe<Q?De=(Oe+1)*d:De=Oe*d:te>Q&&(te>=Oe&&Oe>Q?De=(Oe-1)*d:De=Oe*d),De!==me[Ze.id].y&&(me[Ze.id]={y:De,offsetY:0,isSelected:!0})}}z(me)}},[d,g,O]),V=M.useCallback(W=>{const Y=L.current;if(Y.status==="dragging"){const{id:oe,index:le}=Y.pointing;RA(e,oe,le,Y.dragIndex,t)}$v(W.currentTarget,W),Y.status="idle"},[e,t]),re=M.useCallback(W=>{const Y=L.current;W.key==="Escape"&&(Y.status==="dragging"&&z(Object.fromEntries(g.map((oe,le)=>[oe.id,{y:le*d,offsetY:0,isSelected:!1}]))),Y.status="idle")},[d,g]),q=M.useCallback(()=>{w||(e.run(()=>{e.markHistoryStoppingPoint("creating page");const W=La.createId();e.createPage({name:r("page-menu.new-page-initial-name"),id:W}),e.setCurrentPage(W),I(!0)}),t("new-page",{source:"page-menu"}))},[e,r,w,t]),J=M.useCallback(W=>{e.setCurrentPage(W),t("change-page",{source:"page-menu"})},[e,t]),ie=M.useCallback((W,Y)=>{e.renamePage(W,Y),t("rename-page",{source:"page-menu"})},[e,t]);return m.jsxs(EA,{id:"pages",onOpenChange:c,open:l,children:[m.jsx(_A,{"data-testid":"main.page-menu",children:m.jsxs(Dt,{type:"menu",title:y.name,"data-testid":"page-menu.button",className:"tlui-page-menu__trigger",children:[m.jsx("div",{className:"tlui-page-menu__name",children:y.name}),m.jsx(In,{icon:"chevron-down",small:!0})]})}),m.jsx(PA,{side:"bottom",align:"start",sideOffset:6,disableEscapeKeyDown:P,children:m.jsxs("div",{className:"tlui-page-menu__wrapper",children:[m.jsxs("div",{className:"tlui-page-menu__header",children:[m.jsx("div",{className:"tlui-page-menu__header__title",children:r("page-menu.title")}),!w&&m.jsxs("div",{className:"tlui-buttons__horizontal",children:[m.jsx(Dt,{type:"icon","data-testid":"page-menu.edit",title:r(P?"page-menu.edit-done":"page-menu.edit-start"),onClick:k,children:m.jsx(In,{icon:P?"check":"edit"})}),m.jsx(Dt,{type:"icon","data-testid":"page-menu.create",title:r(C?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:C,onClick:q,children:m.jsx(In,{icon:"plus"})})]})]}),m.jsx("div",{"data-testid":"page-menu.list",className:"tlui-page-menu__list tlui-menu__group",style:{height:d*g.length+4},ref:h,children:g.map((W,Y)=>{const oe=O[W.id]??{position:Y*40,offsetY:0};return P?m.jsxs("div",{"data-testid":"page-menu.item",className:"tlui-page_menu__item__sortable",style:{zIndex:W.id===y.id?888:Y,transform:`translate(0px, ${oe.y+oe.offsetY}px)`},children:[m.jsx(Dt,{type:"icon",tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",onPointerDown:F,onPointerUp:V,onPointerMove:H,onKeyDown:re,"data-id":W.id,"data-index":Y,children:m.jsx(In,{icon:"drag-handle-dots"})}),i<ai.TABLET_SM&&E?m.jsxs(Dt,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>{const le=window.prompt("Rename page",W.name);le&&le!==W.name&&ie(W.id,le)},onDoubleClick:k,children:[m.jsx(IA,{checked:W.id===y.id}),m.jsx(bi,{children:W.name})]}):m.jsx("div",{className:"tlui-page_menu__item__sortable__title",style:{height:d},children:m.jsx(nve,{id:W.id,name:W.name,isCurrentPage:W.id===y.id,onCancel:()=>{I(!1),e.menus.clearOpenMenus()}})}),!w&&m.jsx("div",{className:"tlui-page_menu__item__submenu","data-isediting":P,children:m.jsx(cK,{index:Y,item:W,listSize:g.length})})]},W.id+"_editing"):m.jsxs("div",{"data-testid":"page-menu.item",className:"tlui-page-menu__item",children:[m.jsxs(Dt,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>J(W.id),onDoubleClick:k,title:r("page-menu.go-to-page"),children:[m.jsx(IA,{checked:W.id===y.id}),m.jsx(bi,{children:W.name})]}),!w&&m.jsx("div",{className:"tlui-page_menu__item__submenu",children:m.jsx(cK,{index:Y,item:W,listSize:g.length,onRename:()=>{if(xr.isIos){const le=window.prompt("Rename page",W.name);le&&le!==W.name&&ie(W.id,le)}else I(!0),v!==W.id&&J(W.id)}})})]},W.id)})})]})})]})});function ive(){const n=xe(),e=Ha(),t=Pe("should display quick actions",()=>n.isInAny("select","hand","zoom"),[n]);if(!(e&&!t))return m.jsxs(m.Fragment,{children:[m.jsx(sve,{}),m.jsx(ove,{})]})}function ove(){const n=Rs(1),e=ld(),t=n&&e;return m.jsxs(m.Fragment,{children:[m.jsx(Ne,{actionId:"delete",disabled:!t}),m.jsx(Ne,{actionId:"duplicate",disabled:!t})]})}function sve(){const n=CV(),e=bV();return m.jsxs(m.Fragment,{children:[m.jsx(Ne,{actionId:"undo",disabled:!n}),m.jsx(Ne,{actionId:"redo",disabled:!e})]})}const ave=M.memo(function({children:e}){const t=e??m.jsx(ive,{});return m.jsx(yl,{type:"small-icons",sourceId:"quick-actions",children:t})});function lve({userId:n}){const e=Wb(n);return e?m.jsx("div",{className:"tlui-people-menu__avatar",style:{backgroundColor:e.color},children:e.userName==="New User"?"":e.userName[0]??""},n):null}const cve=bo(function({userId:e}){const t=xe(),r=An(),i=_o(),s=Wb(e),l=M.useCallback(()=>{t.getInstanceState().followingUserId===e?(t.stopFollowingUser(),i("stop-following",{source:"people-menu"})):(t.startFollowingUser(e),i("start-following",{source:"people-menu"}))},[t,e,i]),c=(s==null?void 0:s.followingUserId)===t.user.getId(),d=t.getInstanceState().followingUserId===e;return s?m.jsxs("div",{className:"tlui-people-menu__item tlui-buttons__horizontal",children:[m.jsxs(Dt,{type:"menu",className:"tlui-people-menu__item__button",onClick:()=>t.zoomToUser(e),onDoubleClick:l,children:[m.jsx(Qc,{icon:"color",color:s.color}),m.jsx("div",{className:"tlui-people-menu__name",children:s.userName??"New User"})]}),m.jsx(Dt,{type:"icon",className:"tlui-people-menu__item__follow",title:r(c?"people-menu.leading":d?"people-menu.following":"people-menu.follow"),onClick:l,disabled:c,"data-active":d||c,children:m.jsx(In,{icon:c?"leading":d?"following":"follow"})})]}):null});function uve({count:n}){return m.jsx("div",{className:"tlui-people-menu__more",children:"+"+Math.abs(n)})}const dve=bo(function(){const e=xe(),t=Hi(),r=An(),i=_o(),s=M.useRef(!1),[l,c]=M.useState(!1),d=M.useCallback(E=>{c(E)},[]),h=e.user.getColor(),g=M.useCallback(E=>{e.user.updateUserPreferences({color:E}),i("set-color",{source:"people-menu"})},[e,i]),{handleButtonClick:y,handleButtonPointerDown:v,handleButtonPointerEnter:w,handleButtonPointerUp:C}=zt.useMemo(()=>{const E=()=>{s.current=!1,window.removeEventListener("pointerup",E)};return{handleButtonClick:O=>{const{id:z}=O.currentTarget.dataset;z&&h!==z&&g(z)},handleButtonPointerDown:O=>{const{id:z}=O.currentTarget.dataset;z&&(g(z),s.current=!0,window.addEventListener("pointerup",E))},handleButtonPointerEnter:O=>{if(!s.current)return;const{id:z}=O.currentTarget.dataset;z&&g(z)},handleButtonPointerUp:O=>{const{id:z}=O.currentTarget.dataset;z&&g(z)}}},[h,g]);return m.jsxs(xA,{onOpenChange:d,open:l,children:[m.jsx(wA,{dir:"ltr",asChild:!0,children:m.jsx(Dt,{type:"icon",className:"tlui-people-menu__user__color",style:{color:e.user.getColor()},title:r("people-menu.change-color"),children:m.jsx(In,{icon:"color"})})}),m.jsx(bA,{container:t,children:m.jsx(CA,{dir:"ltr",className:"tlui-menu tlui-people-menu__user__color-picker",align:"start",side:"left",sideOffset:8,children:m.jsx("div",{className:"tlui-buttons__grid",children:_k.map(E=>m.jsx(Dt,{type:"icon","data-id":E,"data-testid":E,"aria-label":E,"data-state":h===E?"hinted":void 0,title:E,className:"tlui-button-grid__button",style:{color:E},onPointerEnter:w,onPointerDown:v,onPointerUp:C,onClick:y,children:m.jsx(In,{icon:"color"})},E))})})})]})});function fve(){const n=xe(),e=_o(),t=Pe("userName",()=>n.user.getName(),[]),r=An(),i=M.useRef(t),s=M.useRef(t),[l,c]=M.useState(!1),d=M.useCallback(()=>{c(v=>!v)},[]),h=M.useCallback(v=>{s.current=v,n.user.updateUserPreferences({name:v})},[n]),g=M.useCallback(()=>{i.current!==s.current&&(e("change-user-name",{source:"people-menu"}),i.current=s.current)},[e]),y=M.useCallback(()=>{c(!1),n.user.updateUserPreferences({name:i.current}),n.menus.clearOpenMenus()},[n]);return m.jsxs("div",{className:"tlui-people-menu__user",children:[m.jsx(dve,{}),l?m.jsx(Z0,{className:"tlui-people-menu__user__input",defaultValue:t,onValueChange:h,onComplete:d,onCancel:y,onBlur:g,shouldManuallyMaintainScrollPositionWhenFocused:!0,autoFocus:!0,autoSelect:!0}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"tlui-people-menu__user__name",onDoubleClick:()=>{l||c(!0)},children:t}),t==="New User"?m.jsx("div",{className:"tlui-people-menu__user__label",children:r("people-menu.user")}):null]}),m.jsx(Dt,{type:"icon",className:"tlui-people-menu__user__edit","data-testid":"people-menu.change-name",title:r("people-menu.change-name"),onClick:d,children:m.jsx(In,{icon:l?"check":"edit"})})]})}function hve({displayUserWhenAlone:n,children:e}){const t=An(),r=Hi(),i=xe(),s=Az(),l=Pe("user",()=>i.user.getColor(),[i]),c=Pe("user",()=>i.user.getName(),[i]),[d,h]=id("people menu");return m.jsxs(xA,{onOpenChange:h,open:d,children:[m.jsx(wA,{dir:"ltr",asChild:!0,children:m.jsxs("button",{className:"tlui-people-menu__avatars-button",title:t("people-menu.title"),children:[s.length>5&&m.jsx(uve,{count:s.length-5}),m.jsxs("div",{className:"tlui-people-menu__avatars",children:[s.slice(-5).map(g=>m.jsx(lve,{userId:g},g)),(n||s.length>0)&&m.jsx("div",{className:"tlui-people-menu__avatar",style:{backgroundColor:l},children:c==="New User"?"":c[0]??""})]})]})}),m.jsx(bA,{container:r,children:m.jsx(CA,{dir:"ltr",className:"tlui-menu",side:"bottom",sideOffset:2,collisionPadding:4,onEscapeKeyDown:mn,children:m.jsxs("div",{className:"tlui-people-menu__wrapper",children:[m.jsx("div",{className:"tlui-people-menu__section",children:m.jsx(fve,{})}),s.length>0&&m.jsx("div",{className:"tlui-people-menu__section",children:s.map(g=>m.jsx(cve,{userId:g},g+"_presence"))}),e]})})})]})}function pve(){return m.jsx("div",{className:"tlui-share-zone",draggable:!1,children:m.jsx(hve,{displayUserWhenAlone:!0})})}const gve=Object.freeze([ja,Bh,Hh,Hc]);function uK(n=gve){const e=xe();return Pe("getRelevantStyles",()=>{var s;const t=new Wk(e.getSharedStyles()),r=!!((s=e.root.getCurrent())!=null&&s.shapeType),i=e.isIn("select")&&e.getSelectedShapeIds().length>0;if(t.size===0&&e.isIn("select")&&e.getSelectedShapeIds().length===0)for(const l of n)t.applyValue(l,e.getStyleForNextShape(l));return r||i||t.size>0?t:null},[e])}const bl={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],textAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],horizontalAlign:[{value:"start",icon:"horizontal-align-start"},{value:"middle",icon:"horizontal-align-middle"},{value:"end",icon:"horizontal-align-end"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-middle"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"star",icon:"geo-star"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"cloud",icon:"geo-cloud"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"},{value:"heart",icon:"geo-heart"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]},lp=M.memo(function(e){const{uiType:t,items:r,title:i,style:s,value:l,onValueChange:c,onHistoryMark:d,theme:h}=e,g=An(),y=M.useRef(!1),v=M.useRef(null),{handleButtonClick:w,handleButtonPointerDown:C,handleButtonPointerEnter:E,handleButtonPointerUp:P}=M.useMemo(()=>{const I=()=>{y.current=!1,window.removeEventListener("pointerup",I);const F=v.current;F&&["TEXTAREA","INPUT"].includes(F.nodeName)&&F.focus(),v.current=null};return{handleButtonClick:F=>{const{id:H}=F.currentTarget.dataset;l.type==="shared"&&l.value===H||(d==null||d("point picker item"),c(s,H))},handleButtonPointerDown:F=>{const{id:H}=F.currentTarget.dataset;d==null||d("point picker item"),c(s,H),y.current=!0,v.current=document.activeElement,window.addEventListener("pointerup",I)},handleButtonPointerEnter:F=>{if(!y.current)return;const{id:H}=F.currentTarget.dataset;c(s,H)},handleButtonPointerUp:F=>{const{id:H}=F.currentTarget.dataset;l.type==="shared"&&l.value===H||c(s,H)}}},[l,d,c,s]);return m.jsx("div",{"data-testid":`style.${t}`,className:It("tlui-buttons__grid"),children:r.map(I=>m.jsx(Dt,{type:"icon","data-id":I.value,"data-testid":`style.${t}.${I.value}`,"aria-label":I.value,"data-state":l.type==="shared"&&l.value===I.value?"hinted":void 0,title:i+"  "+g(`${t}-style.${I.value}`),className:It("tlui-button-grid__button"),style:s===ja?{color:h[I.value].solid}:void 0,onPointerEnter:E,onPointerDown:C,onPointerUp:P,onClick:w,children:m.jsx(In,{icon:I.icon})},I.value))})});function dK(n,[e,t]){return Math.min(t,Math.max(e,n))}function mve(n){const e=M.useRef({value:n,previous:n});return M.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var fK=["PageUp","PageDown"],hK=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pK={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},pm="Slider",[MA,yve,vve]=v0(pm),[gK,mEe]=Gc(pm,[vve]),[Sve,nC]=gK(pm),mK=M.forwardRef((n,e)=>{const{name:t,min:r=0,max:i=100,step:s=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[r],value:g,onValueChange:y=()=>{},onValueCommit:v=()=>{},inverted:w=!1,form:C,...E}=n,P=M.useRef(new Set),I=M.useRef(0),L=l==="horizontal"?xve:wve,[O=[],z]=kf({prop:g,defaultProp:h,onChange:J=>{var W;(W=[...P.current][I.current])==null||W.focus(),y(J)}}),F=M.useRef(O);function H(J){const ie=Pve(O,J);q(J,ie)}function V(J){q(J,I.current)}function re(){const J=F.current[I.current];O[I.current]!==J&&v(O)}function q(J,ie,{commit:W}={commit:!1}){const Y=Rve(s),oe=Mve(Math.round((J-r)/s)*s+r,Y),le=dK(oe,[r,i]);z((ce=[])=>{const Q=Eve(ce,le,ie);if(kve(Q,d*s)){I.current=Q.indexOf(le);const he=String(Q)!==String(ce);return he&&W&&v(Q),he?Q:ce}else return ce})}return m.jsx(Sve,{scope:n.__scopeSlider,name:t,disabled:c,min:r,max:i,valueIndexToChangeRef:I,thumbs:P.current,values:O,orientation:l,form:C,children:m.jsx(MA.Provider,{scope:n.__scopeSlider,children:m.jsx(MA.Slot,{scope:n.__scopeSlider,children:m.jsx(L,{"aria-disabled":c,"data-disabled":c?"":void 0,...E,ref:e,onPointerDown:bt(E.onPointerDown,()=>{c||(F.current=O)}),min:r,max:i,inverted:w,onSlideStart:c?void 0:H,onSlideMove:c?void 0:V,onSlideEnd:c?void 0:re,onHomeKeyDown:()=>!c&&q(r,0,{commit:!0}),onEndKeyDown:()=>!c&&q(i,O.length-1,{commit:!0}),onStepKeyDown:({event:J,direction:ie})=>{if(!c){const oe=fK.includes(J.key)||J.shiftKey&&hK.includes(J.key)?10:1,le=I.current,ce=O[le],Q=s*oe*ie;q(ce+Q,le,{commit:!0})}}})})})})});mK.displayName=pm;var[yK,vK]=gK(pm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),xve=M.forwardRef((n,e)=>{const{min:t,max:r,dir:i,inverted:s,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:h,...g}=n,[y,v]=M.useState(null),w=Tr(e,L=>v(L)),C=M.useRef(void 0),E=fR(i),P=E==="ltr",I=P&&!s||!P&&s;function k(L){const O=C.current||y.getBoundingClientRect(),z=[0,O.width],H=OA(z,I?[t,r]:[r,t]);return C.current=O,H(L-O.left)}return m.jsx(yK,{scope:n.__scopeSlider,startEdge:I?"left":"right",endEdge:I?"right":"left",direction:I?1:-1,size:"width",children:m.jsx(SK,{dir:E,"data-orientation":"horizontal",...g,ref:w,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:L=>{const O=k(L.clientX);l==null||l(O)},onSlideMove:L=>{const O=k(L.clientX);c==null||c(O)},onSlideEnd:()=>{C.current=void 0,d==null||d()},onStepKeyDown:L=>{const z=pK[I?"from-left":"from-right"].includes(L.key);h==null||h({event:L,direction:z?-1:1})}})})}),wve=M.forwardRef((n,e)=>{const{min:t,max:r,inverted:i,onSlideStart:s,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...h}=n,g=M.useRef(null),y=Tr(e,g),v=M.useRef(void 0),w=!i;function C(E){const P=v.current||g.current.getBoundingClientRect(),I=[0,P.height],L=OA(I,w?[r,t]:[t,r]);return v.current=P,L(E-P.top)}return m.jsx(yK,{scope:n.__scopeSlider,startEdge:w?"bottom":"top",endEdge:w?"top":"bottom",size:"height",direction:w?1:-1,children:m.jsx(SK,{"data-orientation":"vertical",...h,ref:y,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:E=>{const P=C(E.clientY);s==null||s(P)},onSlideMove:E=>{const P=C(E.clientY);l==null||l(P)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:E=>{const I=pK[w?"from-bottom":"from-top"].includes(E.key);d==null||d({event:E,direction:I?-1:1})}})})}),SK=M.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:d,...h}=n,g=nC(pm,t);return m.jsx(Vn.span,{...h,ref:e,onKeyDown:bt(n.onKeyDown,y=>{y.key==="Home"?(l(y),y.preventDefault()):y.key==="End"?(c(y),y.preventDefault()):fK.concat(hK).includes(y.key)&&(d(y),y.preventDefault())}),onPointerDown:bt(n.onPointerDown,y=>{const v=y.target;v.setPointerCapture(y.pointerId),y.preventDefault(),g.thumbs.has(v)?v.focus():r(y)}),onPointerMove:bt(n.onPointerMove,y=>{y.target.hasPointerCapture(y.pointerId)&&i(y)}),onPointerUp:bt(n.onPointerUp,y=>{const v=y.target;v.hasPointerCapture(y.pointerId)&&(v.releasePointerCapture(y.pointerId),s(y))})})}),xK="SliderTrack",wK=M.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=nC(xK,t);return m.jsx(Vn.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});wK.displayName=xK;var AA="SliderRange",bK=M.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=nC(AA,t),s=vK(AA,t),l=M.useRef(null),c=Tr(e,l),d=i.values.length,h=i.values.map(v=>EK(v,i.min,i.max)),g=d>1?Math.min(...h):0,y=100-Math.max(...h);return m.jsx(Vn.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:c,style:{...n.style,[s.startEdge]:g+"%",[s.endEdge]:y+"%"}})});bK.displayName=AA;var DA="SliderThumb",CK=M.forwardRef((n,e)=>{const t=yve(n.__scopeSlider),[r,i]=M.useState(null),s=Tr(e,c=>i(c)),l=M.useMemo(()=>r?t().findIndex(c=>c.ref.current===r):-1,[t,r]);return m.jsx(bve,{...n,ref:s,index:l})}),bve=M.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:i,...s}=n,l=nC(DA,t),c=vK(DA,t),[d,h]=M.useState(null),g=Tr(e,k=>h(k)),y=d?l.form||!!d.closest("form"):!0,v=d8(d),w=l.values[r],C=w===void 0?0:EK(w,l.min,l.max),E=_ve(r,l.values.length),P=v==null?void 0:v[c.size],I=P?Tve(P,C,c.direction):0;return M.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),m.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${C}% + ${I}px)`},children:[m.jsx(MA.ItemSlot,{scope:n.__scopeSlider,children:m.jsx(Vn.span,{role:"slider","aria-label":n["aria-label"]||E,"aria-valuemin":l.min,"aria-valuenow":w,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...s,ref:g,style:w===void 0?{display:"none"}:n.style,onFocus:bt(n.onFocus,()=>{l.valueIndexToChangeRef.current=r})})}),y&&m.jsx(Cve,{name:i??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:w},r)]})});CK.displayName=DA;var Cve=n=>{const{value:e,...t}=n,r=M.useRef(null),i=mve(e);return M.useEffect(()=>{const s=r.current,l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==e&&d){const h=new Event("input",{bubbles:!0});d.call(s,e),s.dispatchEvent(h)}},[i,e]),m.jsx("input",{style:{display:"none"},...t,ref:r,defaultValue:e})};function Eve(n=[],e,t){const r=[...n];return r[t]=e,r.sort((i,s)=>i-s)}function EK(n,e,t){const s=100/(t-e)*(n-e);return dK(s,[0,100])}function _ve(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function Pve(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),r=Math.min(...t);return t.indexOf(r)}function Tve(n,e,t){const r=n/2,s=OA([0,50],[0,r]);return(r-s(e)*t)*t}function Ive(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function kve(n,e){if(e>0){const t=Ive(n);return Math.min(...t)>=e}return!0}function OA(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function Rve(n){return(String(n).split(".")[1]||"").length}function Mve(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var Ave=mK,Dve=wK,Ove=bK,jve=CK;const Lve=M.memo(function({onHistoryMark:e,title:t,steps:r,value:i,label:s,onValueChange:l,["data-testid"]:c}){const d=An(),h=M.useCallback(v=>{l(v[0])},[l]),g=M.useCallback(()=>{e("click slider")},[e]),y=M.useCallback(()=>{i&&l(i)},[i,l]);return m.jsx("div",{className:"tlui-slider__container",children:m.jsxs(Ave,{"data-testid":c,className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:r,step:1,value:i?[i]:void 0,onPointerDown:g,onValueChange:h,onPointerUp:y,title:t+"  "+d(s),children:[m.jsx(Dve,{className:"tlui-slider__track",dir:"ltr",children:i!==null&&m.jsx(Ove,{className:"tlui-slider__range",dir:"ltr"})}),i!==null&&m.jsx(jve,{className:"tlui-slider__thumb",dir:"ltr"})]})})});function Nve({label:n,uiTypeA:e,uiTypeB:t,labelA:r,labelB:i,itemsA:s,itemsB:l,styleA:c,styleB:d,valueA:h,valueB:g,onValueChange:y}){const v=An(),w=M.useMemo(()=>{var E;return((E=s.find(P=>h.type==="shared"&&h.value===P.value))==null?void 0:E.icon)??"mixed"},[s,h]),C=M.useMemo(()=>{var E;return((E=l.find(P=>g.type==="shared"&&g.value===P.value))==null?void 0:E.icon)??"mixed"},[l,g]);return h===void 0&&g===void 0?null:m.jsxs("div",{className:"tlui-style-panel__double-select-picker",children:[m.jsx("div",{title:v(n),className:"tlui-style-panel__double-select-picker-label",children:v(n)}),m.jsxs("div",{className:"tlui-buttons__horizontal",children:[m.jsxs(rp,{id:`style panel ${e} A`,children:[m.jsx(ip,{children:m.jsx(Dt,{type:"icon","data-testid":`style.${e}`,title:v(r)+"  "+(h===null||h.type==="mixed"?v("style-panel.mixed"):v(`${e}-style.${h.value}`)),children:m.jsx(In,{icon:w,small:!0,invertIcon:!0})})}),m.jsx(op,{side:"left",align:"center",sideOffset:80,alignOffset:0,children:m.jsx("div",{className:"tlui-buttons__grid",children:s.map((E,P)=>m.jsx(xS,{"data-testid":`style.${e}.${E.value}`,children:m.jsx(Dt,{type:"icon",onClick:()=>y(c,E.value),title:`${v(r)}  ${v(`${e}-style.${E.value}`)}`,children:m.jsx(In,{icon:E.icon,invertIcon:!0})},E.value)},P))})})]}),m.jsxs(rp,{id:`style panel ${t}`,children:[m.jsx(ip,{children:m.jsx(Dt,{type:"icon","data-testid":`style.${t}`,title:v(i)+"  "+(g===null||g.type==="mixed"?v("style-panel.mixed"):v(`${t}-style.${g.value}`)),children:m.jsx(In,{icon:C,small:!0})})}),m.jsx(op,{side:"left",align:"center",sideOffset:116,alignOffset:0,children:m.jsx("div",{className:"tlui-buttons__grid",children:l.map(E=>m.jsx(xS,{children:m.jsx(Dt,{type:"icon",title:`${v(i)}  ${v(`${t}-style.${E.value}`)}`,"data-testid":`style.${t}.${E.value}`,onClick:()=>y(d,E.value),children:m.jsx(In,{icon:E.icon})})},E.value))})})]})]})]})}const Fve=M.memo(Nve);function zve({id:n,label:e,uiType:t,stylePanelType:r,style:i,items:s,type:l,value:c,onValueChange:d}){const h=An(),g=xe(),y=M.useMemo(()=>{var E;return(E=s.find(P=>c.type==="shared"&&P.value===c.value))==null?void 0:E.icon},[s,c]),v=h(`style-panel.${r}`),w=c.type==="mixed"?h("style-panel.mixed"):v+"  "+h(`${t}-style.${c.value}`),C=e?h(e):"";return m.jsxs(rp,{id:`style panel ${n}`,children:[m.jsx(ip,{children:m.jsxs(Dt,{type:l,"data-testid":`style.${t}`,title:w,children:[C&&m.jsx(bi,{children:C}),m.jsx(In,{icon:y??"mixed"})]})}),m.jsx(op,{side:"left",align:"center",alignOffset:0,children:m.jsx("div",{className:"tlui-buttons__grid",children:s.map(E=>m.jsx(xS,{children:m.jsx(Dt,{type:"icon","data-testid":`style.${t}.${E.value}`,title:v+"  "+h(`${t}-style.${E.value}`),onClick:()=>{g.markHistoryStoppingPoint("select style dropdown item"),d(i,E.value)},children:m.jsx(In,{icon:E.icon})})},E.value))})})]})}const jA=M.memo(zve);function Uve({styles:n}){const e=Qv();if(!n)return null;const t=n.get(ql),r=n.get(wb),i=n.get(xb),s=n.get(Tb),l=n.get(Bc),c=t===void 0,d=r===void 0&&i===void 0,h=s===void 0,g=l===void 0,y=Vu({isDarkMode:e});return m.jsxs(m.Fragment,{children:[m.jsx($ve,{theme:y,styles:n}),!g&&m.jsx(Bve,{theme:y,styles:n}),!(c&&d&&h)&&m.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[m.jsx(Hve,{styles:n}),m.jsx(Kve,{styles:n}),m.jsx(Vve,{styles:n})]})]})}function RS(){const n=xe(),e=_o();return zt.useMemo(()=>function(r,i){n.run(()=>{n.isIn("select")&&n.setStyleForSelectedShapes(r,i),n.setStyleForNextShapes(r,i),n.updateInstanceState({isChangingStyle:!0})}),e("set-style",{source:"style-panel",id:r.id,value:i})},[n,e])}function $ve({styles:n,theme:e}){const t=An(),r=xe(),i=M.useCallback(y=>r.markHistoryStoppingPoint(y),[r]),s=RS(),l=n.get(ja),c=n.get(Hh),d=n.get(Bh),h=n.get(Hc),g=c!==void 0||d!==void 0||h!==void 0;return m.jsxs(m.Fragment,{children:[m.jsxs("div",{tabIndex:-1,className:"tlui-style-panel__section__common","aria-label":"style panel styles","data-testid":"style.panel",children:[l===void 0?null:m.jsx(lp,{title:t("style-panel.color"),uiType:"color",style:ja,items:bl.color,value:l,onValueChange:s,theme:e,onHistoryMark:i}),m.jsx(Wve,{})]}),g&&m.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[c===void 0?null:m.jsx(lp,{title:t("style-panel.fill"),uiType:"fill",style:Hh,items:bl.fill,value:c,onValueChange:s,theme:e,onHistoryMark:i}),d===void 0?null:m.jsx(lp,{title:t("style-panel.dash"),uiType:"dash",style:Bh,items:bl.dash,value:d,onValueChange:s,theme:e,onHistoryMark:i}),h===void 0?null:m.jsx(lp,{title:t("style-panel.size"),uiType:"size",style:Hc,items:bl.size,value:h,onValueChange:(y,v)=>{s(y,v);const w=r.getSelectedShapeIds();w.length>0&&Ir(r,w)},theme:e,onHistoryMark:i})]})]})}function Bve({theme:n,styles:e}){const t=An(),r=RS(),i=xe(),s=M.useCallback(g=>i.markHistoryStoppingPoint(g),[i]),l=e.get(Bc),c=e.get($P),d=e.get(Eb),h=e.get(_b);return l===void 0&&d===void 0?null:m.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[l===void 0?null:m.jsx(lp,{title:t("style-panel.font"),uiType:"font",style:Bc,items:bl.font,value:l,onValueChange:r,theme:n,onHistoryMark:s}),c===void 0?null:m.jsxs("div",{className:"tlui-style-panel__row",children:[m.jsx(lp,{title:t("style-panel.align"),uiType:"align",style:$P,items:bl.textAlign,value:c,onValueChange:r,theme:n,onHistoryMark:s}),m.jsx("div",{className:"tlui-style-panel__row__extra-button",children:m.jsx(Dt,{type:"icon",title:t("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:m.jsx(In,{icon:"vertical-align-middle"})})})]}),d===void 0?null:m.jsxs("div",{className:"tlui-style-panel__row",children:[m.jsx(lp,{title:t("style-panel.label-align"),uiType:"align",style:Eb,items:bl.horizontalAlign,value:d,onValueChange:r,theme:n,onHistoryMark:s}),m.jsx("div",{className:"tlui-style-panel__row__extra-button",children:h===void 0?m.jsx(Dt,{type:"icon",title:t("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:m.jsx(In,{icon:"vertical-align-middle"})}):m.jsx(jA,{type:"icon",id:"geo-vertical-alignment",uiType:"verticalAlign",stylePanelType:"vertical-align",style:_b,items:bl.verticalAlign,value:h,onValueChange:r})})]})]})}function Hve({styles:n}){const e=RS(),t=n.get(ql);return t===void 0?null:m.jsx(jA,{id:"geo",type:"menu",label:"style-panel.geo",uiType:"geo",stylePanelType:"geo",style:ql,items:bl.geo,value:t,onValueChange:e})}function Vve({styles:n}){const e=RS(),t=n.get(Tb);return t===void 0?null:m.jsx(jA,{id:"spline",type:"menu",label:"style-panel.spline",uiType:"spline",stylePanelType:"spline",style:Tb,items:bl.spline,value:t,onValueChange:e})}function Kve({styles:n}){const e=RS(),t=n.get(wb),r=n.get(xb);return!t||!r?null:m.jsx(Fve,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:xb,itemsA:bl.arrowheadStart,valueA:r,uiTypeB:"arrowheadEnd",styleB:wb,itemsB:bl.arrowheadEnd,valueB:t,onValueChange:e,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"})}const MS=[.1,.25,.5,.75,1];function Wve(){const n=xe(),e=M.useCallback(c=>n.markHistoryStoppingPoint(c),[n]),t=Pe("opacity",()=>n.getSharedOpacity(),[n]),r=_o(),i=An(),s=zt.useCallback(c=>{const d=MS[c];n.run(()=>{n.isIn("select")&&n.setOpacityForSelectedShapes(d),n.setOpacityForNextShapes(d),n.updateInstanceState({isChangingStyle:!0})}),r("set-style",{source:"style-panel",id:"opacity",value:c})},[n,r]);if(t===void 0)return null;const l=t.type==="mixed"?-1:MS.indexOf(qY(MS,c=>Math.abs(c-t.value)));return m.jsx(Lve,{"data-testid":"style.opacity",value:l>=0?l:MS.length-1,label:t.type==="mixed"?"style-panel.mixed":`opacity-style.${t.value}`,onValueChange:s,steps:MS.length-1,title:i("style-panel.opacity"),onHistoryMark:e})}const Gve=M.memo(function({isMobile:e,children:t}){const r=xe(),i=M.useRef(null);bf(i);const s=uK(),l=M.useCallback(()=>{e||r.updateInstanceState({isChangingStyle:!1})},[r,e]),c=t??m.jsx(Uve,{styles:s});return m.jsx("div",{ref:i,className:It("tlui-style-panel",{"tlui-style-panel__wrapper":!e}),"data-ismobile":e,onPointerLeave:l,children:c})});function qve(){const n=xe(),e=An(),t=uK(),r=t==null?void 0:t.get(ja),i=Vu({isDarkMode:n.user.getIsDarkMode()}),s=((r==null?void 0:r.type)==="shared"?i[r.value]:i.black).solid,l=Pe("disable style panel",()=>n.isInAny("hand","zoom","eraser","laser"),[n]),c=M.useCallback(h=>{h||n.updateInstanceState({isChangingStyle:!1})},[n]),{StylePanel:d}=Of();return d?m.jsxs(EA,{id:"mobile style menu",onOpenChange:c,children:[m.jsx(_A,{children:m.jsx(Dt,{type:"tool","data-testid":"mobile-styles.button",style:{color:l?"var(--color-muted-1)":s},title:e("style-panel.title"),disabled:l,children:m.jsx(In,{icon:l?"blob":(r==null?void 0:r.type)==="mixed"?"mixed":"blob"})})}),m.jsx(PA,{side:"top",align:"end",children:d&&m.jsx(d,{isMobile:!0})})]}):null}function Yve(){return m.jsxs(m.Fragment,{children:[m.jsx(Zve,{}),m.jsx(Qve,{}),m.jsx(Jve,{}),m.jsx(eSe,{}),m.jsx(tSe,{}),m.jsx(nSe,{}),m.jsx(rSe,{}),m.jsx(iSe,{}),m.jsx(oSe,{}),m.jsx(sSe,{}),m.jsx(lSe,{}),m.jsx(aSe,{}),m.jsx(dSe,{}),m.jsx(pSe,{}),m.jsx(cSe,{}),m.jsx(hSe,{}),m.jsx(fSe,{}),m.jsx(uSe,{}),m.jsx(gSe,{}),m.jsx(mSe,{}),m.jsx(ySe,{}),m.jsx(vSe,{}),m.jsx(SSe,{}),m.jsx(xSe,{}),m.jsx(wSe,{}),m.jsx(bSe,{}),m.jsx(ESe,{}),m.jsx(CSe,{})]})}function Xve(n){var r;const e=xe(),t=(r=n.meta)==null?void 0:r.geo;return Pe("is tool selected",()=>{const i=e.getCurrentToolId(),s=e.getSharedStyles().getAsKnownValue(ql);return t?i==="geo"&&s===t:i===n.id},[e,n.id,t])}function wr({tool:n}){const e=AM(),t=Xve(e[n]);return m.jsx(ua,{toolId:n,isSelected:t})}function Zve(){return m.jsx(wr,{tool:"select"})}function Qve(){return m.jsx(wr,{tool:"hand"})}function Jve(){return m.jsx(wr,{tool:"draw"})}function eSe(){return m.jsx(wr,{tool:"eraser"})}function tSe(){return m.jsx(wr,{tool:"arrow"})}function nSe(){return m.jsx(wr,{tool:"text"})}function rSe(){return m.jsx(wr,{tool:"note"})}function iSe(){return m.jsx(ua,{toolId:"asset"})}function oSe(){return m.jsx(wr,{tool:"rectangle"})}function sSe(){return m.jsx(wr,{tool:"ellipse"})}function aSe(){return m.jsx(wr,{tool:"diamond"})}function lSe(){return m.jsx(wr,{tool:"triangle"})}function cSe(){return m.jsx(wr,{tool:"rhombus"})}function uSe(){return m.jsx(wr,{tool:"heart"})}function dSe(){return m.jsx(wr,{tool:"hexagon"})}function fSe(){return m.jsx(wr,{tool:"cloud"})}function hSe(){return m.jsx(wr,{tool:"star"})}function pSe(){return m.jsx(wr,{tool:"oval"})}function gSe(){return m.jsx(wr,{tool:"x-box"})}function mSe(){return m.jsx(wr,{tool:"check-box"})}function ySe(){return m.jsx(wr,{tool:"arrow-left"})}function vSe(){return m.jsx(wr,{tool:"arrow-up"})}function SSe(){return m.jsx(wr,{tool:"arrow-down"})}function xSe(){return m.jsx(wr,{tool:"arrow-right"})}function wSe(){return m.jsx(wr,{tool:"line"})}function bSe(){return m.jsx(wr,{tool:"highlight"})}function CSe(){return m.jsx(wr,{tool:"frame"})}function ESe(){return m.jsx(wr,{tool:"laser"})}const LA=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function NA(n,e,t,r){n.addEventListener?n.addEventListener(e,t,r):n.attachEvent&&n.attachEvent("on".concat(e),t)}function AS(n,e,t,r){n.removeEventListener?n.removeEventListener(e,t,r):n.detachEvent&&n.detachEvent("on".concat(e),t)}function _K(n,e){const t=e.slice(0,e.length-1);for(let r=0;r<t.length;r++)t[r]=n[t[r].toLowerCase()];return t}function PK(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");const e=n.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function _Se(n,e){const t=n.length>=e.length?n:e,r=n.length>=e.length?e:n;let i=!0;for(let s=0;s<t.length;s++)r.indexOf(t[s])===-1&&(i=!1);return i}const DS={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":LA?173:189,"=":LA?61:187,";":LA?59:186,"'":222,"[":219,"]":221,"\\":220},iu={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},rC={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Io={16:!1,18:!1,17:!1,91:!1},Qr={};for(let n=1;n<20;n++)DS["f".concat(n)]=111+n;let Kr=[],OS=null,TK="all";const ud=new Map,jS=n=>DS[n.toLowerCase()]||iu[n.toLowerCase()]||n.toUpperCase().charCodeAt(0),PSe=n=>Object.keys(DS).find(e=>DS[e]===n),TSe=n=>Object.keys(iu).find(e=>iu[e]===n);function IK(n){TK=n||"all"}function LS(){return TK||"all"}function ISe(){return Kr.slice(0)}function kSe(){return Kr.map(n=>PSe(n)||TSe(n)||String.fromCharCode(n))}function RSe(){const n=[];return Object.keys(Qr).forEach(e=>{Qr[e].forEach(t=>{let{key:r,scope:i,mods:s,shortcut:l}=t;n.push({scope:i,shortcut:l,mods:s,keys:r.split("+").map(c=>jS(c))})})}),n}function MSe(n){const e=n.target||n.srcElement,{tagName:t}=e;let r=!0;const i=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(r=!1),r}function ASe(n){return typeof n=="string"&&(n=jS(n)),Kr.indexOf(n)!==-1}function DSe(n,e){let t,r;n||(n=LS());for(const i in Qr)if(Object.prototype.hasOwnProperty.call(Qr,i))for(t=Qr[i],r=0;r<t.length;)t[r].scope===n?t.splice(r,1).forEach(l=>{let{element:c}=l;return FA(c)}):r++;LS()===n&&IK(e||"all")}function OSe(n){let e=n.keyCode||n.which||n.charCode;const t=Kr.indexOf(e);if(t>=0&&Kr.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&Kr.splice(0,Kr.length),(e===93||e===224)&&(e=91),e in Io){Io[e]=!1;for(const r in iu)iu[r]===e&&(fa[r]=!1)}}function kK(n){if(typeof n>"u")Object.keys(Qr).forEach(i=>{Array.isArray(Qr[i])&&Qr[i].forEach(s=>iC(s)),delete Qr[i]}),FA(null);else if(Array.isArray(n))n.forEach(i=>{i.key&&iC(i)});else if(typeof n=="object")n.key&&iC(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];let[i,s]=t;typeof i=="function"&&(s=i,i=""),iC({key:n,scope:i,method:s,splitKey:"+"})}}const iC=n=>{let{key:e,scope:t,method:r,splitKey:i="+"}=n;PK(e).forEach(l=>{const c=l.split(i),d=c.length,h=c[d-1],g=h==="*"?"*":jS(h);if(!Qr[g])return;t||(t=LS());const y=d>1?_K(iu,c):[],v=[];Qr[g]=Qr[g].filter(w=>{const E=(r?w.method===r:!0)&&w.scope===t&&_Se(w.mods,y);return E&&v.push(w.element),!E}),v.forEach(w=>FA(w))})};function RK(n,e,t,r){if(e.element!==r)return;let i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(const s in Io)Object.prototype.hasOwnProperty.call(Io,s)&&(!Io[s]&&e.mods.indexOf(+s)>-1||Io[s]&&e.mods.indexOf(+s)===-1)&&(i=!1);(e.mods.length===0&&!Io[16]&&!Io[18]&&!Io[17]&&!Io[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(Kr),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}function MK(n,e){const t=Qr["*"];let r=n.keyCode||n.which||n.charCode;if(!fa.filter.call(this,n))return;if((r===93||r===224)&&(r=91),Kr.indexOf(r)===-1&&r!==229&&Kr.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach(c=>{const d=rC[c];n[c]&&Kr.indexOf(d)===-1?Kr.push(d):!n[c]&&Kr.indexOf(d)>-1?Kr.splice(Kr.indexOf(d),1):c==="metaKey"&&n[c]&&(Kr=Kr.filter(h=>h in rC||h===r))}),r in Io){Io[r]=!0;for(const c in iu)iu[c]===r&&(fa[c]=!0);if(!t)return}for(const c in Io)Object.prototype.hasOwnProperty.call(Io,c)&&(Io[c]=n[rC[c]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(Kr.indexOf(17)===-1&&Kr.push(17),Kr.indexOf(18)===-1&&Kr.push(18),Io[17]=!0,Io[18]=!0);const i=LS();if(t)for(let c=0;c<t.length;c++)t[c].scope===i&&(n.type==="keydown"&&t[c].keydown||n.type==="keyup"&&t[c].keyup)&&RK(n,t[c],i,e);if(!(r in Qr))return;const s=Qr[r],l=s.length;for(let c=0;c<l;c++)if((n.type==="keydown"&&s[c].keydown||n.type==="keyup"&&s[c].keyup)&&s[c].key){const d=s[c],{splitKey:h}=d,g=d.key.split(h),y=[];for(let v=0;v<g.length;v++)y.push(jS(g[v]));y.sort().join("")===Kr.sort().join("")&&RK(n,d,i,e)}}function fa(n,e,t){Kr=[];const r=PK(n);let i=[],s="all",l=document,c=0,d=!1,h=!0,g="+",y=!1,v=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(s=e.scope),e.element&&(l=e.element),e.keyup&&(d=e.keyup),e.keydown!==void 0&&(h=e.keydown),e.capture!==void 0&&(y=e.capture),typeof e.splitKey=="string"&&(g=e.splitKey),e.single===!0&&(v=!0)),typeof e=="string"&&(s=e),v&&kK(n,s);c<r.length;c++)n=r[c].split(g),i=[],n.length>1&&(i=_K(iu,n)),n=n[n.length-1],n=n==="*"?"*":jS(n),n in Qr||(Qr[n]=[]),Qr[n].push({keyup:d,keydown:h,scope:s,mods:i,shortcut:r[c],method:t,key:r[c],splitKey:g,element:l});if(typeof l<"u"&&window){if(!ud.has(l)){const w=function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return MK(E,l)},C=function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;MK(E,l),OSe(E)};ud.set(l,{keydownListener:w,keyupListenr:C,capture:y}),NA(l,"keydown",w,y),NA(l,"keyup",C,y)}if(!OS){const w=()=>{Kr=[]};OS={listener:w,capture:y},NA(window,"focus",w,y)}}}function jSe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Qr).forEach(t=>{Qr[t].filter(i=>i.scope===e&&i.shortcut===n).forEach(i=>{i&&i.method&&i.method()})})}function FA(n){const e=Object.values(Qr).flat();if(e.findIndex(r=>{let{element:i}=r;return i===n})<0){const{keydownListener:r,keyupListenr:i,capture:s}=ud.get(n)||{};r&&i&&(AS(n,"keyup",i,s),AS(n,"keydown",r,s),ud.delete(n))}if((e.length<=0||ud.size<=0)&&(Object.keys(ud).forEach(i=>{const{keydownListener:s,keyupListenr:l,capture:c}=ud.get(i)||{};s&&l&&(AS(i,"keyup",l,c),AS(i,"keydown",s,c),ud.delete(i))}),ud.clear(),Object.keys(Qr).forEach(i=>delete Qr[i]),OS)){const{listener:i,capture:s}=OS;AS(window,"focus",i,s),OS=null}}const zA={getPressedKeyString:kSe,setScope:IK,getScope:LS,deleteScope:DSe,getPressedKeyCodes:ISe,getAllKeyCodes:RSe,isPressed:ASe,filter:MSe,trigger:jSe,unbind:kK,keyMap:DS,modifier:iu,modifierMap:rC};for(const n in zA)Object.prototype.hasOwnProperty.call(zA,n)&&(fa[n]=zA[n]);if(typeof window<"u"){const n=window.hotkeys;fa.noConflict=e=>(e&&window.hotkeys===fa&&(window.hotkeys=n),fa),window.hotkeys=fa}const AK=["copy","cut","paste","asset"];function LSe(){const n=xe(),e=Ha(),t=np(),r=AM(),i=Pe("is focused",()=>n.getInstanceState().isFocused,[n]);M.useEffect(()=>{if(!i)return;const s=new Array,l=(d,h)=>{fa(d,{element:document.body},h),s.push(()=>{fa.unbind(d,h)})},c=(d,h)=>{fa(d,{element:document.body,keyup:!0,keydown:!1},h),s.push(()=>{fa.unbind(d,h)})};for(const d of Object.values(t))d.kbd&&(e&&!d.readonlyOk||AK.includes(d.id)||l(DK(d.kbd),h=>{NS(n)||(mn(h),d.onSelect("kbd"))}));for(const d of Object.values(r))!d.kbd||!d.readonlyOk&&n.getIsReadonly()||AK.includes(d.id)||l(DK(d.kbd),h=>{NS(n)||(mn(h),d.onSelect("kbd"))});return l(",",d=>{if(NS(n)||n.inputs.keys.has("Comma"))return;mn(d),n.focus(),n.inputs.keys.add("Comma");const{x:h,y:g,z:y}=n.inputs.currentPagePoint,v=n.pageToScreen({x:h,y:g}),w={type:"pointer",name:"pointer_down",point:{x:v.x,y:v.y,z:y},shiftKey:d.shiftKey,altKey:d.altKey,ctrlKey:d.metaKey||d.ctrlKey,metaKey:d.metaKey,accelKey:Qo(d),pointerId:0,button:0,isPen:n.getInstanceState().isPenMode,target:"canvas"};n.dispatch(w)}),c(",",d=>{if(NS(n)||!n.inputs.keys.has("Comma"))return;n.inputs.keys.delete("Comma");const{x:h,y:g,z:y}=n.inputs.currentScreenPoint,v={type:"pointer",name:"pointer_up",point:{x:h,y:g,z:y},shiftKey:d.shiftKey,altKey:d.altKey,ctrlKey:d.metaKey||d.ctrlKey,metaKey:d.metaKey,accelKey:Qo(d),pointerId:0,button:0,isPen:n.getInstanceState().isPenMode,target:"canvas"};n.dispatch(v)}),()=>{s.forEach(d=>d())}},[t,r,e,n,i])}function DK(n){return NSe(n).map(e=>{let t="";const r=e.split("");return r.length===1?t=r[0]:r[0]==="!"?t=`shift+${r[1]}`:r[0]==="?"?r.length===3&&r[1]==="!"?t=`alt+shift+${r[2]}`:t=`alt+${r[1]}`:r[0]==="$"?r[1]==="!"?t=`cmd+shift+${r[2]},ctrl+shift+${r[2]}`:r[1]==="?"?t=`cmd++${r[2]},ctrl+alt+${r[2]}`:t=`cmd+${r[1]},ctrl+${r[1]}`:t=e,t}).join(",")}function NSe(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");const e=n.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function NS(n){return n.menus.hasAnyOpenMenus()||n.getEditingShapeId()!==null||n.getCrashingError()}const FSe=M.createContext(!1);function zSe({children:n}){const e=xe(),t=Mg(),r=ks(),i=An(),s=Math.min(8,5+r),[l,c]=M.useState(0),d=M.useRef(null),[h,g]=M.useState(null),y=M.useMemo(()=>{const w=h?`:not([data-value="${h}"])`:"";return`
			#${t}_main > *:nth-child(n + ${s+(h?1:2)})${w} {
				display: none;
			}
			#${t}_more > *:nth-child(-n + ${s}) {
				display: none;
			}
        `},[h,t,s]),v=n0(()=>{if(!d.current)return;const w=Array.from(d.current.children);c(w.length),w.findIndex(P=>P.getAttribute("data-value")===h)<=s&&g(null);const E=Array.from(d.current.children).findIndex(P=>P.getAttribute("aria-checked")==="true");E!==-1&&E>=s&&g(w[E].getAttribute("data-value"))});return M.useLayoutEffect(()=>{v()}),M.useLayoutEffect(()=>{if(!d.current)return;const w=new MutationObserver(v);return w.observe(d.current,{childList:!0,subtree:!0,attributeFilter:["data-value","aria-checked"]}),()=>{w.disconnect()}},[v]),M.useEffect(()=>{const w=[["1",0],["2",1],["3",2],["4",3],["5",4],["6",5],["7",6],["8",7],["9",8],["0",9]];for(const[C,E]of w)fa(C,P=>{var L;if(NS(e))return;mn(P);const k=Array.from(((L=d.current)==null?void 0:L.children)??[]).filter(O=>!(O instanceof HTMLElement)||O.tagName.toLowerCase()!=="button"?!1:!!(O.offsetWidth||O.offsetHeight))[E];k&&k.click()});return()=>{fa.unbind("1,2,3,4,5,6,7,8,9,0")}},[e]),m.jsxs(m.Fragment,{children:[m.jsx("style",{children:y}),m.jsxs("div",{className:It("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":r<ai.TABLET_SM}),role:"radiogroup",children:[m.jsx("div",{id:`${t}_main`,ref:d,className:"tlui-toolbar__tools__list",children:m.jsx(yl,{type:"toolbar",sourceId:"toolbar",children:n})}),l>s+1&&m.jsx(FSe.Provider,{value:!0,children:m.jsxs(rp,{id:"toolbar overflow",modal:!1,children:[m.jsx(ip,{children:m.jsx(Dt,{title:i("tool-panel.more"),type:"tool",className:"tlui-toolbar__overflow","data-testid":"tools.more-button",children:m.jsx(In,{icon:"chevron-up"})})}),m.jsx(op,{side:"top",align:"center",children:m.jsx("div",{className:"tlui-buttons__grid","data-testid":"tools.more-content",id:`${t}_more`,children:m.jsx(yl,{type:"toolbar-overflow",sourceId:"toolbar",children:n})})})]})})]})]})}function USe({activeToolId:n}){const e=xe(),t=ks(),r=An(),i=Pe("is tool locked",()=>e.getInstanceState().isToolLocked,[e]),s=Pe("current tool",()=>e.getCurrentTool(),[e]);return!n||!s.isLockable?null:m.jsx(Dt,{type:"normal",title:r("action.toggle-tool-lock"),"data-testid":"tool-lock",className:It("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":t<ai.TABLET_SM}),onClick:()=>e.updateInstanceState({isToolLocked:!i}),children:m.jsx(In,{icon:i?"lock":"unlock",small:!0})})}const $Se=M.memo(function({children:e}){const t=xe(),r=ks(),i=Ha(),s=Pe("current tool id",()=>t.getCurrentToolId(),[t]),l=M.useRef(null);bf(l);const{ActionsMenu:c,QuickActions:d}=Of(),h=t.options.actionShortcutsLocation==="menu"?!1:t.options.actionShortcutsLocation==="toolbar"?!0:r<ai.TABLET;return m.jsx("div",{ref:l,className:"tlui-toolbar",children:m.jsxs("div",{className:"tlui-toolbar__inner",children:[m.jsxs("div",{className:"tlui-toolbar__left",children:[!i&&m.jsxs("div",{className:"tlui-toolbar__extras",children:[h&&m.jsxs("div",{className:"tlui-toolbar__extras__controls tlui-buttons__horizontal",children:[d&&m.jsx(d,{}),c&&m.jsx(c,{})]}),m.jsx(USe,{activeToolId:s})]}),m.jsx(zSe,{children:e??m.jsx(Yve,{})})]}),r<ai.TABLET_SM&&!i&&m.jsx("div",{className:"tlui-toolbar__tools",children:m.jsx(qve,{})})]})})});function BSe(){const n=An();return m.jsxs("div",{className:It("tlui-offline-indicator"),children:[n("status.offline"),m.jsx(Qc,{"aria-label":"offline",icon:"status-offline",small:!0})]})}function HSe({maxWidth:n=420,ignoreRightWidth:e=0,stylePanelWidth:t=148,marginBetweenZones:r=12,squeezeAmount:i=52,children:s}){const l=M.useRef(null),c=ks(),d=M.useCallback(()=>{const h=l.current;if(!h)return;const g=h.parentElement.parentElement,y=g.querySelector(".tlui-layout__top__left"),v=g.querySelector(".tlui-layout__top__right"),w=g.offsetWidth,C=y.offsetWidth,E=v.offsetWidth,P=h.offsetWidth-e;let I=(w-P)/2;w%2!==0&&(I-=.5);const k=C+r,L=h.offsetLeft,O=Math.min(w-E-C-2*r,n),z=Math.max(I,k)-L;v.offsetWidth>t&&c<=6?h.style.setProperty("max-width",O-i+"px"):h.style.setProperty("max-width",O+"px"),h.style.setProperty("transform",`translate(${z}px, 0px)`)},[c,e,r,n,i,t]);return M.useLayoutEffect(()=>{const h=l.current;if(!h)return;const g=h.parentElement.parentElement,y=g.querySelector(".tlui-layout__top__left"),v=g.querySelector(".tlui-layout__top__right"),w=new ResizeObserver(d);return w.observe(y),w.observe(v),w.observe(g),w.observe(h),d(),()=>{w.disconnect()}},[d]),M.useLayoutEffect(()=>{d()}),m.jsx("div",{ref:l,className:"tlui-top-panel__container",children:s})}function VSe(){const n=rde()==="offline";return m.jsx(HSe,{children:n&&m.jsx(BSe,{})})}function KSe(){return m.jsxs(m.Fragment,{children:[m.jsx(Ne,{actionId:"zoom-in",noClose:!0}),m.jsx(Ne,{actionId:"zoom-out",noClose:!0}),m.jsx(DV,{}),m.jsx(OV,{}),m.jsx(jV,{})]})}const WSe=M.memo(function({children:e}){const t=Hi(),[r,i]=id("zoom menu"),s=e??m.jsx(KSe,{});return m.jsxs(eM,{dir:"ltr",open:r,onOpenChange:i,modal:!1,children:[m.jsx(tM,{asChild:!0,dir:"ltr",children:m.jsx(GSe,{})}),m.jsx(K0,{container:t,children:m.jsx(nM,{className:"tlui-menu",side:"top",align:"start",alignOffset:0,sideOffset:8,collisionPadding:4,children:m.jsx(yl,{type:"menu",sourceId:"zoom-menu",children:s})})})]})}),GSe=M.forwardRef(function(e,t){const r=xe(),i=ks(),s=Pe("zoom",()=>r.getZoomLevel(),[r]),l=An(),c=M.useCallback(()=>{r.resetZoom(r.getViewportScreenCenter(),{animation:{duration:r.options.animationMediumMs}})},[r]);return m.jsx(Dt,{ref:t,...e,type:"icon",title:`${l("navigation-zone.zoom")}`,"data-testid":"minimap.zoom-menu-button",className:i<ai.TABLET_SM?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:c,children:i<ai.MOBILE?null:m.jsxs("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(s*100),"%"]})})}),OK=M.createContext(null);function qSe({overrides:n={},children:e}){const t=Yh(n),r=Q0();return m.jsx(OK.Provider,{value:M.useMemo(()=>({ContextMenu:cye,ActionsMenu:Nme,HelpMenu:null,ZoomMenu:WSe,MainMenu:Hye,Minimap:Jye,StylePanel:Gve,PageMenu:rve,NavigationPanel:tve,Toolbar:$Se,KeyboardShortcutsDialog:Aye,QuickActions:ave,HelperButtons:Rye,DebugPanel:wye,DebugMenu:xye,MenuPanel:_ye,SharePanel:r?pve:null,CursorChatBubble:r?fye:null,TopPanel:r?VSe:null,...t}),[t,r]),children:e})}function Of(){const n=M.useContext(OK);if(!n)throw new Error("useTldrawUiComponents must be used within a TldrawUiComponentsProvider");return n}const YSe=bo(function({overrides:e,components:t,assetUrls:r,onUiEvent:i,forceMobile:s,mediaMimeTypes:l,children:c}){const d=pf();return m.jsx(Q9.Provider,{value:l,children:m.jsx(kue,{assetUrls:dme(r),children:m.jsx(Due,{overrides:Dfe(e),locale:(d==null?void 0:d.user.getLocale())??pl.locale,children:m.jsx(wse,{onEvent:i,children:m.jsx(Ide,{children:m.jsx(ode,{context:d==null?void 0:d.contextId,children:m.jsx(ide,{forceMobile:s,children:m.jsx(qSe,{overrides:t,children:d?m.jsx(XSe,{overrides:e,children:c}):c})})})})})})})})});function XSe({overrides:n,children:e}){const t=Ofe(n);return m.jsx(Lfe,{overrides:t.actions,children:m.jsx(Qfe,{overrides:t.tools,children:e})})}function ZSe(){const n=xe(),{addToast:e}=rd();M.useEffect(()=>{function t({name:r,count:i}){e({title:"Maximum Shapes Reached",description:`You've reached the maximum number of shapes allowed on ${r} (${i}). Please delete some shapes or move to a different page to continue.`,severity:"warning"})}return n.addListener("max-shapes",t),()=>{n.removeListener("max-shapes",t)}},[n,e])}const QSe=zt.memo(function({renderDebugMenuItems:e,children:t,hideUi:r,components:i,...s}){return m.jsx(YSe,{...s,components:i,children:m.jsx(JSe,{hideUi:r,renderDebugMenuItems:e,children:t})})}),JSe=zt.memo(function({children:e,hideUi:t,...r}){return m.jsxs(m.Fragment,{children:[e,t?null:m.jsx(exe,{...r})]})}),exe=zt.memo(function(){const e=xe(),t=An(),r=ks(),i=Ha(),s=Pe("focus",()=>e.getInstanceState().isFocusMode,[e]),l=Pe("debug",()=>e.getInstanceState().isDebugMode,[e]),{SharePanel:c,TopPanel:d,MenuPanel:h,StylePanel:g,Toolbar:y,HelpMenu:v,NavigationPanel:w,HelperButtons:C,DebugPanel:E,CursorChatBubble:P}=Of();LSe(),ofe(),ZSe();const{"toggle-focus-mode":I}=np();return m.jsxs("div",{className:It("tlui-layout",{"tlui-layout__mobile":r<ai.TABLET_SM}),"data-breakpoint":r,children:[s?m.jsx("div",{className:"tlui-layout__top",children:m.jsx(Dt,{type:"icon",className:"tlui-focus-button",title:t("focus-mode.toggle-focus-mode"),onClick:()=>I.onSelect("menu"),children:m.jsx(In,{icon:"dot"})})}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"tlui-layout__top",children:[m.jsxs("div",{className:"tlui-layout__top__left",children:[h&&m.jsx(h,{}),C&&m.jsx(C,{})]}),m.jsx("div",{className:"tlui-layout__top__center",children:d&&m.jsx(d,{})}),m.jsxs("div",{className:"tlui-layout__top__right",children:[c&&m.jsx(c,{}),g&&r>=ai.TABLET_SM&&!i&&m.jsx(g,{})]})]}),m.jsxs("div",{className:"tlui-layout__bottom",children:[m.jsxs("div",{className:"tlui-layout__bottom__main",children:[w&&m.jsx(w,{}),y&&m.jsx(y,{}),v&&m.jsx(v,{})]}),l&&E&&m.jsx(E,{})]})]}),m.jsx(Zfe,{}),m.jsx(Gfe,{}),m.jsx(cme,{}),P&&m.jsx(P,{})]})});async function txe(n,e){const{url:t,style:r="normal",weight:i="500",display:s,featureSettings:l,stretch:c,unicodeRange:d,variant:h,format:g}=e,y={style:r,weight:i,display:s,featureSettings:l,stretch:c,unicodeRange:d,variant:h},v=new FontFace(n,`url(${t})`,y);return await v.load(),document.fonts.add(v),v.$$_url=t,v.$$_fontface=`
@font-face {
	font-family: ${v.family};
	font-stretch: ${v.stretch};
	font-weight: ${v.weight};
	font-style: ${v.style};
	src: url("${t}") format("${g}")
}`,v}const oC=(n,e)=>{const[t,r]=M.useState(2);return M.useEffect(()=>{let i=!1;return r(2),txe(n,e).then(()=>{i||r(0)}).catch(s=>{i||(console.error(s),r(1))}),()=>{i=!0}},[n,e]),t};function nxe(n){return{draw:{url:n.fonts.draw,format:n.fonts.draw.split(".").pop()},serif:{url:n.fonts.serif,format:n.fonts.serif.split(".").pop()},sansSerif:{url:n.fonts.sansSerif,format:n.fonts.sansSerif.split(".").pop()},monospace:{url:n.fonts.monospace,format:n.fonts.monospace.split(".").pop()}}}function jK(n){const e=M.useMemo(()=>nxe(n),[n]),t=[oC("tldraw_draw",e.draw),oC("tldraw_serif",e.serif),oC("tldraw_sans",e.sansSerif),oC("tldraw_mono",e.monospace)];return{error:t.some(r=>r===1),done:!t.some(r=>r===2)}}function rxe(n){const{children:e,maxImageDimension:t,maxAssetSize:r,acceptedImageMimeTypes:i,acceptedVideoMimeTypes:s,onMount:l,components:c={},shapeUtils:d=[],bindingUtils:h=[],tools:g=[],embeds:y,...v}=n,w=Yh(c),C=M.useMemo(()=>({Scribble:s7,ShapeIndicators:che,CollaboratorScribble:s7,SelectionForeground:she,SelectionBackground:ihe,Handles:Jfe,...w}),[w]),E=vf(d),P=M.useMemo(()=>[...mH,...E],[E]),I=vf(h),k=M.useMemo(()=>[...d7,...I],[I]),L=vf(g),O=M.useMemo(()=>[...lme,...qhe,...L],[L]),z=vf(i??Ww),F=vf(s??lP),H=M.useMemo(()=>[...z,...F],[z,F]),V=sV(v.assetUrls),{done:re,error:q}=jK(V);return q?m.jsx(I6,{children:"Could not load assets. Please refresh the page."}):re?(P.find(ie=>ie.type==="embed")&&y&&M1.setEmbedDefinitions(y),m.jsx(ose,{initialState:"select",...v,components:C,shapeUtils:P,bindingUtils:k,tools:O,children:m.jsxs(QSe,{...v,components:C,mediaMimeTypes:H,children:[m.jsx(ixe,{maxImageDimension:t,maxAssetSize:r,acceptedImageMimeTypes:z,acceptedVideoMimeTypes:F,onMount:l}),e]})})):m.jsx(sR,{children:m.jsx(Ck,{})})}function ixe({maxImageDimension:n=5e3,maxAssetSize:e=10*1024*1024,acceptedImageMimeTypes:t=Ww,acceptedVideoMimeTypes:r=lP,onMount:i}){const s=xe(),l=rd(),c=An();k6(()=>{const g=[];return g.push(Mge(s)),Phe(s,{maxImageDimension:n,maxAssetSize:e,acceptedImageMimeTypes:t,acceptedVideoMimeTypes:r},{toasts:l,msg:c}),g.push(s.store.props.onMount(s)),g.push(i==null?void 0:i(s)),()=>{g.forEach(y=>y==null?void 0:y())}});const{Canvas:d}=zr(),{ContextMenu:h}=Of();return h?m.jsx(h,{}):d?m.jsx(d,{}):null}M.memo(function(e){const[t,r]=M.useState(null),[i,s]=M.useState(null),l=vf(e.shapeUtils??[]),c=M.useMemo(()=>[...mH,...l],[l]),d=vf(e.bindingUtils??[]),h=M.useMemo(()=>[...d7,...d],[d]),g=fse({snapshot:e.snapshot,shapeUtils:c}),y=sV(e.assetUrls),{done:v,error:w}=jK(y),{pageId:C,bounds:E,scale:P,pixelRatio:I,background:k,padding:L,darkMode:O,preserveAspectRatio:z,format:F="svg",licenseKey:H}=e;return M.useLayoutEffect(()=>{if(!i||!g||!v)return;let V=!1;const re=document.createElement("div");i.appendChild(re),i.classList.add("tl-container","tl-theme__light");const q=new it({store:g,shapeUtils:c,bindingUtils:h,tools:[],getContainer:()=>re,licenseKey:H});C&&q.setCurrentPage(C);const J=q.getCurrentPageShapeIds();async function ie(){const W=await q.getSvgString([...J],{bounds:E,scale:P,background:k,padding:L,darkMode:O,preserveAspectRatio:z});if(W&&!V){if(F==="svg"){if(!V){const Y=new Blob([W.svg],{type:"image/svg+xml"}),oe=URL.createObjectURL(Y);r(oe)}}else if(F==="png"){const Y=await q9(q,W.svg,{type:F,width:W.width,height:W.height,pixelRatio:I});if(Y&&!V){const oe=URL.createObjectURL(Y);r(oe)}}}q.dispose()}return ie(),()=>{V=!0}},[F,i,g,c,h,C,E,P,k,L,O,z,v,w,H,I]),w?m.jsx(I6,{children:"Could not load assets."}):v?m.jsx("div",{ref:s,style:{position:"relative",width:"100%",height:"100%"},children:t&&m.jsx("img",{src:t,referrerPolicy:"strict-origin-when-cross-origin",style:{width:"100%",height:"100%"}})}):m.jsx(sR,{children:m.jsx(Ck,{})})}),M.memo(function({children:e}){const t=An(),r=ks(),i=M.useRef(null);bf(i);const s=e??m.jsx(Dye,{});return r<ai.MOBILE?null:m.jsx("div",{ref:i,className:"tlui-help-menu",children:m.jsxs(rp,{id:"help menu",children:[m.jsx(ip,{children:m.jsx(Dt,{type:"help",title:t("help-menu.title"),"data-testid":"help-menu.button",children:m.jsx(In,{icon:"question-mark",small:!0})})}),m.jsx(op,{side:"top",align:"end",alignOffset:0,sideOffset:8,children:m.jsx(yl,{type:"menu",sourceId:"help-menu",children:s})})]})})});const oxe=Tn({schemaVersion:Yo(1),storeVersion:hb,recordVersions:pb(sn,Tn({version:hb,subTypeVersions:pb(sn,hb).optional(),subTypeKey:sn.optional()}))}),sxe=Tn({schemaVersion:Yo(2),sequences:pb(sn,hb)});Tn({tldrawFileFormatVersion:MZ,schema:AZ("schemaVersion",{1:oxe,2:sxe}),records:So(Tn({id:sn,typeName:sn}).allowUnknownProperties())}),Oc("tldraw","3.7.0","esm");const gm="multiplayer.client";function axe(n){const[e,t]=nR(null),{uri:r,roomId:i="default",assets:s,onMount:l,trackAnalyticsEvent:c,userInfo:d,getUserPresence:h,...g}=n,y=hse(g),v=Yh(d),w=Tre(h??cQ),C=Iv("userAtom",v);return M.useEffect(()=>{C.set(v)},[v,C]),M.useEffect(()=>{const E=nr(),P=Le("userPreferences",()=>{const V=C.get(),re=(YX(V)?V.get():V)??Ik();return{id:re.id,color:re.color??pl.color,name:re.name??pl.name}}),I=new vZ(async()=>{const V=typeof r=="string"?r:await r(),re=new URL(V);if(re.searchParams.has("sessionId"))throw new Error('useSync. "sessionId" is a reserved query param name. Please use a different name');if(re.searchParams.has("storeId"))throw new Error('useSync. "storeId" is a reserved query param name. Please use a different name');return re.searchParams.set("sessionId",Vv),re.searchParams.set("storeId",E),re.toString()});let k=!1;const L=Le("collaboration status",()=>I.connectionStatus==="error"?"offline":I.connectionStatus),O=si("sync mode","readwrite"),z=Jv({id:E,schema:y,assets:s,onMount:l,collaboration:{status:L,mode:O}}),F=Le("instancePresence",()=>{const V=w(z,P.get());return V?FP.create({...V,id:FP.createId(z.id)}):null}),H=new yZ({store:z,socket:I,didCancel:()=>k,onLoad(V){c==null||c(gm,{name:"load",roomId:i}),t({readyClient:V})},onSyncError(V){switch(console.error("sync error",V),V){case vv.NOT_FOUND:c==null||c(gm,{name:"room-not-found",roomId:i});break;case vv.FORBIDDEN:c==null||c(gm,{name:"forbidden",roomId:i});break;case vv.NOT_AUTHENTICATED:c==null||c(gm,{name:"not-authenticated",roomId:i});break;case vv.RATE_LIMITED:c==null||c(gm,{name:"rate-limited",roomId:i});break;default:c==null||c(gm,{name:"sync-error:"+V,roomId:i});break}t({error:new _Z(V)}),I.close()},onAfterConnect(V,{isReadonly:re}){cl(()=>{O.set(re?"readonly":"readwrite"),z.ensureStoreIsUsable()})},presence:F});return()=>{k=!0,H.close(),I.close(),t(null)}},[s,l,C,i,y,t,c,r,w]),Pe("remote synced store",()=>{if(!e)return{status:"loading"};if(e.error)return{status:"error",error:e.error};if(!e.readyClient)return{status:"loading"};const E=e.readyClient.socket.connectionStatus;return{status:"synced-remote",connectionStatus:E==="error"?"offline":E,store:e.readyClient.store}},[e])}var lxe={};function LK(n){try{return n()}catch{return}}LK(()=>"https://demo.tldraw.xyz"),LK(()=>lxe.TLDRAW_IMAGE_URL),Oc("@tldraw/sync","3.7.0","esm");const NK=({debug:n,roomId:e,serverUri:t,queryParams:r,multiplayerAssetsFunc:i,getUser:s,onMount:l,...c})=>{const d=s==null?void 0:s(),h=`${t??"http://localhost:5858"}/connect/${e??"10"}`,g=M.useMemo(()=>i==null?void 0:i(),[i]),y=axe({uri:h,assets:g});return n&&(console.log("Debugging is on"),console.log("multiplayerAssets",g),console.log("multiplayerAssetsFunc",i)),g?zt.createElement(zt.Fragment,null,n&&zt.createElement("div",null,zt.createElement("div",null,"Debug mode on."),zt.createElement("div",null,"connected to ",h),zt.createElement("div",null,"Room ",e)),zt.createElement("div",{style:{width:"100%",height:"100%"}},zt.createElement(rxe,{store:y,user:d,...c}))):zt.createElement(zt.Fragment,null,n&&zt.createElement("div",null,zt.createElement("div",null,"Debug mode on."),zt.createElement("div",null,"connected to ",h),zt.createElement("div",null,"Room ",e)),"We require multiplayer assets")},cxe=zY(NK,{props:{debug:"boolean",roomId:"string",serverUri:"string",queryParams:"json",multiplayerAssetsFunc:"function",autoFocus:"boolean",forceMobile:"boolean",hideUi:"boolean",inferDarkMode:"boolean",onMount:"function",defaultName:"string",initialState:"string",licenseKey:"string",maxAssetSize:"number",maxImageDimension:"number",sessionId:"string",getUser:"function"}});customElements.define("tldraw-sync-web-component",cxe),ll.TldrawSync=NK,Object.defineProperty(ll,Symbol.toStringTag,{value:"Module"})});
